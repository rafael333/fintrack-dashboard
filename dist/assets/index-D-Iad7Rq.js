import{r as e,a as t,g as s}from"./vendor-DtuzQOD1.js";import{r as a,R as r,a as n,P as i,b as l,C as o,L as c,c as d,i as m,d as x,e as u,f as g,g as h,h as p,j as f,m as b,l as y,k as v,n as j,o as N}from"./charts-C3rZDlOP.js";import{_ as w,C as k,r as C,S as _,a as D,F as S,g as I,b as T,c as R,d as A,i as E,p as P,u as M,e as L,E as F,o as $,L as B,f as O,h as z,v as U,j as G,k as q,l as V,m as W,n as Y,q as H,s as K,t as X,T as Z,w as Q,x as J,y as ee,z as te,A as se,B as ae,D as re,G as ne,H as ie,I as le,J as oe,K as ce,M as de,N as me,O as xe}from"./firebase-D9z0KgB_.js";import{$ as ue,d as ge}from"./emoji-jBXJAohu.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var he,pe,fe={exports:{}},be={};var ye,ve=(pe||(pe=1,fe.exports=function(){if(he)return be;he=1;var t=e(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,a){var l,o={},c=null,d=null;for(l in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,l)&&!i.hasOwnProperty(l)&&(o[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===o[l]&&(o[l]=t[l]);return{$$typeof:s,type:e,key:c,ref:d,props:o,_owner:n.current}}return be.Fragment=a,be.jsx=l,be.jsxs=l,be}()),fe.exports),je={};const Ne=s(function(){if(ye)return je;ye=1;var e=t();return je.createRoot=e.createRoot,je.hydrateRoot=e.hydrateRoot,je}()),we=({activeTab:e,onTabChange:t})=>{const s=e=>{t(e)};return ve.jsxs(ve.Fragment,{children:[ve.jsx("div",{className:"hidden lg:block w-64 bg-white border-r border-gray-200 min-h-screen",children:ve.jsxs("div",{className:"p-6",children:[ve.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[ve.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-white font-bold text-xl",children:"F"})}),ve.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"FinTrack"})]}),ve.jsxs("nav",{className:"space-y-2",children:[ve.jsxs("button",{onClick:()=>s("dashboard"),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+("dashboard"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[ve.jsx("span",{children:"ðŸ“Š"}),ve.jsx("span",{className:"font-medium",children:"Dashboard"})]}),ve.jsxs("button",{onClick:()=>s("transactions"),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+("transactions"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[ve.jsx("span",{children:"ðŸ”„"}),ve.jsx("span",{className:"font-medium",children:"TransaÃ§Ãµes"})]}),ve.jsxs("button",{onClick:()=>{console.log("ðŸ”„ [Sidebar] Clicando na aba RelatÃ³rios"),s("budgets")},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+("budgets"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[ve.jsx("span",{children:"ðŸ“Š"}),ve.jsx("span",{className:"font-medium",children:"RelatÃ³rios"})]}),ve.jsxs("button",{onClick:()=>s("settings"),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+("settings"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[ve.jsx("span",{children:"âš™ï¸"}),ve.jsx("span",{className:"font-medium",children:"ConfiguraÃ§Ãµes"})]}),ve.jsxs("button",{onClick:()=>s("admin"),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+("admin"===e?"bg-red-50 text-red-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[ve.jsx("span",{children:"ðŸ”§"}),ve.jsx("span",{className:"font-medium",children:"Admin"})]})]})]})}),ve.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-lg mobile-bottom-nav",children:ve.jsx("div",{className:"px-2 py-2",children:ve.jsxs("nav",{className:"flex justify-around items-center",children:[ve.jsxs("button",{onClick:()=>s("dashboard"),className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors "+("dashboard"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"),children:[ve.jsx("span",{className:"text-lg",children:"ðŸ“Š"}),ve.jsx("span",{className:"text-xs font-medium",children:"Dashboard"})]}),ve.jsxs("button",{onClick:()=>s("transactions"),className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors "+("transactions"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"),children:[ve.jsx("span",{className:"text-lg",children:"ðŸ”„"}),ve.jsx("span",{className:"text-xs font-medium",children:"TransaÃ§Ãµes"})]}),ve.jsxs("button",{onClick:()=>{console.log("ðŸ”„ [Sidebar] Clicando na aba RelatÃ³rios"),s("budgets")},className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors "+("budgets"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"),children:[ve.jsx("span",{className:"text-lg",children:"ðŸ“Š"}),ve.jsx("span",{className:"text-xs font-medium",children:"RelatÃ³rios"})]}),ve.jsxs("button",{onClick:()=>s("settings"),className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors "+("settings"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"),children:[ve.jsx("span",{className:"text-lg",children:"âš™ï¸"}),ve.jsx("span",{className:"text-xs font-medium",children:"ConfiguraÃ§Ãµes"})]}),ve.jsxs("button",{onClick:()=>s("admin"),className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors "+("admin"===e?"bg-red-50 text-red-700":"text-gray-600 hover:bg-gray-50"),children:[ve.jsx("span",{className:"text-lg",children:"ðŸ”§"}),ve.jsx("span",{className:"text-xs font-medium",children:"Admin"})]})]})})})]})},ke="firebasestorage.googleapis.com";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ce extends S{constructor(e,t,s=0){super(Te(e),`Firebase Storage: ${t} (${Te(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ce.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Te(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var _e,De,Se,Ie;function Te(e){return"storage/"+e}function Re(e){return new Ce(_e.INVALID_ARGUMENT,e)}function Ae(){return new Ce(_e.APP_DELETED,"The Firebase app was deleted.")}(De=_e||(_e={})).UNKNOWN="unknown",De.OBJECT_NOT_FOUND="object-not-found",De.BUCKET_NOT_FOUND="bucket-not-found",De.PROJECT_NOT_FOUND="project-not-found",De.QUOTA_EXCEEDED="quota-exceeded",De.UNAUTHENTICATED="unauthenticated",De.UNAUTHORIZED="unauthorized",De.UNAUTHORIZED_APP="unauthorized-app",De.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",De.INVALID_CHECKSUM="invalid-checksum",De.CANCELED="canceled",De.INVALID_EVENT_NAME="invalid-event-name",De.INVALID_URL="invalid-url",De.INVALID_DEFAULT_BUCKET="invalid-default-bucket",De.NO_DEFAULT_BUCKET="no-default-bucket",De.CANNOT_SLICE_BLOB="cannot-slice-blob",De.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",De.NO_DOWNLOAD_URL="no-download-url",De.INVALID_ARGUMENT="invalid-argument",De.INVALID_ARGUMENT_COUNT="invalid-argument-count",De.APP_DELETED="app-deleted",De.INVALID_ROOT_OPERATION="invalid-root-operation",De.INVALID_FORMAT="invalid-format",De.INTERNAL_ERROR="internal-error",De.UNSUPPORTED_ENVIRONMENT="unsupported-environment";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ee{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Ee.makeFromUrl(e,t)}catch(r){return new Ee(e,"")}if(""===s.path)return s;throw a=e,new Ce(_e.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+a+"'.");var a}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+a+"(/(.*))?$","i");function n(e){e.path_=decodeURIComponent(e.path)}const i=t.replace(/[.]/g,"\\."),l=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${i}/v[A-Za-z0-9_]+/b/${a}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:n},{regex:new RegExp(`^https?://${t===ke?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${a}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:n}];for(let o=0;o<l.length;o++){const t=l[o],a=t.regex.exec(e);if(a){const e=a[t.indices.bucket];let r=a[t.indices.path];r||(r=""),s=new Ee(e,r),t.postModify(s);break}}if(null==s)throw function(e){return new Ce(_e.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return s}}class Pe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(e,t,s,a){if(a<t)throw Re(`Invalid value for '${e}'. Expected ${t} or greater.`);if(a>s)throw Re(`Invalid value for '${e}'. Expected ${s} or less.`)}(Ie=Se||(Se={}))[Ie.NO_ERROR=0]="NO_ERROR",Ie[Ie.NETWORK_ERROR=1]="NETWORK_ERROR",Ie[Ie.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Le{constructor(e,t,s,a,r,n,i,l,o,c,d,m=!0,x=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=r,this.additionalRetryCodes_=n,this.callback_=i,this.errorCallback_=l,this.timeout_=o,this.progressCallback_=c,this.connectionFactory_=d,this.retry=m,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Fe(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const a=e=>{const t=e.loaded,s=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,s)};null!==this.progressCallback_&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const t=s.getErrorCode()===Se.NO_ERROR,r=s.getStatus();if(!t||
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){const s=e>=500&&e<600,a=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return s||a||r}(r,this.additionalRetryCodes_)&&this.retry){const t=s.getErrorCode()===Se.ABORT;return void e(!1,new Fe(!1,null,t))}const n=-1!==this.successCodes_.indexOf(r);e(!0,new Fe(n,s))})},t=(e,t)=>{const s=this.resolve_,a=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());void 0!==e?s(e):s()}catch(n){a(n)}else if(null!==r){const e=new Ce(_e.UNKNOWN,"An unknown error occurred, please check the error payload for server response.");e.serverResponse=r.getErrorText(),this.errorCallback_?a(this.errorCallback_(r,e)):a(e)}else if(t.canceled){a(this.appDelete_?Ae():new Ce(_e.CANCELED,"User canceled the upload/download."))}else{a(new Ce(_e.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new Fe(!1,null,!0)):this.backoffId_=function(e,t,s){let a=1,r=null,n=null,i=!1,l=0;function o(){return 2===l}let c=!1;function d(...e){c||(c=!0,t.apply(null,e))}function m(t){r=setTimeout(()=>{r=null,e(u,o())},t)}function x(){n&&clearTimeout(n)}function u(e,...t){if(c)return void x();if(e)return x(),void d.call(null,e,...t);if(o()||i)return x(),void d.call(null,e,...t);let s;a<64&&(a*=2),1===l?(l=2,s=0):s=1e3*(a+Math.random()),m(s)}let g=!1;function h(e){g||(g=!0,x(),c||(null!==r?(e||(l=2),clearTimeout(r),m(0)):e||(l=1)))}return m(0),n=setTimeout(()=>{i=!0,h(!0)},s),h}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Fe{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function $e(e,t,s,a,r,n,i=!0,l=!1){const o=function(e){const t=encodeURIComponent;let s="?";for(const a in e)e.hasOwnProperty(a)&&(s=s+(t(a)+"=")+t(e[a])+"&");return s=s.slice(0,-1),s}(e.urlParams),c=e.url+o,d=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(d,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(d,s),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(d,n),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(d,a),new Le(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,i,l)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Be{constructor(e,t){this._service=e,this._location=t instanceof Ee?t:Ee.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Be(e,t)}get root(){const e=new Ee(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Ee(this._location.bucket,e);return new Be(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Ce(_e.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Oe(e,t){const s=t?.storageBucket;return null==s?null:Ee.makeFromBucketSpec(s,e)}class ze{constructor(e,t,s,a,r,n=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=r,this._isUsingEmulator=n,this._bucket=null,this._host=ke,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?Ee.makeFromBucketSpec(a,this._host):Oe(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Ee.makeFromBucketSpec(this._url,e):this._bucket=Oe(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Me("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Me("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(D(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Be(this,e)}_makeRequest(e,t,s,a,r=!0){if(this._deleted)return new Pe(Ae());{const n=$e(e,this._appId,s,a,t,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(n),n.getPromise().then(()=>this._requests.delete(n),()=>this._requests.delete(n)),n}}async makeRequestWithTokens(e,t){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,a).getPromise()}}const Ue="@firebase/storage",Ge="0.14.0",qe="storage";function Ve(e,{instanceIdentifier:t}){const s=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new ze(s,a,r,t,_)}w(new k(qe,Ve,"PUBLIC").setMultipleInstances(!0)),C(Ue,Ge,""),C(Ue,Ge,"esm2020");const We="@firebase/installations",Ye="0.6.19",He=1e4,Ke=`w:${Ye}`,Xe="FIS_v2",Ze=36e5,Qe=new F("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(e){return e instanceof S&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function tt(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function st(e,t){const s=(await t.json()).error;return Qe.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function at({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function rt(e,{refreshToken:t}){const s=at(e);return s.append("Authorization",function(e){return`${Xe} ${e}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)),s}async function nt(e){const t=await e();return t.status>=500&&t.status<600?e():t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function it(e){return new Promise(t=>{setTimeout(t,e)})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const lt=/^[cdef][\w-]{21}$/;function ot(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(s=e,btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_"));var s;return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return lt.test(t)?t:""}catch{return""}}function ct(e){return`${e.appName}!${e.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt=new Map;function mt(e,t){const s=ct(e);xt(s,t),function(e,t){const s=function(){!ut&&"BroadcastChannel"in self&&(ut=new BroadcastChannel("[Firebase] FID Change"),ut.onmessage=e=>{xt(e.data.key,e.data.fid)});return ut}();s&&s.postMessage({key:e,fid:t});0===dt.size&&ut&&(ut.close(),ut=null)}(s,t)}function xt(e,t){const s=dt.get(e);if(s)for(const a of s)a(t)}let ut=null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const gt="firebase-installations-store";let ht=null;function pt(){return ht||(ht=$("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(gt)}})),ht}async function ft(e,t){const s=ct(e),a=(await pt()).transaction(gt,"readwrite"),r=a.objectStore(gt),n=await r.get(s);return await r.put(t,s),await a.done,n&&n.fid===t.fid||mt(e,t.fid),t}async function bt(e){const t=ct(e),s=(await pt()).transaction(gt,"readwrite");await s.objectStore(gt).delete(t),await s.done}async function yt(e,t){const s=ct(e),a=(await pt()).transaction(gt,"readwrite"),r=a.objectStore(gt),n=await r.get(s),i=t(n);return void 0===i?await r.delete(s):await r.put(i,s),await a.done,!i||n&&n.fid===i.fid||mt(e,i.fid),i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vt(e){let t;const s=await yt(e.appConfig,s=>{const a=function(e){const t=e||{fid:ot(),registrationStatus:0};return wt(t)}(s),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Qe.create("app-offline"))}}const s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},a=async function(e,t){try{const s=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:s}){const a=et(e),r=at(e),n=t.getImmediate({optional:!0});if(n){const e=await n.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const i={fid:s,authVersion:Xe,appId:e.appId,sdkVersion:Ke},l={method:"POST",headers:r,body:JSON.stringify(i)},o=await nt(()=>fetch(a,l));if(o.ok){const e=await o.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:tt(e.authToken)}}throw await st("Create Installation",o)}(e,t);return ft(e.appConfig,s)}catch(s){throw Je(s)&&409===s.customData.serverCode?await bt(e.appConfig):await ft(e.appConfig,{fid:t.fid,registrationStatus:0}),s}}(e,s);return{installationEntry:s,registrationPromise:a}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:jt(e)}:{installationEntry:t}}(e,a);return t=r.registrationPromise,r.installationEntry});return""===s.fid?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}async function jt(e){let t=await Nt(e.appConfig);for(;1===t.registrationStatus;)await it(100),t=await Nt(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:s}=await vt(e);return s||t}return t}function Nt(e){return yt(e,e=>{if(!e)throw Qe.create("installation-not-found");return wt(e)})}function wt(e){return 1===(t=e).registrationStatus&&t.registrationTime+He<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function kt({appConfig:e,heartbeatServiceProvider:t},s){const a=function(e,{fid:t}){return`${et(e)}/${t}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,s),r=rt(e,s),n=t.getImmediate({optional:!0});if(n){const e=await n.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const i={installation:{sdkVersion:Ke,appId:e.appId}},l={method:"POST",headers:r,body:JSON.stringify(i)},o=await nt(()=>fetch(a,l));if(o.ok){return tt(await o.json())}throw await st("Generate Auth Token",o)}async function Ct(e,t=!1){let s;const a=await yt(e.appConfig,a=>{if(!Dt(a))throw Qe.create("not-registered");const r=a.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Ze}(e)}(r))return a;if(1===r.requestStatus)return s=async function(e,t){let s=await _t(e.appConfig);for(;1===s.authToken.requestStatus;)await it(100),s=await _t(e.appConfig);const a=s.authToken;return 0===a.requestStatus?Ct(e,t):a}(e,t),a;{if(!navigator.onLine)throw Qe.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}(a);return s=async function(e,t){try{const s=await kt(e,t),a={...t,authToken:s};return await ft(e.appConfig,a),s}catch(s){if(!Je(s)||401!==s.customData.serverCode&&404!==s.customData.serverCode){const s={...t,authToken:{requestStatus:0}};await ft(e.appConfig,s)}else await bt(e.appConfig);throw s}}(e,t),t}});return s?await s:a.authToken}function _t(e){return yt(e,e=>{if(!Dt(e))throw Qe.create("not-registered");const t=e.authToken;return 1===(s=t).requestStatus&&s.requestTime+He<Date.now()?{...e,authToken:{requestStatus:0}}:e;var s;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */})}function Dt(e){return void 0!==e&&2===e.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function St(e,t=!1){const s=e;await async function(e){const{registrationPromise:t}=await vt(e);t&&await t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(s);return(await Ct(s,t)).token}function It(e){return Qe.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="installations",Rt=e=>{const t=e.getProvider("app").getImmediate(),s=R(t,Tt).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:s,registrationPromise:a}=await vt(t);return a?a.catch(console.error):Ct(t).catch(console.error),s.fid}(s),getToken:e=>St(s,e)}};w(new k(Tt,e=>{const t=e.getProvider("app").getImmediate(),s=function(e){if(!e||!e.options)throw It("App Configuration");if(!e.name)throw It("App Name");const t=["projectId","apiKey","appId"];for(const s of t)if(!e.options[s])throw It(s);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:s,heartbeatServiceProvider:R(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),w(new k("installations-internal",Rt,"PRIVATE")),C(We,Ye),C(We,Ye,"esm2020");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const At="analytics",Et="https://www.googletagmanager.com/gtag/js",Pt=new B("@firebase/analytics"),Mt=new F("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Lt(e){if(!e.startsWith(Et)){const t=Mt.create("invalid-gtag-resource",{gtagURL:e});return Pt.warn(t.message),""}return e}function Ft(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function $t(e,t){const s=function(e,t){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(e,t)),s}("firebase-js-sdk-policy",{createScriptURL:Lt}),a=document.createElement("script"),r=`${Et}?l=${e}&id=${t}`;a.src=s?s?.createScriptURL(r):r,a.async=!0,document.head.appendChild(a)}function Bt(e,t,s,a){return async function(r,...n){try{if("event"===r){const[a,r]=n;await async function(e,t,s,a,r){try{let n=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const a=await Ft(s);for(const s of e){const e=a.find(e=>e.measurementId===s),r=e&&t[e.appId];if(!r){n=[];break}n.push(r)}}0===n.length&&(n=Object.values(t)),await Promise.all(n),e("event",a,r||{})}catch(n){Pt.error(n)}}(e,t,s,a,r)}else if("config"===r){const[r,i]=n;await async function(e,t,s,a,r,n){const i=a[r];try{if(i)await t[i];else{const e=(await Ft(s)).find(e=>e.measurementId===r);e&&await t[e.appId]}}catch(l){Pt.error(l)}e("config",r,n)}(e,t,s,a,r,i)}else if("consent"===r){const[t,s]=n;e("consent",t,s)}else if("get"===r){const[t,s,a]=n;e("get",t,s,a)}else if("set"===r){const[t]=n;e("set",t)}else e(r,...n)}catch(i){Pt.error(i)}}}const Ot=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function zt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Ut(e,t=Ot,s){const{appId:a,apiKey:r,measurementId:n}=e.options;if(!a)throw Mt.create("no-app-id");if(!r){if(n)return{measurementId:n,appId:a};throw Mt.create("no-api-key")}const i=t.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new qt;return setTimeout(async()=>{l.abort()},6e4),Gt({appId:a,apiKey:r,measurementId:n},i,l,t)}async function Gt(e,{throttleEndTimeMillis:t,backoffCount:s},a,r=Ot){const{appId:n,measurementId:i}=e;try{await function(e,t){return new Promise((s,a)=>{const r=Math.max(t-Date.now(),0),n=setTimeout(s,r);e.addEventListener(()=>{clearTimeout(n),a(Mt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(a,t)}catch(l){if(i)return Pt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${i} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:n,measurementId:i};throw l}try{const t=await async function(e){const{appId:t,apiKey:s}=e,a={method:"GET",headers:zt(s)},r="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),n=await fetch(r,a);if(200!==n.status&&304!==n.status){let e="";try{const t=await n.json();t.error?.message&&(e=t.error.message)}catch(i){}throw Mt.create("config-fetch-failed",{httpStatus:n.status,responseMessage:e})}return n.json()}(e);return r.deleteThrottleMetadata(n),t}catch(l){const t=l;if(!function(e){if(!(e instanceof S&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(r.deleteThrottleMetadata(n),i)return Pt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${i} provided in the "measurementId" field in the local Firebase config. [${t?.message}]`),{appId:n,measurementId:i};throw l}const o=503===Number(t?.customData?.httpStatus)?G(s,r.intervalMillis,30):G(s,r.intervalMillis),c={throttleEndTimeMillis:Date.now()+o,backoffCount:s+1};return r.setThrottleMetadata(n,c),Pt.debug(`Calling attemptFetch again in ${o} millis`),Gt(e,c,a,r)}}class qt{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Vt(e,t,s,a,r,n,i){const l=Ut(e);l.then(t=>{s[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Pt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>Pt.error(e)),t.push(l);const o=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(){if(!z())return Pt.warn(Mt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await U()}catch(e){return Pt.warn(Mt.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}return!0}().then(e=>e?a.getId():void 0),[c,d]=await Promise.all([l,o]);(function(e){const t=window.document.getElementsByTagName("script");for(const s of Object.values(t))if(s.src&&s.src.includes(Et)&&s.src.includes(e))return s;return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(n)||$t(n,c.measurementId),r("js",new Date);const m=i?.config??{};return m.origin="firebase",m.update=!0,null!=d&&(m.firebase_id=d),r("config",c.measurementId,m),c.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.app=e}_delete(){return delete Yt[this.app.options.appId],Promise.resolve()}}let Yt={},Ht=[];const Kt={};let Xt,Zt,Qt="dataLayer",Jt=!1;function es(e,t,s){!function(){const e=[];if(O()&&e.push("This is a browser extension environment."),V()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),s=Mt.create("invalid-analytics-context",{errorInfo:t});Pt.warn(s.message)}}();const a=e.options.appId;if(!a)throw Mt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Mt.create("no-api-key");Pt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Yt[a])throw Mt.create("already-exists",{id:a});if(!Jt){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Qt);const{wrappedGtag:e,gtagCore:t}=function(e,t,s,a,r){let n=function(...e){window[a].push(arguments)};return window[r]&&"function"==typeof window[r]&&(n=window[r]),window[r]=Bt(n,e,t,s),{gtagCore:n,wrappedGtag:window[r]}}(Yt,Ht,Kt,Qt,"gtag");Zt=e,Xt=t,Jt=!0}Yt[a]=Vt(e,Ht,Kt,t,Xt,Qt,s);return new Wt(e)}const ts="@firebase/analytics",ss="0.10.18";w(new k(At,(e,{options:t})=>es(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),w(new k("analytics-internal",function(e){try{const t=e.getProvider(At).getImmediate();return{logEvent:(e,s,a)=>function(e,t,s,a){e=T(e),async function(e,t,s,a,r){if(r&&r.global)e("event",s,a);else{const r=await t;e("event",s,{...a,send_to:r})}}(Zt,Yt[e.app.options.appId],t,s,a).catch(e=>Pt.error(e))}(t,e,s,a)}}catch(t){throw Mt.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),C(ts,ss),C(ts,ss,"esm2020");const as=W({apiKey:"AIzaSyAKOQ_7Q6pR6UvinMwtzrNdLgpBxZ-QTxk",authDomain:"apprafael-c7411.firebaseapp.com",projectId:"apprafael-c7411",storageBucket:"apprafael-c7411.firebasestorage.app",messagingSenderId:"389810659865",appId:"1:389810659865:web:3392a3c2fe3aef4710c088",measurementId:"G-0P0HZ6ST2P"}),rs=Y(as),ns=H(as);!function(e=I(),t){e=T(e);const s=R(e,qe).getImmediate({identifier:t}),a=A("storage");a&&function(e,t,s,a={}){!function(e,t,s,a={}){e.host=`${t}:${s}`;const r=E(t);r&&(P(`https://${e.host}/b`),M("Storage",!0)),e._isUsingEmulator=!0,e._protocol=r?"https":"http";const{mockUserToken:n}=a;n&&(e._overrideAuthToken="string"==typeof n?n:L(n,e.app.options.projectId))}(e,t,s,a)}(s,...a)}(as),function(e=I()){e=T(e);const t=R(e,At);t.isInitialized()?t.getImmediate():function(e,t={}){const s=R(e,At);if(s.isInitialized()){const e=s.getImmediate();if(q(t,s.getOptions()))return e;throw Mt.create("already-initialized")}const a=s.initialize({options:t})}(e)}(as);const is="transactions",ls={async create(e){const t=new Date,s={...Object.fromEntries(Object.entries(e).filter(([e,t])=>void 0!==t)),date:Z.fromDate(e.date),createdAt:Z.fromDate(t),updatedAt:Z.fromDate(t)};return(await ie(se(rs,is),s)).id},async getByUser(e){const t=Q(se(rs,is),te("userId","==",e));return(await ae(t)).docs.map(e=>{const t=e.data();return{id:e.id,userId:t.userId,description:t.description,amount:t.amount,type:t.type,category:t.category,date:t.date.toDate(),paymentMethod:t.paymentMethod,installments:t.installments,installmentNumber:t.installmentNumber,totalInstallmentAmount:t.totalInstallmentAmount,installmentGroupId:t.installmentGroupId,isPaid:t.isPaid,notes:t.notes,recurring:t.recurring,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate()}}).sort((e,t)=>t.date.getTime()-e.date.getTime())},async getByDateRange(e,t,s){const a=Q(se(rs,is),te("userId","==",e),te("date",">=",Z.fromDate(t)),te("date","<=",Z.fromDate(s)),ee("date","desc"));return(await ae(a)).docs.map(e=>({id:e.id,...e.data(),date:e.data().date.toDate(),createdAt:e.data().createdAt.toDate(),updatedAt:e.data().updatedAt.toDate()}))},async getByCategory(e,t){const s=Q(se(rs,is),te("userId","==",e),te("category","==",t),ee("date","desc"));return(await ae(s)).docs.map(e=>({id:e.id,...e.data(),date:e.data().date.toDate(),createdAt:e.data().createdAt.toDate(),updatedAt:e.data().updatedAt.toDate()}))},async update(e,t){const s=K(rs,is,e),a=Object.fromEntries(Object.entries(t).filter(([e,t])=>void 0!==t));console.log("ðŸ”„ Firebase Service: Atualizando transaÃ§Ã£o:",{id:e,updates:JSON.stringify(t),cleanUpdates:JSON.stringify(a)}),await X(s,{...a,updatedAt:Z.fromDate(new Date)}),console.log("âœ… Firebase Service: TransaÃ§Ã£o atualizada no Firebase")},async delete(e){const t=K(rs,is,e);await ne(t)},async getById(e){const t=K(rs,is,e),s=await re(t);return s.exists()?{id:s.id,...s.data(),date:s.data().date.toDate(),createdAt:s.data().createdAt.toDate(),updatedAt:s.data().updatedAt.toDate()}:null},async getRecent(e,t=10){const s=Q(se(rs,is),te("userId","==",e),ee("createdAt","desc"),J(t));return(await ae(s)).docs.map(e=>({id:e.id,...e.data(),date:e.data().date.toDate(),createdAt:e.data().createdAt.toDate(),updatedAt:e.data().updatedAt.toDate()}))},async markAsPaid(e){const t=K(rs,is,e);await X(t,{isPaid:!0,updatedAt:Z.fromDate(new Date)})},async markAsUnpaid(e){const t=K(rs,is,e);await X(t,{isPaid:!1,updatedAt:Z.fromDate(new Date)})}},os=a.createContext(void 0),cs=({children:e,userId:t})=>{const[s,n]=a.useState([]),[i,l]=a.useState(!1),[o,c]=a.useState(null),d=r.useCallback(async()=>{if(t)try{l(!0),c(null);const e=await ls.getByUser(t);n(e)}catch(e){const t=e instanceof Error?e.message:"Erro desconhecido ao carregar transaÃ§Ãµes";c(t),n([])}finally{l(!1)}},[t]);a.useEffect(()=>{t&&d()},[t]);const m={transactions:s,loading:i,error:o,createTransaction:async e=>{try{const t=await ls.create(e),s={...e,id:t,createdAt:new Date,updatedAt:new Date};return n(e=>[s,...e]),t}catch(t){throw c("Erro ao criar transaÃ§Ã£o"),t}},updateTransaction:async(e,t)=>{try{n(s=>s.map(s=>s.id===e?{...s,...t,updatedAt:new Date}:s)),await ls.update(e,t)}catch(s){throw c("Erro ao atualizar transaÃ§Ã£o"),s}},deleteTransaction:async e=>{try{n(t=>t.filter(t=>t.id!==e)),await ls.delete(e)}catch(t){try{await d()}catch(s){c("Erro ao deletar transaÃ§Ã£o e recarregar dados")}throw t}},loadTransactions:d};return ve.jsx(os.Provider,{value:m,children:e})},ds=()=>{const e=a.useContext(os);if(void 0===e)throw new Error("useTransactionsContext deve ser usado dentro de um TransactionsProvider");return e},ms=[{userId:"",name:"AlimentaÃ§Ã£o",color:"#FF6B6B",icon:"ðŸ•",type:"despesa"},{userId:"",name:"Transporte",color:"#4ECDC4",icon:"ðŸš—",type:"despesa"},{userId:"",name:"Moradia",color:"#45B7D1",icon:"ðŸ ",type:"despesa"},{userId:"",name:"SaÃºde",color:"#96CEB4",icon:"ðŸ’Š",type:"despesa"},{userId:"",name:"Lazer",color:"#FFEAA7",icon:"ðŸŽ®",type:"despesa"},{userId:"",name:"EducaÃ§Ã£o",color:"#DDA0DD",icon:"ðŸ“š",type:"despesa"},{userId:"",name:"Roupas",color:"#F8BBD9",icon:"ðŸ‘•",type:"despesa"},{userId:"",name:"Contas",color:"#FFB347",icon:"ðŸ’¡",type:"despesa"},{userId:"",name:"Outros",color:"#D3D3D3",icon:"ðŸ“¦",type:"despesa"},{userId:"",name:"SalÃ¡rio",color:"#2ECC71",icon:"ðŸ’°",type:"receita"},{userId:"",name:"Freelance",color:"#3498DB",icon:"ðŸ’¼",type:"receita"},{userId:"",name:"Investimentos",color:"#9B59B6",icon:"ðŸ“ˆ",type:"receita"},{userId:"",name:"Vendas",color:"#E67E22",icon:"ðŸ›’",type:"receita"},{userId:"",name:"Outros",color:"#95A5A6",icon:"ðŸ’µ",type:"receita"}],xs=async(e,t)=>{console.log("ðŸš€ [DefaultCategories] Inicializando categorias padrÃ£o para usuÃ¡rio:",e);try{if((await t.getByUser(e)).length>0)return void console.log("â„¹ï¸ [DefaultCategories] UsuÃ¡rio jÃ¡ possui categorias, pulando inicializaÃ§Ã£o");console.log("ðŸ“ [DefaultCategories] Criando categorias padrÃ£o...");const s=ms.map(s=>t.create({...s,userId:e}));await Promise.all(s),console.log("âœ… [DefaultCategories] Categorias padrÃ£o criadas com sucesso!")}catch(s){throw console.error("âŒ [DefaultCategories] Erro ao inicializar categorias padrÃ£o:",s),s}},us="categories",gs={async create(e){try{const t=new Date;return(await ie(se(rs,us),{...e,createdAt:Z.fromDate(t),updatedAt:Z.fromDate(t)})).id}catch(t){throw console.error("âŒ Firebase Service: Erro ao criar categoria:",t),t}},async getByUser(e){const t=Q(se(rs,us),te("userId","==",e));return(await ae(t)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate(),updatedAt:e.data().updatedAt.toDate()})).sort((e,t)=>e.name.localeCompare(t.name))},async getByType(e,t){const s=Q(se(rs,us),te("userId","==",e),te("type","==",t));return(await ae(s)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate(),updatedAt:e.data().updatedAt.toDate()})).sort((e,t)=>e.name.localeCompare(t.name))},async update(e,t){const s=K(rs,us,e);await X(s,{...t,updatedAt:Z.fromDate(new Date)})},async delete(e){const t=K(rs,us,e);await ne(t)},async getById(e){const t=K(rs,us,e),s=await re(t);return s.exists()?{id:s.id,...s.data(),createdAt:s.data().createdAt.toDate(),updatedAt:s.data().updatedAt.toDate()}:null}},hs=a.createContext(void 0),ps=()=>{const e=a.useContext(hs);if(void 0===e)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return e},fs=({children:e})=>{const[t,s]=a.useState(null),[r,n]=a.useState(!0);a.useEffect(()=>le(ns,e=>{s(e),n(!1)}),[]);const i={user:t,loading:r,login:async(e,t)=>{try{await xe(ns,e,t)}catch(s){throw console.error("Erro no login:",s),s}},register:async(e,t)=>{try{const a=await me(ns,e,t);try{await xs(a.user.uid,gs)}catch(s){}}catch(a){throw console.error("Erro no registro:",a),a}},loginWithGoogle:async()=>{try{const t=new ce,s=await de(ns,t);if(s.user.metadata.creationTime===s.user.metadata.lastSignInTime)try{await xs(s.user.uid,gs)}catch(e){}}catch(t){throw console.error("Erro no login com Google:",t),t}},logout:async()=>{try{await oe(ns)}catch(e){throw console.error("Erro no logout:",e),e}}};return ve.jsx(hs.Provider,{value:i,children:e})},bs=()=>{const{user:e}=ps(),{transactions:t,loading:s,error:r,createTransaction:n}=ds();if(s)return ve.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>ve.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border animate-pulse",children:[ve.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),ve.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),ve.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]},e))});if(r)return ve.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[ve.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar dados"}),ve.jsx("p",{className:"text-red-600",children:r}),ve.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Tentar novamente"})]});const i=a.useMemo(()=>0===t.length?{currentBalance:0,currentMonthRevenue:0,currentMonthExpense:0,previousMonthRevenue:0,previousMonthExpense:0,revenuePercentage:0,expensePercentage:0,balancePercentage:0}:(e=>{const t=new Date,s=t.getMonth(),a=t.getFullYear(),r=0===s?11:s-1,n=0===s?a-1:a,i=e.filter(e=>{const t=new Date(e.date);return t.getMonth()===s&&t.getFullYear()===a}),l=e.filter(e=>{const t=new Date(e.date);return t.getMonth()===r&&t.getFullYear()===n}),o=i.filter(e=>"receita"===e.type&&!e.isPaid).reduce((e,t)=>e+t.amount,0),c=i.filter(e=>"despesa"===e.type&&!e.isPaid).reduce((e,t)=>e+t.amount,0),d=l.filter(e=>"receita"===e.type).reduce((e,t)=>e+t.amount,0),m=l.filter(e=>"despesa"===e.type).reduce((e,t)=>e+t.amount,0),x=e.filter(e=>!e.isPaid),u=d-m;return{currentBalance:x.filter(e=>"receita"===e.type).reduce((e,t)=>e+t.amount,0)-x.filter(e=>"despesa"===e.type).reduce((e,t)=>e+t.amount,0),currentMonthRevenue:o,currentMonthExpense:c,previousMonthRevenue:d,previousMonthExpense:m,revenuePercentage:d>0?(o-d)/d*100:0,expensePercentage:m>0?(c-m)/m*100:0,balancePercentage:0!==u?(o-c-u)/Math.abs(u)*100:0}})(t),[t]),l=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),o=e=>`${e>=0?"+":""}${e.toFixed(1)}%`;return s?ve.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[1,2,3].map(e=>ve.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border animate-pulse",children:[ve.jsx("div",{className:"flex items-center justify-between mb-4",children:ve.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"})}),ve.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),ve.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),ve.jsx("div",{className:"h-4 bg-gray-200 rounded"})]},e))}):r?ve.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:ve.jsx("div",{className:"col-span-full bg-red-50 border border-red-200 rounded-lg p-6",children:ve.jsxs("div",{className:"flex items-center",children:[ve.jsx("span",{className:"text-red-600 text-xl mr-3",children:"âš ï¸"}),ve.jsxs("div",{children:[ve.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Erro ao carregar dados"}),ve.jsx("p",{className:"text-red-600 mt-1",children:r})]})]})})}):ve.jsxs("div",{className:"mb-1.5 lg:mb-6",children:[ve.jsxs("div",{className:"lg:hidden space-y-2",children:[ve.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border",children:[ve.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-1",children:"Saldo Atual"}),ve.jsx("p",{className:"text-lg font-bold text-gray-900",children:l(i.currentBalance)})]}),ve.jsxs("div",{className:"flex space-x-2",children:[ve.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border flex-1",children:[ve.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-1",children:"Receitas"}),ve.jsx("p",{className:"text-base font-bold text-gray-900",children:l(i.currentMonthRevenue)})]}),ve.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border flex-1",children:[ve.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-1",children:"Despesas"}),ve.jsx("p",{className:"text-base font-bold text-gray-900",children:l(i.currentMonthExpense)})]})]})]}),ve.jsxs("div",{className:"hidden lg:grid grid-cols-3 gap-6",children:[ve.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[ve.jsx("div",{className:"flex items-center justify-between mb-4",children:ve.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center",children:ve.jsx("span",{className:"text-blue-600 text-xl",children:"ðŸ’°"})})}),ve.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Saldo Atual"}),ve.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:l(i.currentBalance)}),ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("span",{className:"text-sm font-medium "+(i.balancePercentage>=0?"text-green-600":"text-red-600"),children:o(i.balancePercentage)}),ve.jsx("span",{className:"text-sm text-gray-500",children:"desde o mÃªs passado"})]})]}),ve.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[ve.jsx("div",{className:"flex items-center justify-between mb-4",children:ve.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-full flex items-center justify-center",children:ve.jsx("span",{className:"text-green-600 text-xl",children:"ðŸ“ˆ"})})}),ve.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Receitas"}),ve.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:l(i.currentMonthRevenue)}),ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("span",{className:"text-sm font-medium "+(i.revenuePercentage>=0?"text-green-600":"text-red-600"),children:o(i.revenuePercentage)}),ve.jsx("span",{className:"text-sm text-gray-500",children:"desde o mÃªs passado"})]})]}),ve.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[ve.jsx("div",{className:"flex items-center justify-between mb-4",children:ve.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center",children:ve.jsx("span",{className:"text-red-600 text-xl",children:"ðŸ“‰"})})}),ve.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Despesas"}),ve.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:l(i.currentMonthExpense)}),ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("span",{className:"text-sm font-medium "+(i.expensePercentage<=0?"text-green-600":"text-red-600"),children:o(i.expensePercentage)}),ve.jsx("span",{className:"text-sm text-gray-500",children:"desde o mÃªs passado"})]})]})]})]})},ys=e=>{const[t,s]=a.useState([]),[r,n]=a.useState(!0),[i,l]=a.useState(null),o=async()=>{try{n(!0),l(null);const t=await gs.getByUser(e);s(t)}catch(t){l("Erro ao carregar categorias"),console.error("âŒ Hook useCategories: Erro ao carregar categorias:",t)}finally{n(!1)}};return a.useEffect(()=>{e&&o()},[e]),{categories:t,loading:r,error:i,createCategory:async e=>{try{l(null);const t=await gs.create(e);return await o(),t}catch(t){throw l("Erro ao criar categoria"),console.error("âŒ Hook useCategories: Erro ao criar categoria:",t),t}},updateCategory:async(e,t)=>{try{l(null),await gs.update(e,t),await o()}catch(s){throw l("Erro ao atualizar categoria"),console.error("Erro ao atualizar categoria:",s),s}},deleteCategory:async e=>{try{l(null),await gs.delete(e),await o()}catch(t){throw l("Erro ao deletar categoria"),console.error("Erro ao deletar categoria:",t),t}},loadCategories:o,loadCategoriesByType:async t=>{try{n(!0),l(null);const a=await gs.getByType(e,t);s(a)}catch(a){l("Erro ao carregar categorias por tipo"),console.error("Erro ao carregar categorias por tipo:",a)}finally{n(!1)}}}},vs=()=>{const[e,t]=a.useState("receita-vs-despesa"),[s,r]=a.useState(null),[m,x]=a.useState(null),{user:u}=ps(),{transactions:g,loading:h,error:p}=ds(),{categories:f}=ys(u?.uid||"test-user-123"),b=a.useMemo(()=>{if(!g||0===g.length)return[];const t=g.filter(t=>!(t.installmentNumber&&!0===t.isPaid)&&("receita-vs-despesa"===e||t.type===e));if(0===t.length)return[];if("receita-vs-despesa"===e){const e=t.reduce((e,t)=>{const s="receita"===t.type?"Receitas":"Despesas";return e[s]||(e[s]=0),e[s]+=t.amount,e},{}),s=Object.values(e).reduce((e,t)=>e+t,0);return Object.entries(e).map(([e,t])=>({name:e,value:s>0?t/s*100:0,color:"Receitas"===e?"rgba(34, 197, 94, 0.6)":"rgba(239, 68, 68, 0.6)",amount:`R$ ${t.toFixed(2).replace(".",",")}`,totalAmount:t})).sort((e,t)=>t.totalAmount-e.totalAmount)}const s=t.reduce((e,t)=>{const s=t.category;return e[s]||(e[s]=0),e[s]+=t.amount,e},{}),a=Object.values(s).reduce((e,t)=>e+t,0);return Object.entries(s).map(([e,t])=>{const s=f.find(t=>t.name===e);return{name:e,value:a>0?t/a*100:0,color:s?.color||"#6b7280",amount:`R$ ${t.toFixed(2).replace(".",",")}`,totalAmount:t}}).sort((e,t)=>t.totalAmount-e.totalAmount)},[g,e,f]);return h?ve.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:ve.jsx("div",{className:"flex items-center justify-center h-64",children:ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),ve.jsx("span",{className:"text-gray-600",children:"Carregando dados..."})]})})}):p?ve.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:ve.jsx("div",{className:"flex items-center justify-center h-64",children:ve.jsxs("div",{className:"text-center text-red-600",children:[ve.jsx("p",{children:"Erro ao carregar dados"}),ve.jsx("p",{className:"text-sm mt-1",children:p})]})})}):ve.jsxs("div",{className:"bg-white p-4 lg:p-6 rounded-lg shadow border",children:[ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 lg:mb-6 space-y-3 sm:space-y-0",children:[ve.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"receita-vs-despesa"===e?"Receita vs Despesa":"despesa"===e?"Despesas":"Receitas"}),ve.jsx("div",{className:"flex items-center space-x-2",children:ve.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[ve.jsx("button",{onClick:()=>t("receita-vs-despesa"),className:"px-2 lg:px-3 py-1 lg:py-1.5 rounded-md text-xs lg:text-sm font-medium transition-all duration-200 "+("receita-vs-despesa"===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),style:{backgroundColor:"receita-vs-despesa"===e?"rgba(59, 130, 246, 0.6)":void 0,color:"receita-vs-despesa"===e?"white":void 0},children:"ðŸ“Š Receita vs Despesa"}),ve.jsx("button",{onClick:()=>t("receita"),className:"px-2 lg:px-3 py-1 lg:py-1.5 rounded-md text-xs lg:text-sm font-medium transition-all duration-200 "+("receita"===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),style:{backgroundColor:"receita"===e?"rgba(34, 197, 94, 0.6)":void 0,color:"receita"===e?"white":void 0},children:"ðŸ’° Receita"}),ve.jsx("button",{onClick:()=>t("despesa"),className:"px-2 lg:px-3 py-1 lg:py-1.5 rounded-md text-xs lg:text-sm font-medium transition-all duration-200 "+("despesa"===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),style:{backgroundColor:"despesa"===e?"rgba(239, 68, 68, 0.6)":void 0,color:"despesa"===e?"white":void 0},children:"ðŸ’¸ Despesa"})]})})]}),0===b.length?ve.jsx("div",{className:"flex items-center justify-center h-64",children:ve.jsxs("div",{className:"text-center text-gray-500",children:[ve.jsx("p",{children:"receita-vs-despesa"===e?"Nenhuma transaÃ§Ã£o encontrada":"despesa"===e?"Nenhuma despesa encontrada":"Nenhuma receita encontrada"}),ve.jsx("p",{className:"text-sm mt-1",children:"Adicione transaÃ§Ãµes para ver o grÃ¡fico"})]})}):ve.jsx("div",{className:"relative h-96",children:ve.jsx(n,{width:"100%",height:"100%",children:ve.jsxs(i,{children:[ve.jsxs(l,{data:b,cx:"50%",cy:"50%",innerRadius:80,outerRadius:140,paddingAngle:2,dataKey:"value",stroke:"#ffffff",strokeWidth:2,onMouseEnter:e=>r(e),onMouseLeave:()=>r(null),children:[b.map((e,t)=>{const s=m===e.name;return ve.jsx(o,{fill:e.color,style:{filter:s?"brightness(1.3) drop-shadow(0 0 12px rgba(0,0,0,0.4)) saturate(1.2)":"none",transition:"all 0.3s ease",transform:s?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${t}`)}),ve.jsx(c,{position:"center",content:()=>{if(s)return ve.jsxs("g",{children:[ve.jsx("text",{x:"50%",y:"35%",textAnchor:"middle",dominantBaseline:"central",fontSize:"14",fontWeight:"bold",fill:"#1f2937",children:s.name}),ve.jsx("text",{x:"50%",y:"45%",textAnchor:"middle",dominantBaseline:"central",fontSize:"16",fontWeight:"bold",fill:"#1f2937",children:s.amount}),ve.jsxs("text",{x:"50%",y:"55%",textAnchor:"middle",dominantBaseline:"central",fontSize:"12",fill:"#6b7280",children:[s.value.toFixed(1).replace(".",","),"%"]})]});{const t=b.reduce((e,t)=>e+t.totalAmount,0);return ve.jsxs("g",{children:[ve.jsx("text",{x:"50%",y:"35%",textAnchor:"middle",dominantBaseline:"central",fontSize:"14",fontWeight:"bold",fill:"#1f2937",children:"receita-vs-despesa"===e?"Total Geral":"despesa"===e?"Total Despesas":"Total Receitas"}),ve.jsxs("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"central",fontSize:"16",fontWeight:"bold",fill:"#1f2937",children:["R$ ",t.toFixed(2).replace(".",",")]})]})}}})]}),ve.jsx(d,{verticalAlign:"bottom",height:60,iconType:"circle",iconSize:12,wrapperStyle:{fontSize:"14px",lineHeight:"20px",paddingTop:"20px"},formatter:(e,t)=>ve.jsxs("span",{className:"text-gray-700 text-sm font-medium cursor-pointer hover:text-gray-900 transition-colors",onMouseEnter:()=>{r(t.payload),x(t.payload.name)},onMouseLeave:()=>{r(null),x(null)},children:[e," ",Math.round(t.payload.value),"%"]})})]})})})]})};var js={value:()=>{}};function Ns(){for(var e,t=0,s=arguments.length,a={};t<s;++t){if(!(e=arguments[t]+"")||e in a||/[\s.]/.test(e))throw new Error("illegal type: "+e);a[e]=[]}return new ws(a)}function ws(e){this._=e}function ks(e,t){for(var s,a=0,r=e.length;a<r;++a)if((s=e[a]).name===t)return s.value}function Cs(e,t,s){for(var a=0,r=e.length;a<r;++a)if(e[a].name===t){e[a]=js,e=e.slice(0,a).concat(e.slice(a+1));break}return null!=s&&e.push({name:t,value:s}),e}ws.prototype=Ns.prototype={constructor:ws,on:function(e,t){var s,a,r=this._,n=(a=r,(e+"").trim().split(/^|\s+/).map(function(e){var t="",s=e.indexOf(".");if(s>=0&&(t=e.slice(s+1),e=e.slice(0,s)),e&&!a.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),i=-1,l=n.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<l;)if(s=(e=n[i]).type)r[s]=Cs(r[s],e.name,t);else if(null==t)for(s in r)r[s]=Cs(r[s],e.name,null);return this}for(;++i<l;)if((s=(e=n[i]).type)&&(s=ks(r[s],e.name)))return s},copy:function(){var e={},t=this._;for(var s in t)e[s]=t[s].slice();return new ws(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var s,a,r=new Array(s),n=0;n<s;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=0,s=(a=this._[e]).length;n<s;++n)a[n].value.apply(t,r)},apply:function(e,t,s){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],r=0,n=a.length;r<n;++r)a[r].value.apply(t,s)}};var _s="http://www.w3.org/1999/xhtml";const Ds={svg:"http://www.w3.org/2000/svg",xhtml:_s,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ss(e){var t=e+="",s=t.indexOf(":");return s>=0&&"xmlns"!==(t=e.slice(0,s))&&(e=e.slice(s+1)),Ds.hasOwnProperty(t)?{space:Ds[t],local:e}:e}function Is(e){return function(){var t=this.ownerDocument,s=this.namespaceURI;return s===_s&&t.documentElement.namespaceURI===_s?t.createElement(e):t.createElementNS(s,e)}}function Ts(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Rs(e){var t=Ss(e);return(t.local?Ts:Is)(t)}function As(){}function Es(e){return null==e?As:function(){return this.querySelector(e)}}function Ps(){return[]}function Ms(e){return null==e?Ps:function(){return this.querySelectorAll(e)}}function Ls(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function Fs(e){return function(){return this.matches(e)}}function $s(e){return function(t){return t.matches(e)}}var Bs=Array.prototype.find;function Os(){return this.firstElementChild}var zs=Array.prototype.filter;function Us(){return Array.from(this.children)}function Gs(e){return new Array(e.length)}function qs(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Vs(e,t,s,a,r,n){for(var i,l=0,o=t.length,c=n.length;l<c;++l)(i=t[l])?(i.__data__=n[l],a[l]=i):s[l]=new qs(e,n[l]);for(;l<o;++l)(i=t[l])&&(r[l]=i)}function Ws(e,t,s,a,r,n,i){var l,o,c,d=new Map,m=t.length,x=n.length,u=new Array(m);for(l=0;l<m;++l)(o=t[l])&&(u[l]=c=i.call(o,o.__data__,l,t)+"",d.has(c)?r[l]=o:d.set(c,o));for(l=0;l<x;++l)c=i.call(e,n[l],l,n)+"",(o=d.get(c))?(a[l]=o,o.__data__=n[l],d.delete(c)):s[l]=new qs(e,n[l]);for(l=0;l<m;++l)(o=t[l])&&d.get(u[l])===o&&(r[l]=o)}function Ys(e){return e.__data__}function Hs(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Ks(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xs(e){return function(){this.removeAttribute(e)}}function Zs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qs(e,t){return function(){this.setAttribute(e,t)}}function Js(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ea(e,t){return function(){var s=t.apply(this,arguments);null==s?this.removeAttribute(e):this.setAttribute(e,s)}}function ta(e,t){return function(){var s=t.apply(this,arguments);null==s?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,s)}}function sa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function aa(e){return function(){this.style.removeProperty(e)}}function ra(e,t,s){return function(){this.style.setProperty(e,t,s)}}function na(e,t,s){return function(){var a=t.apply(this,arguments);null==a?this.style.removeProperty(e):this.style.setProperty(e,a,s)}}function ia(e,t){return e.style.getPropertyValue(t)||sa(e).getComputedStyle(e,null).getPropertyValue(t)}function la(e){return function(){delete this[e]}}function oa(e,t){return function(){this[e]=t}}function ca(e,t){return function(){var s=t.apply(this,arguments);null==s?delete this[e]:this[e]=s}}function da(e){return e.trim().split(/^|\s+/)}function ma(e){return e.classList||new xa(e)}function xa(e){this._node=e,this._names=da(e.getAttribute("class")||"")}function ua(e,t){for(var s=ma(e),a=-1,r=t.length;++a<r;)s.add(t[a])}function ga(e,t){for(var s=ma(e),a=-1,r=t.length;++a<r;)s.remove(t[a])}function ha(e){return function(){ua(this,e)}}function pa(e){return function(){ga(this,e)}}function fa(e,t){return function(){(t.apply(this,arguments)?ua:ga)(this,e)}}function ba(){this.textContent=""}function ya(e){return function(){this.textContent=e}}function va(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ja(){this.innerHTML=""}function Na(e){return function(){this.innerHTML=e}}function wa(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ka(){this.nextSibling&&this.parentNode.appendChild(this)}function Ca(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _a(){return null}function Da(){var e=this.parentNode;e&&e.removeChild(this)}function Sa(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ia(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ta(e){return function(){var t=this.__on;if(t){for(var s,a=0,r=-1,n=t.length;a<n;++a)s=t[a],e.type&&s.type!==e.type||s.name!==e.name?t[++r]=s:this.removeEventListener(s.type,s.listener,s.options);++r?t.length=r:delete this.__on}}}function Ra(e,t,s){return function(){var a,r=this.__on,n=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var i=0,l=r.length;i<l;++i)if((a=r[i]).type===e.type&&a.name===e.name)return this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=n,a.options=s),void(a.value=t);this.addEventListener(e.type,n,s),a={type:e.type,name:e.name,value:t,listener:n,options:s},r?r.push(a):this.__on=[a]}}function Aa(e,t,s){var a=sa(e),r=a.CustomEvent;"function"==typeof r?r=new r(t,s):(r=a.document.createEvent("Event"),s?(r.initEvent(t,s.bubbles,s.cancelable),r.detail=s.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Ea(e,t){return function(){return Aa(this,e,t)}}function Pa(e,t){return function(){return Aa(this,e,t.apply(this,arguments))}}qs.prototype={constructor:qs,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},xa.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Ma=[null];function La(e,t){this._groups=e,this._parents=t}function Fa(){return new La([[document.documentElement]],Ma)}La.prototype=Fa.prototype={constructor:La,select:function(e){"function"!=typeof e&&(e=Es(e));for(var t=this._groups,s=t.length,a=new Array(s),r=0;r<s;++r)for(var n,i,l=t[r],o=l.length,c=a[r]=new Array(o),d=0;d<o;++d)(n=l[d])&&(i=e.call(n,n.__data__,d,l))&&("__data__"in n&&(i.__data__=n.__data__),c[d]=i);return new La(a,this._parents)},selectAll:function(e){e="function"==typeof e?Ls(e):Ms(e);for(var t=this._groups,s=t.length,a=[],r=[],n=0;n<s;++n)for(var i,l=t[n],o=l.length,c=0;c<o;++c)(i=l[c])&&(a.push(e.call(i,i.__data__,c,l)),r.push(i));return new La(a,r)},selectChild:function(e){return this.select(null==e?Os:function(e){return function(){return Bs.call(this.children,e)}}("function"==typeof e?e:$s(e)))},selectChildren:function(e){return this.selectAll(null==e?Us:function(e){return function(){return zs.call(this.children,e)}}("function"==typeof e?e:$s(e)))},filter:function(e){"function"!=typeof e&&(e=Fs(e));for(var t=this._groups,s=t.length,a=new Array(s),r=0;r<s;++r)for(var n,i=t[r],l=i.length,o=a[r]=[],c=0;c<l;++c)(n=i[c])&&e.call(n,n.__data__,c,i)&&o.push(n);return new La(a,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Ys);var s,a=t?Ws:Vs,r=this._parents,n=this._groups;"function"!=typeof e&&(s=e,e=function(){return s});for(var i=n.length,l=new Array(i),o=new Array(i),c=new Array(i),d=0;d<i;++d){var m=r[d],x=n[d],u=x.length,g=Hs(e.call(m,m&&m.__data__,d,r)),h=g.length,p=o[d]=new Array(h),f=l[d]=new Array(h);a(m,x,p,f,c[d]=new Array(u),g,t);for(var b,y,v=0,j=0;v<h;++v)if(b=p[v]){for(v>=j&&(j=v+1);!(y=f[j])&&++j<h;);b._next=y||null}}return(l=new La(l,r))._enter=o,l._exit=c,l},enter:function(){return new La(this._enter||this._groups.map(Gs),this._parents)},exit:function(){return new La(this._exit||this._groups.map(Gs),this._parents)},join:function(e,t,s){var a=this.enter(),r=this,n=this.exit();return"function"==typeof e?(a=e(a))&&(a=a.selection()):a=a.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==s?n.remove():s(n),a&&r?a.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,s=this._groups,a=t._groups,r=s.length,n=a.length,i=Math.min(r,n),l=new Array(r),o=0;o<i;++o)for(var c,d=s[o],m=a[o],x=d.length,u=l[o]=new Array(x),g=0;g<x;++g)(c=d[g]||m[g])&&(u[g]=c);for(;o<r;++o)l[o]=s[o];return new La(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,s=e.length;++t<s;)for(var a,r=e[t],n=r.length-1,i=r[n];--n>=0;)(a=r[n])&&(i&&4^a.compareDocumentPosition(i)&&i.parentNode.insertBefore(a,i),i=a);return this},sort:function(e){function t(t,s){return t&&s?e(t.__data__,s.__data__):!t-!s}e||(e=Ks);for(var s=this._groups,a=s.length,r=new Array(a),n=0;n<a;++n){for(var i,l=s[n],o=l.length,c=r[n]=new Array(o),d=0;d<o;++d)(i=l[d])&&(c[d]=i);c.sort(t)}return new La(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var a=e[t],r=0,n=a.length;r<n;++r){var i=a[r];if(i)return i}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,s=0,a=t.length;s<a;++s)for(var r,n=t[s],i=0,l=n.length;i<l;++i)(r=n[i])&&e.call(r,r.__data__,i,n);return this},attr:function(e,t){var s=Ss(e);if(arguments.length<2){var a=this.node();return s.local?a.getAttributeNS(s.space,s.local):a.getAttribute(s)}return this.each((null==t?s.local?Zs:Xs:"function"==typeof t?s.local?ta:ea:s.local?Js:Qs)(s,t))},style:function(e,t,s){return arguments.length>1?this.each((null==t?aa:"function"==typeof t?na:ra)(e,t,null==s?"":s)):ia(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?la:"function"==typeof t?ca:oa)(e,t)):this.node()[e]},classed:function(e,t){var s=da(e+"");if(arguments.length<2){for(var a=ma(this.node()),r=-1,n=s.length;++r<n;)if(!a.contains(s[r]))return!1;return!0}return this.each(("function"==typeof t?fa:t?ha:pa)(s,t))},text:function(e){return arguments.length?this.each(null==e?ba:("function"==typeof e?va:ya)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ja:("function"==typeof e?wa:Na)(e)):this.node().innerHTML},raise:function(){return this.each(ka)},lower:function(){return this.each(Ca)},append:function(e){var t="function"==typeof e?e:Rs(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var s="function"==typeof e?e:Rs(e),a=null==t?_a:"function"==typeof t?t:Es(t);return this.select(function(){return this.insertBefore(s.apply(this,arguments),a.apply(this,arguments)||null)})},remove:function(){return this.each(Da)},clone:function(e){return this.select(e?Ia:Sa)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,s){var a,r,n=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",s=e.indexOf(".");return s>=0&&(t=e.slice(s+1),e=e.slice(0,s)),{type:e,name:t}})}(e+""),i=n.length;if(!(arguments.length<2)){for(l=t?Ra:Ta,a=0;a<i;++a)this.each(l(n[a],t,s));return this}var l=this.node().__on;if(l)for(var o,c=0,d=l.length;c<d;++c)for(a=0,o=l[c];a<i;++a)if((r=n[a]).type===o.type&&r.name===o.name)return o.value},dispatch:function(e,t){return this.each(("function"==typeof t?Pa:Ea)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var a,r=e[t],n=0,i=r.length;n<i;++n)(a=r[n])&&(yield a)}};var $a,Ba,Oa=0,za=0,Ua=0,Ga=0,qa=0,Va=0,Wa="object"==typeof performance&&performance.now?performance:Date,Ya="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ha(){return qa||(Ya(Ka),qa=Wa.now()+Va)}function Ka(){qa=0}function Xa(){this._call=this._time=this._next=null}function Za(e,t,s){var a=new Xa;return a.restart(e,t,s),a}function Qa(){qa=(Ga=Wa.now())+Va,Oa=za=0;try{!function(){Ha(),++Oa;for(var e,t=$a;t;)(e=qa-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Oa}()}finally{Oa=0,function(){var e,t,s=$a,a=1/0;for(;s;)s._call?(a>s._time&&(a=s._time),e=s,s=s._next):(t=s._next,s._next=null,s=e?e._next=t:$a=t);Ba=e,er(a)}(),qa=0}}function Ja(){var e=Wa.now(),t=e-Ga;t>1e3&&(Va-=t,Ga=e)}function er(e){Oa||(za&&(za=clearTimeout(za)),e-qa>24?(e<1/0&&(za=setTimeout(Qa,e-Wa.now()-Va)),Ua&&(Ua=clearInterval(Ua))):(Ua||(Ga=Wa.now(),Ua=setInterval(Ja,1e3)),Oa=1,Ya(Qa)))}function tr(e,t,s){var a=new Xa;return t=null==t?0:+t,a.restart(s=>{a.stop(),e(s+t)},t,s),a}Xa.prototype=Za.prototype={constructor:Xa,restart:function(e,t,s){if("function"!=typeof e)throw new TypeError("callback is not a function");s=(null==s?Ha():+s)+(null==t?0:+t),this._next||Ba===this||(Ba?Ba._next=this:$a=this,Ba=this),this._call=e,this._time=s,er()},stop:function(){this._call&&(this._call=null,this._time=1/0,er())}};var sr=Ns("start","end","cancel","interrupt"),ar=[];function rr(e,t,s,a,r,n){var i=e.__transition;if(i){if(s in i)return}else e.__transition={};!function(e,t,s){var a,r=e.__transition;function n(e){s.state=1,s.timer.restart(i,s.delay,s.time),s.delay<=e&&i(e-s.delay)}function i(n){var c,d,m,x;if(1!==s.state)return o();for(c in r)if((x=r[c]).name===s.name){if(3===x.state)return tr(i);4===x.state?(x.state=6,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete r[c]):+c<t&&(x.state=6,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete r[c])}if(tr(function(){3===s.state&&(s.state=4,s.timer.restart(l,s.delay,s.time),l(n))}),s.state=2,s.on.call("start",e,e.__data__,s.index,s.group),2===s.state){for(s.state=3,a=new Array(m=s.tween.length),c=0,d=-1;c<m;++c)(x=s.tween[c].value.call(e,e.__data__,s.index,s.group))&&(a[++d]=x);a.length=d+1}}function l(t){for(var r=t<s.duration?s.ease.call(null,t/s.duration):(s.timer.restart(o),s.state=5,1),n=-1,i=a.length;++n<i;)a[n].call(e,r);5===s.state&&(s.on.call("end",e,e.__data__,s.index,s.group),o())}function o(){for(var a in s.state=6,s.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=s,s.timer=Za(n,0,s.time)}(e,s,{name:t,index:a,group:r,on:sr,tween:ar,time:n.time,delay:n.delay,duration:n.duration,ease:n.ease,timer:null,state:0})}function nr(e,t){var s=lr(e,t);if(s.state>0)throw new Error("too late; already scheduled");return s}function ir(e,t){var s=lr(e,t);if(s.state>3)throw new Error("too late; already running");return s}function lr(e,t){var s=e.__transition;if(!s||!(s=s[t]))throw new Error("transition not found");return s}function or(e,t){var s,a;return function(){var r=ir(this,e),n=r.tween;if(n!==s)for(var i=0,l=(a=s=n).length;i<l;++i)if(a[i].name===t){(a=a.slice()).splice(i,1);break}r.tween=a}}function cr(e,t,s){var a,r;if("function"!=typeof s)throw new Error;return function(){var n=ir(this,e),i=n.tween;if(i!==a){r=(a=i).slice();for(var l={name:t,value:s},o=0,c=r.length;o<c;++o)if(r[o].name===t){r[o]=l;break}o===c&&r.push(l)}n.tween=r}}function dr(e,t,s){var a=e._id;return e.each(function(){var e=ir(this,a);(e.value||(e.value={}))[t]=s.apply(this,arguments)}),function(e){return lr(e,a).value[t]}}function mr(e,t){var s;return("number"==typeof t?m:t instanceof g?x:(s=g(t))?(t=s,x):u)(e,t)}function xr(e){return function(){this.removeAttribute(e)}}function ur(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gr(e,t,s){var a,r,n=s+"";return function(){var i=this.getAttribute(e);return i===n?null:i===a?r:r=t(a=i,s)}}function hr(e,t,s){var a,r,n=s+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===n?null:i===a?r:r=t(a=i,s)}}function pr(e,t,s){var a,r,n;return function(){var i,l,o=s(this);if(null!=o)return(i=this.getAttribute(e))===(l=o+"")?null:i===a&&l===r?n:(r=l,n=t(a=i,o));this.removeAttribute(e)}}function fr(e,t,s){var a,r,n;return function(){var i,l,o=s(this);if(null!=o)return(i=this.getAttributeNS(e.space,e.local))===(l=o+"")?null:i===a&&l===r?n:(r=l,n=t(a=i,o));this.removeAttributeNS(e.space,e.local)}}function br(e,t){var s,a;function r(){var r=t.apply(this,arguments);return r!==a&&(s=(a=r)&&function(e,t){return function(s){this.setAttributeNS(e.space,e.local,t.call(this,s))}}(e,r)),s}return r._value=t,r}function yr(e,t){var s,a;function r(){var r=t.apply(this,arguments);return r!==a&&(s=(a=r)&&function(e,t){return function(s){this.setAttribute(e,t.call(this,s))}}(e,r)),s}return r._value=t,r}function vr(e,t){return function(){nr(this,e).delay=+t.apply(this,arguments)}}function jr(e,t){return t=+t,function(){nr(this,e).delay=t}}function Nr(e,t){return function(){ir(this,e).duration=+t.apply(this,arguments)}}function wr(e,t){return t=+t,function(){ir(this,e).duration=t}}var kr=Fa.prototype.constructor;function Cr(e){return function(){this.style.removeProperty(e)}}var _r=0;function Dr(e,t,s,a){this._groups=e,this._parents=t,this._name=s,this._id=a}function Sr(){return++_r}var Ir=Fa.prototype;Dr.prototype={constructor:Dr,select:function(e){var t=this._name,s=this._id;"function"!=typeof e&&(e=Es(e));for(var a=this._groups,r=a.length,n=new Array(r),i=0;i<r;++i)for(var l,o,c=a[i],d=c.length,m=n[i]=new Array(d),x=0;x<d;++x)(l=c[x])&&(o=e.call(l,l.__data__,x,c))&&("__data__"in l&&(o.__data__=l.__data__),m[x]=o,rr(m[x],t,s,x,m,lr(l,s)));return new Dr(n,this._parents,t,s)},selectAll:function(e){var t=this._name,s=this._id;"function"!=typeof e&&(e=Ms(e));for(var a=this._groups,r=a.length,n=[],i=[],l=0;l<r;++l)for(var o,c=a[l],d=c.length,m=0;m<d;++m)if(o=c[m]){for(var x,u=e.call(o,o.__data__,m,c),g=lr(o,s),h=0,p=u.length;h<p;++h)(x=u[h])&&rr(x,t,s,h,u,g);n.push(u),i.push(o)}return new Dr(n,i,t,s)},selectChild:Ir.selectChild,selectChildren:Ir.selectChildren,filter:function(e){"function"!=typeof e&&(e=Fs(e));for(var t=this._groups,s=t.length,a=new Array(s),r=0;r<s;++r)for(var n,i=t[r],l=i.length,o=a[r]=[],c=0;c<l;++c)(n=i[c])&&e.call(n,n.__data__,c,i)&&o.push(n);return new Dr(a,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,s=e._groups,a=t.length,r=s.length,n=Math.min(a,r),i=new Array(a),l=0;l<n;++l)for(var o,c=t[l],d=s[l],m=c.length,x=i[l]=new Array(m),u=0;u<m;++u)(o=c[u]||d[u])&&(x[u]=o);for(;l<a;++l)i[l]=t[l];return new Dr(i,this._parents,this._name,this._id)},selection:function(){return new kr(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,s=Sr(),a=this._groups,r=a.length,n=0;n<r;++n)for(var i,l=a[n],o=l.length,c=0;c<o;++c)if(i=l[c]){var d=lr(i,t);rr(i,e,s,c,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Dr(a,this._parents,e,s)},call:Ir.call,nodes:Ir.nodes,node:Ir.node,size:Ir.size,empty:Ir.empty,each:Ir.each,on:function(e,t){var s=this._id;return arguments.length<2?lr(this.node(),s).on.on(e):this.each(function(e,t,s){var a,r,n=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?nr:ir;return function(){var i=n(this,e),l=i.on;l!==a&&(r=(a=l).copy()).on(t,s),i.on=r}}(s,e,t))},attr:function(e,t){var s=Ss(e),a="transform"===s?h:mr;return this.attrTween(e,"function"==typeof t?(s.local?fr:pr)(s,a,dr(this,"attr."+e,t)):null==t?(s.local?ur:xr)(s):(s.local?hr:gr)(s,a,t))},attrTween:function(e,t){var s="attr."+e;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==t)return this.tween(s,null);if("function"!=typeof t)throw new Error;var a=Ss(e);return this.tween(s,(a.local?br:yr)(a,t))},style:function(e,t,s){var a="transform"==(e+="")?p:mr;return null==t?this.styleTween(e,function(e,t){var s,a,r;return function(){var n=ia(this,e),i=(this.style.removeProperty(e),ia(this,e));return n===i?null:n===s&&i===a?r:r=t(s=n,a=i)}}(e,a)).on("end.style."+e,Cr(e)):"function"==typeof t?this.styleTween(e,function(e,t,s){var a,r,n;return function(){var i=ia(this,e),l=s(this),o=l+"";return null==l&&(this.style.removeProperty(e),o=l=ia(this,e)),i===o?null:i===a&&o===r?n:(r=o,n=t(a=i,l))}}(e,a,dr(this,"style."+e,t))).each(function(e,t){var s,a,r,n,i="style."+t,l="end."+i;return function(){var o=ir(this,e),c=o.on,d=null==o.value[i]?n||(n=Cr(t)):void 0;c===s&&r===d||(a=(s=c).copy()).on(l,r=d),o.on=a}}(this._id,e)):this.styleTween(e,function(e,t,s){var a,r,n=s+"";return function(){var i=ia(this,e);return i===n?null:i===a?r:r=t(a=i,s)}}(e,a,t),s).on("end.style."+e,null)},styleTween:function(e,t,s){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==t)return this.tween(a,null);if("function"!=typeof t)throw new Error;return this.tween(a,function(e,t,s){var a,r;function n(){var n=t.apply(this,arguments);return n!==r&&(a=(r=n)&&function(e,t,s){return function(a){this.style.setProperty(e,t.call(this,a),s)}}(e,n,s)),a}return n._value=t,n}(e,t,null==s?"":s))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(dr(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,s;function a(){var a=e.apply(this,arguments);return a!==s&&(t=(s=a)&&function(e){return function(t){this.textContent=e.call(this,t)}}(a)),t}return a._value=e,a}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var s in this.__transition)if(+s!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var s=this._id;if(e+="",arguments.length<2){for(var a,r=lr(this.node(),s).tween,n=0,i=r.length;n<i;++n)if((a=r[n]).name===e)return a.value;return null}return this.each((null==t?or:cr)(s,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?vr:jr)(t,e)):lr(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Nr:wr)(t,e)):lr(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){ir(this,e).ease=t}}(t,e)):lr(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var s=t.apply(this,arguments);if("function"!=typeof s)throw new Error;ir(this,e).ease=s}}(this._id,e))},end:function(){var e,t,s=this,a=s._id,r=s.size();return new Promise(function(n,i){var l={value:i},o={value:function(){0===--r&&n()}};s.each(function(){var s=ir(this,a),r=s.on;r!==e&&((t=(e=r).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(o)),s.on=t}),0===r&&n()})},[Symbol.iterator]:Ir[Symbol.iterator]};var Tr={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Rr(e,t){for(var s;!(s=e.__transition)||!(s=s[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return s}function Ar(e,t,s){this.k=e,this.x=t,this.y=s}Fa.prototype.interrupt=function(e){return this.each(function(){!function(e,t){var s,a,r,n=e.__transition,i=!0;if(n){for(r in t=null==t?null:t+"",n)(s=n[r]).name===t?(a=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(a?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[r]):i=!1;i&&delete e.__transition}}(this,e)})},Fa.prototype.transition=function(e){var t,s;e instanceof Dr?(t=e._id,e=e._name):(t=Sr(),(s=Tr).time=Ha(),e=null==e?null:e+"");for(var a=this._groups,r=a.length,n=0;n<r;++n)for(var i,l=a[n],o=l.length,c=0;c<o;++c)(i=l[c])&&rr(i,e,t,c,l,s||Rr(i,t));return new Dr(a,this._parents,e,t)},Ar.prototype={constructor:Ar,scale:function(e){return 1===e?this:new Ar(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Ar(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Ar.prototype;const Er=({data:e,hoveredLegend:t,setHoveredLegend:s,tooltipData:n,setTooltipData:i,totalReceitas:l,totalDespesas:o,totalSaldo:c})=>{const[d,m]=a.useState(null),x=f().domain(e.map(e=>e.key)).range([0,100]).padding(.3),u=b(e.map(e=>e.receitas))??0,g=b(e.map(e=>e.despesas))??0,h=Math.max(u,g),p=y().domain([0,h]).range([100,0]),w=e.map(e=>e.saldo),k=b(w)??0,C=v(w)??0;let _;if(k>0||C<0){const e=1.2*Math.max(Math.abs(k),Math.abs(C));_=[-e,e]}else _=[-1,1];const D=y().domain(_).range([100,0]),S=[];if(e.length>0){const t=x(e[0].key)??0,s=x.bandwidth()??0,a=Math.max(0,t-.3*s);S.push({key:"before",receitas:0,despesas:0,saldo:e[0].saldo,x:a})}if(e.forEach(e=>{const t=x(e.key)??0,s=x.bandwidth()??0;S.push({...e,x:t+s/2})}),e.length>0){const t=x(e[e.length-1].key)??0,s=x.bandwidth()??0,a=Math.min(100,t+1.3*s);S.push({key:"after",receitas:0,despesas:0,saldo:e[e.length-1].saldo,x:a})}const I=j().x(e=>e.x).y(e=>D(e.saldo)).curve(N).defined(e=>"before"!==e.key&&"after"!==e.key)(S);return ve.jsx("div",{className:"relative h-72 w-full grid",style:{"--marginTop":"0px","--marginRight":"0px","--marginBottom":"0px","--marginLeft":"0px"},children:ve.jsxs("div",{className:"absolute inset-0\n          z-10\n          h-[calc(100%-var(--marginTop)-var(--marginBottom))]\n          w-[calc(100%-var(--marginLeft)-var(--marginRight))]\n          translate-x-[var(--marginLeft)]\n          translate-y-[var(--marginTop)]\n          overflow-visible\n        ",children:[ve.jsx("div",{className:"relative w-full h-full",children:e.map((e,s)=>{const a=.4*x.bandwidth(),n=p(0)-p(e.receitas),l=p(0)-p(e.despesas),o=x(e.key)||0;return e.receitas>0||e.despesas,ve.jsxs(r.Fragment,{children:[ve.jsx("div",{style:{width:`${a}%`,height:`${Math.max(n,20)}%`,borderRadius:"6px 6px 0 0",marginLeft:`${o+.05*x.bandwidth()}%`,backgroundColor:e.receitas>0?d===`${s}-receitas`||"receitas"===t&&e.receitas>0?"rgba(34, 197, 94, 1)":"rgba(34, 197, 94, 0.6)":"rgba(34, 197, 94, 0.1)",transform:d===`${s}-receitas`||"receitas"===t&&e.receitas>0?"scale(1.05)":"scale(1)",transition:"all 0.3s ease",boxShadow:d===`${s}-receitas`||"receitas"===t&&e.receitas>0?"0 4px 12px rgba(34, 197, 94, 0.4), 0 0 0 2px rgba(34, 197, 94, 0.3)":"none",zIndex:d===`${s}-receitas`||"receitas"===t&&e.receitas>0?40:30,filter:d===`${s}-receitas`||"receitas"===t&&e.receitas>0?"drop-shadow(0 0 6px rgba(34, 197, 94, 0.5))":"none"},className:"absolute bottom-0 cursor-pointer",onMouseEnter:()=>{m(`${s}-receitas`),i({x:o+x.bandwidth()/2,y:50,month:e.key,receitas:e.receitas,despesas:e.despesas,saldo:e.saldo})},onMouseLeave:()=>{m(null),i(null)}}),ve.jsx("div",{style:{width:`${a}%`,height:`${Math.max(l,20)}%`,borderRadius:"6px 6px 0 0",marginLeft:`${o+.5*x.bandwidth()}%`,backgroundColor:e.despesas>0?d===`${s}-despesas`||"despesas"===t&&e.despesas>0?"rgba(239, 68, 68, 1)":"rgba(239, 68, 68, 0.6)":"rgba(239, 68, 68, 0.1)",transform:d===`${s}-despesas`||"despesas"===t&&e.despesas>0?"scale(1.05)":"scale(1)",transition:"all 0.3s ease",boxShadow:d===`${s}-despesas`||"despesas"===t&&e.despesas>0?"0 4px 12px rgba(239, 68, 68, 0.4), 0 0 0 2px rgba(239, 68, 68, 0.3)":"none",zIndex:d===`${s}-despesas`||"despesas"===t&&e.despesas>0?40:30,filter:d===`${s}-despesas`||"despesas"===t&&e.despesas>0?"drop-shadow(0 0 6px rgba(239, 68, 68, 0.5))":"none"},className:"absolute bottom-0 cursor-pointer",onMouseEnter:()=>{m(`${s}-despesas`),i({x:o+x.bandwidth()/2,y:50,month:e.key,receitas:e.receitas,despesas:e.despesas,saldo:e.saldo})},onMouseLeave:()=>{m(null),i(null)}}),ve.jsx("div",{className:"absolute overflow-visible text-gray-400",style:{left:`${o+x.bandwidth()/2}%`,top:"100%",transform:"rotate(45deg) translateX(4px) translateY(8px)"},children:ve.jsx("div",{className:"absolute text-xs -translate-y-1/2",children:e.key})})]},e.key)})}),ve.jsx("svg",{viewBox:"0 0 100 100",className:"absolute inset-0 w-full h-full overflow-visible z-10",preserveAspectRatio:"none",children:ve.jsx("path",{d:I??"",fill:"none",className:"text-blue-500 cursor-pointer transition-all duration-300 "+(d?.includes("line")||"saldo"===t&&0!==c?"drop-shadow-lg":""),stroke:"currentColor",strokeWidth:d?.includes("line")||"saldo"===t&&0!==c?"5":"3",vectorEffect:"non-scaling-stroke",onMouseEnter:()=>{m("line"),i({x:50,y:30,month:"Saldo Acumulado",receitas:0,despesas:0,saldo:e.reduce((e,t)=>e+t.saldo,0)})},onMouseLeave:()=>{m(null),i(null)},style:{filter:d?.includes("line")||"saldo"===t&&0!==c?"drop-shadow(0 0 8px rgba(59, 130, 246, 0.6))":"none",stroke:d?.includes("line")||"saldo"===t&&0!==c?"rgba(59, 130, 246, 1)":"rgba(59, 130, 246, 0.8)"}})}),S.length>0&&(()=>{const t=S[S.length-2],s=t.x,a=D(t.saldo);return ve.jsx("div",{className:"absolute size-2 z-50",style:{left:`${s}%`,top:`${a}%`,transform:"translate(-50%, -50%)"},children:ve.jsx("div",{className:"w-full h-full rounded-full bg-blue-500 border-2 border-blue-400 cursor-pointer animate-ping",onMouseEnter:()=>{m("line"),i({x:s,y:a,month:"Saldo Acumulado",receitas:0,despesas:0,saldo:e.reduce((e,t)=>e+t.saldo,0)})},onMouseLeave:()=>{m(null),i(null)}})})})(),n&&ve.jsxs("div",{className:"absolute z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 pointer-events-none",style:{left:`${n.x}%`,top:`${n.y}%`,transform:"translate(-50%, -100%)"},children:[ve.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2 border-b pb-1",children:n.month}),"Saldo Acumulado"===n.month?ve.jsxs("div",{className:"space-y-1",children:[ve.jsxs("div",{className:"flex justify-between items-center",children:[ve.jsx("span",{className:"text-xs text-blue-600 font-semibold",children:"Saldo Total:"}),ve.jsxs("span",{className:"text-xs font-bold "+(n.saldo>0?"text-green-600":n.saldo<0?"text-red-600":"text-gray-600"),children:["R$ ",(1e3*n.saldo).toFixed(2)]})]}),ve.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Soma dos saldos de todos os meses"})]}):"receitas"===t?ve.jsxs("div",{className:"space-y-1",children:[ve.jsxs("div",{className:"flex justify-between items-center",children:[ve.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"Total de Receitas:"}),ve.jsxs("span",{className:"text-xs text-green-600 font-bold",children:["R$ ",(1e3*l).toFixed(2)]})]}),ve.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Soma de todas as receitas dos 12 meses"})]}):"despesas"===t?ve.jsxs("div",{className:"space-y-1",children:[ve.jsxs("div",{className:"flex justify-between items-center",children:[ve.jsx("span",{className:"text-xs text-red-600 font-semibold",children:"Total de Despesas:"}),ve.jsxs("span",{className:"text-xs text-red-600 font-bold",children:["R$ ",(1e3*o).toFixed(2)]})]}),ve.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Soma de todas as despesas dos 12 meses"})]}):ve.jsxs("div",{className:"space-y-1",children:[ve.jsxs("div",{className:"flex justify-between items-center",children:[ve.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Receitas:"}),ve.jsxs("span",{className:"text-xs text-green-600 font-semibold",children:["R$ ",(1e3*n.receitas).toFixed(2)]})]}),ve.jsxs("div",{className:"flex justify-between items-center",children:[ve.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Despesas:"}),ve.jsxs("span",{className:"text-xs text-red-600 font-semibold",children:["R$ ",(1e3*n.despesas).toFixed(2)]})]}),ve.jsx("div",{className:"border-t pt-1 mt-2",children:ve.jsxs("div",{className:"flex justify-between items-center",children:[ve.jsx("span",{className:"text-xs text-blue-600 font-semibold",children:"Saldo do MÃªs:"}),ve.jsxs("span",{className:"text-xs font-bold "+(n.saldo>0?"text-green-600":n.saldo<0?"text-red-600":"text-gray-600"),children:["R$ ",(1e3*n.saldo).toFixed(2)]})]})}),0===n.receitas&&0===n.despesas&&ve.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Nenhuma transaÃ§Ã£o neste mÃªs"})]})]})]})})},Pr=({selectedMonth:e,selectedYear:t})=>{const[s,r]=a.useState(null),[n,i]=a.useState(null);try{const{transactions:e,loading:t,error:a}=ds();if(t)return ve.jsx("div",{className:"bg-white rounded-lg shadow border h-full p-6 flex items-center justify-center",children:ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),ve.jsx("span",{className:"text-gray-600",children:"Carregando dados..."})]})});if(a)return ve.jsx("div",{className:"bg-white rounded-lg shadow border h-full p-6 flex items-center justify-center",children:ve.jsxs("div",{className:"text-center text-red-600",children:[ve.jsx("p",{children:"Erro ao carregar dados"}),ve.jsx("p",{className:"text-sm mt-1",children:a})]})});const l=(e=>{const t=new Date,s=t.getMonth(),r=t.getFullYear(),n=[];for(let a=-3;a<9;a++){const e=new Date(r,s+a,1),t=e.toLocaleDateString("pt-BR",{month:"short"}),i=e.getFullYear();n.push({name:t,year:i,monthIndex:e.getMonth()})}return n.map((t,s)=>{const r=new Date(t.year,t.monthIndex,1),n=new Date(t.year,t.monthIndex+1,0,23,59,59);if(isNaN(r.getTime())||isNaN(n.getTime()))return console.warn(`âš ï¸ [FinancialEvolution] Datas invÃ¡lidas para mÃªs ${t.name}:`,{monthName:t.name,year:t.year,monthIndex:t.monthIndex,monthStart:r,monthEnd:n}),{key:t.name,receitas:0,despesas:0,saldo:0};const i=e.filter(e=>{try{const t=new Date(e.date);if(isNaN(t.getTime()))return console.warn(`âš ï¸ [FinancialEvolution] Data invÃ¡lida para transaÃ§Ã£o ${e.description}:`,e.date),!1;const s=t>=r&&t<=n,a=e.installmentNumber&&!0===e.isPaid;return s&&!a}catch(a){return console.warn(`âš ï¸ [FinancialEvolution] Erro ao processar transaÃ§Ã£o ${e.description}:`,a),!1}}),l=i.filter(e=>"receita"===e.type).reduce((e,t)=>e+t.amount,0),o=i.filter(e=>"despesa"===e.type).reduce((e,t)=>e+t.amount,0),c=l-o;return{key:t.name,receitas:l/1e3,despesas:o/1e3,saldo:c/1e3}})})(e),o=l.reduce((e,t)=>e+t.receitas,0),c=l.reduce((e,t)=>e+t.despesas,0),d=l.reduce((e,t)=>e+t.saldo,0);return ve.jsxs("div",{className:"bg-white rounded-lg shadow border h-full p-6",children:[ve.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"EvoluÃ§Ã£o Financeira"}),ve.jsx("div",{className:"h-72 w-full",children:ve.jsx(Er,{data:l,hoveredLegend:s,setHoveredLegend:r,tooltipData:n,setTooltipData:i,totalReceitas:o,totalDespesas:c,totalSaldo:d})}),ve.jsxs("div",{className:"flex items-center justify-center gap-4 mt-16 text-xs",children:[ve.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer hover:opacity-80 transition-opacity",onMouseEnter:()=>{r("receitas"),i({x:50,y:30,month:"Total de Receitas",receitas:o,despesas:0,saldo:0})},onMouseLeave:()=>{r(null),i(null)},children:[ve.jsx("div",{className:"w-3 h-2 rounded-sm bg-green-500"}),ve.jsx("span",{className:"text-gray-600",children:"Receitas"})]}),ve.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer hover:opacity-80 transition-opacity",onMouseEnter:()=>{r("despesas"),i({x:50,y:30,month:"Total de Despesas",receitas:0,despesas:c,saldo:0})},onMouseLeave:()=>{r(null),i(null)},children:[ve.jsx("div",{className:"w-3 h-2 rounded-sm bg-red-500"}),ve.jsx("span",{className:"text-gray-600",children:"Despesas"})]}),ve.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer hover:opacity-80 transition-opacity",onMouseEnter:()=>{r("saldo"),i({x:50,y:30,month:"Saldo Acumulado",receitas:0,despesas:0,saldo:d})},onMouseLeave:()=>{r(null),i(null)},children:[ve.jsx("div",{className:"w-5 h-0.5 bg-blue-500"}),ve.jsx("span",{className:"text-gray-600",children:"Saldo"})]})]})]})}catch(l){return console.error("âŒ [FinancialEvolution] Erro no componente:",l),ve.jsx("div",{className:"bg-white rounded-lg shadow border h-full p-6 flex items-center justify-center",children:ve.jsxs("div",{className:"text-center text-red-600",children:[ve.jsx("p",{children:"Erro no componente"}),ve.jsx("p",{className:"text-sm mt-1",children:String(l)})]})})}},Mr=({isOpen:e,onClose:t,userId:s,onTransactionCreating:n})=>{const[i,l]=a.useState({description:"",amount:"",type:"Despesa",category:"",date:(new Date).toISOString().split("T")[0],dueDate:(new Date).toISOString().split("T")[0],paymentMethod:"dinheiro",installments:2,recurring:!1,automaticCategorization:!1,notifications:!1}),[o,c]=a.useState(!1),[d,m]=a.useState(!1),[x,u]=a.useState(!1),[g,h]=a.useState(null),[p,f]=a.useState(!1),[b,y]=a.useState(!1),[v,j]=a.useState(1),[N]=a.useState(10),w=a.useRef(null),k=a.useRef(null),C=a.useRef(null),_=a.useRef(null),[D,S]=a.useState({name:"",color:"#3B82F6",icon:"ðŸ“¦"}),{categories:I,createCategory:T,updateCategory:R,deleteCategory:A,loading:E,error:P}=ys(s),{createTransaction:M,loading:L}=ds(),F=r.useMemo(()=>I.reduce((e,t)=>(e.find(e=>e.name===t.name)||e.push(t),e),[]),[I]).filter(e=>!0),$=Math.ceil(F.length/N),B=(v-1)*N,O=B+N,z=F.slice(B,O);r.useEffect(()=>{j(1)},[i.type]);const U=e=>{h(e),S({name:e.name,color:e.color,icon:e.icon}),u(!0)},G=()=>{h(null),S({name:"",color:"#3B82F6",icon:"ðŸ“¦"}),u(!1)},q=async e=>{if(confirm(`Tem certeza que deseja excluir a categoria "${e.name}"?`))try{await A(e.id)}catch(t){console.error("âŒ Erro ao excluir categoria:",t)}};return a.useEffect(()=>{const e=e=>{w.current&&!w.current.contains(e.target)&&k.current&&!k.current.contains(e.target)&&f(!1),C.current&&!C.current.contains(e.target)&&_.current&&!_.current.contains(e.target)&&y(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),e?ve.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-1 sm:p-4 animate-in fade-in duration-200",children:[ve.jsxs("div",{className:"bg-white rounded-xl sm:rounded-3xl shadow-2xl w-full max-w-6xl max-h-[98vh] sm:max-h-[95vh] overflow-hidden animate-in zoom-in-95 duration-200",children:[ve.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-3 sm:p-6 border-b border-gray-100",children:ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[ve.jsx("div",{className:"w-7 h-7 sm:w-10 sm:h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg sm:rounded-xl flex items-center justify-center",children:ve.jsx("span",{className:"text-white text-sm sm:text-xl",children:"ðŸ’°"})}),ve.jsxs("div",{children:[ve.jsx("h3",{className:"text-base sm:text-2xl font-bold text-gray-900",children:"Nova TransaÃ§Ã£o"}),ve.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Registre sua movimentaÃ§Ã£o financeira"})]})]}),ve.jsx("button",{onClick:t,className:"p-1.5 sm:p-2 hover:bg-white/80 rounded-lg sm:rounded-xl transition-all duration-200 hover:scale-105 group",children:ve.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4 sm:w-6 sm:h-6 text-gray-500 group-hover:text-gray-700",children:[ve.jsx("path",{d:"M18 6 6 18"}),ve.jsx("path",{d:"m6 6 12 12"})]})})]})}),ve.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),i.amount&&i.category)try{n?.(!0);const e=parseFloat(i.amount.replace(",",".")),a=Math.round(e/(i.installments||1)*100)/100,r=i.dueDate||(new Date).toISOString().split("T")[0],[d,m,x]=r.split("-").map(Number),u=new Date(d,m-1,x);if(isNaN(u.getTime()))return void alert("Por favor, selecione uma data vÃ¡lida.");if(o&&i.installments>1){const t=[],r=`installment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;for(let l=0;l<i.installments;l++){const n=new Date(u);n.setMonth(u.getMonth()+l);const o={userId:s,description:`${i.description.trim()} (${l+1}/${i.installments})`,amount:a,type:i.type.toLowerCase(),category:i.category,date:n,paymentMethod:i.paymentMethod.toLowerCase(),installments:i.installments,installmentNumber:l+1,totalInstallmentAmount:e,installmentGroupId:r,isPaid:!1,recurring:!1,notes:`Parcela ${l+1} de ${i.installments}`};console.log(`ðŸ“¤ [NewTransactionModal] Criando parcela ${l+1}:`,{...o,amount:o.amount,installmentAmount:a,baseAmount:e}),t.push(M(o))}const n=await Promise.all(t);console.log("âœ… [NewTransactionModal] Todas as parcelas criadas com sucesso! IDs:",n),alert(`${i.installments} parcelas criadas com sucesso!`)}else{const t={userId:s,description:i.description.trim(),amount:e,type:i.type.toLowerCase(),category:i.category,date:u,paymentMethod:i.paymentMethod.toLowerCase(),installments:void 0,recurring:!1,notes:""};console.log("ðŸ“¤ [NewTransactionModal] Dados da transaÃ§Ã£o:",t);const a=await M(t);console.log("âœ… [NewTransactionModal] TransaÃ§Ã£o criada com sucesso! ID:",a),alert("TransaÃ§Ã£o criada com sucesso!")}console.log("ðŸ”„ [NewTransactionModal] Limpando formulÃ¡rio e fechando modal..."),l({description:"",amount:"",type:"Despesa",category:"",date:(new Date).toISOString().split("T")[0],dueDate:(new Date).toISOString().split("T")[0],paymentMethod:"dinheiro",installments:1,recurring:!1,automaticCategorization:!1,notifications:!1}),c(!1),console.log("âœ… [NewTransactionModal] FormulÃ¡rio limpo, fechando modal..."),n?.(!1),t()}catch(a){console.error("âŒ [NewTransactionModal] Erro ao criar transaÃ§Ã£o:",a),n?.(!1),alert(`Erro ao criar transaÃ§Ã£o: ${a instanceof Error?a.message:"Erro desconhecido"}`)}else alert("Por favor, preencha o valor e a categoria")},className:"p-2 sm:p-8",children:ve.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-2 sm:gap-8",children:[ve.jsx("div",{className:"lg:col-span-2",children:ve.jsxs("div",{className:"bg-gray-50 rounded-xl sm:rounded-2xl p-3 sm:p-6 space-y-3 sm:space-y-6 max-h-[70vh] sm:max-h-[75vh] overflow-y-auto",children:[ve.jsxs("div",{className:"bg-white rounded-lg p-2 sm:p-3 shadow-sm border border-gray-200",children:[ve.jsxs("div",{className:"flex items-center space-x-2 mb-2 sm:mb-3",children:[ve.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-blue-100 rounded-md flex items-center justify-center",children:ve.jsx("span",{className:"text-blue-600 text-xs sm:text-sm",children:"ðŸ“‹"})}),ve.jsx("h3",{className:"text-xs sm:text-sm font-bold text-gray-900",children:"InformaÃ§Ãµes da TransaÃ§Ã£o"})]}),ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-3",children:[ve.jsxs("div",{className:"md:col-span-2",children:[ve.jsxs("label",{className:"block text-xs font-semibold text-gray-700 mb-2 flex items-center space-x-1",children:[ve.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),ve.jsx("span",{children:"DescriÃ§Ã£o"})]}),ve.jsxs("div",{className:"relative",children:[ve.jsx("input",{type:"text",placeholder:"Ex: Supermercado, SalÃ¡rio...",className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs sm:text-sm",value:i.description,onChange:e=>l({...i,description:e.target.value})}),ve.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:ve.jsx("span",{className:"text-gray-400 text-xs",children:"ðŸ“"})})]})]}),ve.jsxs("div",{children:[ve.jsxs("label",{className:"block text-xs font-semibold text-gray-700 mb-2 flex items-center space-x-1",children:[ve.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),ve.jsx("span",{children:"Valor*"})]}),ve.jsxs("div",{className:"relative",children:[ve.jsx("span",{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-xs sm:text-sm font-medium",children:"R$"}),ve.jsx("input",{type:"text",placeholder:"0,00",className:"w-full pl-6 sm:pl-8 pr-2 sm:pr-3 py-1.5 sm:py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs sm:text-sm",value:i.amount,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t&&(t=(parseInt(t)/100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})),l({...i,amount:t})},required:!0})]})]}),ve.jsxs("div",{children:[ve.jsxs("label",{className:"block text-xs font-semibold text-gray-700 mb-2 flex items-center space-x-1",children:[ve.jsx("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),ve.jsx("span",{children:"Data"})]}),ve.jsxs("div",{className:"relative",children:[ve.jsx("input",{type:"date",className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs sm:text-sm",value:i.dueDate,onChange:e=>l({...i,dueDate:e.target.value})}),ve.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:ve.jsx("span",{className:"text-gray-400 text-xs",children:"ðŸ“…"})})]})]})]}),ve.jsxs("div",{className:"mt-2 sm:mt-3",children:[ve.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[ve.jsx("input",{type:"checkbox",id:"installment",checked:o,onChange:e=>c(e.target.checked),className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-1"}),ve.jsx("label",{htmlFor:"installment",className:"text-xs font-semibold text-gray-700 cursor-pointer",children:"Parcelar transaÃ§Ã£o"})]}),o&&ve.jsx("div",{className:"bg-green-50 rounded-md p-3 border border-green-200",children:ve.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ve.jsxs("div",{children:[ve.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Parcelas"}),ve.jsx("input",{type:"number",min:"2",max:"60",value:i.installments||2,onChange:e=>l({...i,installments:parseInt(e.target.value)||2}),className:"w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent text-sm"})]}),ve.jsxs("div",{children:[ve.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Valor por parcela"}),ve.jsxs("div",{className:"px-2 py-1 bg-white border border-gray-300 rounded-md text-sm font-semibold text-green-600",children:["R$ ",i.amount?(Math.round(parseFloat(i.amount.replace(",","."))/(i.installments||1)*100)/100).toFixed(2):"0,00"]})]})]})})]})]}),ve.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[ve.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[ve.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-md flex items-center justify-center",children:ve.jsx("span",{className:"text-purple-600 text-sm",children:"ðŸ”„"})}),ve.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"Tipo de TransaÃ§Ã£o"})]}),ve.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[ve.jsx("button",{type:"button",onClick:()=>l({...i,type:"Receita"}),className:"p-2 rounded-md border transition-all duration-200 transform hover:scale-105 "+("Receita"===i.type?"border-green-500 bg-green-50 shadow-sm":"border-gray-200 bg-white hover:border-green-300 hover:shadow-sm"),children:ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center "+("Receita"===i.type?"bg-green-500":"bg-gray-100"),children:ve.jsx("span",{className:"text-xs",children:"ðŸ’¹"})}),ve.jsx("div",{className:"text-left",children:ve.jsx("div",{className:"text-xs font-bold "+("Receita"===i.type?"text-green-700":"text-gray-700"),children:"Receita"})})]})}),ve.jsx("button",{type:"button",onClick:()=>l({...i,type:"Despesa"}),className:"p-2 rounded-md border transition-all duration-200 transform hover:scale-105 "+("Despesa"===i.type?"border-red-500 bg-red-50 shadow-sm":"border-gray-200 bg-white hover:border-red-300 hover:shadow-sm"),children:ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center "+("Despesa"===i.type?"bg-red-500":"bg-gray-100"),children:ve.jsx("span",{className:"text-xs",children:"ðŸ“‰"})}),ve.jsx("div",{className:"text-left",children:ve.jsx("div",{className:"text-xs font-bold "+("Despesa"===i.type?"text-red-700":"text-gray-700"),children:"Despesa"})})]})})]})]}),ve.jsxs("div",{className:"hidden sm:block bg-white rounded-xl p-3 sm:p-6 shadow-sm border border-gray-200 relative z-10",children:[ve.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[ve.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[ve.jsx("span",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-orange-500 rounded-full"}),ve.jsx("span",{className:"hidden sm:inline",children:"Categoria*"}),E&&ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),ve.jsx("span",{className:"text-xs text-gray-500",children:"Carregando..."})]})]}),ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-orange-400 rounded-full"}),ve.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[F.length," categoria",1!==F.length?"s":"",$>1&&` (pÃ¡gina ${v} de ${$})`]})]}),ve.jsxs("div",{className:"flex space-x-2",children:[ve.jsx("button",{type:"button",onClick:()=>m(!0),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs font-semibold text-green-600 bg-green-100 hover:bg-green-200 rounded-lg transition-all duration-200 hover:scale-105 shadow-sm hover:shadow-md",children:"+ Nova Categoria"}),ve.jsx("button",{type:"button",ref:_,onClick:()=>y(!b),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs font-semibold text-blue-600 bg-blue-100 hover:bg-blue-200 rounded-lg transition-all duration-200 hover:scale-105 shadow-sm hover:shadow-md",children:"ðŸ“‹ Selecionar Categoria"})]})]})]}),ve.jsxs("div",{className:"space-y-4",children:[ve.jsx("div",{className:"hidden sm:block",children:ve.jsx("div",{className:"hidden sm:grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 sm:gap-4 max-h-80 overflow-y-auto pr-2 pt-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 scrollbar-thumb-opacity-30 scrollbar-track-opacity-10",children:z.length>0?z.map((e,t)=>ve.jsxs("div",{className:"relative group",children:[ve.jsx("button",{type:"button",onClick:()=>l({...i,category:e.name}),className:"w-full p-5 rounded-lg border-2 transition-all duration-200 "+(i.category===e.name?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"),children:ve.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[ve.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white shadow-md",style:{backgroundColor:e.color},children:ve.jsx("span",{className:"text-xl",children:e.icon})}),ve.jsx("span",{className:"text-sm font-semibold text-gray-800 text-center leading-tight",children:e.name})]})}),ve.jsx("button",{type:"button",onClick:()=>U(e),className:"absolute top-1 right-1 w-6 h-6 bg-gray-600 hover:bg-gray-700 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 z-[9999]",children:ve.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),ve.jsx("button",{type:"button",onClick:()=>q(e),className:"absolute top-1 left-1 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 z-[9999]",children:ve.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):ve.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-8 text-center",children:P?ve.jsxs(ve.Fragment,{children:[ve.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:ve.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),ve.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Erro ao carregar categorias"}),ve.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Tente recarregar a pÃ¡gina ou criar uma nova categoria"}),ve.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors mr-2",children:"Recarregar"}),ve.jsx("button",{type:"button",onClick:()=>m(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"+ Criar Categoria"})]}):ve.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 px-4",children:[ve.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center mb-6 shadow-lg",children:ve.jsx("svg",{className:"w-10 h-10 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),ve.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Nenhuma categoria encontrada"}),ve.jsx("p",{className:"text-gray-600 mb-6 text-center max-w-sm",children:"Crie categorias personalizadas para organizar suas transaÃ§Ãµes"}),ve.jsx("button",{type:"button",onClick:()=>m(!0),className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"âœ¨ Criar Primeira Categoria"})]})})})}),$>1&&ve.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[ve.jsx("button",{type:"button",onClick:()=>{v>1&&j(v-1)},disabled:1===v,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}),Array.from({length:$},(e,t)=>t+1).map(e=>ve.jsx("button",{type:"button",onClick:()=>(e=>{j(e)})(e),className:"w-8 h-8 rounded-lg text-sm font-medium transition-colors "+(v===e?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:e},e)),ve.jsx("button",{type:"button",onClick:()=>{v<$&&j(v+1)},disabled:v===$,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"})]})]})]})]})}),ve.jsx("div",{className:"space-y-4 lg:space-y-6",children:ve.jsxs("div",{className:"bg-white rounded-xl p-3 lg:p-6 shadow-sm border border-gray-200",children:[ve.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[ve.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3",children:[ve.jsx("div",{className:"w-6 h-6 lg:w-8 lg:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-blue-600 text-sm lg:text-lg",children:"ðŸ‘ï¸"})}),ve.jsx("h3",{className:"text-base lg:text-lg font-bold text-gray-900",children:"VisualizaÃ§Ã£o PrÃ©via"})]}),ve.jsx("button",{type:"button",className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs font-semibold text-blue-600 bg-blue-100 hover:bg-blue-200 rounded-lg transition-all duration-200 hover:scale-105 shadow-sm hover:shadow-md lg:hidden",onClick:()=>y(!0),children:"ðŸ“‹ Selecionar Categoria"})]}),ve.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 lg:p-4 mb-4 lg:mb-6",children:[ve.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3 mb-3",children:[ve.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg flex items-center justify-center shadow-sm",style:{backgroundColor:i.category?I.find(e=>e.name===i.category)?.color||"#3B82F6":"#9CA3AF"},children:ve.jsx("span",{className:"text-sm lg:text-lg",children:i.category&&I.find(e=>e.name===i.category)?.icon||"ðŸ“¦"})}),ve.jsx("div",{className:"flex-1 min-w-0",children:ve.jsx("div",{className:"text-xs lg:text-sm font-semibold text-gray-800 truncate",children:i.category||"Categoria"})})]}),ve.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ve.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-md "+("Receita"===i.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:i.type}),ve.jsxs("div",{className:"text-sm lg:text-lg font-bold "+("Receita"===i.type?"text-green-600":"text-red-600"),children:["Receita"===i.type?"+":"-","R$ ",i.amount||"0,00"]})]}),ve.jsx("div",{className:"text-xs text-gray-500",children:i.dueDate}),o&&i.installments>1&&ve.jsxs("div",{className:"mt-3 p-2 lg:p-3 bg-blue-50 rounded-lg border border-blue-200",children:[ve.jsxs("div",{className:"text-xs text-blue-700 font-medium mb-2",children:[i.installments,"x de R$ ",i.amount?(Math.round(parseFloat(i.amount.replace(",","."))/i.installments*100)/100).toFixed(2):"0.00"]}),ve.jsxs("div",{className:"text-xs text-blue-600",children:[ve.jsx("div",{className:"font-semibold mb-1",children:"Datas das parcelas:"}),ve.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:Array.from({length:i.installments},(e,t)=>{const s=new Date(i.dueDate);return s.setMonth(s.getMonth()+t),ve.jsxs("div",{className:"flex justify-between text-xs",children:[ve.jsxs("span",{children:["Parcela ",t+1,":"]}),ve.jsx("span",{children:s.toLocaleDateString("pt-BR")})]},t)})})]})]})]}),ve.jsxs("div",{className:"flex flex-col space-y-2 lg:space-y-3",children:[ve.jsx("button",{type:"button",onClick:t,className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 text-sm lg:text-base text-gray-700 bg-white hover:bg-gray-50 rounded-xl font-semibold transition-all duration-200 border-2 border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-md transform hover:scale-105",children:"Cancelar"}),ve.jsx("button",{type:"submit",disabled:L,className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:from-gray-400 disabled:to-gray-500 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none disabled:cursor-not-allowed text-sm lg:text-base",children:L?ve.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[ve.jsx("div",{className:"w-3 h-3 lg:w-4 lg:h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),ve.jsx("span",{children:"Criando..."})]}):"âœ¨ Criar TransaÃ§Ã£o"})]})]})})]})})]}),d&&ve.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[10000] p-4 animate-in fade-in duration-200",children:ve.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden animate-in zoom-in-95 duration-200",children:[ve.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-100",children:ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsxs("div",{className:"flex items-center space-x-3",children:[ve.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center",children:ve.jsx("span",{className:"text-white text-xl",children:"ðŸ·ï¸"})}),ve.jsxs("div",{children:[ve.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Nova Categoria"}),ve.jsx("p",{className:"text-sm text-gray-600",children:"Personalize sua categoria"})]})]}),ve.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-white/80 rounded-xl transition-all duration-200 hover:scale-105 group",children:ve.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-6 h-6 text-gray-500 group-hover:text-gray-700",children:[ve.jsx("path",{d:"M18 6 6 18"}),ve.jsx("path",{d:"m6 6 12 12"})]})})]})}),ve.jsxs("div",{className:"p-6 space-y-6",children:[ve.jsxs("div",{className:"space-y-2",children:[ve.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[ve.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),ve.jsx("span",{children:"Nome da Categoria*"})]}),ve.jsxs("div",{className:"relative",children:[ve.jsx("input",{type:"text",placeholder:"Ex: Supermercado, SalÃ¡rio, Lazer...",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-lg",value:D.name,onChange:e=>S({...D,name:e.target.value}),required:!0}),ve.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:ve.jsx("span",{className:"text-gray-400 text-sm",children:"ðŸ“"})})]})]}),ve.jsxs("div",{className:"space-y-4",children:[ve.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[ve.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),ve.jsx("span",{children:"Personalizar Categoria"})]}),ve.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-6 border-2 border-gray-200",children:ve.jsxs("div",{className:"text-center",children:[ve.jsx("div",{ref:k,className:"w-24 h-24 rounded-3xl border-4 border-white shadow-2xl flex items-center justify-center mx-auto mb-4 transform hover:scale-110 transition-all duration-300 cursor-pointer hover:shadow-3xl",style:{backgroundColor:D.color},onClick:()=>f(!p),children:ve.jsx("span",{className:"text-4xl",children:D.icon})}),ve.jsxs("div",{className:"space-y-3",children:[ve.jsx("p",{className:"text-lg font-bold text-gray-800",children:D.name||"Nome da categoria"}),ve.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[ve.jsx("input",{type:"color",className:"w-12 h-12 rounded-xl border-2 border-gray-300 cursor-pointer hover:scale-110 transition-transform duration-200 shadow-lg",value:D.color,onChange:e=>S({...D,color:e.target.value})}),ve.jsxs("div",{className:"text-center",children:[ve.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Cor"}),ve.jsx("span",{className:"px-2 py-1 bg-white rounded-lg text-xs font-mono text-gray-600 shadow-sm",children:D.color})]}),ve.jsxs("div",{className:"text-center",children:[ve.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Emoji"}),ve.jsx("span",{className:"px-2 py-1 bg-white rounded-lg text-xs text-gray-600 shadow-sm",children:D.icon})]})]})]})]})})]})]}),ve.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-t border-gray-200",children:ve.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[ve.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-6 py-3 text-gray-700 bg-white hover:bg-gray-50 rounded-xl font-semibold transition-all duration-200 border-2 border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-md",children:"Cancelar"}),ve.jsx("button",{type:"button",onClick:async()=>{if(D.name.trim())try{console.log("ðŸš€ [NewTransactionModal] Iniciando criaÃ§Ã£o de categoria...");const e={name:D.name,color:D.color,icon:D.icon,type:"geral",userId:s};console.log("ðŸ“¤ [NewTransactionModal] Dados da categoria:",e),console.log("ðŸ‘¤ [NewTransactionModal] UserId:",s);const t=await T(e);console.log("âœ… [NewTransactionModal] Categoria criada com sucesso! ID:",t),S({name:"",color:"#3B82F6",icon:"ðŸ“¦"}),m(!1)}catch(e){console.error("âŒ [NewTransactionModal] Erro ao criar categoria:",e)}},disabled:!D.name.trim(),className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none disabled:cursor-not-allowed",children:"âœ¨ Criar Categoria"})]})})]})}),x&&ve.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[10000] p-4 animate-in fade-in duration-200",children:ve.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden animate-in zoom-in-95 duration-200",children:[ve.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 p-6 border-b border-gray-100",children:ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsxs("div",{className:"flex items-center space-x-3",children:[ve.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center",children:ve.jsx("span",{className:"text-white text-xl",children:"âœï¸"})}),ve.jsxs("div",{children:[ve.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Editar Categoria"}),ve.jsx("p",{className:"text-sm text-gray-600",children:"Modifique sua categoria"})]})]}),ve.jsx("button",{onClick:G,className:"p-2 hover:bg-white/80 rounded-xl transition-all duration-200 hover:scale-105 group",children:ve.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-6 h-6 text-gray-500 group-hover:text-gray-700",children:[ve.jsx("path",{d:"M18 6 6 18"}),ve.jsx("path",{d:"m6 6 12 12"})]})})]})}),ve.jsxs("div",{className:"p-6 space-y-6",children:[ve.jsxs("div",{className:"space-y-2",children:[ve.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[ve.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),ve.jsx("span",{children:"Nome da Categoria*"})]}),ve.jsxs("div",{className:"relative",children:[ve.jsx("input",{type:"text",placeholder:"Ex: Supermercado, SalÃ¡rio, Lazer...",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-lg",value:D.name,onChange:e=>S({...D,name:e.target.value}),required:!0}),ve.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:ve.jsx("span",{className:"text-gray-400 text-sm",children:"ðŸ“"})})]})]}),ve.jsxs("div",{className:"space-y-4",children:[ve.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[ve.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),ve.jsx("span",{children:"Personalizar Categoria"})]}),ve.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-6 border-2 border-gray-200",children:ve.jsxs("div",{className:"text-center",children:[ve.jsx("div",{ref:k,className:"w-24 h-24 rounded-3xl border-4 border-white shadow-2xl flex items-center justify-center mx-auto mb-4 transform hover:scale-110 transition-all duration-300 cursor-pointer hover:shadow-3xl",style:{backgroundColor:D.color},onClick:()=>f(!p),children:ve.jsx("span",{className:"text-4xl",children:D.icon})}),ve.jsxs("div",{className:"space-y-3",children:[ve.jsx("p",{className:"text-lg font-bold text-gray-800",children:D.name||"Nome da categoria"}),ve.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[ve.jsx("input",{type:"color",className:"w-12 h-12 rounded-xl border-2 border-gray-300 cursor-pointer hover:scale-110 transition-transform duration-200 shadow-lg",value:D.color,onChange:e=>S({...D,color:e.target.value})}),ve.jsxs("div",{className:"text-center",children:[ve.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Cor"}),ve.jsx("span",{className:"px-2 py-1 bg-white rounded-lg text-xs font-mono text-gray-600 shadow-sm",children:D.color})]}),ve.jsxs("div",{className:"text-center",children:[ve.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Emoji"}),ve.jsx("span",{className:"px-2 py-1 bg-white rounded-lg text-xs text-gray-600 shadow-sm",children:D.icon})]})]})]})]})})]})]}),ve.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-t border-gray-200",children:ve.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[ve.jsx("button",{type:"button",onClick:G,className:"px-6 py-3 text-gray-700 bg-white hover:bg-gray-50 rounded-xl font-semibold transition-all duration-200 border-2 border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-md",children:"Cancelar"}),ve.jsx("button",{type:"button",onClick:async()=>{if(g&&D.name.trim())try{await R(g.id,{name:D.name,color:D.color,icon:D.icon}),h(null),S({name:"",color:"#3B82F6",icon:"ðŸ“¦"}),u(!1)}catch(e){console.error("âŒ Erro ao atualizar categoria:",e)}},disabled:!D.name.trim(),className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none disabled:cursor-not-allowed",children:"âœï¸ Atualizar Categoria"})]})})]})}),b&&ve.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-end justify-center z-[9998] sm:hidden",children:ve.jsxs("div",{ref:C,className:"bg-white rounded-t-3xl w-full max-h-[70vh] overflow-hidden animate-in slide-in-from-bottom duration-300",children:[ve.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 border-b border-gray-200",children:ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsxs("div",{className:"flex items-center space-x-3",children:[ve.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-white text-sm",children:"ðŸ“‹"})}),ve.jsxs("div",{children:[ve.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Selecionar Categoria"}),ve.jsx("p",{className:"text-xs text-gray-600",children:"Arraste para navegar"})]})]}),ve.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-white/80 rounded-lg transition-all duration-200",children:ve.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),ve.jsx("div",{className:"p-4 max-h-[50vh] overflow-y-auto",children:F.length>0?ve.jsx("div",{className:"space-y-2",children:F.map((e,t)=>ve.jsxs("div",{className:"relative group",children:[ve.jsx("button",{onClick:()=>{l({...i,category:e.name}),y(!1)},className:"w-full p-4 rounded-xl border-2 transition-all duration-200 "+(i.category===e.name?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"),children:ve.jsxs("div",{className:"flex items-center space-x-4",children:[ve.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white shadow-md flex-shrink-0",style:{backgroundColor:e.color},children:ve.jsx("span",{className:"text-xl",children:e.icon})}),ve.jsxs("div",{className:"flex-1 text-left",children:[ve.jsx("div",{className:"text-base font-semibold text-gray-800",children:e.name}),ve.jsx("div",{className:"text-xs text-gray-500",children:i.category===e.name?"Selecionada":"Toque para selecionar"})]}),i.category===e.name&&ve.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:ve.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]})}),ve.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[ve.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),y(!1),U(e)},className:"w-6 h-6 bg-gray-600 hover:bg-gray-700 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 z-[9999]",children:ve.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),ve.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),y(!1),q(e)},className:"w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 z-[9999]",children:ve.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},t))}):ve.jsxs("div",{className:"text-center py-8",children:[ve.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“¦"}),ve.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma categoria encontrada"}),ve.jsx("button",{onClick:()=>{y(!1),m(!0)},className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors",children:"Criar Primeira Categoria"})]})}),ve.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:ve.jsxs("div",{className:"flex space-x-2",children:[ve.jsx("button",{onClick:()=>m(!0),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:"+ Nova Categoria"}),ve.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg text-sm font-medium hover:bg-gray-600 transition-colors",children:"Cancelar"})]})})]})}),p&&ve.jsx("div",{ref:w,className:"fixed z-[10001] shadow-2xl rounded-lg overflow-hidden bg-white border border-gray-200",style:{top:k.current?k.current.getBoundingClientRect().bottom+window.scrollY+10:0,left:k.current?k.current.getBoundingClientRect().left+window.scrollX:0,minWidth:"320px",maxWidth:"90vw"},children:ve.jsx(ue,{data:ge,onEmojiSelect:e=>{S({...D,icon:e.native}),f(!1)},theme:"light",previewPosition:"none",searchPosition:"top",skinTonePosition:"none",perLine:8,maxFrequentRows:2})})]}):null},Lr=({onClick:e,className:t="",notificationCount:s=0})=>ve.jsxs("button",{onClick:e,className:`rounded-full font-medium transition-all duration-200 relative ${t}`,children:["Pagas",s>0&&ve.jsx("div",{className:"absolute top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center shadow-lg border border-white animate-pulse",style:{animationDuration:"2s"},children:s>99?"99+":s})]}),Fr=()=>{const[e,t]=a.useState(!1),[s,n]=a.useState(!1),[i,l]=a.useState(!1),[o,c]=a.useState(null),[d,m]=a.useState([]),[x,u]=a.useState(""),[g,h]=a.useState("all"),[p,f]=a.useState("all"),[b,y]=a.useState(""),[v,j]=a.useState(1),[N]=a.useState(5),[w,k]=a.useState(!1),[C,_]=a.useState(!1),[D,S]=a.useState("personalizado"),[I,T]=a.useState(""),[R,A]=a.useState(""),[E,P]=a.useState("todas"),[M,L]=a.useState("all"),[F,$]=a.useState(0),[B,O]=a.useState(0),z=a.useRef(new Set),{user:U}=ps(),G=ds(),{categories:q}=ys(U?.uid||"test-user-123");if(!G)return ve.jsx("div",{children:"Erro: Contexto nÃ£o encontrado"});const{transactions:V,loading:W,error:Y,loadTransactions:H,deleteTransaction:K,updateTransaction:X}=G;r.useEffect(()=>{if(!V||0===V.length)return;const e=V.filter(e=>{if(e.installments&&e.installments>1){return V.filter(t=>t.installmentGroupId===e.installmentGroupId).every(e=>!0===e.isPaid)}return!0===e.isPaid}),t=new Set(e.map(e=>e.id)),s=Array.from(t).filter(e=>!z.current.has(e));z.current=t;const a=e.length,r=Math.max(0,a-B+s.length);$(r)},[V,B]),r.useEffect(()=>{if("personalizado"!==D){const{start:e,end:t}=Q(D);T(e),A(t)}},[D]);const Z=e=>q.find(t=>t.name===e)||{name:e,color:"#9CA3AF",icon:"ðŸ“¦"},Q=e=>{const t=new Date,s=t.getFullYear(),a=t.getMonth();switch(e){case"este-mes":const e=new Date(s,a,1),t=new Date(s,a+1,0);return{start:e.toISOString().split("T")[0],end:t.toISOString().split("T")[0]};case"mes-passado":const r=new Date(s,a-1,1),n=new Date(s,a,0);return{start:r.toISOString().split("T")[0],end:n.toISOString().split("T")[0]};case"ultimos-3-meses":const i=new Date(s,a-2,1),l=new Date(s,a+1,0);return{start:i.toISOString().split("T")[0],end:l.toISOString().split("T")[0]};default:return{start:"",end:""}}},J=e=>{c(e),m([]),n(!0)},ee=()=>{const e=V.filter(e=>{if(e.installments&&e.installments>1){return V.filter(t=>t.installmentGroupId===e.installmentGroupId).every(e=>!0===e.isPaid)}return!0===e.isPaid}),t=e.length,s=new Set(e.map(e=>e.id));O(t),z.current=s,$(0),L("paid")},te=async e=>{try{const t=e.installmentGroupId||e.id.startsWith("installment_");let s=`Tem certeza que deseja excluir a transaÃ§Ã£o "${e.description}"?\n\nEsta aÃ§Ã£o nÃ£o pode ser desfeita.`;t&&e.installments>1&&(s=`Tem certeza que deseja excluir TODAS as ${e.installments} parcelas da transaÃ§Ã£o "${e.description}"?\n\nEsta aÃ§Ã£o nÃ£o pode ser desfeita e excluirÃ¡ todas as parcelas.`);if(window.confirm(s))if(t&&e.installments>1){const t=e.installmentGroupId||e.id,s=V.filter(e=>e.installmentGroupId===t);alert(`Excluindo ${s.length} parcelas...`);for(const e of s)await K(e.id);alert(`Todas as ${s.length} parcelas foram excluÃ­das com sucesso!`)}else await K(e.id),alert("TransaÃ§Ã£o excluÃ­da com sucesso!")}catch(t){alert("Erro ao excluir transaÃ§Ã£o. Tente novamente.");try{await H()}catch(s){}}},se=async()=>{if(o)try{if(o.isGrouped){const e=V.filter(e=>e.installmentGroupId===o.installmentGroupId);if(d.length>0){const t=e.filter(e=>d.includes(e.id));if(0===t.length)return void alert("Nenhuma fatura foi selecionada!");const s=t.filter(e=>!e.isPaid),a=t.filter(e=>e.isPaid);for(const e of s)await X(e.id,{isPaid:!0});for(const e of a)await X(e.id,{isPaid:!1})}else{const t=e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()).find(e=>!e.isPaid);if(!t)return void alert("ðŸŽ‰ Todas as faturas desta transaÃ§Ã£o jÃ¡ foram pagas!");await X(t.id,{isPaid:!0})}}else o.isPaid?await X(o.id,{isPaid:!1}):await X(o.id,{isPaid:!0});n(!1),c(null)}catch(e){}},ae=async()=>{if(o)try{if(d.length>0){const e=V.filter(e=>e.installmentGroupId===o.installmentGroupId&&d.includes(e.id)&&!0===e.isPaid);for(const t of e)await X(t.id,{isPaid:!1})}else{const e=V.filter(e=>e.installmentGroupId===o.installmentGroupId).sort((e,t)=>{const s=new Date(e.date).getTime();return new Date(t.date).getTime()-s}),t=e.filter(e=>!0===e.isPaid)[0];t&&await X(t.id,{isPaid:!1})}n(!1),c(null)}catch(e){}};let re=[...V.filter(e=>{const t=e.description.toLowerCase().includes(x.toLowerCase());let s=!0;"all"===g?s=!0:"receita"===g?s="receita"===e.type:"despesa"===g?s="despesa"===e.type:"parceladas"===g?s=!!(e.installments&&e.installments>1):"receitas-parceladas"===g&&(s="receita"===e.type&&!!(e.installments&&e.installments>1));const a="all"===p||e.category===p;let r=!0;if(!e.installmentGroupId||!e.installments||e.installments<=1)if(b)r=e.date.toISOString().split("T")[0]===b;else{const{start:t,end:s}=Q(D),a="personalizado"===D?I:t,n="personalizado"===D?R:s;if(a&&n){const t=e.date.toISOString().split("T")[0];r=t>=a&&t<=n}}return t&&s&&a&&r})];if("near-due"===M){const e=new Date,t=new Date(e.getTime()+6048e5);re=re.filter(s=>"despesa"===s.type&&(s.installments&&s.installments,!s.isPaid&&s.date>=e&&s.date<=t))}else if("high-expenses"===M){const e=re.filter(e=>"despesa"===e.type);re=e.sort((e,t)=>t.amount-e.amount).slice(0,5)}else if("high-revenues"===M){const e=re.filter(e=>"receita"===e.type);re=e.sort((e,t)=>t.amount-e.amount).slice(0,5)}else"paid"===M&&(re=re.filter(e=>(e.installments&&e.installments,!0===e.isPaid)));let ne=[];try{ne=Array.isArray(re)?((e,t)=>{try{const s=new Map,a=[];if(!Array.isArray(e))return[];const{start:r,end:n}=Q(D),i="personalizado"===D?I:r,l="personalizado"===D?R:n;e.forEach(e=>{if(e.installmentGroupId&&e.installments&&e.installments>1){s.has(e.installmentGroupId)||s.set(e.installmentGroupId,{id:e.installmentGroupId,description:e.description.replace(/ \(\d+\/\d+\)$/,""),category:e.category,type:e.type,installments:e.installments,installmentAmount:e.amount,totalAmount:e.totalInstallmentAmount||e.amount*e.installments,firstDate:e.date,lastDate:e.date,installmentGroupId:e.installmentGroupId,isGrouped:!0,paidInstallments:0,totalInstallments:1,allTransactions:[]});const t=s.get(e.installmentGroupId);t.allTransactions.push(e),e.date<t.firstDate&&(t.firstDate=e.date),e.date>t.lastDate&&(t.lastDate=e.date)}else a.push(e)}),s.forEach(e=>{const t=e.allTransactions.filter(e=>{if(b)return e.date.toISOString().split("T")[0]===b;if(i&&l){const t=e.date.toISOString().split("T")[0];return t>=i&&t<=l}return!0});0!==t.length?(e.paidInstallments=t.filter(e=>!0===e.isPaid).length,e.totalInstallments=t.length,t.length>0&&(e.firstDate=t.reduce((e,t)=>t.date<e.date?t:e).date,e.lastDate=t.reduce((e,t)=>t.date>e.date?t:e).date),delete e.allTransactions):e.shouldRemove=!0}),s.forEach((e,t)=>{e.shouldRemove&&s.delete(t)});const o=Array.from(s.values());if("paid"===t){const e=a.filter(e=>e.isPaid);return[...o.filter(e=>e.isGrouped?e.paidInstallments===e.totalInstallments:e.isPaid),...e]}return[...o,...a]}catch(s){return[]}})(re,M):[]}catch(xe){ne=[]}const ie=Array.isArray(ne)?ne:[],le=Math.ceil(ie.length/N),oe=(v-1)*N,ce=oe+N,de=ie.slice(oe,ce);r.useEffect(()=>{j(1)},[x,g,p,b]),r.useEffect(()=>{if("personalizado"!==D){const{start:e,end:t}=Q(D);T(e||""),A(t||"")}let e="all";"receitas"===E?e="receita":"despesas"===E?e="despesa":"contas-parceladas"===E?e="parceladas":"receitas-parceladas"===E&&(e="receitas-parceladas"),h(e),"personalizado"!==D&&y("")},[D,E]),r.useEffect(()=>{"personalizado"===D&&I&&R&&y("")},[I,R,D]);const me=e=>{j(e)};return ve.jsxs("div",{className:"bg-white p-3 lg:p-6 rounded-lg shadow border",children:[ve.jsxs("div",{className:"mb-4 lg:mb-6",children:[ve.jsxs("div",{className:"flex flex-row items-center justify-between gap-1 lg:gap-3 mb-3 lg:mb-4",children:[ve.jsx("h3",{className:"text-base lg:text-xl font-semibold text-gray-900",children:"TransaÃ§Ãµes"}),ve.jsxs("div",{className:"flex items-center gap-2",children:[ve.jsx("button",{onClick:()=>_(!C),className:"lg:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:ve.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),ve.jsxs("button",{onClick:()=>l(!0),className:"lg:hidden flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[ve.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"ConfiguraÃ§Ãµes",className:"w-4 h-4"}),ve.jsx("span",{children:"Filtros AvanÃ§ados"})]}),ve.jsxs("div",{className:"relative max-w-[200px] lg:max-w-none hidden lg:block",children:[ve.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"Buscar",className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),ve.jsx("input",{type:"text",placeholder:"Buscar...",value:x,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]})]}),C&&ve.jsx("div",{className:"mb-4 lg:hidden",children:ve.jsxs("div",{className:"relative",children:[ve.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"Buscar",className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),ve.jsx("input",{type:"text",placeholder:"Buscar transaÃ§Ãµes...",value:x,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),ve.jsx("button",{onClick:()=>_(!1),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:ve.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),b&&ve.jsx("div",{className:"mb-3 lg:mb-4 p-2 lg:p-3 bg-blue-50 border border-blue-200 rounded-lg",children:ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2",children:[ve.jsx("svg",{className:"w-3 h-3 lg:w-4 lg:h-4 text-blue-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),ve.jsxs("span",{className:"text-xs lg:text-sm font-medium text-blue-800",children:["Filtrando por: ",new Date(b).toLocaleDateString("pt-BR")]}),ve.jsxs("span",{className:"text-xs lg:text-sm text-blue-600",children:["(",ie.length," transaÃ§Ã£o",1!==ie.length?"Ãµes":""," encontrada",1!==ie.length?"s":"",")"]})]})}),ve.jsxs("div",{className:"space-y-1 lg:space-y-3 mb-2 lg:mb-4",children:[ve.jsx("div",{className:"lg:hidden",children:ve.jsxs("div",{className:"flex overflow-x-auto scrollbar-hide space-x-2 pb-2",children:[ve.jsx("button",{onClick:()=>L("all"),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 "+("all"===M?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Todas"}),ve.jsx(Lr,{onClick:ee,notificationCount:F,className:"flex-shrink-0 px-4 py-2 text-sm rounded-full "+("paid"===M?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200")}),ve.jsx("button",{onClick:()=>L("near-due"),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 "+("near-due"===M?"bg-orange-100 text-orange-700 border border-orange-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Perto de Vencer"}),ve.jsx("button",{onClick:()=>L("high-expenses"),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 "+("high-expenses"===M?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Maiores Despesas"}),ve.jsx("button",{onClick:()=>L("high-revenues"),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 "+("high-revenues"===M?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Maiores Receitas"})]})}),ve.jsxs("div",{className:"hidden lg:flex flex-wrap items-center gap-2",children:[ve.jsx("button",{onClick:()=>L("all"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 "+("all"===M?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Todas"}),ve.jsx(Lr,{onClick:ee,notificationCount:F,className:"px-3 py-1.5 text-xs "+("paid"===M?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200")}),ve.jsx("button",{onClick:()=>L("near-due"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 "+("near-due"===M?"bg-orange-100 text-orange-700 border border-orange-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Perto de Vencer"}),ve.jsx("button",{onClick:()=>L("high-expenses"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 "+("high-expenses"===M?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Maiores Despesas"}),ve.jsx("button",{onClick:()=>L("high-revenues"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 "+("high-revenues"===M?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Maiores Receitas"}),ve.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[ve.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"ConfiguraÃ§Ãµes",className:"w-4 h-4"}),ve.jsx("span",{children:"Filtros"})]})]})]})]}),W&&ve.jsxs("div",{className:"flex items-center justify-center py-12",children:[ve.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),ve.jsx("span",{className:"ml-2 text-gray-600",children:"Carregando transaÃ§Ãµes..."})]}),w&&ve.jsxs("div",{className:"flex items-center justify-center py-12",children:[ve.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),ve.jsx("span",{className:"ml-2 text-gray-600",children:"Criando transaÃ§Ã£o..."})]}),Y&&ve.jsx("div",{className:"text-center py-12 text-red-600",children:ve.jsxs("p",{children:["Erro ao carregar transaÃ§Ãµes: ",Y]})}),!W&&!Y&&0===ie.length&&ve.jsxs("div",{className:"text-center py-12 text-gray-500",children:[ve.jsx("p",{children:"near-due"===M?"Nenhuma transaÃ§Ã£o encontrada nos prÃ³ximos 7 dias":"high-expenses"===M?"Nenhuma despesa encontrada":"high-revenues"===M?"Nenhuma receita encontrada":"Nenhuma transaÃ§Ã£o encontrada"}),ve.jsx("p",{className:"text-sm mt-2",children:"near-due"===M?"NÃ£o hÃ¡ despesas vencendo nos prÃ³ximos 7 dias":"high-expenses"===M?"NÃ£o hÃ¡ despesas para mostrar":"high-revenues"===M?"NÃ£o hÃ¡ receitas para mostrar":'Clique em "Nova TransaÃ§Ã£o" para adicionar uma'})]}),!W&&!Y&&ie.length>0&&ve.jsx("div",{className:"lg:hidden space-y-3",children:de.map(e=>{const t=Z(e.category);return e.isGrouped?ve.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[ve.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ve.jsxs("div",{className:"flex items-center space-x-3",children:[ve.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl",style:{backgroundColor:`${t.color}20`},children:ve.jsx("span",{className:"text-lg",children:t.icon})}),ve.jsxs("div",{className:"flex-1 min-w-0",children:[ve.jsx("h4",{className:"text-sm font-semibold text-gray-900 truncate",children:e.description}),ve.jsx("p",{className:"text-xs text-gray-500",children:t.name})]})]}),ve.jsx("button",{onClick:()=>te(e),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:ve.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),ve.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"}),ve.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:[e.installments,"x"]})]}),ve.jsx("button",{onClick:()=>J(e),className:"inline-flex px-3 py-1 text-xs font-medium rounded-full transition-colors "+(e.paidInstallments===e.totalInstallments?"bg-green-500 text-white":e.paidInstallments>0?"bg-yellow-500 text-white":"bg-red-500 text-white"),children:e.paidInstallments===e.totalInstallments?"Pago":e.paidInstallments>0?"Parcial":"Pendente"})]}),ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsxs("div",{className:"text-xs text-gray-500",children:[e.paidInstallments,"/",e.totalInstallments," parcelas"]}),ve.jsxs("div",{className:"text-sm font-semibold "+("receita"===e.type?"text-green-600":"text-red-600"),children:["receita"===e.type?"+":"-","R$ ",e.totalAmount.toFixed(2)]})]})]},e.id):ve.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[ve.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ve.jsxs("div",{className:"flex items-center space-x-3",children:[ve.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl",style:{backgroundColor:`${t.color}20`},children:ve.jsx("span",{className:"text-lg",children:t.icon})}),ve.jsxs("div",{className:"flex-1 min-w-0",children:[ve.jsx("h4",{className:"text-sm font-semibold text-gray-900 truncate",children:e.description}),ve.jsx("p",{className:"text-xs text-gray-500",children:t.name})]})]}),ve.jsx("button",{onClick:()=>te(e),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:ve.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),ve.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ve.jsx("div",{className:"flex items-center space-x-2",children:ve.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"})}),ve.jsx("button",{onClick:()=>J(e),className:"inline-flex px-3 py-1 text-xs font-medium rounded-full transition-colors "+(e.isPaid?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.isPaid?"Pago":"Pendente"})]}),ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("div",{className:"text-xs text-gray-500",children:e.date.toLocaleDateString("pt-BR")}),ve.jsxs("div",{className:"text-sm font-semibold "+("receita"===e.type?"text-green-600":"text-red-600"),children:["receita"===e.type?"+":"-","R$ ",e.amount.toFixed(2)]})]})]},e.id)})}),!W&&!Y&&ie.length>0&&ve.jsx("div",{className:"hidden lg:block transactions-container overflow-x-hidden",children:ve.jsx("div",{className:"lg:px-2 lg:px-0",children:ve.jsxs("table",{className:"w-full transactions-table",children:[ve.jsx("thead",{children:ve.jsxs("tr",{className:"border-b border-gray-200",children:[ve.jsx("th",{className:"text-left py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm hidden lg:table-cell",children:"Data"}),ve.jsx("th",{className:"text-left py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm hidden lg:table-cell",children:"DescriÃ§Ã£o"}),ve.jsx("th",{className:"text-left py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm",children:"Categoria"}),ve.jsx("th",{className:"text-left py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm hidden lg:table-cell",children:"Tipo"}),ve.jsx("th",{className:"text-center py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm hidden lg:table-cell",children:"Parcelado"}),ve.jsx("th",{className:"text-center py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm",children:"Status"}),ve.jsx("th",{className:"text-right py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm",children:"Valor"})]})}),ve.jsx("tbody",{children:de.map(e=>{const t=Z(e.category);return e.isGrouped?ve.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-[10px] lg:text-sm text-gray-600 hidden lg:table-cell",children:ve.jsxs("div",{className:"flex flex-col",children:[ve.jsx("span",{children:e.firstDate.toLocaleDateString("pt-BR")}),e.firstDate.getTime()!==e.lastDate.getTime()&&ve.jsxs("span",{className:"text-[8px] lg:text-xs text-gray-400",children:["atÃ© ",e.lastDate.toLocaleDateString("pt-BR")]})]})}),ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-[10px] lg:text-sm text-gray-900 font-medium hidden lg:table-cell",children:ve.jsx("div",{className:"flex flex-col",children:ve.jsx("span",{className:"truncate max-w-[80px] lg:max-w-none",children:e.description})})}),ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4",children:ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsxs("div",{className:"flex items-center space-x-1 lg:space-x-2",children:[ve.jsx("div",{className:"flex h-5 w-5 lg:h-8 lg:w-8 items-center justify-center rounded-xl",style:{backgroundColor:`${t.color}20`},children:ve.jsx("span",{className:"text-[10px] lg:text-sm",children:t.icon})}),ve.jsx("span",{className:"text-[10px] lg:text-sm font-bold truncate max-w-[60px] lg:max-w-none "+("receita"===e.type?"text-green-600":"text-red-600"),children:t.name})]}),ve.jsx("div",{className:"flex items-center ml-2",children:ve.jsx("button",{onClick:()=>te(e),className:"p-0.5 lg:p-1.5 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir transaÃ§Ã£o",children:ve.jsx("svg",{className:"w-3 h-3 lg:w-3.5 lg:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})}),ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 hidden lg:table-cell",children:ve.jsx("span",{className:"inline-flex px-1 lg:px-2 py-0.5 lg:py-1 text-[8px] lg:text-xs font-medium rounded-full "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"})}),ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-center hidden lg:table-cell",children:ve.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-0 lg:space-y-0 lg:space-x-2",children:[ve.jsxs("span",{className:"inline-flex px-1 lg:px-2 py-0.5 lg:py-1 text-[8px] lg:text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:[e.installments,"x"]}),ve.jsxs("span",{className:"text-[8px] lg:text-xs text-gray-600 font-medium",children:["R$ ",e.installmentAmount.toFixed(2)]})]})}),ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-center",children:ve.jsxs("div",{className:"flex flex-col items-center space-y-0 lg:space-y-2",children:[ve.jsx("button",{onClick:()=>J(e),className:"inline-flex px-1 lg:px-2 py-0.5 lg:py-1 text-[8px] lg:text-xs font-medium rounded-full transition-colors "+(e.paidInstallments===e.totalInstallments?"bg-green-500 text-white hover:bg-green-600 intense-pulse-green ring-2 ring-green-300":e.paidInstallments>0?"bg-yellow-500 text-white hover:bg-yellow-600 intense-pulse-yellow ring-2 ring-yellow-300":"bg-red-500 text-white hover:bg-red-600 intense-pulse ring-2 ring-red-300"),children:e.paidInstallments===e.totalInstallments?"Pago":e.paidInstallments>0?"Parcial":"Pendente"}),ve.jsxs("div",{className:"text-[8px] lg:text-xs text-gray-500",children:[ve.jsxs("span",{className:"lg:hidden",children:[e.paidInstallments,"/",e.totalInstallments," - R$ ",e.installmentAmount.toFixed(2)]}),ve.jsxs("span",{className:"hidden lg:inline",children:[e.paidInstallments,"/",e.totalInstallments]})]})]})}),ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-right text-[9px] lg:text-sm font-semibold "+("receita"===e.type?"text-green-600":"text-red-600"),children:ve.jsxs("div",{className:"flex flex-col",children:[ve.jsxs("span",{children:["receita"===e.type?"+":"-","R$ ",e.totalAmount.toFixed(2)]}),ve.jsxs("span",{className:"text-[8px] lg:text-xs text-gray-500 hidden lg:inline",children:["Restante: R$ ",Math.max(0,e.totalAmount-e.installmentAmount*e.paidInstallments).toFixed(2)]})]})})]},e.id):ve.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-[10px] lg:text-sm text-gray-600 hidden lg:table-cell",children:e.date.toLocaleDateString("pt-BR")}),ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-[10px] lg:text-sm text-gray-900 font-medium hidden lg:table-cell",children:ve.jsx("div",{className:"flex flex-col",children:ve.jsx("span",{className:"truncate max-w-[80px] lg:max-w-none",children:e.description})})}),ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4",children:ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsxs("div",{className:"flex items-center space-x-1 lg:space-x-2",children:[ve.jsx("div",{className:"flex h-5 w-5 lg:h-8 lg:w-8 items-center justify-center rounded-xl",style:{backgroundColor:`${t.color}20`},children:ve.jsx("span",{className:"text-[10px] lg:text-sm",children:t.icon})}),ve.jsx("span",{className:"text-[10px] lg:text-sm font-bold truncate max-w-[60px] lg:max-w-none "+("receita"===e.type?"text-green-600":"text-red-600"),children:t.name})]}),ve.jsx("div",{className:"flex items-center ml-2",children:ve.jsx("button",{onClick:()=>te(e),className:"p-0.5 lg:p-1.5 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir transaÃ§Ã£o",children:ve.jsx("svg",{className:"w-3 h-3 lg:w-3.5 lg:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})}),ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 hidden lg:table-cell",children:ve.jsx("span",{className:"inline-flex px-1 lg:px-2 py-0.5 lg:py-1 text-[8px] lg:text-xs font-medium rounded-full "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"})}),ve.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-center",children:ve.jsx("div",{className:"flex flex-col items-center space-y-0 lg:space-y-2",children:ve.jsx("button",{onClick:()=>J(e),className:"inline-flex px-1 lg:px-3 py-0.5 lg:py-1 text-[8px] lg:text-xs font-medium rounded-full transition-colors "+(e.isPaid?"bg-green-500 text-white hover:bg-green-600 intense-pulse-green ring-2 ring-green-300":"bg-red-500 text-white hover:bg-red-600 intense-pulse ring-2 ring-red-300"),children:e.isPaid?"Pago":"Pendente"})})}),ve.jsxs("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-right text-[9px] lg:text-sm font-semibold "+("receita"===e.type?"text-green-600":"text-red-600"),children:["receita"===e.type?"+":"-","R$ ",e.amount.toFixed(2)]})]},e.id)})})]})})}),!W&&!Y&&ie.length>N&&ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mt-4 lg:mt-6 pt-3 lg:pt-4 border-t border-gray-200 space-y-3 sm:space-y-0",children:[ve.jsxs("div",{className:"text-xs lg:text-sm text-gray-600 text-center sm:text-left",children:["Mostrando ",oe+1,"-",Math.min(ce,ie.length)," de ",ie.length," transaÃ§Ãµes"]}),ve.jsxs("div",{className:"flex items-center justify-center space-x-1 lg:space-x-2",children:[ve.jsx("button",{onClick:()=>{v>1&&j(v-1)},disabled:1===v,className:"p-1.5 lg:p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ve.jsx("svg",{className:"w-3 h-3 lg:w-4 lg:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),ve.jsx("div",{className:"flex items-center space-x-1",children:(()=>{const e=window.innerWidth<640?3:le,t=Math.max(1,v-Math.floor(e/2)),s=Math.min(le,t+e-1),a=[];t>1&&(a.push(ve.jsx("button",{onClick:()=>me(1),className:"w-6 h-6 lg:w-8 lg:h-8 rounded-lg text-[10px] lg:text-sm font-medium transition-colors text-gray-600 hover:bg-gray-100",children:"1"},1)),t>2&&a.push(ve.jsx("span",{className:"text-gray-400",children:"..."},"ellipsis1")));for(let r=t;r<=s;r++)a.push(ve.jsx("button",{onClick:()=>me(r),className:"w-6 h-6 lg:w-8 lg:h-8 rounded-lg text-[10px] lg:text-sm font-medium transition-colors "+(v===r?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:r},r));return s<le&&(s<le-1&&a.push(ve.jsx("span",{className:"text-gray-400",children:"..."},"ellipsis2")),a.push(ve.jsx("button",{onClick:()=>me(le),className:"w-6 h-6 lg:w-8 lg:h-8 rounded-lg text-[10px] lg:text-sm font-medium transition-colors text-gray-600 hover:bg-gray-100",children:le},le))),a})()}),ve.jsx("button",{onClick:()=>{v<le&&j(v+1)},disabled:v===le,className:"p-1.5 lg:p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ve.jsx("svg",{className:"w-3 h-3 lg:w-4 lg:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),ve.jsx("button",{onClick:()=>{t(!0)},className:"lg:hidden fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all duration-200 hover:scale-105 z-40",children:ve.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ve.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),ve.jsx(Mr,{isOpen:e,onClose:()=>{t(!1),k(!1)},userId:U?.uid||"test-user-123",onTransactionCreating:e=>k(e)}),s&&o&&ve.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:ve.jsxs("div",{className:"bg-white rounded-lg p-4 lg:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[ve.jsxs("div",{className:"flex items-center mb-4",children:[ve.jsx("div",{className:"flex-shrink-0",children:o.isPaid?ve.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:ve.jsx("span",{className:"text-yellow-600 text-lg",children:"âš ï¸"})}):ve.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:ve.jsx("span",{className:"text-green-600 text-lg",children:"âœ…"})})}),ve.jsx("div",{className:"ml-3",children:ve.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o.isPaid?"receita"===o.type?"Desmarcar Recebimento":"Desmarcar Pagamento":"receita"===o.type?"Confirmar Recebimento":"Confirmar Pagamento"})})]}),ve.jsxs("div",{className:"mb-6",children:[ve.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[ve.jsx("strong",{children:"TransaÃ§Ã£o:"})," ",o.description]}),ve.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[ve.jsx("strong",{children:"Valor:"})," R$ ",o.amount?.toFixed(2)||o.totalAmount?.toFixed(2)]}),ve.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[ve.jsx("strong",{children:"Data:"})," ",o.date?.toLocaleDateString("pt-BR")||o.firstDate?.toLocaleDateString("pt-BR")]}),o.isGrouped&&ve.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[ve.jsx("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"ðŸ“‹ TransaÃ§Ã£o Parcelada"}),ve.jsxs("p",{className:"text-xs text-blue-600",children:["Parcelas: ",o.paidInstallments,"/",o.totalInstallments," pagas"]}),ve.jsxs("p",{className:"text-xs text-blue-600",children:["Valor por parcela: R$ ",o.installmentAmount?.toFixed(2)]}),ve.jsxs("div",{className:"mt-3",children:[ve.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ve.jsx("label",{className:"block text-xs font-medium text-blue-800",children:"Escolha quais faturas processar:"}),ve.jsxs("div",{className:"flex space-x-2",children:[ve.jsx("button",{type:"button",onClick:()=>{const e=V.filter(e=>e.installmentGroupId===o.installmentGroupId).map(e=>e.id);m(t=>e)},className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Selecionar Todas"}),ve.jsx("button",{type:"button",onClick:()=>{m(e=>[])},className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Limpar SeleÃ§Ã£o"})]})]}),ve.jsx("div",{className:"space-y-2",children:V.filter(e=>e.installmentGroupId===o.installmentGroupId).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()).map(e=>ve.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[ve.jsx("input",{type:"checkbox",value:e.id,checked:d.includes(e.id),onChange:t=>{m(s=>t.target.checked?[...s,e.id]:s.filter(t=>t!==e.id))},className:"text-blue-600 focus:ring-blue-500"}),ve.jsxs("div",{className:"flex-1",children:[ve.jsxs("span",{className:"text-xs "+(e.isPaid?"text-gray-500":"text-blue-700"),children:[e.description," - ",e.date.toLocaleDateString("pt-BR")]}),ve.jsx("span",{className:"ml-2 text-xs px-2 py-1 rounded-full "+(e.isPaid?"bg-green-500 text-white intense-pulse-green ring-2 ring-green-300":"bg-red-500 text-white intense-pulse ring-2 ring-red-300"),children:e.isPaid?"Paga":"Pendente"})]})]},e.id))}),d.length>0&&ve.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:[d.length," fatura(s) selecionada(s) -",(()=>{const e=V.filter(e=>e.installmentGroupId===o.installmentGroupId&&d.includes(e.id)),t=e.filter(e=>!e.isPaid).length,s=e.filter(e=>e.isPaid).length;let a=[];return t>0&&a.push("receita"===o.type?`${t} pode(m) ser recebida(s)`:`${t} pode(m) ser paga(s)`),s>0&&a.push("receita"===o.type?`${s} pode(m) ser desmarcada(s) como nÃ£o recebida(s)`:`${s} pode(m) ser desmarcada(s) como nÃ£o paga(s)`),` ${a.join(", ")}`})()]})]})]})]}),ve.jsxs("div",{className:"space-y-3",children:[ve.jsx("div",{className:"flex space-x-3",children:(()=>{const e=o.isGrouped?V.filter(e=>e.installmentGroupId===o.installmentGroupId&&d.includes(e.id)):[o],t=e.some(e=>!e.isPaid),s=e.some(e=>e.isPaid);return ve.jsxs(ve.Fragment,{children:[ve.jsx("button",{onClick:se,disabled:o.isGrouped&&d.length>0&&!t,className:"flex-1 px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors "+(o.isPaid?"bg-yellow-600 hover:bg-yellow-700":o.isGrouped&&d.length>0&&!t?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:o.isPaid?"receita"===o.type?"Marcar como NÃ£o Recebido":"Marcar como NÃ£o Pago":o.isGrouped?d.length>0?"receita"===o.type?`Receber ${e.filter(e=>!e.isPaid).length} Parcela(s)`:`Pagar ${e.filter(e=>!e.isPaid).length} Fatura(s)`:"receita"===o.type?"Receber PrÃ³xima Parcela":"Pagar PrÃ³xima Fatura":"receita"===o.type?"Confirmar Recebimento":"Confirmar Pagamento"}),o.isGrouped&&ve.jsx("button",{onClick:ae,disabled:d.length>0&&!s,className:"flex-1 px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors "+(d.length>0&&!s?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"),children:d.length>0?"receita"===o.type?`Desmarcar ${e.filter(e=>e.isPaid).length} Parcela(s)`:`Desmarcar ${e.filter(e=>e.isPaid).length} Fatura(s)`:"receita"===o.type?"Parcela NÃ£o Recebida":"Fatura NÃ£o Paga"})]})})()}),ve.jsx("button",{onClick:()=>{n(!1),c(null)},className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancelar"})]})]})}),i&&ve.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:ve.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[ve.jsxs("div",{className:"flex items-center justify-between p-4 lg:p-6 border-b border-gray-200",children:[ve.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Filtros"}),ve.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:ve.jsx("span",{className:"text-lg lg:text-xl",children:"Ã—"})})]}),ve.jsxs("div",{className:"p-4 lg:p-6 space-y-3 lg:space-y-4",children:[ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("label",{className:"text-sm font-medium text-gray-700",children:"PerÃ­odo"}),ve.jsxs("select",{value:D,onChange:e=>S(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[ve.jsx("option",{value:"personalizado",children:"Personalizado"}),ve.jsx("option",{value:"este-mes",children:"Este mÃªs"}),ve.jsx("option",{value:"mes-passado",children:"MÃªs passado"}),ve.jsx("option",{value:"ultimos-3-meses",children:"Ãšltimos 3 meses"})]})]}),ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("label",{className:"text-sm font-medium text-gray-700",children:"De"}),ve.jsxs("div",{className:"relative",children:[ve.jsx("input",{id:"start-date-input",type:"date",disabled:"personalizado"!==D,value:I,onChange:e=>T(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px] "+("personalizado"!==D?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"")}),ve.jsx("button",{type:"button",onClick:()=>{if("personalizado"===D){const e=document.getElementById("start-date-input");e?.showPicker()}},className:"absolute right-3 top-1/2 transform -translate-y-1/2 "+("personalizado"!==D?"text-gray-400 cursor-not-allowed":"text-gray-400 hover:text-gray-600 cursor-pointer"),disabled:"personalizado"!==D,children:"ðŸ“…"})]})]}),ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("label",{className:"text-sm font-medium text-gray-700",children:"AtÃ©"}),ve.jsxs("div",{className:"relative",children:[ve.jsx("input",{id:"end-date-input",type:"date",disabled:"personalizado"!==D,value:R,onChange:e=>A(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px] "+("personalizado"!==D?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"")}),ve.jsx("button",{type:"button",onClick:()=>{if("personalizado"===D){const e=document.getElementById("end-date-input");e?.showPicker()}},className:"absolute right-3 top-1/2 transform -translate-y-1/2 "+("personalizado"!==D?"text-gray-400 cursor-not-allowed":"text-gray-400 hover:text-gray-600 cursor-pointer"),disabled:"personalizado"!==D,children:"ðŸ“…"})]})]}),ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipo"}),ve.jsxs("select",{value:E,onChange:e=>P(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[ve.jsx("option",{value:"todas",children:"Todas"}),ve.jsx("option",{value:"receitas",children:"Receitas"}),ve.jsx("option",{value:"despesas",children:"Despesas"}),ve.jsx("option",{value:"contas-parceladas",children:"Parceladas"}),ve.jsx("option",{value:"receitas-parceladas",children:"Rec. Parceladas"})]})]})]}),ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 lg:p-6 border-t border-gray-200 space-y-2 sm:space-y-0 sm:space-x-3",children:[ve.jsxs("button",{onClick:()=>{S("personalizado"),T(""),A(""),P("todas"),h("all"),y(""),l(!1)},className:"flex items-center justify-center space-x-2 px-4 py-2 text-xs lg:text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors",children:[ve.jsx("span",{children:"â™»ï¸"}),ve.jsx("span",{children:"Limpar filtros"})]}),ve.jsxs("button",{onClick:()=>l(!1),className:"flex items-center justify-center space-x-2 px-6 py-2 text-xs lg:text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-lg hover:bg-blue-700 hover:border-blue-700 transition-colors shadow-md",children:[ve.jsx("span",{children:"âœ…"}),ve.jsx("span",{children:"Aplicar"})]})]})]})})]})};function $r(){const[e,t]=a.useState(25e3),[s,r]=a.useState(!1),[n,i]=a.useState(""),[l,o]=a.useState(1),[c,d]=a.useState(1),{transactions:m,loading:x}=ds();console.log("ðŸ”„ [Budgets] Componente renderizado com",m.length,"transaÃ§Ãµes");const u=a.useMemo(()=>{if(console.log("ðŸ”„ [Budgets] Iniciando processamento do GRÃFICO com",m.length,"transaÃ§Ãµes"),!m||0===m.length)return console.log("ðŸ“Š [Budgets] Nenhuma transaÃ§Ã£o encontrada"),[];const e=m;console.log("ðŸ“Š [Budgets] Usando TODAS as transaÃ§Ãµes para GRÃFICO:",{total:e.length});const t=e.reduce((e,t)=>{if(!t||!t.date)return console.warn("âš ï¸ [Budgets] TransaÃ§Ã£o sem data vÃ¡lida no grÃ¡fico:",t),e;const s=new Date(t.date),a=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;return e[a]||(e[a]={receitas:0,despesas:0}),"receita"===t.type?e[a].receitas+=t.amount:e[a].despesas+=t.amount,e},{});return Object.entries(t).map(([e,t])=>{const s={date:e,receitas:t.receitas,despesas:t.despesas,saldo:t.receitas-t.despesas};return console.log("ðŸ“Š [AreaChartSemiFilled] Item processado:",{dateString:e,dateObject:new Date(e),localString:new Date(e).toLocaleDateString("pt-BR"),receitas:t.receitas,despesas:t.despesas}),s}).sort((e,t)=>e.date.localeCompare(t.date))},[m]),g=a.useMemo(()=>{if(!m||0===m.length)return[];const e=m.filter(e=>!0!==e.isPaid).reduce((e,t)=>{if(!t||!t.date)return e;const s=new Date(t.date),a=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;return e[a]||(e[a]={receitas:0,despesas:0}),"receita"===t.type?e[a].receitas+=t.amount:e[a].despesas+=t.amount,e},{}),t=Object.entries(e).map(([e,t])=>({date:e,receitas:t.receitas,despesas:t.despesas,saldo:t.receitas-t.despesas})).sort((e,t)=>e.date.localeCompare(t.date));return console.log("ðŸ“Š [MovimentaÃ§Ã£o DiÃ¡ria] Resultado final apÃ³s filtragem:",t),console.log("ðŸ“Š [MovimentaÃ§Ã£o DiÃ¡ria] Valores calculados:",t.map(e=>({data:e.date,receitas:e.receitas,despesas:e.despesas,saldo:e.saldo}))),t.length>0&&console.log("ðŸ” [DEBUG] Primeiro item da tabela:",{data:t[0].date,receitas:t[0].receitas,despesas:t[0].despesas,saldo:t[0].saldo,tipo:typeof t[0].saldo}),t},[m]),h=(new Date).getMonth(),p=(new Date).getFullYear(),f=a.useMemo(()=>{const e=m.filter(e=>{if(!e||!e.date)return!1;const t=new Date(e.date);return t.getMonth()===h&&t.getFullYear()===p}),t=e.filter(e=>"receita"===e.type).reduce((e,t)=>e+t.amount,0),s=e.filter(e=>"despesa"===e.type).reduce((e,t)=>e+t.amount,0);return{receitas:t,despesas:s,saldo:t-s}},[m,h,p]),b=a.useMemo(()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()-e.getDate()},[]),y=a.useMemo(()=>{if(b<=0)return 0;const t=e-f.receitas;return t>0?Math.ceil(t/b):0},[e,f.receitas,b]),v=f.receitas,j=f.despesas,N=f.saldo,w=N>=0,k=Math.ceil(u.length/5),C=5*(l-1),_=C+5;u.slice(C,_);const D=e=>{o(e)},S=e=>{d(e)},I=()=>{r(!0),i(e.toString())},T=()=>{const e=parseFloat(n.replace(/[^\d,]/g,"").replace(",","."));!isNaN(e)&&e>0&&(t(e),r(!1),i(""))},R=()=>{r(!1),i("")};return x?ve.jsx("div",{className:"space-y-6",children:ve.jsx("div",{className:"flex items-center justify-center h-64",children:ve.jsxs("div",{className:"text-center",children:[ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),ve.jsx("p",{className:"text-gray-500",children:"Carregando dados do dashboard..."})]})})}):m&&0!==m.length?ve.jsxs("div",{className:"space-y-6",children:[ve.jsxs("div",{className:"lg:hidden space-y-3",children:[ve.jsx("div",{className:"overflow-x-auto scrollbar-hide mobile-carousel mobile-carousel-container",children:ve.jsx("div",{className:"flex space-x-3 pb-2",style:{width:"max-content"},children:ve.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"280px"},children:ve.jsxs("div",{className:"flex items-center",children:[ve.jsx("div",{className:"flex-shrink-0",children:ve.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-blue-600 text-lg",children:"ðŸŽ¯"})})}),ve.jsxs("div",{className:"ml-4 flex-1",children:[ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Meta Mensal"}),!s&&ve.jsx("button",{onClick:I,className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"Editar"})]}),s?ve.jsxs("div",{className:"space-y-2",children:[ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("span",{className:"text-sm text-gray-500",children:"R$"}),ve.jsx("input",{type:"text",value:n,onChange:e=>i(e.target.value),className:"text-lg font-semibold text-gray-900 border border-gray-300 rounded px-2 py-1 w-24",placeholder:"25000",autoFocus:!0})]}),ve.jsxs("div",{className:"flex space-x-2",children:[ve.jsx("button",{onClick:T,className:"bg-blue-600 text-white text-xs px-3 py-1 rounded hover:bg-blue-700",children:"Salvar"}),ve.jsx("button",{onClick:R,className:"bg-gray-300 text-gray-700 text-xs px-3 py-1 rounded hover:bg-gray-400",children:"Cancelar"})]})]}):ve.jsxs(ve.Fragment,{children:[ve.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["R$ ",v.toLocaleString("pt-BR")," / R$ ",e.toLocaleString("pt-BR")]}),ve.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:ve.jsx("div",{className:"h-2 rounded-full "+(v/e*100<33?"bg-yellow-500":v/e*100<66?"bg-blue-600":"bg-green-500"),style:{width:`${Math.min(v/e*100,100)}%`}})}),ve.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(v/e*100),"% concluÃ­do"]})]})]})]})})})}),ve.jsx("div",{className:"overflow-x-auto scrollbar-hide mobile-carousel mobile-carousel-container",children:ve.jsxs("div",{className:"flex space-x-3 pb-2",style:{width:"max-content"},children:[ve.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"180px"},children:ve.jsxs("div",{className:"flex items-center",children:[ve.jsx("div",{className:"flex-shrink-0",children:ve.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-orange-600 text-lg",children:"ðŸ“…"})})}),ve.jsxs("div",{className:"ml-4",children:[ve.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Dias Restantes"}),ve.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[b," dias"]}),ve.jsx("p",{className:"text-xs text-gray-500",children:"atÃ© o fim do mÃªs"})]})]})}),ve.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"180px"},children:ve.jsxs("div",{className:"flex items-center",children:[ve.jsx("div",{className:"flex-shrink-0",children:ve.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-green-600 text-lg",children:"ðŸ“Š"})})}),ve.jsxs("div",{className:"ml-4",children:[ve.jsx("p",{className:"text-sm font-medium text-gray-500",children:"MÃ©dia DiÃ¡ria"}),ve.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["R$ ",y.toLocaleString("pt-BR")]}),ve.jsx("p",{className:"text-xs text-gray-500",children:"necessÃ¡ria para meta"})]})]})}),ve.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"180px"},children:ve.jsxs("div",{className:"flex items-center",children:[ve.jsx("div",{className:"flex-shrink-0",children:ve.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-purple-600 text-lg",children:"ðŸ“ˆ"})})}),ve.jsxs("div",{className:"ml-4",children:[ve.jsx("p",{className:"text-sm font-medium text-gray-500",children:"TendÃªncia"}),ve.jsx("p",{className:"text-lg font-semibold text-green-600",children:"â†—ï¸ Crescendo"}),ve.jsx("p",{className:"text-xs text-gray-500",children:"+15% vs mÃªs anterior"})]})]})})]})})]}),ve.jsxs("div",{className:"hidden lg:grid grid-cols-4 gap-4",children:[ve.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:ve.jsxs("div",{className:"flex items-center",children:[ve.jsx("div",{className:"flex-shrink-0",children:ve.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-blue-600 text-lg",children:"ðŸŽ¯"})})}),ve.jsxs("div",{className:"ml-4 flex-1",children:[ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Meta Mensal"}),!s&&ve.jsx("button",{onClick:I,className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"Editar"})]}),s?ve.jsxs("div",{className:"space-y-2",children:[ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("span",{className:"text-sm text-gray-500",children:"R$"}),ve.jsx("input",{type:"text",value:n,onChange:e=>i(e.target.value),className:"text-lg font-semibold text-gray-900 border border-gray-300 rounded px-2 py-1 w-24",placeholder:"25000",autoFocus:!0})]}),ve.jsxs("div",{className:"flex space-x-2",children:[ve.jsx("button",{onClick:T,className:"bg-blue-600 text-white text-xs px-3 py-1 rounded hover:bg-blue-700",children:"Salvar"}),ve.jsx("button",{onClick:R,className:"bg-gray-300 text-gray-700 text-xs px-3 py-1 rounded hover:bg-gray-400",children:"Cancelar"})]})]}):ve.jsxs(ve.Fragment,{children:[ve.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["R$ ",v.toLocaleString("pt-BR")," / R$ ",e.toLocaleString("pt-BR")]}),ve.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:ve.jsx("div",{className:"h-2 rounded-full "+(v/e*100<33?"bg-yellow-500":v/e*100<66?"bg-blue-600":"bg-green-500"),style:{width:`${Math.min(v/e*100,100)}%`}})}),ve.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(v/e*100),"% concluÃ­do"]})]})]})]})}),ve.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:ve.jsxs("div",{className:"flex items-center",children:[ve.jsx("div",{className:"flex-shrink-0",children:ve.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-orange-600 text-lg",children:"ðŸ“…"})})}),ve.jsxs("div",{className:"ml-4",children:[ve.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Dias Restantes"}),ve.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[b," dias"]}),ve.jsx("p",{className:"text-xs text-gray-500",children:"atÃ© o fim do mÃªs"})]})]})}),ve.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:ve.jsxs("div",{className:"flex items-center",children:[ve.jsx("div",{className:"flex-shrink-0",children:ve.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-green-600 text-lg",children:"ðŸ“Š"})})}),ve.jsxs("div",{className:"ml-4",children:[ve.jsx("p",{className:"text-sm font-medium text-gray-500",children:"MÃ©dia DiÃ¡ria"}),ve.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["R$ ",y.toLocaleString("pt-BR")]}),ve.jsx("p",{className:"text-xs text-gray-500",children:"necessÃ¡ria para meta"})]})]})}),ve.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:ve.jsxs("div",{className:"flex items-center",children:[ve.jsx("div",{className:"flex-shrink-0",children:ve.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:ve.jsx("span",{className:"text-purple-600 text-lg",children:"ðŸ“ˆ"})})}),ve.jsxs("div",{className:"ml-4",children:[ve.jsx("p",{className:"text-sm font-medium text-gray-500",children:"TendÃªncia"}),ve.jsx("p",{className:"text-lg font-semibold text-green-600",children:"â†—ï¸ Crescendo"}),ve.jsx("p",{className:"text-xs text-gray-500",children:"+15% vs mÃªs anterior"})]})]})})]}),ve.jsxs("div",{className:"bg-white rounded-xl border-0 lg:border border-gray-200 overflow-hidden",children:[ve.jsxs("div",{className:"px-2 lg:px-6 py-3 lg:py-4 border-b border-gray-200",children:[ve.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"MovimentaÃ§Ã£o DiÃ¡ria"}),ve.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:"Ãšltimos 7 dias de movimentaÃ§Ã£o"})]}),ve.jsxs("div",{className:"lg:hidden",children:[(()=>{const e=4*(c-1),t=e+4;return g.slice(e,t).map((e,t)=>{const[s,a,r]=e.date.split("-").map(Number),n=new Date(s,a-1,r);return ve.jsxs("div",{className:"p-2 lg:p-3 border-t-2 border-b border-gray-200 last:border-b-0 "+(e.saldo>=0?"border-t-green-400":"border-t-red-400"),children:[ve.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ve.jsx("span",{className:"text-sm font-semibold text-gray-900",children:n.toLocaleDateString("pt-BR")}),ve.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.saldo>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.saldo>=0?"Positivo":"Negativo"})]}),ve.jsxs("div",{className:"space-y-2",children:[ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("span",{className:"text-xs text-gray-500",children:"Receitas"}),ve.jsxs("span",{className:"text-sm font-medium text-green-600",children:["R$ ",e.receitas.toLocaleString("pt-BR")]})]}),ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("span",{className:"text-xs text-gray-500",children:"Despesas"}),ve.jsxs("span",{className:"text-sm font-medium text-red-600",children:["R$ ",e.despesas.toLocaleString("pt-BR")]})]}),ve.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[ve.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Saldo"}),ve.jsxs("span",{className:"text-sm font-semibold "+(e.saldo>=0?"text-green-600":"text-red-600"),children:["R$ ",e.saldo.toLocaleString("pt-BR")]})]})]})]},t)})})(),g.length>4&&(()=>{const e=Math.ceil(g.length/4),t=4*(c-1),s=Math.min(t+4,g.length);return ve.jsx("div",{className:"px-2 py-3 border-t border-gray-200",children:ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[ve.jsxs("div",{className:"text-xs text-gray-500",children:["Mostrando ",t+1," a ",s," de ",g.length," transaÃ§Ãµes"]}),ve.jsxs("div",{className:"flex space-x-1",children:[ve.jsx("button",{className:"px-2 py-1 text-xs rounded-md bg-gray-100 text-gray-400 cursor-not-allowed",disabled:1===c,onClick:()=>S(c-1),children:"Anterior"}),Array.from({length:e},(e,t)=>t+1).map(e=>ve.jsx("button",{className:"px-2 py-1 text-xs rounded-md "+(c===e?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),onClick:()=>S(e),children:e},e)),ve.jsx("button",{className:"px-2 py-1 text-xs rounded-md bg-white text-gray-700 hover:bg-gray-50 border border-gray-300",disabled:c===e,onClick:()=>S(c+1),children:"PrÃ³ximo"})]})]})})})()]}),ve.jsx("div",{className:"hidden lg:block overflow-x-hidden",children:ve.jsxs("table",{className:"w-full",children:[ve.jsx("thead",{className:"bg-gray-50",children:ve.jsxs("tr",{children:[ve.jsx("th",{className:"px-3 lg:px-6 py-2 lg:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),ve.jsx("th",{className:"px-3 lg:px-6 py-2 lg:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receitas"}),ve.jsx("th",{className:"px-3 lg:px-6 py-2 lg:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Despesas"}),ve.jsx("th",{className:"px-3 lg:px-6 py-2 lg:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo"}),ve.jsx("th",{className:"px-3 lg:px-6 py-2 lg:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),ve.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map((e,t)=>{const[s,a,r]=e.date.split("-").map(Number),n=new Date(s,a-1,r);return console.log("ðŸ“Š [Tabela] Data corrigida:",{original:e.date,localDate:n,localString:n.toLocaleDateString("pt-BR")}),ve.jsxs("tr",{className:"hover:bg-gray-50",children:[ve.jsx("td",{className:"px-3 lg:px-6 py-3 lg:py-4 text-sm text-gray-900",children:n.toLocaleDateString("pt-BR")}),ve.jsxs("td",{className:"px-3 lg:px-6 py-3 lg:py-4 text-sm text-green-600 font-medium",children:["R$ ",e.receitas.toLocaleString("pt-BR")]}),ve.jsxs("td",{className:"px-3 lg:px-6 py-3 lg:py-4 text-sm text-red-600 font-medium",children:["R$ ",e.despesas.toLocaleString("pt-BR")]}),ve.jsxs("td",{className:"px-3 lg:px-6 py-3 lg:py-4 text-sm font-medium "+(e.saldo>=0?"text-green-600":"text-red-600"),children:["R$ ",e.saldo.toLocaleString("pt-BR")]}),ve.jsx("td",{className:"px-3 lg:px-6 py-3 lg:py-4",children:ve.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.saldo>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.saldo>=0?"Positivo":"Negativo"})})]},t)})})]})}),u.length>4&&ve.jsx("div",{className:"hidden lg:block px-2 lg:px-6 py-3 lg:py-4 border-t border-gray-200",children:ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 lg:gap-0",children:[ve.jsxs("div",{className:"text-xs lg:text-sm text-gray-500",children:["Mostrando ",C+1," a ",Math.min(_,u.length)," de ",u.length," transaÃ§Ãµes"]}),ve.jsxs("div",{className:"flex space-x-1 lg:space-x-2",children:[ve.jsx("button",{onClick:()=>D(l-1),disabled:1===l,className:"px-2 lg:px-3 py-1 text-xs lg:text-sm rounded-md "+(1===l?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:"Anterior"}),Array.from({length:k},(e,t)=>t+1).map(e=>ve.jsx("button",{onClick:()=>D(e),className:"px-2 lg:px-3 py-1 text-xs lg:text-sm rounded-md "+(l===e?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:e},e)),ve.jsx("button",{onClick:()=>D(l+1),disabled:l===k,className:"px-2 lg:px-3 py-1 text-xs lg:text-sm rounded-md "+(l===k?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:"PrÃ³ximo"})]})]})})]}),ve.jsxs("div",{className:"bg-white p-3 lg:p-6 rounded-xl border-0 lg:border border-gray-200",children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progresso do MÃªs"}),ve.jsxs("div",{className:"space-y-4",children:[ve.jsxs("div",{children:[ve.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 mb-2",children:[ve.jsx("span",{children:"Receitas"}),ve.jsxs("span",{children:[Math.round(v/e*100),"%"]})]}),ve.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:ve.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${Math.min(v/e*100,100)}%`}})})]}),ve.jsxs("div",{children:[ve.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 mb-2",children:[ve.jsx("span",{children:"Despesas"}),ve.jsxs("span",{children:[Math.round(j/e*100),"%"]})]}),ve.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:ve.jsx("div",{className:"bg-red-500 h-3 rounded-full",style:{width:`${Math.min(j/e*100,100)}%`}})})]}),ve.jsxs("div",{children:[ve.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 mb-2",children:[ve.jsx("span",{children:"Saldo"}),ve.jsxs("span",{children:[w?"+":"",Math.round(N/e*100),"%"]})]}),ve.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:ve.jsx("div",{className:"h-3 rounded-full "+(w?"bg-blue-500":"bg-red-500"),style:{width:`${Math.min(100*Math.abs(N/e),100)}%`}})})]})]})]})]}):ve.jsx("div",{className:"space-y-6",children:ve.jsx("div",{className:"flex items-center justify-center h-64",children:ve.jsxs("div",{className:"text-center",children:[ve.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“Š"}),ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma transaÃ§Ã£o encontrada"}),ve.jsx("p",{className:"text-gray-500 mb-4",children:"Adicione algumas transaÃ§Ãµes para ver seu dashboard personalizado"}),ve.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Adicionar TransaÃ§Ã£o"})]})})})}function Br({data:e}){const t=e.reduce((e,t)=>e+t.value,0),s=t+.3*(e.length-1);let a=0;return 0===e.length?ve.jsx("div",{className:"flex items-center justify-center h-16 text-gray-500",children:ve.jsx("p",{children:"Nenhuma receita encontrada"})}):ve.jsx("div",{className:"relative h-[var(--height)] mt-4 mb-8",style:{"--marginTop":"0px","--marginRight":"0px","--marginBottom":"0px","--marginLeft":"0px","--height":"12px"},children:ve.jsx("div",{className:"absolute inset-0 \n          h-[calc(100%-var(--marginTop)-var(--marginBottom))]\n          w-[calc(100%-var(--marginLeft)-var(--marginRight))]\n          translate-x-[var(--marginLeft)]\n          translate-y-[var(--marginTop)]\n          overflow-visible\n        ",children:e.map((e,r)=>{const n=e.value/s*100,i=a,l=e.value/t*100;return a+=n+.3,ve.jsxs("div",{className:"relative group",style:{width:`${n}%`,height:"12px",left:`${i}%`,position:"absolute"},children:[ve.jsx("div",{className:"transition-all duration-200 group-hover:opacity-80 group-hover:scale-105 cursor-pointer",style:{width:"100%",height:"100%",borderRadius:"4px",backgroundColor:e.color}}),ve.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:[ve.jsx("div",{className:"font-semibold",children:e.key}),ve.jsxs("div",{children:["R$ ",e.value.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),ve.jsxs("div",{className:"text-gray-300",children:[l.toFixed(1),"% do total"]}),ve.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]}),ve.jsx("div",{className:"text-xs text-gray-400 text-center",style:{left:`${i+n/2}%`,top:"30px"},children:e.key})]},r)})})})}[{date:"2023-04-30",value:4},{date:"2023-05-01",value:6},{date:"2023-05-02",value:8},{date:"2023-05-03",value:7},{date:"2023-05-04",value:10},{date:"2023-05-05",value:12},{date:"2023-05-06",value:10.5},{date:"2023-05-07",value:6},{date:"2023-05-08",value:8},{date:"2023-05-09",value:7.5},{date:"2023-05-10",value:6},{date:"2023-05-11",value:8},{date:"2023-05-12",value:9},{date:"2023-05-13",value:10},{date:"2023-05-14",value:17},{date:"2023-05-15",value:14},{date:"2023-05-16",value:15},{date:"2023-05-17",value:20},{date:"2023-05-18",value:18},{date:"2023-05-19",value:16},{date:"2023-05-20",value:15},{date:"2023-05-21",value:16},{date:"2023-05-22",value:13},{date:"2023-05-23",value:11},{date:"2023-05-24",value:11},{date:"2023-05-25",value:13},{date:"2023-05-26",value:12},{date:"2023-05-27",value:9},{date:"2023-05-28",value:8},{date:"2023-05-29",value:10},{date:"2023-05-30",value:11},{date:"2023-05-31",value:8},{date:"2023-06-01",value:9},{date:"2023-06-02",value:10},{date:"2023-06-03",value:12},{date:"2023-06-04",value:13},{date:"2023-06-05",value:15},{date:"2023-06-06",value:13.5},{date:"2023-06-07",value:13},{date:"2023-06-08",value:13},{date:"2023-06-09",value:14},{date:"2023-06-10",value:13},{date:"2023-06-11",value:12.5}].map(e=>({...e,date:new Date(e.date)}));const Or=()=>{try{const[e,t]=a.useState("cashflow"),[s,r]=a.useState("table"),[n,i]=a.useState(!1),[l,o]=a.useState("este-mes"),[c,d]=a.useState(""),[m,x]=a.useState(""),[u,g]=a.useState("todas"),{transactions:h,loading:p,error:f}=ds(),{user:b}=ps(),{categories:y}=ys(b?.uid||"test-user-123"),v=e=>{const t=new Date,s=t.getFullYear(),a=t.getMonth();switch(e){case"este-mes":const e=new Date(s,a,1),t=new Date(s,a+1,0);return{start:e.toISOString().split("T")[0],end:t.toISOString().split("T")[0]};case"mes-passado":const r=new Date(s,a-1,1),n=new Date(s,a,0);return{start:r.toISOString().split("T")[0],end:n.toISOString().split("T")[0]};case"ultimos-3-meses":const i=new Date(s,a-2,1),l=new Date(s,a+1,0);return{start:i.toISOString().split("T")[0],end:l.toISOString().split("T")[0]};default:return{start:"",end:""}}};a.useEffect(()=>{const{start:e,end:t}=v(l);d(e),x(t)},[l]);const j=()=>{if(!h||0===h.length)return 0;const e=new Date,t=e.getMonth(),s=e.getFullYear(),a=0===t?11:t-1,r=0===t?s-1:s,n=h.filter(e=>{if(!e||!e.date)return!1;const a=new Date(e.date);return a.getMonth()===t&&a.getFullYear()===s&&"receita"===e.type}),i=h.filter(e=>{if(!e||!e.date)return!1;const t=new Date(e.date);return t.getMonth()===a&&t.getFullYear()===r&&"receita"===e.type}),l=n.reduce((e,t)=>e+t.amount,0),o=i.reduce((e,t)=>e+t.amount,0);return 0===o?l>0?100:0:(l-o)/o*100},N=()=>{if(!h||0===h.length)return 0;const e=new Date,t=e.getMonth(),s=e.getFullYear();let a=0,r=0;for(let n=0;n<3;n++){const e=t-n<0?t-n+12:t-n,i=t-n<0?s-1:s,l=h.filter(t=>{if(!t||!t.date)return!1;const s=new Date(t.date);return s.getMonth()===e&&s.getFullYear()===i&&"receita"===t.type}).reduce((e,t)=>e+t.amount,0);l>0&&(a+=l,r++)}if(0===r)return 0;return 6*(a/r)};a.useEffect(()=>{const e=e=>{e.target.classList.contains("modal-backdrop")&&i(!1)};return n&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[n]);const w=a.useMemo(()=>{if(!h||0===h.length)return[];let e=[...h];const{start:t,end:s}=v(l),a=new Date(t),r=new Date(s),n=new Date(r);switch(n.setDate(n.getDate()+1),e=e.filter(e=>{const t=new Date(e.date);return t>=a&&t<n}),u){case"receitas":e=e.filter(e=>"receita"===e.type);break;case"despesas":e=e.filter(e=>"despesa"===e.type);break;case"contas-parceladas":e=e.filter(e=>e.installments&&e.installments>1);break;case"receitas-parceladas":e=e.filter(e=>"receita"===e.type&&e.installments&&e.installments>1)}return e},[h,l,c,m,u]),k=a.useMemo(()=>{if(!w||0===w.length)return[];const e=w.filter(e=>"receita"===e.type).reduce((e,t)=>{const s=t.category;return e[s]||(e[s]=0),e[s]+=t.amount,e},{}),t=(e,t)=>{const s=y.find(t=>t.name===e);if(s&&s.color)return s.color;const a=["#8b5cf6","#3b82f6","#10b981","#f59e0b","#ef4444","#06b6d4","#84cc16","#f97316"];return a[t%a.length]};return Object.entries(e).map(([e,s],a)=>({key:e,value:s,color:t(e,a)})).sort((e,t)=>t.value-e.value)},[h,y]),{cashFlowData:C,chartData:_}=a.useMemo(()=>{if(!h||0===h.length)return{cashFlowData:[],chartData:[]};if(1===h.length){const e=h[0];if(!e||!e.date)return{cashFlowData:[],chartData:[]};const t={date:e.date,name:e.date.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),receitas:"receita"===e.type?e.amount:0,despesas:"despesa"===e.type?e.amount:0,saldo:"receita"===e.type?e.amount:-e.amount};return{cashFlowData:[{date:e.date.toLocaleDateString("pt-BR"),description:e.description,category:e.category,account:"Ãšnica",income:t.receitas,expense:t.despesas,balance:t.saldo}],chartData:[t]}}const e=h.reduce((e,t)=>{if(!t||!t.date)return console.warn("âš ï¸ [Budgets] TransaÃ§Ã£o sem data vÃ¡lida no fluxo de caixa:",t),e;if(t.installmentNumber&&!0===t.isPaid)return e;const s=new Date(t.date),a=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;return e[a]||(e[a]={receitas:0,despesas:0,transactions:[]}),"receita"===t.type?e[a].receitas+=t.amount:e[a].despesas+=t.amount,e[a].transactions.push(t),e},{}),t=Object.keys(e).sort();let s=0;const a=t.map(t=>{const a=e[t];return s+=a.receitas-a.despesas,{date:new Date(t).toLocaleDateString("pt-BR"),description:`${a.transactions.length} transaÃ§Ã£o(Ãµes)`,category:"MÃºltiplas",account:"MÃºltiplas",income:a.receitas,expense:a.despesas,balance:s}}),r=t.map(t=>{const a=e[t];return{date:new Date(t),name:new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),receitas:a.receitas,despesas:a.despesas,saldo:s}});let n=r;if(r.length<3){const e=new Date(r[0].date),t=new Date(r[r.length-1].date),s=[];if(1===r.length){const t=new Date(e);t.setDate(t.getDate()-1),s.push({date:t,name:t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),receitas:0,despesas:0,saldo:0})}if(s.push(...r),1===r.length){const e=new Date(t);e.setDate(e.getDate()+1),s.push({date:e,name:e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),receitas:0,despesas:0,saldo:r[0].saldo})}n=s}return{cashFlowData:a,chartData:n}},[h]),D=[{id:"cashflow",name:"Fluxo de Caixa",icon:"ðŸ“Š",active:!0},{id:"equity",name:"EvoluÃ§Ã£o Patrimonial",icon:"ðŸ“ˆ",active:!1},{id:"expenses",name:"AnÃ¡lise de Gastos",icon:"ðŸ’°",active:!1}],S=()=>{switch(e){case"cashflow":default:return I();case"equity":return R();case"expenses":return A()}},I=()=>ve.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 lg:mb-4 gap-3 lg:gap-0",children:[ve.jsxs("h2",{className:"text-lg lg:text-xl font-bold text-gray-900",children:["Fluxo de Caixa - ",T()]}),ve.jsxs("div",{className:"flex space-x-1 lg:space-x-2",children:[ve.jsx("button",{onClick:()=>r("chart"),className:"px-2 lg:px-4 py-1.5 lg:py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors "+("chart"===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"GrÃ¡fico"}),ve.jsx("button",{onClick:()=>r("table"),className:"px-2 lg:px-4 py-1.5 lg:py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors "+("table"===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Tabela"})]})]}),"chart"===s?ve.jsx("div",{className:"h-96",children:_.length>0?ve.jsx($r,{}):h.length>0?ve.jsx("div",{className:"flex items-center justify-center h-full",children:ve.jsxs("div",{className:"text-center text-gray-500",children:[ve.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“Š"}),ve.jsx("p",{children:"Dados insuficientes para o grÃ¡fico"}),ve.jsx("p",{className:"text-sm mt-1",children:"Tente ajustar os filtros ou adicionar mais transaÃ§Ãµes"})]})}):ve.jsx("div",{className:"flex items-center justify-center h-full",children:ve.jsxs("div",{className:"text-center text-gray-500",children:[ve.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“ˆ"}),ve.jsx("p",{children:"Nenhuma transaÃ§Ã£o encontrada"}),ve.jsx("p",{className:"text-sm mt-1",children:"Adicione transaÃ§Ãµes para ver o fluxo de caixa"})]})})}):E()]}),T=()=>{if("personalizado"===l){if(c&&m){const e=new Date(c),t=new Date(m),s=e.toLocaleDateString("pt-BR",{month:"long"}),a=e.getFullYear(),r=t.toLocaleDateString("pt-BR",{month:"long"}),n=t.getFullYear();return s===r&&a===n?`${s} de ${a}`:`${s} de ${a} a ${r} de ${n}`}return"PerÃ­odo Personalizado"}const{start:e,end:t}=v(l),s=new Date(e+"T00:00:00"),a=new Date(t+"T23:59:59");switch(l){case"este-mes":return a.toLocaleDateString("pt-BR",{month:"long",year:"numeric"});case"mes-passado":return s.toLocaleDateString("pt-BR",{month:"long",year:"numeric"});case"ultimos-3-meses":return`${s.toLocaleDateString("pt-BR",{month:"long"})} de ${s.getFullYear()} a ${a.toLocaleDateString("pt-BR",{month:"long"})} de ${a.getFullYear()}`;default:return"PerÃ­odo Selecionado"}},R=()=>ve.jsxs("div",{className:"space-y-6",children:[ve.jsx("div",{className:"flex items-center justify-between mb-4",children:ve.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["EvoluÃ§Ã£o Patrimonial - ",T()]})}),ve.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Receitas por Categoria"}),ve.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:ve.jsx(Br,{data:k})})]}),ve.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 5 Maiores Receitas"}),ve.jsx("div",{className:"space-y-3",children:w.filter(e=>"receita"===e.type).sort((e,t)=>t.amount-e.amount).slice(0,5).map((e,t)=>ve.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[ve.jsxs("div",{className:"flex items-center space-x-3",children:[ve.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),ve.jsxs("div",{children:[ve.jsx("div",{className:"font-medium text-gray-900",children:e.description}),ve.jsx("div",{className:"text-sm text-gray-600",children:e.category})]})]}),ve.jsxs("div",{className:"text-right",children:[ve.jsxs("div",{className:"font-bold text-green-600",children:["R$ ",e.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),ve.jsx("div",{className:"text-sm text-gray-500",children:e.date.toLocaleDateString("pt-BR")})]})]},e.id))})]}),ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 lg:gap-6",children:[ve.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-sm lg:text-lg font-semibold text-gray-900 mb-2 lg:mb-4",children:"PatrimÃ´nio Atual"}),ve.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("span",{className:"text-sm text-gray-600",children:"Saldo Total"}),ve.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["R$ ",k.reduce((e,t)=>e+t.value,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),ve.jsx("div",{className:"text-sm text-gray-600",children:"Baseado nas receitas do perÃ­odo"})]})]}),ve.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-sm lg:text-lg font-semibold text-gray-900 mb-2 lg:mb-4",children:"Crescimento"}),ve.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("span",{className:"text-sm text-gray-600",children:"VariaÃ§Ã£o Mensal"}),ve.jsxs("span",{className:"text-lg font-bold "+(j()>=0?"text-green-600":"text-red-600"),children:[j()>=0?"+":"",j().toFixed(1),"%"]})]}),ve.jsx("div",{className:"text-sm text-gray-600",children:"Comparado ao mÃªs anterior"})]})]}),ve.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-sm lg:text-lg font-semibold text-gray-900 mb-2 lg:mb-4",children:"ProjeÃ§Ã£o"}),ve.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("span",{className:"text-sm text-gray-600",children:"PrÃ³ximos 6 meses"}),ve.jsxs("span",{className:"text-lg font-bold text-purple-600",children:["R$ ",N().toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),ve.jsx("div",{className:"text-sm text-gray-600",children:"Baseado na tendÃªncia atual"})]})]})]})]}),A=()=>{const e=w.filter(e=>"despesa"===e.type),t=e.reduce((e,t)=>{const s=t.category;return e[s]||(e[s]=0),e[s]+=t.amount,e},{}),s=Object.entries(t).map(([e,t])=>({key:e,value:t,color:y.find(t=>t.name===e)?.color||"#ef4444"})).sort((e,t)=>t.value-e.value);return ve.jsxs("div",{className:"space-y-6",children:[ve.jsx("div",{className:"flex items-center justify-between mb-4",children:ve.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["AnÃ¡lise de Gastos - ",(new Date).toLocaleDateString("pt-BR",{month:"long",year:"numeric"})]})}),ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[ve.jsxs("div",{className:"bg-white p-2 lg:p-4 rounded-lg shadow border-0 lg:border",children:[ve.jsx("div",{className:"text-sm text-gray-600",children:"Total Gasto"}),ve.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["R$ ",e.reduce((e,t)=>e+t.amount,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),ve.jsxs("div",{className:"bg-white p-2 lg:p-4 rounded-lg shadow border-0 lg:border",children:[ve.jsx("div",{className:"text-sm text-gray-600",children:"Categorias"}),ve.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Object.keys(t).length})]}),ve.jsxs("div",{className:"bg-white p-2 lg:p-4 rounded-lg shadow border-0 lg:border",children:[ve.jsx("div",{className:"text-sm text-gray-600",children:"TransaÃ§Ãµes"}),ve.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.length})]}),ve.jsxs("div",{className:"bg-white p-2 lg:p-4 rounded-lg shadow border-0 lg:border",children:[ve.jsx("div",{className:"text-sm text-gray-600",children:"MÃ©dia por TransaÃ§Ã£o"}),ve.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["R$ ",e.length>0?(e.reduce((e,t)=>e+t.amount,0)/e.length).toLocaleString("pt-BR",{minimumFractionDigits:2}):"0,00"]})]})]}),ve.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-sm lg:text-lg font-semibold text-gray-900 mb-2 lg:mb-4",children:"Gastos por Categoria"}),ve.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:ve.jsx(Br,{data:s})})]}),ve.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-sm lg:text-lg font-semibold text-gray-900 mb-2 lg:mb-4",children:"Top 5 Maiores Gastos"}),ve.jsx("div",{className:"space-y-2 lg:space-y-3",children:e.sort((e,t)=>t.amount-e.amount).slice(0,5).map((e,t)=>ve.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[ve.jsxs("div",{className:"flex items-center space-x-3",children:[ve.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),ve.jsxs("div",{children:[ve.jsx("div",{className:"font-medium text-gray-900",children:e.description}),ve.jsx("div",{className:"text-sm text-gray-600",children:e.category})]})]}),ve.jsxs("div",{className:"text-right",children:[ve.jsxs("div",{className:"font-bold text-red-600",children:["R$ ",e.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),ve.jsx("div",{className:"text-sm text-gray-500",children:e.date.toLocaleDateString("pt-BR")})]})]},e.id))})]})]})},E=()=>ve.jsx("div",{className:"overflow-x-hidden",children:ve.jsxs("table",{className:"w-full",children:[ve.jsx("thead",{children:ve.jsxs("tr",{className:"border-b border-gray-200",children:[ve.jsx("th",{className:"text-left py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm",children:"Data"}),ve.jsx("th",{className:"text-left py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm hidden sm:table-cell",children:"DescriÃ§Ã£o"}),ve.jsx("th",{className:"text-left py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm",children:"Categoria"}),ve.jsx("th",{className:"text-left py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm hidden md:table-cell",children:"Parcelas"}),ve.jsx("th",{className:"text-right py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm",children:"Valor"}),ve.jsx("th",{className:"text-right py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm hidden lg:table-cell",children:"Tipo"})]})}),ve.jsx("tbody",{children:0===w.length?ve.jsx("tr",{children:ve.jsx("td",{colSpan:6,className:"py-8 px-4 text-center text-gray-500",children:"Nenhuma transaÃ§Ã£o encontrada"})}):w.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).map(e=>ve.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[ve.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-xs lg:text-sm text-gray-600",children:e.date?e.date.toLocaleDateString("pt-BR"):"Data invÃ¡lida"}),ve.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-xs lg:text-sm text-gray-900 font-medium hidden sm:table-cell",children:e.description}),ve.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-xs lg:text-sm text-gray-700",children:e.category}),ve.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-xs lg:text-sm text-gray-700 hidden md:table-cell",children:e.installments&&e.installments>1?ve.jsxs("div",{className:"flex flex-col",children:[ve.jsxs("span",{className:"font-medium",children:[e.installmentNumber||1,"/",e.installments]}),ve.jsx("span",{className:"text-xs text-gray-500",children:e.isPaid?"Pago":"Pendente"})]}):ve.jsx("div",{className:"flex flex-col",children:ve.jsx("span",{className:"text-xs text-gray-500",children:"Ã€ vista"})})}),ve.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-right text-xs lg:text-sm font-semibold",children:ve.jsxs("span",{className:"receita"===e.type?"text-green-600":"text-red-600",children:["receita"===e.type?"+":"-","R$ ",e.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),ve.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-right hidden lg:table-cell",children:ve.jsx("span",{className:"inline-flex items-center px-1.5 lg:px-2 py-0.5 lg:py-1 rounded-full text-xs font-medium "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"})})]},e.id))})]})});return ve.jsxs("div",{className:"space-y-3 lg:space-y-6 px-2 lg:px-0",children:[ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 lg:gap-0",children:[ve.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:"RelatÃ³rios"}),ve.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors",children:"Salvar RelatÃ³rio Personalizado"})]}),ve.jsx("div",{className:"hidden lg:grid grid-cols-3 gap-6",children:(()=>{const e=h.filter(e=>"receita"===e.type),t=h.filter(e=>"despesa"===e.type),s=e.reduce((e,t)=>e+t.amount,0),a=t.reduce((e,t)=>e+t.amount,0),r=e.length>0?e.reduce((e,t)=>t.amount>e.amount?t:e):null,n=r&&s>0?(r.amount/s*100).toFixed(0):0,i=t.length>0?t.reduce((e,t)=>t.amount>e.amount?t:e):null,l=i&&a>0?(i.amount/a*100).toFixed(0):0,o=t.reduce((e,t)=>(e[t.category]=(e[t.category]||0)+t.amount,e),{}),c=Object.entries(o).length>0?Object.entries(o).reduce((e,[t,s])=>s>e.amount?{category:t,amount:s}:e,{category:"",amount:0}):{category:"alimentaÃ§Ã£o",amount:0},d=.15*c.amount,m=12*d;return ve.jsxs(ve.Fragment,{children:[ve.jsxs("div",{className:"bg-white p-3 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-xs lg:text-lg font-medium text-gray-600 mb-1 lg:mb-4",children:"Maior Receita"}),ve.jsx("div",{className:"space-y-1 lg:space-y-3",children:r?ve.jsxs(ve.Fragment,{children:[ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("span",{className:"text-xs lg:text-sm text-gray-600 truncate",children:r.description}),ve.jsxs("span",{className:"text-sm lg:text-lg font-bold text-green-600",children:["R$ ",r.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),ve.jsxs("div",{className:"text-xs lg:text-sm text-gray-500 hidden lg:block",children:[ve.jsxs("span",{className:"font-medium text-gray-900",children:[n,"%"]})," das receitas"]}),ve.jsx("div",{className:"text-xs lg:text-sm text-green-600 hidden lg:block",children:r.category})]}):ve.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:"Nenhuma receita encontrada"})})]}),ve.jsxs("div",{className:"bg-white p-3 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-xs lg:text-lg font-medium text-gray-600 mb-1 lg:mb-4",children:"Maior Despesa"}),ve.jsx("div",{className:"space-y-1 lg:space-y-3",children:i?ve.jsxs(ve.Fragment,{children:[ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("span",{className:"text-xs lg:text-sm text-gray-600 truncate",children:i.description}),ve.jsxs("span",{className:"text-sm lg:text-lg font-bold text-red-600",children:["R$ ",i.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),ve.jsxs("div",{className:"text-xs lg:text-sm text-gray-500 hidden lg:block",children:[ve.jsxs("span",{className:"font-medium text-gray-900",children:[l,"%"]})," das despesas"]}),ve.jsx("div",{className:"text-xs lg:text-sm text-gray-500 hidden lg:block",children:i.category})]}):ve.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:"Nenhuma despesa encontrada"})})]}),ve.jsxs("div",{className:"bg-white p-3 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-xs lg:text-lg font-medium text-gray-600 mb-1 lg:mb-4",children:"Economia Potencial"}),ve.jsx("div",{className:"space-y-1 lg:space-y-3",children:c.amount>0?ve.jsxs(ve.Fragment,{children:[ve.jsxs("div",{className:"text-xs lg:text-sm text-gray-500 hidden lg:block",children:[ve.jsx("span",{className:"font-medium text-gray-900",children:c.category})," -15%"]}),ve.jsxs("div",{className:"text-sm lg:text-lg font-bold text-green-600",children:["R$ ",d.toLocaleString("pt-BR",{minimumFractionDigits:2}),"/mÃªs"]}),ve.jsxs("div",{className:"text-xs lg:text-sm text-gray-500 hidden lg:block",children:["R$ ",m.toLocaleString("pt-BR",{minimumFractionDigits:2}),"/ano"]})]}):ve.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:"Nenhuma despesa para anÃ¡lise"})})]})]})})()}),ve.jsx("div",{className:"space-y-3 lg:space-y-4",children:ve.jsx("div",{className:"bg-white p-2 lg:p-4 rounded-lg shadow border-0 lg:border",children:ve.jsxs("div",{className:"flex justify-start",children:[ve.jsx("div",{className:"lg:hidden w-full",children:ve.jsx("div",{className:"flex overflow-x-auto scrollbar-hide space-x-2 pb-2",children:ve.jsxs("div",{className:"flex space-x-2",children:[D.map(s=>ve.jsxs("button",{onClick:()=>t(s.id),className:"flex items-center space-x-1 px-3 py-2 rounded-full text-xs font-medium transition-all duration-200 whitespace-nowrap "+(e===s.id?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[ve.jsx("span",{className:"text-sm",children:s.icon}),ve.jsx("span",{children:s.name})]},s.id)),ve.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-1 px-3 py-2 rounded-full text-xs font-medium transition-all duration-200 bg-gray-100 text-gray-600 hover:bg-gray-200 whitespace-nowrap",children:[ve.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"Filtros",className:"w-3 h-3"}),ve.jsx("span",{children:"Filtros"})]})]})})}),ve.jsx("div",{className:"hidden lg:block",children:ve.jsxs("div",{className:"flex flex-wrap gap-1 bg-gray-50 p-1 rounded-lg border",children:[D.map(s=>ve.jsxs("button",{onClick:()=>t(s.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 "+(e===s.id?"bg-blue-600 text-white shadow-md transform scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[ve.jsx("span",{className:"text-base",children:s.icon}),ve.jsx("span",{children:s.name})]},s.id)),ve.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[ve.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"Filtros",className:"w-4 h-4"}),ve.jsx("span",{children:"Filtros"})]})]})})]})})}),ve.jsx("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:p?ve.jsx("div",{className:"h-64 lg:h-96 flex items-center justify-center",children:ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsx("div",{className:"animate-spin rounded-full h-5 w-5 lg:h-6 lg:w-6 border-b-2 border-blue-600"}),ve.jsx("span",{className:"text-sm lg:text-base text-gray-600",children:"Carregando dados..."})]})}):f?ve.jsx("div",{className:"h-64 lg:h-96 flex items-center justify-center",children:ve.jsxs("div",{className:"text-center text-red-600",children:[ve.jsx("p",{className:"text-sm lg:text-base",children:"Erro ao carregar dados"}),ve.jsx("p",{className:"text-xs lg:text-sm mt-1",children:f})]})}):0===h.length?ve.jsx("div",{className:"h-64 lg:h-96 flex items-center justify-center",children:ve.jsxs("div",{className:"text-center text-gray-500",children:[ve.jsx("div",{className:"text-4xl lg:text-6xl mb-3 lg:mb-4",children:"ðŸ“Š"}),ve.jsx("p",{className:"text-base lg:text-lg",children:"Nenhuma transaÃ§Ã£o encontrada"}),ve.jsx("p",{className:"text-xs lg:text-sm mt-2",children:"Adicione transaÃ§Ãµes para ver os relatÃ³rios"})]})}):S()}),n&&ve.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-backdrop",children:ve.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-3 lg:mx-4",children:[ve.jsxs("div",{className:"flex items-center justify-between p-4 lg:p-6 border-b border-gray-200",children:[ve.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Filtros"}),ve.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:ve.jsx("span",{className:"text-lg lg:text-xl",children:"Ã—"})})]}),ve.jsxs("div",{className:"p-4 lg:p-6 space-y-3 lg:space-y-4",children:[ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 lg:gap-0",children:[ve.jsx("label",{className:"text-xs lg:text-sm font-medium text-gray-700",children:"PerÃ­odo"}),ve.jsxs("select",{value:l,onChange:e=>o(e.target.value),className:"border border-gray-300 rounded-lg px-2 lg:px-3 py-1.5 lg:py-2 text-xs lg:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[ve.jsx("option",{value:"personalizado",children:"Personalizado"}),ve.jsx("option",{value:"este-mes",children:"Este mÃªs"}),ve.jsx("option",{value:"mes-passado",children:"MÃªs passado"}),ve.jsx("option",{value:"ultimos-3-meses",children:"Ãšltimos 3 meses"})]})]}),ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 lg:gap-0",children:[ve.jsx("label",{className:"text-xs lg:text-sm font-medium text-gray-700",children:"De"}),ve.jsxs("div",{className:"relative",children:[ve.jsx("input",{type:"date",value:c,onChange:e=>d(e.target.value),disabled:"personalizado"!==l,className:"border border-gray-300 rounded-lg px-2 lg:px-3 py-1.5 lg:py-2 text-xs lg:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px] "+("personalizado"!==l?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"")}),ve.jsx("button",{type:"button",onClick:()=>{if("personalizado"===l){const e=document.querySelector('input[type="date"][value="'+c+'"]');e?.showPicker()}},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 "+("personalizado"===l?"cursor-pointer hover:text-gray-600":"cursor-not-allowed"),disabled:"personalizado"!==l,children:"ðŸ“…"})]})]}),ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 lg:gap-0",children:[ve.jsx("label",{className:"text-xs lg:text-sm font-medium text-gray-700",children:"AtÃ©"}),ve.jsxs("div",{className:"relative",children:[ve.jsx("input",{type:"date",value:m,onChange:e=>x(e.target.value),disabled:"personalizado"!==l,className:"border border-gray-300 rounded-lg px-2 lg:px-3 py-1.5 lg:py-2 text-xs lg:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px] "+("personalizado"!==l?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"")}),ve.jsx("button",{type:"button",onClick:()=>{if("personalizado"===l){const e=document.querySelector('input[type="date"][value="'+m+'"]');e?.showPicker()}},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 "+("personalizado"===l?"cursor-pointer hover:text-gray-600":"cursor-not-allowed"),disabled:"personalizado"!==l,children:"ðŸ“…"})]})]}),ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 lg:gap-0",children:[ve.jsx("label",{className:"text-xs lg:text-sm font-medium text-gray-700",children:"Tipo"}),ve.jsxs("select",{value:u,onChange:e=>g(e.target.value),className:"border border-gray-300 rounded-lg px-2 lg:px-3 py-1.5 lg:py-2 text-xs lg:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[ve.jsx("option",{value:"todas",children:"Todas"}),ve.jsx("option",{value:"receitas",children:"Receitas"}),ve.jsx("option",{value:"despesas",children:"Despesas"}),ve.jsx("option",{value:"contas-parceladas",children:"Parceladas"}),ve.jsx("option",{value:"receitas-parceladas",children:"Rec. Parceladas"})]})]})]}),ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 lg:gap-0 p-4 lg:p-6 border-t border-gray-200",children:[ve.jsxs("button",{onClick:()=>{o("este-mes"),g("todas");const{start:e,end:t}=v("este-mes");d(e),x(t)},className:"flex items-center space-x-1 lg:space-x-2 px-3 lg:px-4 py-1.5 lg:py-2 text-xs lg:text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors",children:[ve.jsx("span",{children:"â™»ï¸"}),ve.jsx("span",{children:"Limpar filtros"})]}),ve.jsxs("button",{onClick:()=>i(!1),className:"flex items-center space-x-1 lg:space-x-2 px-4 lg:px-6 py-1.5 lg:py-2 text-xs lg:text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-lg hover:bg-blue-700 hover:border-blue-700 transition-colors shadow-md",children:[ve.jsx("span",{children:"âœ…"}),ve.jsx("span",{children:"Aplicar"})]})]})]})})]})}catch(e){return console.error("âŒ [Budgets] Erro no componente:",e),ve.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"RelatÃ³rios"}),ve.jsx("div",{className:"text-red-600",children:ve.jsxs("p",{children:["Erro ao carregar relatÃ³rios: ",String(e)]})})]})}},zr=({selectedPeriod:e="current-month",userId:t,transactionTypeFilter:s="all"})=>{const{user:n}=ps(),i=t||n?.uid||"test-user-123",{loading:l,error:o}=((e,t,s)=>{const{transactions:r,loading:n,error:i}=ds(),{categories:l}=ys(t);return{budgetData:a.useMemo(()=>{if(!r||!l)return[];const t=new Date,a=r.filter(s=>{const a=new Date(s.date);switch(e){case"current-month":return a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear();case"last-month":const e=0===t.getMonth()?11:t.getMonth()-1,s=0===t.getMonth()?t.getFullYear()-1:t.getFullYear();return a.getMonth()===e&&a.getFullYear()===s;case"current-year":return a.getFullYear()===t.getFullYear();default:return!0}}),n=("all"===s?a:a.filter(e=>e.type===s)).reduce((e,t)=>{const s=t.category;return e[s]||(e[s]=0),e[s]+=t.amount,e},{});return l.filter(e=>e.type===("all"===s?"despesa":s)).map(e=>({name:e.name,actual:n[e.id]||0,budget:1e3,color:e.color||"#3B82F6"})).sort((e,t)=>t.actual-e.actual)},[r,l,e,s]),categories:l||[],loading:n,error:i}})(e,i,s),{transactions:c}=ds(),{categories:d}=ys(i),[m,x]=a.useState("todas"),[u,g]=a.useState(!1),[h,p]=a.useState("personalizado"),[f,b]=a.useState(""),[y,v]=a.useState(""),[j,N]=a.useState("todas");a.useEffect(()=>{},[f,y]);if(l)return ve.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:ve.jsxs("div",{className:"animate-pulse",children:[ve.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),ve.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>ve.jsx("div",{className:"h-4 bg-gray-200 rounded"},e))})]})});if(o)return ve.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"OrÃ§amento"}),ve.jsx("div",{className:"text-red-600",children:ve.jsxs("p",{children:["Erro ao carregar dados do orÃ§amento: ",o]})})]});const w=(new Date).getMonth(),k=(new Date).getFullYear(),C=r.useMemo(()=>{let e=c;if("personalizado"===h&&f&&y){const t=new Date(f),s=new Date(y);t.setHours(0,0,0,0),s.setHours(23,59,59,999),e=c.filter(e=>{const a=new Date(e.date);return a>=t&&a<=s})}else e=c.filter(e=>{const t=new Date(e.date);return t.getMonth()===w&&t.getFullYear()===k});return e},[c,h,f,y,w,k]),_=r.useMemo(()=>{const e={},t={};c.forEach(e=>{if(e.installments&&e.installments>1){const s=e.installmentGroupId||`${e.description.replace(/\s*\(\d+\/\d+\)$/,"")}_${e.totalInstallmentAmount||e.amount}`;t[s]||(t[s]=[]),t[s].push(e)}}),Object.entries(t).forEach(([t,s])=>{const{start:a,end:r}=(e=>{const t=new Date,s=t.getFullYear(),a=t.getMonth();switch(e){case"este-mes":const e=new Date(s,a,1),t=new Date(s,a+1,0);return{start:e.toISOString().split("T")[0],end:t.toISOString().split("T")[0]};case"mes-passado":const r=new Date(s,a-1,1),n=new Date(s,a,0);return{start:r.toISOString().split("T")[0],end:n.toISOString().split("T")[0]};case"ultimos-3-meses":const i=new Date(s,a-2,1),l=new Date(s,a+1,0);return{start:i.toISOString().split("T")[0],end:l.toISOString().split("T")[0]};default:return{start:"",end:""}}})(h),n="personalizado"===h?f:a,i="personalizado"===h?y:r,l=s.filter(e=>{if(n&&i){const t=e.date.toISOString().split("T")[0];return t>=n&&t<=i}return!0});let o=l;if(0===l.length){const e=s.some(e=>e.date.toISOString().split("T")[0]>i),t=s.some(e=>e.date.toISOString().split("T")[0]<n);if(t&&e)o=s;else if(t&&!e){s.some(e=>!e.isPaid)&&(o=s)}}if(0===o.length)return;0!==o.filter(e=>!1===e.isPaid).length&&(e[t]=o)}),C.forEach(t=>{(!t.installments||t.installments<=1)&&(e[t.id]=[t])});return Object.values(e)},[C,w,k]).map(e=>{const t=e[0],s=(a=t.category||"Outros",d.find(e=>e.name===a)||{name:a,color:"#9CA3AF",icon:"ðŸ“¦",type:"despesa"});var a;const r=t.installments&&t.installments>1,n=t.amount,i=r?t.totalInstallmentAmount||t.amount*(t.installments||1):t.amount;let l=0,o=1;r?(o=t.installments||1,l=e.filter(e=>!0===e.isPaid).length):l=t.isPaid?1:0;const c=r?l/o*100:t.isPaid?100:0;let m="bg-gray-400";return c>0&&c<=33?m="bg-red-500":c>33&&c<=66?m="bg-yellow-500":c>66&&(m="bg-green-500"),{id:t.id,name:t.description.replace(/\s*\(\d+\/\d+\)$/,""),categoryName:s.name,actual:n,totalAmount:i,type:t.type,color:s.color,emoji:s.icon,isInstallment:r,paidInstallments:l,totalInstallments:o,paymentPercentage:c,barColor:m,isPaid:t.isPaid,installmentNumber:t.installmentNumber,installments:t.installments,date:t.date}}).sort((e,t)=>t.actual-e.actual),D=C.filter(e=>"receita"===e.type).reduce((e,t)=>e+t.amount,0),S=C.filter(e=>"despesa"===e.type).reduce((e,t)=>e+t.amount,0),I=D-S,T=D>0?S/D*100:0,R=_.filter(e=>{if("receitas"===m&&"receita"!==e.type)return!1;if("despesas"===m&&"despesa"!==e.type)return!1;if("todas"!==j){if("receitas"===j&&"receita"!==e.type)return!1;if("despesas"===j&&"despesa"!==e.type)return!1;if("contas-parceladas"===j&&!e.isInstallment)return!1;if("receitas-parceladas"===j&&(!e.isInstallment||"receita"!==e.type))return!1}if("personalizado"!==h||f&&y){const t=new Date(e.date),s=new Date(f),a=new Date(y);if(s.setHours(0,0,0,0),a.setHours(23,59,59,999),e.isInstallment&&e.installments){return t>=s&&t<=a}return t>=s&&t<=a}return!0});return ve.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[ve.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"OrÃ§amento"}),ve.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:ve.jsxs("div",{className:"flex items-center gap-3",children:[ve.jsxs("div",{role:"tablist","aria-orientation":"horizontal",className:"inline-flex h-8 sm:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",children:[ve.jsx("button",{type:"button",role:"tab","aria-selected":"todas"===m,onClick:()=>x("todas"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 "+("todas"===m?"bg-background text-foreground shadow-sm":"hover:bg-muted/50"),children:"Todas"}),ve.jsx("button",{type:"button",role:"tab","aria-selected":"receitas"===m,onClick:()=>x("receitas"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 "+("receitas"===m?"bg-background text-foreground shadow-sm":"hover:bg-muted/50"),children:"Receitas"}),ve.jsx("button",{type:"button",role:"tab","aria-selected":"despesas"===m,onClick:()=>x("despesas"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 "+("despesas"===m?"bg-background text-foreground shadow-sm":"hover:bg-muted/50"),children:"Despesas"})]}),ve.jsxs("button",{onClick:()=>{console.log("ðŸ” Abrindo modal de filtros"),g(!0)},className:"flex items-center space-x-1 sm:space-x-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium whitespace-nowrap transition-all duration-200 "+("personalizado"!==h||f||y||"todas"!==j?"text-blue-600 bg-blue-50 hover:bg-blue-100 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[ve.jsx("span",{className:"text-sm sm:text-base",children:"ðŸ”"}),ve.jsx("span",{children:"Filtros"}),("personalizado"!==h||f||y||"todas"!==j)&&ve.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})})]}),ve.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[ve.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[ve.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Receita Total"}),ve.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",D.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),ve.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[ve.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Gasto Total"}),ve.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",S.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),ve.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[ve.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"DisponÃ­vel"}),ve.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",I.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),ve.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[ve.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Progresso"}),ve.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[T.toFixed(1),"%"]})]})]}),ve.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===R.length?ve.jsx("div",{className:"col-span-full text-center py-8",children:ve.jsx("p",{className:"text-gray-500",children:"Nenhuma transaÃ§Ã£o encontrada para o mÃªs atual."})}):R.map((e,t)=>ve.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[ve.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[ve.jsx("div",{className:"flex h-[52px] w-[52px] items-center justify-center rounded-xl",style:{backgroundColor:`${e.color}20`,color:e.color},children:ve.jsx("span",{className:"text-2xl",children:e.emoji})}),ve.jsxs("div",{className:"flex-1",children:[ve.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[ve.jsx("h4",{className:"font-medium text-gray-900",children:e.categoryName}),ve.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"}),e.isInstallment&&ve.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Parcelado"})]}),ve.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[ve.jsxs("span",{children:["R$ ",e.actual.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.isInstallment&&ve.jsxs("span",{children:["/ R$ ",e.totalAmount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),ve.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:ve.jsx("div",{className:`h-2 rounded-full ${e.barColor}`,style:{width:`${Math.min(e.paymentPercentage,100)}%`}})}),ve.jsx("div",{className:"flex justify-between items-center",children:ve.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.isInstallment?`${e.paidInstallments}/${e.totalInstallments} parcelas (${e.paymentPercentage.toFixed(1)}%)`:`${e.paymentPercentage.toFixed(1)}%`})}),ve.jsx("div",{className:"mt-3",children:ve.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 bg-gray-50 rounded-lg p-2",children:[ve.jsx("div",{className:"flex-1",children:e.name&&ve.jsx("span",{className:"font-medium",children:e.name})}),ve.jsxs("div",{className:"flex items-center space-x-2",children:[ve.jsxs("span",{className:"font-medium",children:["R$ ",e.actual.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),ve.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(e.isPaid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isPaid?"Pago":"Pendente"})]})]})})]},e.id))}),u&&ve.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",children:ve.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[ve.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros"}),ve.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:ve.jsx("span",{className:"text-xl",children:"Ã—"})})]}),ve.jsxs("div",{className:"p-6 space-y-4",children:[ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("label",{className:"text-sm font-medium text-gray-700",children:"PerÃ­odo"}),ve.jsxs("select",{value:h,onChange:e=>{console.log("ðŸ“… PerÃ­odo selecionado:",e.target.value),p(e.target.value),(e=>{const t=new Date,s=t.getMonth(),a=t.getFullYear();switch(e){case"este-mes":const e=new Date(a,s,1),t=new Date(a,s+1,0);b(e.toISOString().split("T")[0]),v(t.toISOString().split("T")[0]);break;case"mes-passado":const r=new Date(a,s-1,1),n=new Date(a,s,0);b(r.toISOString().split("T")[0]),v(n.toISOString().split("T")[0]);break;case"ultimos-3-meses":const i=new Date(a,s-3,1),l=new Date(a,s+1,0);b(i.toISOString().split("T")[0]),v(l.toISOString().split("T")[0])}})(e.target.value)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px] appearance-none bg-white cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px"},children:[ve.jsx("option",{value:"personalizado",children:"Personalizado"}),ve.jsx("option",{value:"este-mes",children:"Este mÃªs"}),ve.jsx("option",{value:"mes-passado",children:"MÃªs passado"}),ve.jsx("option",{value:"ultimos-3-meses",children:"Ãšltimos 3 meses"})]})]}),ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("label",{className:"text-sm font-medium text-gray-700",children:"De"}),ve.jsxs("div",{className:"relative",children:[ve.jsx("input",{id:"start-date-input",type:"date",value:f,onChange:e=>b(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px]"}),ve.jsx("button",{type:"button",onClick:()=>{const e=document.getElementById("start-date-input");e?.showPicker()},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 cursor-pointer",children:"ðŸ“…"})]})]}),ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("label",{className:"text-sm font-medium text-gray-700",children:"AtÃ©"}),ve.jsxs("div",{className:"relative",children:[ve.jsx("input",{id:"end-date-input",type:"date",value:y,onChange:e=>v(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px]"}),ve.jsx("button",{type:"button",onClick:()=>{const e=document.getElementById("end-date-input");e?.showPicker()},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 cursor-pointer",children:"ðŸ“…"})]})]}),ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipo"}),ve.jsxs("select",{value:j,onChange:e=>N(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[140px]",children:[ve.jsx("option",{value:"todas",children:"Todas"}),ve.jsx("option",{value:"receitas",children:"Receitas"}),ve.jsx("option",{value:"despesas",children:"Despesas"}),ve.jsx("option",{value:"contas-parceladas",children:"Parceladas"}),ve.jsx("option",{value:"receitas-parceladas",children:"Rec. Parceladas"})]})]})]}),ve.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[ve.jsxs("button",{onClick:()=>{p("personalizado"),b(""),v(""),N("todas"),x("todas"),console.log("â™»ï¸ Filtros limpos")},className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors",children:[ve.jsx("span",{children:"â™»ï¸"}),ve.jsx("span",{children:"Limpar filtros"})]}),ve.jsxs("button",{onClick:()=>{console.log("âœ… Filtros aplicados:",{periodFilter:h,startDate:f,endDate:y,typeFilter:j}),g(!1)},className:"flex items-center space-x-2 px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-lg hover:bg-blue-700 hover:border-blue-700 transition-colors shadow-md",children:[ve.jsx("span",{children:"âœ…"}),ve.jsx("span",{children:"Aplicar"})]})]})]})})]})},Ur=()=>{const{transactions:e,loading:t,error:s,updateTransaction:a}=ds(),{user:n}=ps(),{categories:i}=ys(n?.uid||"test-user-123"),l=r.useMemo(()=>{const t=e.filter(e=>e.installments&&e.installments>1),s={};return t.forEach(e=>{const t=e.installmentGroupId||`${e.description}_${e.totalInstallmentAmount||e.amount}`;s[t]||(s[t]=[]),s[t].push(e)}),Object.values(s).map(e=>{const t=e.sort((e,t)=>e.installmentNumber-t.installmentNumber),s=t[0],a=t[t.length-1];return{id:s.installmentGroupId||`${s.description}_${s.totalInstallmentAmount}`,description:s.description.replace(/\s*\(\d+\/\d+\)$/,""),totalInstallments:s.installments,paidInstallments:t.filter(e=>!0===e.isPaid).length,totalAmount:s.totalInstallmentAmount||s.amount,installmentAmount:s.amount,firstDate:s.date,lastDate:a.date,type:s.type,category:s.category,transactions:t}}).sort((e,t)=>new Date(e.firstDate).getTime()-new Date(t.firstDate).getTime())},[e]);if(t)return ve.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:ve.jsxs("div",{className:"animate-pulse",children:[ve.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),ve.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>ve.jsx("div",{className:"h-4 bg-gray-200 rounded"},e))})]})});if(s)return ve.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contas Parceladas"}),ve.jsx("div",{className:"text-red-600",children:ve.jsxs("p",{children:["Erro ao carregar dados: ",s]})})]});return ve.jsxs("div",{className:"bg-white p-4 lg:p-6 rounded-lg shadow border",children:[ve.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 mb-3 lg:mb-4",children:"Contas Parceladas"}),ve.jsx("div",{className:"space-y-4",children:0===l.length?ve.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhuma transaÃ§Ã£o parcelada encontrada."}):l.map(e=>{const t=(s=e.category,i.find(e=>e.name===s)||{name:s,color:"#9CA3AF",icon:"ðŸ“¦",type:"despesa"});var s;const r=e.paidInstallments/e.totalInstallments*100,n=e.totalAmount-e.paidInstallments*e.installmentAmount,l=e.paidInstallments===e.totalInstallments;return ve.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 lg:p-4 hover:bg-gray-50 transition-colors",children:[ve.jsxs("div",{className:"flex items-start justify-between",children:[ve.jsxs("div",{className:"flex-1",children:[ve.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3 mb-1 lg:mb-2",children:[ve.jsx("div",{className:"flex h-6 w-6 lg:h-8 lg:w-8 items-center justify-center rounded-xl",style:{backgroundColor:`${t.color}20`},children:ve.jsx("span",{className:"text-xs lg:text-sm",children:t.icon})}),ve.jsxs("div",{children:[ve.jsx("h4",{className:"text-xs lg:text-sm font-medium text-gray-900",children:e.category}),ve.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:e.description}),"description"in t&&t.description&&ve.jsx("p",{className:"text-[8px] lg:text-[10px] text-gray-400 mt-1 leading-tight",children:t.description})]})]}),ve.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-4 text-[10px] lg:text-xs text-gray-600 space-y-1 lg:space-y-0",children:[ve.jsxs("span",{children:[e.firstDate.toLocaleDateString("pt-BR")," - ",e.lastDate.toLocaleDateString("pt-BR")]}),ve.jsx("span",{className:"px-2 py-1 rounded-full text-[10px] lg:text-xs font-medium "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"})]})]}),ve.jsxs("div",{className:"text-right",children:[ve.jsxs("p",{className:"text-xs lg:text-sm font-semibold "+("receita"===e.type?"text-green-600":"text-red-600"),children:["receita"===e.type?"+":"-","R$ ",e.installmentAmount.toLocaleString("pt-BR")]}),ve.jsxs("p",{className:"text-[10px] lg:text-xs text-gray-500",children:["R$ ",e.installmentAmount.toLocaleString("pt-BR"),"/parcela"]})]})]}),ve.jsxs("div",{className:"mt-2 lg:mt-3",children:[ve.jsxs("div",{className:"flex items-center justify-between text-[10px] lg:text-xs text-gray-600 mb-1",children:[ve.jsx("span",{children:"Progresso do pagamento"}),ve.jsxs("span",{children:[e.paidInstallments,"/",e.totalInstallments," parcelas"]})]}),ve.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 lg:h-2",children:ve.jsx("div",{className:"h-1.5 lg:h-2 rounded-full transition-all duration-300 "+(l?"bg-green-500":"bg-blue-500"),style:{width:`${r}%`}})}),ve.jsxs("div",{className:"flex items-center justify-between text-[10px] lg:text-xs text-gray-500 mt-1",children:[ve.jsx("span",{children:l?"âœ… Completamente pago":""}),ve.jsxs("span",{className:"font-bold "+("receita"===e.type?"text-green-600":"text-red-600"),children:["Restante: R$ ",n.toLocaleString("pt-BR")]})]}),ve.jsx("div",{className:"mt-2 lg:mt-3 pt-2 lg:pt-3 border-t border-gray-100",children:ve.jsx("div",{className:"flex flex-wrap gap-1 lg:gap-2",children:e.transactions.map((e,t)=>ve.jsxs("button",{onClick:()=>(async(e,t)=>{try{console.log("ðŸ”„ [InstallmentAccounts] Iniciando atualizaÃ§Ã£o da parcela:",{transactionId:e,isPaid:t,timestamp:(new Date).toISOString()}),await a(e,{isPaid:t}),console.log(`âœ… [InstallmentAccounts] Parcela ${t?"marcada como paga":"desmarcada"}:`,{transactionId:e,isPaid:t,timestamp:(new Date).toISOString()}),setTimeout(()=>{console.log("ðŸ”„ [InstallmentAccounts] ForÃ§ando re-render apÃ³s 1 segundo...")},1e3)}catch(s){console.error("âŒ [InstallmentAccounts] Erro ao atualizar status da parcela:",s),alert("Erro ao atualizar status da parcela. Tente novamente.")}})(e.id,!e.isPaid),className:"px-2 lg:px-3 py-1 text-[10px] lg:text-xs rounded-full transition-colors "+(e.isPaid?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[e.isPaid?"âœ…":""," Parcela ",e.installmentNumber]},e.id))})})]})]},e.id)})})]})},Gr=()=>{const{user:e}=ps(),{transactions:t,deleteTransaction:s}=ds(),{categories:r,deleteCategory:n}=ys(e?.uid||"test-user-123"),[i,l]=a.useState(null),[o,c]=a.useState(!1),[d,m]=a.useState(""),x=e=>{c(!0),l(e),m("")};return ve.jsxs("div",{className:"space-y-6",children:[ve.jsxs("div",{children:[ve.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ConfiguraÃ§Ãµes"}),ve.jsx("p",{className:"text-gray-600",children:"Gerencie suas categorias e transaÃ§Ãµes"})]}),ve.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ve.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsxs("div",{children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"TransaÃ§Ãµes"}),ve.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:t.length}),ve.jsx("p",{className:"text-sm text-gray-500",children:"Total de transaÃ§Ãµes"})]}),ve.jsx("div",{className:"text-4xl",children:"ðŸ”„"})]})}),ve.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:ve.jsxs("div",{className:"flex items-center justify-between",children:[ve.jsxs("div",{children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Categorias"}),ve.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:r.length}),ve.jsx("p",{className:"text-sm text-gray-500",children:"Total de categorias"})]}),ve.jsx("div",{className:"text-4xl",children:"ðŸ“‚"})]})})]}),ve.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AÃ§Ãµes de Limpeza"}),ve.jsxs("p",{className:"text-gray-600 mb-6",children:["Use estas opÃ§Ãµes para limpar todos os dados. ",ve.jsx("strong",{children:"AtenÃ§Ã£o:"})," Estas aÃ§Ãµes nÃ£o podem ser desfeitas!"]}),ve.jsxs("div",{className:"space-y-4",children:[ve.jsxs("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50",children:[ve.jsxs("div",{className:"flex-1",children:[ve.jsx("h4",{className:"font-medium text-gray-900",children:"Excluir Todas as TransaÃ§Ãµes"}),ve.jsxs("p",{className:"text-sm text-gray-600",children:["Remove todas as transaÃ§Ãµes do sistema (",t.length," transaÃ§Ãµes)"]})]}),ve.jsx("button",{onClick:()=>x("transactions"),disabled:0===t.length,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Excluir TransaÃ§Ãµes"})]}),ve.jsxs("div",{className:"flex items-center justify-between p-4 border border-orange-200 rounded-lg bg-orange-50",children:[ve.jsxs("div",{className:"flex-1",children:[ve.jsx("h4",{className:"font-medium text-gray-900",children:"Excluir Todas as Categorias"}),ve.jsxs("p",{className:"text-sm text-gray-600",children:["Remove todas as categorias do sistema (",r.length," categorias)"]})]}),ve.jsx("button",{onClick:()=>x("categories"),disabled:0===r.length,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Excluir Categorias"})]})]})]}),o&&ve.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:ve.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[ve.jsxs("div",{className:"flex items-center mb-4",children:[ve.jsx("div",{className:"text-4xl mr-3",children:"âš ï¸"}),ve.jsxs("div",{children:[ve.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirmar ExclusÃ£o"}),ve.jsx("p",{className:"text-sm text-gray-600",children:"transactions"===i?`VocÃª estÃ¡ prestes a excluir TODAS as ${t.length} transaÃ§Ãµes.`:`VocÃª estÃ¡ prestes a excluir TODAS as ${r.length} categorias.`})]})]}),ve.jsxs("div",{className:"mb-4",children:[ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:'Digite "EXCLUIR" para confirmar:'}),ve.jsx("input",{type:"text",value:d,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"EXCLUIR"})]}),ve.jsxs("div",{className:"flex space-x-3",children:[ve.jsx("button",{onClick:()=>{c(!1),l(null),m("")},className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"}),ve.jsx("button",{onClick:"transactions"===i?async()=>{if("EXCLUIR"===d){l("transactions");try{for(const e of t)await s(e.id);alert("âœ… Todas as transaÃ§Ãµes foram excluÃ­das com sucesso!")}catch(e){console.error("Erro ao excluir transaÃ§Ãµes:",e),alert("âŒ Erro ao excluir transaÃ§Ãµes. Tente novamente.")}finally{l(null),c(!1),m("")}}else alert('Por favor, digite "EXCLUIR" para confirmar a exclusÃ£o de todas as transaÃ§Ãµes.')}:async()=>{if("EXCLUIR"===d){l("categories");try{for(const e of r)await n(e.id);alert("âœ… Todas as categorias foram excluÃ­das com sucesso!")}catch(e){console.error("Erro ao excluir categorias:",e),alert("âŒ Erro ao excluir categorias. Tente novamente.")}finally{l(null),c(!1),m("")}}else alert('Por favor, digite "EXCLUIR" para confirmar a exclusÃ£o de todas as categorias.')},disabled:"EXCLUIR"!==d||("transactions"===i?0===t.length:0===r.length),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"transactions"===i?"Excluir TransaÃ§Ãµes":"Excluir Categorias"})]})]})})]})},qr=()=>{const[e,t]=a.useState(""),[s,r]=a.useState(""),[n,i]=a.useState(!1),[l,o]=a.useState(""),[c,d]=a.useState(!1),{login:m,register:x,loginWithGoogle:u}=ps();return ve.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:ve.jsxs("div",{className:"max-w-md w-full space-y-8",children:[ve.jsxs("div",{children:[ve.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:n?"Criar Conta":"Entrar na sua conta"}),ve.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:n?"Crie uma conta para acessar o sistema":"Acesse suas configuraÃ§Ãµes e dados"})]}),ve.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async t=>{t.preventDefault(),o(""),d(!0);try{n?await x(e,s):await m(e,s)}catch(a){o(a.message||"Erro na autenticaÃ§Ã£o")}finally{d(!1)}},children:[ve.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[ve.jsxs("div",{children:[ve.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),ve.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"EndereÃ§o de email",value:e,onChange:e=>t(e.target.value)})]}),ve.jsxs("div",{children:[ve.jsx("label",{htmlFor:"password",className:"sr-only",children:"Senha"}),ve.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Senha",value:s,onChange:e=>r(e.target.value)})]})]}),l&&ve.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded",children:l}),ve.jsx("div",{children:ve.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Carregando...":n?"Criar Conta":"Entrar"})}),ve.jsxs("div",{className:"relative",children:[ve.jsx("div",{className:"absolute inset-0 flex items-center",children:ve.jsx("div",{className:"w-full border-t border-gray-300"})}),ve.jsx("div",{className:"relative flex justify-center text-sm",children:ve.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Ou continue com"})})]}),ve.jsx("div",{children:ve.jsxs("button",{type:"button",onClick:async()=>{o(""),d(!0);try{await u()}catch(e){o(e.message||"Erro no login com Google")}finally{d(!1)}},disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[ve.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[ve.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),ve.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),ve.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),ve.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c?"Carregando...":"Continuar com Google"]})}),ve.jsx("div",{className:"text-center",children:ve.jsx("button",{type:"button",onClick:()=>{i(!n),o("")},className:"text-indigo-600 hover:text-indigo-500 text-sm",children:n?"JÃ¡ tem uma conta? FaÃ§a login":"NÃ£o tem uma conta? Registre-se"})})]})]})})},Vr=()=>{const{user:e,logout:t}=ps(),[s,r]=a.useState({apiKey:"AIzaSyAKOQ_7Q6pR6UvinMwtzrNdLgpBxZ-QTxk",authDomain:"apprafael-c7411.firebaseapp.com",projectId:"apprafael-c7411",storageBucket:"apprafael-c7411.firebasestorage.app",messagingSenderId:"389810659865",appId:"1:389810659865:web:3392a3c2fe3aef4710c088",measurementId:"G-0P0HZ6ST2P"}),[n,i]=a.useState("development"),[l,o]=a.useState(""),c=(e,t)=>{r(s=>({...s,[e]:t}))};return ve.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:ve.jsx("div",{className:"max-w-4xl mx-auto",children:ve.jsx("div",{className:"bg-white shadow rounded-lg",children:ve.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[ve.jsxs("div",{className:"flex justify-between items-center mb-6",children:[ve.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ConfiguraÃ§Ãµes do Sistema"}),ve.jsxs("div",{className:"flex items-center space-x-4",children:[ve.jsxs("span",{className:"text-sm text-gray-600",children:["Logado como: ",e?.email]}),ve.jsx("button",{onClick:t,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",children:"Sair"})]})]}),l&&ve.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded",children:l}),ve.jsxs("div",{className:"space-y-6",children:[ve.jsxs("div",{children:[ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ambiente"}),ve.jsxs("div",{className:"flex space-x-4",children:[ve.jsxs("label",{className:"flex items-center",children:[ve.jsx("input",{type:"radio",value:"development",checked:"development"===n,onChange:e=>i(e.target.value),className:"mr-2"}),"Desenvolvimento"]}),ve.jsxs("label",{className:"flex items-center",children:[ve.jsx("input",{type:"radio",value:"production",checked:"production"===n,onChange:e=>i(e.target.value),className:"mr-2"}),"ProduÃ§Ã£o"]})]})]}),ve.jsxs("div",{children:[ve.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"ConfiguraÃ§Ãµes do Firebase"}),ve.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[ve.jsxs("div",{children:[ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),ve.jsx("input",{type:"text",value:s.apiKey,onChange:e=>c("apiKey",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),ve.jsxs("div",{children:[ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Auth Domain"}),ve.jsx("input",{type:"text",value:s.authDomain,onChange:e=>c("authDomain",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),ve.jsxs("div",{children:[ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project ID"}),ve.jsx("input",{type:"text",value:s.projectId,onChange:e=>c("projectId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),ve.jsxs("div",{children:[ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Bucket"}),ve.jsx("input",{type:"text",value:s.storageBucket,onChange:e=>c("storageBucket",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),ve.jsxs("div",{children:[ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Messaging Sender ID"}),ve.jsx("input",{type:"text",value:s.messagingSenderId,onChange:e=>c("messagingSenderId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),ve.jsxs("div",{children:[ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"App ID"}),ve.jsx("input",{type:"text",value:s.appId,onChange:e=>c("appId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),ve.jsxs("div",{children:[ve.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Measurement ID"}),ve.jsx("input",{type:"text",value:s.measurementId,onChange:e=>c("measurementId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),ve.jsxs("div",{className:"flex justify-between",children:[ve.jsx("button",{onClick:()=>{r({apiKey:"AIzaSyAKOQ_7Q6pR6UvinMwtzrNdLgpBxZ-QTxk",authDomain:"apprafael-c7411.firebaseapp.com",projectId:"apprafael-c7411",storageBucket:"apprafael-c7411.firebasestorage.app",messagingSenderId:"389810659865",appId:"1:389810659865:web:3392a3c2fe3aef4710c088",measurementId:"G-0P0HZ6ST2P"}),i("development")},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Restaurar PadrÃ£o"}),ve.jsx("button",{onClick:()=>{localStorage.setItem("firebaseConfig",JSON.stringify(s)),localStorage.setItem("environment",n),o("ConfiguraÃ§Ãµes salvas com sucesso!"),setTimeout(()=>o(""),3e3)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Salvar ConfiguraÃ§Ãµes"})]})]})]})})})})},Wr=({children:e})=>{const[t,s]=a.useState(!1),[r,n]=a.useState(null);return a.useEffect(()=>{const e=e=>{s(!0),n(new Error(e.message)),console.error("ðŸš¨ ErrorBoundary capturou um erro:",e.error)},t=e=>{s(!0),n(new Error(e.reason)),console.error("ðŸš¨ ErrorBoundary capturou um erro de promise:",e.reason)};return window.addEventListener("error",e),window.addEventListener("unhandledrejection",t),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",t)}},[]),t?ve.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:ve.jsxs("div",{className:"text-center p-8 bg-white rounded-lg shadow-lg max-w-md",children:[ve.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"âš ï¸"}),ve.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Algo deu errado!"}),ve.jsx("p",{className:"text-gray-600 mb-6",children:"Ocorreu um erro inesperado. Recarregue a pÃ¡gina para tentar novamente."}),ve.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-4 mb-6",children:ve.jsx("p",{className:"text-sm text-red-800 font-mono",children:r?.message||"Erro desconhecido"})}),ve.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Recarregar PÃ¡gina"})]})}):ve.jsx(ve.Fragment,{children:e})};function Yr(){const{user:e,loading:t}=ps(),[s,r]=a.useState("dashboard");if(t)return ve.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:ve.jsxs("div",{className:"text-center",children:[ve.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),ve.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})});if(!e)return ve.jsx(qr,{});return ve.jsx(cs,{userId:e.uid,children:ve.jsx("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:ve.jsxs("div",{className:"flex max-w-full",children:[ve.jsx(we,{activeTab:s,onTabChange:r}),ve.jsx("div",{className:"flex-1 lg:ml-0 ml-0 min-w-0 overflow-x-hidden",children:ve.jsx("main",{className:"px-0 lg:px-6 py-4 lg:py-6 space-y-4 lg:space-y-6 pb-20 lg:pb-6 max-w-full overflow-x-hidden",children:(()=>{switch(s){case"transactions":return ve.jsxs(ve.Fragment,{children:[ve.jsx(Fr,{}),ve.jsx("div",{className:"hidden lg:block",children:ve.jsx(zr,{})})]});case"budgets":return ve.jsx(Or,{});case"settings":return ve.jsx(Gr,{});case"admin":return ve.jsx(Vr,{});default:return ve.jsxs(ve.Fragment,{children:[ve.jsx(bs,{}),ve.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6",children:[ve.jsx(vs,{}),ve.jsx(Pr,{selectedMonth:(new Date).getMonth(),selectedYear:(new Date).getFullYear()})]}),ve.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[ve.jsxs("div",{className:"bg-white p-4 lg:p-6 rounded-lg shadow border",children:[ve.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 space-y-2 sm:space-y-0",children:[ve.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Atividades Recentes"}),ve.jsx(Lr,{onClick:()=>{}})]}),ve.jsx("p",{className:"text-sm lg:text-base text-gray-600",children:"Lista de atividades recentes serÃ¡ exibida aqui."})]}),ve.jsx(Ur,{})]})]})}})()})})]})})})}function Hr(){return ve.jsx(Wr,{children:ve.jsx(fs,{children:ve.jsx(Yr,{})})})}const Kr=document.getElementById("root");if(!Kr)throw new Error("Elemento root nÃ£o encontrado");Ne.createRoot(Kr).render(ve.jsx(a.StrictMode,{children:ve.jsx(Hr,{})}));
