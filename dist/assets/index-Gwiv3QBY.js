import{r as requireReact,a as requireReactDom,g as getDefaultExportFromCjs}from"./vendor-DtuzQOD1.js";import{r as reactExports,R as React,a as ResponsiveContainer,P as PieChart,b as Pie,C as Cell,L as Label,c as Legend,i as interpolateNumber,d as interpolateRgb,e as interpolateString,f as color,g as interpolateTransformSvg,h as interpolateTransformCss,j as band,m as max,l as linear,k as min,n as d3_line,o as monotoneX}from"./charts-C3rZDlOP.js";import{_ as _registerComponent,C as Component,r as registerVersion,S as SDK_VERSION,a as _isFirebaseServerApp,F as FirebaseError,g as getApp,b as getModularInstance,c as _getProvider,d as getDefaultEmulatorHostnameAndPort,i as isCloudWorkstation,p as pingServer,u as updateEmulatorBanner,e as createMockUserToken,E as ErrorFactory,o as openDB,L as Logger,f as isBrowserExtension,h as isIndexedDBAvailable,v as validateIndexedDBOpenable,j as calculateBackoffMillis,k as areCookiesEnabled,l as initializeApp,m as getFirestore,n as getAuth,q as doc,s as updateDoc,T as Timestamp,t as query,w as limit,x as orderBy,y as where,z as collection,A as getDocs,B as getDoc,D as deleteDoc,G as addDoc,H as onAuthStateChanged,I as signOut,J as GoogleAuthProvider,K as signInWithPopup,M as createUserWithEmailAndPassword,N as signInWithEmailAndPassword}from"./firebase-Be-lqRRh.js";import{$ as $e5534fc185f7111e$export$2e2bcd8739ae039,d as data}from"./emoji-jBXJAohu.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},hasRequiredReactJsxRuntime_production_min,hasRequiredJsxRuntime;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var e=requireReact(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function n(e,s,n){var o,l={},c=null,h=null;for(o in void 0!==n&&(c=""+n),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(h=s.ref),s)r.call(s,o)&&!i.hasOwnProperty(o)&&(l[o]=s[o]);if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===l[o]&&(l[o]=s[o]);return{$$typeof:t,type:e,key:c,ref:h,props:l,_owner:a.current}}return reactJsxRuntime_production_min.Fragment=s,reactJsxRuntime_production_min.jsx=n,reactJsxRuntime_production_min.jsxs=n,reactJsxRuntime_production_min}function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var e=requireReactDom();return client.createRoot=e.createRoot,client.hydrateRoot=e.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,function(module,exports){var factory2;"undefined"!=typeof document&&"undefined"!=typeof navigator&&(factory2=function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(e){return document.createElement(e)}function extendPrototype(e,t){var s,r,a=e.length;for(s=0;s<a;s+=1)for(var i in r=e[s].prototype)Object.prototype.hasOwnProperty.call(r,i)&&(t.prototype[i]=r[i])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}var audioControllerFactory=function(){function e(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].pause()},resume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].resume()},setRate:function(e){var t,s=this.audios.length;for(t=0;t<s;t+=1)this.audios[t].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):window.Howl?new window.Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),createTypedArray=function(){function e(e,t){var s,r=0,a=[];switch(e){case"int16":case"uint8c":s=1;break;default:s=1.1}for(r=0;r<t;r+=1)a.push(s);return a}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,s){return"float32"===t?new Float32Array(s):"int16"===t?new Int16Array(s):"uint8c"===t?new Uint8ClampedArray(s):e(t,s)}:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function _typeof$6(e){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};!function(){var e,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],s=t.length;for(e=0;e<s;e+=1)BMMath[t[e]]=Math[t[e]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"===_typeof$6(e)&&e.length){var t,s=createSizedArray(e.length),r=e.length;for(t=0;t<r;t+=1)s[t]=Math.abs(e[t]);return s}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,s,r){this.type=e,this.currentTime=t,this.totalTime=s,this.direction=r<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,s,r){this.type=e,this.currentLoop=s,this.totalLoops=t,this.direction=r<0?-1:1}function BMSegmentStartEvent(e,t,s){this.type=e,this.firstFrame=t,this.totalFrames=s}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}var createElementID=function(){var e=0;return function(){return idPrefix$1+"__lottie_element_"+(e+=1)}}();function HSVtoRGB(e,t,s){var r,a,i,n,o,l,c,h;switch(l=s*(1-t),c=s*(1-(o=6*e-(n=Math.floor(6*e)))*t),h=s*(1-(1-o)*t),n%6){case 0:r=s,a=h,i=l;break;case 1:r=c,a=s,i=l;break;case 2:r=l,a=s,i=h;break;case 3:r=l,a=c,i=s;break;case 4:r=h,a=l,i=s;break;case 5:r=s,a=l,i=c}return[r,a,i]}function RGBtoHSV(e,t,s){var r,a=Math.max(e,t,s),i=Math.min(e,t,s),n=a-i,o=0===a?0:n/a,l=a/255;switch(a){case i:r=0;break;case e:r=t-s+n*(t<s?6:0),r/=6*n;break;case t:r=s-e+2*n,r/=6*n;break;case s:r=e-t+4*n,r/=6*n}return[r,o,l]}function addSaturationToRGB(e,t){var s=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return s[1]+=t,s[1]>1?s[1]=1:s[1]<=0&&(s[1]=0),HSVtoRGB(s[0],s[1],s[2])}function addBrightnessToRGB(e,t){var s=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return s[2]+=t,s[2]>1?s[2]=1:s[2]<0&&(s[2]=0),HSVtoRGB(s[0],s[1],s[2])}function addHueToRGB(e,t){var s=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return s[0]+=t/360,s[0]>1?s[0]-=1:s[0]<0&&(s[0]+=1),HSVtoRGB(s[0],s[1],s[2])}var rgbToHex=function(){var e,t,s=[];for(e=0;e<256;e+=1)t=e.toString(16),s[e]=1===t.length?"0"+t:t;return function(e,t,r){return e<0&&(e=0),t<0&&(t=0),r<0&&(r=0),"#"+s[e]+s[t]+s[r]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e};function createNS(e){return document.createElementNS(svgNS,e)}function _typeof$5(e){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var dataManager=function(){var e,t,s=1,r=[],a={onmessage:function(){},postMessage:function(t){e({data:t})}},i={postMessage:function(e){a.onmessage({data:e})}};function n(){t||((t=function(t){if(window.Worker&&window.Blob&&getWebWorker()){var s=new Blob(["var _workerSelf = self; self.onmessage = ",t.toString()],{type:"text/javascript"}),r=URL.createObjectURL(s);return new Worker(r)}return e=t,a}(function(e){if(i.dataManager||(i.dataManager=function(){function e(a,i){var n,o,l,c,p,d,m=a.length;for(o=0;o<m;o+=1)if("ks"in(n=a[o])&&!n.completed){if(n.completed=!0,n.hasMask){var u=n.masksProperties;for(c=u.length,l=0;l<c;l+=1)if(u[l].pt.k.i)r(u[l].pt.k);else for(d=u[l].pt.k.length,p=0;p<d;p+=1)u[l].pt.k[p].s&&r(u[l].pt.k[p].s[0]),u[l].pt.k[p].e&&r(u[l].pt.k[p].e[0])}0===n.ty?(n.layers=t(n.refId,i),e(n.layers,i)):4===n.ty?s(n.shapes):5===n.ty&&h(n)}}function t(e,t){var s=function(e,t){for(var s=0,r=t.length;s<r;){if(t[s].id===e)return t[s];s+=1}return null}(e,t);return s?s.layers.__used?JSON.parse(JSON.stringify(s.layers)):(s.layers.__used=!0,s.layers):null}function s(e){var t,a,i;for(t=e.length-1;t>=0;t-=1)if("sh"===e[t].ty)if(e[t].ks.k.i)r(e[t].ks.k);else for(i=e[t].ks.k.length,a=0;a<i;a+=1)e[t].ks.k[a].s&&r(e[t].ks.k[a].s[0]),e[t].ks.k[a].e&&r(e[t].ks.k[a].e[0]);else"gr"===e[t].ty&&s(e[t].it)}function r(e){var t,s=e.i.length;for(t=0;t<s;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function a(e,t){var s=t?t.split("."):[100,100,100];return e[0]>s[0]||!(s[0]>e[0])&&(e[1]>s[1]||!(s[1]>e[1])&&(e[2]>s[2]||!(s[2]>e[2])&&null))}var i=function(){var e=[4,4,14];function t(e){var t=e.t.d;e.t.d={k:[{s:t,t:0}]}}function s(e){var s,r=e.length;for(s=0;s<r;s+=1)5===e[s].ty&&t(e[s])}return function(t){if(a(e,t.v)&&(s(t.layers),t.assets)){var r,i=t.assets.length;for(r=0;r<i;r+=1)t.assets[r].layers&&s(t.assets[r].layers)}}}(),n=function(){var e=[4,7,99];return function(t){if(t.chars&&!a(e,t.v)){var r,i=t.chars.length;for(r=0;r<i;r+=1){var n=t.chars[r];n.data&&n.data.shapes&&(s(n.data.shapes),n.data.ip=0,n.data.op=99999,n.data.st=0,n.data.sr=1,n.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},t.chars[r].t||(n.data.shapes.push({ty:"no"}),n.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),o=function(){var e=[5,7,15];function t(e){var t=e.t.p;"number"==typeof t.a&&(t.a={a:0,k:t.a}),"number"==typeof t.p&&(t.p={a:0,k:t.p}),"number"==typeof t.r&&(t.r={a:0,k:t.r})}function s(e){var s,r=e.length;for(s=0;s<r;s+=1)5===e[s].ty&&t(e[s])}return function(t){if(a(e,t.v)&&(s(t.layers),t.assets)){var r,i=t.assets.length;for(r=0;r<i;r+=1)t.assets[r].layers&&s(t.assets[r].layers)}}}(),l=function(){var e=[4,1,9];function t(e){var s,r,a,i=e.length;for(s=0;s<i;s+=1)if("gr"===e[s].ty)t(e[s].it);else if("fl"===e[s].ty||"st"===e[s].ty)if(e[s].c.k&&e[s].c.k[0].i)for(a=e[s].c.k.length,r=0;r<a;r+=1)e[s].c.k[r].s&&(e[s].c.k[r].s[0]/=255,e[s].c.k[r].s[1]/=255,e[s].c.k[r].s[2]/=255,e[s].c.k[r].s[3]/=255),e[s].c.k[r].e&&(e[s].c.k[r].e[0]/=255,e[s].c.k[r].e[1]/=255,e[s].c.k[r].e[2]/=255,e[s].c.k[r].e[3]/=255);else e[s].c.k[0]/=255,e[s].c.k[1]/=255,e[s].c.k[2]/=255,e[s].c.k[3]/=255}function s(e){var s,r=e.length;for(s=0;s<r;s+=1)4===e[s].ty&&t(e[s].shapes)}return function(t){if(a(e,t.v)&&(s(t.layers),t.assets)){var r,i=t.assets.length;for(r=0;r<i;r+=1)t.assets[r].layers&&s(t.assets[r].layers)}}}(),c=function(){var e=[4,4,18];function t(e){var s,r,a;for(s=e.length-1;s>=0;s-=1)if("sh"===e[s].ty)if(e[s].ks.k.i)e[s].ks.k.c=e[s].closed;else for(a=e[s].ks.k.length,r=0;r<a;r+=1)e[s].ks.k[r].s&&(e[s].ks.k[r].s[0].c=e[s].closed),e[s].ks.k[r].e&&(e[s].ks.k[r].e[0].c=e[s].closed);else"gr"===e[s].ty&&t(e[s].it)}function s(e){var s,r,a,i,n,o,l=e.length;for(r=0;r<l;r+=1){if((s=e[r]).hasMask){var c=s.masksProperties;for(i=c.length,a=0;a<i;a+=1)if(c[a].pt.k.i)c[a].pt.k.c=c[a].cl;else for(o=c[a].pt.k.length,n=0;n<o;n+=1)c[a].pt.k[n].s&&(c[a].pt.k[n].s[0].c=c[a].cl),c[a].pt.k[n].e&&(c[a].pt.k[n].e[0].c=c[a].cl)}4===s.ty&&t(s.shapes)}}return function(t){if(a(e,t.v)&&(s(t.layers),t.assets)){var r,i=t.assets.length;for(r=0;r<i;r+=1)t.assets[r].layers&&s(t.assets[r].layers)}}}();function h(e){0===e.t.a.length&&e.t.p}var p={completeData:function(s){s.__complete||(l(s),i(s),n(s),o(s),c(s),e(s.layers,s.assets),function(s,r){if(s){var a=0,i=s.length;for(a=0;a<i;a+=1)1===s[a].t&&(s[a].data.layers=t(s[a].data.refId,r),e(s[a].data.layers,r))}}(s.chars,s.assets),s.__complete=!0)}};return p.checkColors=l,p.checkChars=n,p.checkPathProperties=o,p.checkShapes=c,p.completeLayers=e,p}()),i.assetLoader||(i.assetLoader=function(){function e(e){var t=e.getResponseHeader("content-type");return t&&"json"===e.responseType&&-1!==t.indexOf("json")||e.response&&"object"===_typeof$5(e.response)?e.response:e.response&&"string"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):null}return{load:function(t,s,r,a){var i,n=new XMLHttpRequest;try{n.responseType="json"}catch(o){}n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)i=e(n),r(i);else try{i=e(n),r(i)}catch(o){a&&a(o)}};try{n.open(["G","E","T"].join(""),t,!0)}catch(l){n.open(["G","E","T"].join(""),s+"/"+t,!0)}n.send()}}}()),"loadAnimation"===e.data.type)i.assetLoader.load(e.data.path,e.data.fullPath,function(t){i.dataManager.completeData(t),i.postMessage({id:e.data.id,payload:t,status:"success"})},function(){i.postMessage({id:e.data.id,status:"error"})});else if("complete"===e.data.type){var t=e.data.animation;i.dataManager.completeData(t),i.postMessage({id:e.data.id,payload:t,status:"success"})}else"loadData"===e.data.type&&i.assetLoader.load(e.data.path,e.data.fullPath,function(t){i.postMessage({id:e.data.id,payload:t,status:"success"})},function(){i.postMessage({id:e.data.id,status:"error"})})})).onmessage=function(e){var t=e.data,s=t.id,a=r[s];r[s]=null,"success"===t.status?a.onComplete(t.payload):a.onError&&a.onError()})}function o(e,t){var a="processId_"+(s+=1);return r[a]={onComplete:e,onError:t},a}return{loadAnimation:function(e,s,r){n();var a=o(s,r);t.postMessage({type:"loadAnimation",path:e,fullPath:window.location.origin+window.location.pathname,id:a})},loadData:function(e,s,r){n();var a=o(s,r);t.postMessage({type:"loadData",path:e,fullPath:window.location.origin+window.location.pathname,id:a})},completeAnimation:function(e,s,r){n();var a=o(s,r);t.postMessage({type:"complete",animation:e,id:a})}}}(),ImagePreloader=function(){var e=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function s(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(e,t,s){var r="";if(e.e)r=e.p;else if(t){var a=e.p;-1!==a.indexOf("images/")&&(a=a.split("/")[1]),r=t+a}else r=s,r+=e.u?e.u:"",r+=e.p;return r}function a(e){var t=0,s=setInterval(function(){(e.getBBox().width||t>500)&&(this._imageLoaded(),clearInterval(s)),t+=1}.bind(this),50)}function i(e){var t={assetData:e},s=r(e,this.assetsPath,this.path);return dataManager.loadData(s,function(e){t.img=e,this._footageLoaded()}.bind(this),function(){t.img={},this._footageLoaded()}.bind(this)),t}function n(){this._imageLoaded=t.bind(this),this._footageLoaded=s.bind(this),this.testImageLoaded=a.bind(this),this.createFootageData=i.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return n.prototype={loadAssets:function(e,t){var s;this.imagesLoadedCb=t;var r=e.length;for(s=0;s<r;s+=1)e[s].layers||(e[s].t&&"seq"!==e[s].t?3===e[s].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(e[s]))):(this.totalImages+=1,this.images.push(this._createImageData(e[s]))))},setAssetsPath:function(e){this.assetsPath=e||""},setPath:function(e){this.path=e||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(e){for(var t=0,s=this.images.length;t<s;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}return null},createImgData:function(t){var s=r(t,this.assetsPath,this.path),a=createTag("img");a.crossOrigin="anonymous",a.addEventListener("load",this._imageLoaded,!1),a.addEventListener("error",function(){i.img=e,this._imageLoaded()}.bind(this),!1),a.src=s;var i={img:a,assetData:t};return i},createImageData:function(t){var s=r(t,this.assetsPath,this.path),a=createNS("image");isSafari?this.testImageLoaded(a):a.addEventListener("load",this._imageLoaded,!1),a.addEventListener("error",function(){i.img=e,this._imageLoaded()}.bind(this),!1),a.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this._elementHelper.append?this._elementHelper.append(a):this._elementHelper.appendChild(a);var i={img:a,assetData:t};return i},imageLoaded:t,footageLoaded:s,setCacheType:function(e,t){"svg"===e?(this._elementHelper=t,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},n}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var s=this._cbs[e],r=0;r<s.length;r+=1)s[r](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),function(){this.removeEventListener(e,t)}.bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var s=0,r=this._cbs[e].length;s<r;)this._cbs[e][s]===t&&(this._cbs[e].splice(s,1),s-=1,r-=1),s+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var markerParser=function(){function e(e){for(var t,s=e.split("\r\n"),r={},a=0,i=0;i<s.length;i+=1)2===(t=s[i].split(":")).length&&(r[t[0]]=t[1].trim(),a+=1);if(0===a)throw new Error;return r}return function(t){for(var s=[],r=0;r<t.length;r+=1){var a=t[r],i={time:a.tm,duration:a.dr};try{i.payload=JSON.parse(t[r].cm)}catch(n){try{i.payload=e(t[r].cm)}catch(o){i.payload={name:t[r].cm}}}s.push(i)}return s}}(),ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,s=this.compositions.length;t<s;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),renderers={},registerRenderer=function(e,t){renderers[e]=t};function getRenderer(e){return renderers[e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var e in renderers)if(renderers[e])return e;return""}function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t="svg";e.animType?t=e.animType:e.renderer&&(t=e.renderer);var s=getRenderer(t);this.renderer=new s(this,e.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===e.loop||null===e.loop||void 0===e.loop||!0===e.loop?this.loop=!0:!1===e.loop?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(e,"autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(e){dataManager.completeAnimation(e,this.configAnimation)},AnimationItem.prototype.setData=function(e,t){t&&"object"!==_typeof$4(t)&&(t=JSON.parse(t));var s={wrapper:e,animationData:t},r=e.attributes;s.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",s.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var a=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";"false"===a?s.loop=!1:"true"===a?s.loop=!0:""!==a&&(s.loop=parseInt(a,10));var i=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;s.autoplay="false"!==i,s.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(s.prerender=!1),s.path?this.setParams(s):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var t,s,r=this.animationData.layers,a=r.length,i=e.layers,n=i.length;for(s=0;s<n;s+=1)for(t=0;t<a;){if(r[t].id===i[s].id){r[t]=i[s];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(a=e.assets.length,t=0;t<a;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(e){this.animationData=e;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var s=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(s,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(e,t){var s="number"==typeof e?e:void 0,r="number"==typeof t?t:void 0;this.renderer.updateContainerSize(s,r)},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var t,s=0;s<this.markers.length;s+=1)if((t=this.markers[s]).payload&&t.payload.name===e)return t;return null},AnimationItem.prototype.goToAndStop=function(e,t,s){if(!s||this.name===s){var r=Number(e);if(isNaN(r)){var a=this.getMarkerData(e);a&&this.goToAndStop(a.time,!0)}else t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,t,s){if(!s||this.name===s){var r=Number(e);if(isNaN(r)){var a=this.getMarkerData(e);a&&(a.duration?this.playSegments([a.time,a.time+a.duration],!0):this.goToAndStop(a.time,!0))}else this.goToAndStop(r,t,s);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!0!==this.isPaused&&!1!==this.isLoaded){var t=this.currentRawFrame+e*this.frameModifier,s=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(s=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(s=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),s&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var s=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?s=e:this.currentRawFrame+this.firstFrame>t&&(s=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,-1!==s&&this.goToAndStop(s,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"===_typeof$4(e[0])){var s,r=e.length;for(s=0;s<r;s+=1)this.segments.push(e[s])}else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(e){this.loop=e},AnimationItem.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(e.e)t=e.p;else if(this.assetsPath){var s=e.p;-1!==s.indexOf("images/")&&(s=s.split("/")[1]),t=this.assetsPath+s}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,s=this.assets.length;t<s;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(e,t,s){try{this.renderer.getElementByPath(e).updateDocumentData(t,s)}catch(r){}},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=function(){var e={},t=[],s=0,r=0,a=0,i=!0,n=!1;function o(e){for(var s=0,a=e.target;s<r;)t[s].animation===a&&(t.splice(s,1),s-=1,r-=1,a.isPaused||h()),s+=1}function l(e,s){if(!e)return null;for(var a=0;a<r;){if(t[a].elem===e&&null!==t[a].elem)return t[a].animation;a+=1}var i=new AnimationItem;return p(i,e),i.setData(e,s),i}function c(){a+=1,u()}function h(){a-=1}function p(e,s){e.addEventListener("destroy",o),e.addEventListener("_active",c),e.addEventListener("_idle",h),t.push({elem:s,animation:e}),r+=1}function d(e){var o,l=e-s;for(o=0;o<r;o+=1)t[o].animation.advanceTime(l);s=e,a&&!n?window.requestAnimationFrame(d):i=!0}function m(e){s=e,window.requestAnimationFrame(d)}function u(){!n&&a&&i&&(window.requestAnimationFrame(m),i=!1)}return e.registerAnimation=l,e.loadAnimation=function(e){var t=new AnimationItem;return p(t,null),t.setParams(e),t},e.setSpeed=function(e,s){var a;for(a=0;a<r;a+=1)t[a].animation.setSpeed(e,s)},e.setDirection=function(e,s){var a;for(a=0;a<r;a+=1)t[a].animation.setDirection(e,s)},e.play=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.play(e)},e.pause=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.pause(e)},e.stop=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.stop(e)},e.togglePause=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.togglePause(e)},e.searchAnimations=function(e,t,s){var r,a=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),i=a.length;for(r=0;r<i;r+=1)s&&a[r].setAttribute("data-bm-type",s),l(a[r],e);if(t&&0===i){s||(s="svg");var n=document.getElementsByTagName("body")[0];n.innerText="";var o=createTag("div");o.style.width="100%",o.style.height="100%",o.setAttribute("data-bm-type",s),n.appendChild(o),l(o,e)}},e.resize=function(){var e;for(e=0;e<r;e+=1)t[e].animation.resize()},e.goToAndStop=function(e,s,a){var i;for(i=0;i<r;i+=1)t[i].animation.goToAndStop(e,s,a)},e.destroy=function(e){var s;for(s=r-1;s>=0;s-=1)t[s].animation.destroy(e)},e.freeze=function(){n=!0},e.unfreeze=function(){n=!1,u()},e.setVolume=function(e,s){var a;for(a=0;a<r;a+=1)t[a].animation.setVolume(e,s)},e.mute=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.mute(e)},e.unmute=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.unmute(e)},e.getRegisteredAnimations=function(){var e,s=t.length,r=[];for(e=0;e<s;e+=1)r.push(t[e].animation);return r},e}(),BezierFactory=function(){var e={getBezierEasing:function(e,s,r,a,i){var n=i||("bez_"+e+"_"+s+"_"+r+"_"+a).replace(/\./g,"p");if(t[n])return t[n];var o=new h([e,s,r,a]);return t[n]=o,o}},t={},s=11,r=1/(s-1),a="function"==typeof Float32Array;function i(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function o(e){return 3*e}function l(e,t,s){return((i(t,s)*e+n(t,s))*e+o(t))*e}function c(e,t,s){return 3*i(t,s)*e*e+2*n(t,s)*e+o(t)}function h(e){this._p=e,this._mSampleValues=a?new Float32Array(s):new Array(s),this._precomputed=!1,this.get=this.get.bind(this)}return h.prototype={get:function(e){var t=this._p[0],s=this._p[1],r=this._p[2],a=this._p[3];return this._precomputed||this._precompute(),t===s&&r===a?e:0===e?0:1===e?1:l(this._getTForX(e),s,a)},_precompute:function(){var e=this._p[0],t=this._p[1],s=this._p[2],r=this._p[3];this._precomputed=!0,e===t&&s===r||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],a=0;a<s;++a)this._mSampleValues[a]=l(a*r,e,t)},_getTForX:function(e){for(var t=this._p[0],a=this._p[2],i=this._mSampleValues,n=0,o=1,h=s-1;o!==h&&i[o]<=e;++o)n+=r;var p=n+(e-i[--o])/(i[o+1]-i[o])*r,d=c(p,t,a);return d>=.001?function(e,t,s,r){for(var a=0;a<4;++a){var i=c(t,s,r);if(0===i)return t;t-=(l(t,s,r)-e)/i}return t}(e,p,t,a):0===d?p:function(e,t,s,r,a){var i,n,o=0;do{(i=l(n=t+(s-t)/2,r,a)-e)>0?s=n:t=n}while(Math.abs(i)>1e-7&&++o<10);return n}(e,n,n+r,t,a)}},e}(),pooling=function(){return{double:function(e){return e.concat(createSizedArray(e.length))}}}(),poolFactory=function(){return function(e,t,s){var r=0,a=e,i=createSizedArray(a);return{newElement:function(){return r?i[r-=1]:t()},release:function(e){r===a&&(i=pooling.double(i),a*=2),s&&s(e),i[r]=e,r+=1}}}}(),bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(e){var t,s=e.lengths.length;for(t=0;t<s;t+=1)bezierLengthPool.release(e.lengths[t]);e.lengths.length=0});function bezFunction(){var e=Math;function t(e,t,s,r,a,i){var n=e*r+t*a+s*i-a*r-i*e-s*t;return n>-.001&&n<.001}var s=function(){return function(e,t,s,r){var a,i,n,o,l,c,h=getDefaultCurveSegments(),p=0,d=[],m=[],u=bezierLengthPool.newElement();for(n=s.length,a=0;a<h;a+=1){for(l=a/(h-1),c=0,i=0;i<n;i+=1)o=bmPow(1-l,3)*e[i]+3*bmPow(1-l,2)*l*s[i]+3*(1-l)*bmPow(l,2)*r[i]+bmPow(l,3)*t[i],d[i]=o,null!==m[i]&&(c+=bmPow(d[i]-m[i],2)),m[i]=d[i];c&&(p+=c=bmSqrt(c)),u.percents[a]=l,u.lengths[a]=p}return u.addedLength=p,u}}();function r(e){this.segmentLength=0,this.points=new Array(e)}function a(e,t){this.partialLength=e,this.point=t}var i=function(){var e={};return function(s,i,n,o){var l=(s[0]+"_"+s[1]+"_"+i[0]+"_"+i[1]+"_"+n[0]+"_"+n[1]+"_"+o[0]+"_"+o[1]).replace(/\./g,"p");if(!e[l]){var c,h,p,d,m,u,x,f=getDefaultCurveSegments(),g=0,y=null;2===s.length&&(s[0]!==i[0]||s[1]!==i[1])&&t(s[0],s[1],i[0],i[1],s[0]+n[0],s[1]+n[1])&&t(s[0],s[1],i[0],i[1],i[0]+o[0],i[1]+o[1])&&(f=2);var v=new r(f);for(p=n.length,c=0;c<f;c+=1){for(x=createSizedArray(p),m=c/(f-1),u=0,h=0;h<p;h+=1)d=bmPow(1-m,3)*s[h]+3*bmPow(1-m,2)*m*(s[h]+n[h])+3*(1-m)*bmPow(m,2)*(i[h]+o[h])+bmPow(m,3)*i[h],x[h]=d,null!==y&&(u+=bmPow(x[h]-y[h],2));g+=u=bmSqrt(u),v.points[c]=new a(u,x),y=x}v.segmentLength=g,e[l]=v}return e[l]}}();function n(e,t){var s=t.percents,r=t.lengths,a=s.length,i=bmFloor((a-1)*e),n=e*t.addedLength,o=0;if(i===a-1||0===i||n===r[i])return s[i];for(var l=r[i]>n?-1:1,c=!0;c;)if(r[i]<=n&&r[i+1]>n?(o=(n-r[i])/(r[i+1]-r[i]),c=!1):i+=l,i<0||i>=a-1){if(i===a-1)return s[i];c=!1}return s[i]+(s[i+1]-s[i])*o}var o=createTypedArray("float32",8);return{getSegmentsLength:function(e){var t,r=segmentsLengthPool.newElement(),a=e.c,i=e.v,n=e.o,o=e.i,l=e._length,c=r.lengths,h=0;for(t=0;t<l-1;t+=1)c[t]=s(i[t],i[t+1],n[t],o[t+1]),h+=c[t].addedLength;return a&&l&&(c[t]=s(i[t],i[0],n[t],o[0]),h+=c[t].addedLength),r.totalLength=h,r},getNewSegment:function(t,s,r,a,i,l,c){i<0?i=0:i>1&&(i=1);var h,p=n(i,c),d=n(l=l>1?1:l,c),m=t.length,u=1-p,x=1-d,f=u*u*u,g=p*u*u*3,y=p*p*u*3,v=p*p*p,b=u*u*x,E=p*u*x+u*p*x+u*u*d,j=p*p*x+u*p*d+p*u*d,R=p*p*d,w=u*x*x,S=p*x*x+u*d*x+u*x*d,N=p*d*x+u*d*d+p*x*d,C=p*d*d,_=x*x*x,P=d*x*x+x*d*x+x*x*d,T=d*d*x+x*d*d+d*x*d,A=d*d*d;for(h=0;h<m;h+=1)o[4*h]=e.round(1e3*(f*t[h]+g*r[h]+y*a[h]+v*s[h]))/1e3,o[4*h+1]=e.round(1e3*(b*t[h]+E*r[h]+j*a[h]+R*s[h]))/1e3,o[4*h+2]=e.round(1e3*(w*t[h]+S*r[h]+N*a[h]+C*s[h]))/1e3,o[4*h+3]=e.round(1e3*(_*t[h]+P*r[h]+T*a[h]+A*s[h]))/1e3;return o},getPointInSegment:function(t,s,r,a,i,o){var l=n(i,o),c=1-l;return[e.round(1e3*(c*c*c*t[0]+(l*c*c+c*l*c+c*c*l)*r[0]+(l*l*c+c*l*l+l*c*l)*a[0]+l*l*l*s[0]))/1e3,e.round(1e3*(c*c*c*t[1]+(l*c*c+c*l*c+c*c*l)*r[1]+(l*l*c+c*l*l+l*c*l)*a[1]+l*l*l*s[1]))/1e3]},buildBezierData:i,pointOnLine2D:t,pointOnLine3D:function(s,r,a,i,n,o,l,c,h){if(0===a&&0===o&&0===h)return t(s,r,i,n,l,c);var p,d=e.sqrt(e.pow(i-s,2)+e.pow(n-r,2)+e.pow(o-a,2)),m=e.sqrt(e.pow(l-s,2)+e.pow(c-r,2)+e.pow(h-a,2)),u=e.sqrt(e.pow(l-i,2)+e.pow(c-n,2)+e.pow(h-o,2));return(p=d>m?d>u?d-m-u:u-m-d:u>m?u-m-d:m-d-u)>-1e-4&&p<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(e,t){var s,r=this.offsetTime;"multidimensional"===this.propType&&(s=createTypedArray("float32",this.pv.length));for(var a,i,n,o,l,c,h,p,d,m=t.lastIndex,u=m,x=this.keyframes.length-1,f=!0;f;){if(a=this.keyframes[u],i=this.keyframes[u+1],u===x-1&&e>=i.t-r){a.h&&(a=i),m=0;break}if(i.t-r>e){m=u;break}u<x-1?u+=1:(m=0,f=!1)}n=this.keyframesMetadata[u]||{};var g,y=i.t-r,v=a.t-r;if(a.to){n.bezierData||(n.bezierData=bez.buildBezierData(a.s,i.s||a.e,a.to,a.ti));var b=n.bezierData;if(e>=y||e<v){var E=e>=y?b.points.length-1:0;for(l=b.points[E].point.length,o=0;o<l;o+=1)s[o]=b.points[E].point[o]}else{n.__fnct?d=n.__fnct:(d=BezierFactory.getBezierEasing(a.o.x,a.o.y,a.i.x,a.i.y,a.n).get,n.__fnct=d),c=d((e-v)/(y-v));var j,R=b.segmentLength*c,w=t.lastFrame<e&&t._lastKeyframeIndex===u?t._lastAddedLength:0;for(p=t.lastFrame<e&&t._lastKeyframeIndex===u?t._lastPoint:0,f=!0,h=b.points.length;f;){if(w+=b.points[p].partialLength,0===R||0===c||p===b.points.length-1){for(l=b.points[p].point.length,o=0;o<l;o+=1)s[o]=b.points[p].point[o];break}if(R>=w&&R<w+b.points[p+1].partialLength){for(j=(R-w)/b.points[p+1].partialLength,l=b.points[p].point.length,o=0;o<l;o+=1)s[o]=b.points[p].point[o]+(b.points[p+1].point[o]-b.points[p].point[o])*j;break}p<h-1?p+=1:f=!1}t._lastPoint=p,t._lastAddedLength=w-b.points[p].partialLength,t._lastKeyframeIndex=u}}else{var S,N,C,_,P;if(x=a.s.length,g=i.s||a.e,this.sh&&1!==a.h)e>=y?(s[0]=g[0],s[1]=g[1],s[2]=g[2]):e<=v?(s[0]=a.s[0],s[1]=a.s[1],s[2]=a.s[2]):quaternionToEuler(s,slerp(createQuaternion(a.s),createQuaternion(g),(e-v)/(y-v)));else for(u=0;u<x;u+=1)1!==a.h&&(e>=y?c=1:e<v?c=0:(a.o.x.constructor===Array?(n.__fnct||(n.__fnct=[]),n.__fnct[u]?d=n.__fnct[u]:(S=void 0===a.o.x[u]?a.o.x[0]:a.o.x[u],N=void 0===a.o.y[u]?a.o.y[0]:a.o.y[u],C=void 0===a.i.x[u]?a.i.x[0]:a.i.x[u],_=void 0===a.i.y[u]?a.i.y[0]:a.i.y[u],d=BezierFactory.getBezierEasing(S,N,C,_).get,n.__fnct[u]=d)):n.__fnct?d=n.__fnct:(S=a.o.x,N=a.o.y,C=a.i.x,_=a.i.y,d=BezierFactory.getBezierEasing(S,N,C,_).get,a.keyframeMetadata=d),c=d((e-v)/(y-v)))),g=i.s||a.e,P=1===a.h?a.s[u]:a.s[u]+(g[u]-a.s[u])*c,"multidimensional"===this.propType?s[u]=P:s=P}return t.lastIndex=m,s}function slerp(e,t,s){var r,a,i,n,o,l=[],c=e[0],h=e[1],p=e[2],d=e[3],m=t[0],u=t[1],x=t[2],f=t[3];return(a=c*m+h*u+p*x+d*f)<0&&(a=-a,m=-m,u=-u,x=-x,f=-f),1-a>1e-6?(r=Math.acos(a),i=Math.sin(r),n=Math.sin((1-s)*r)/i,o=Math.sin(s*r)/i):(n=1-s,o=s),l[0]=n*c+o*m,l[1]=n*h+o*u,l[2]=n*p+o*x,l[3]=n*d+o*f,l}function quaternionToEuler(e,t){var s=t[0],r=t[1],a=t[2],i=t[3],n=Math.atan2(2*r*i-2*s*a,1-2*r*r-2*a*a),o=Math.asin(2*s*r+2*a*i),l=Math.atan2(2*s*i-2*r*a,1-2*s*s-2*a*a);e[0]=n/degToRads,e[1]=o/degToRads,e[2]=l/degToRads}function createQuaternion(e){var t=e[0]*degToRads,s=e[1]*degToRads,r=e[2]*degToRads,a=Math.cos(t/2),i=Math.cos(s/2),n=Math.cos(r/2),o=Math.sin(t/2),l=Math.sin(s/2),c=Math.sin(r/2);return[o*l*n+a*i*c,o*i*n+a*l*c,a*l*n-o*i*c,a*i*n-o*l*c]}function getValueAtCurrentTime(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,s=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=s&&e>=s||this._caching.lastFrame<t&&e<t))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var r=this.interpolateValue(e,this._caching);this.pv=r}return this._caching.lastFrame=e,this.pv}function setVValue(e){var t;if("unidimensional"===this.propType)t=e*this.mult,mathAbs(this.v-t)>1e-5&&(this.v=t,this._mdf=!0);else for(var s=0,r=this.v.length;s<r;)t=e[s]*this.mult,mathAbs(this.v[s]-t)>1e-5&&(this.v[s]=t,this._mdf=!0),s+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e;this.lock=!0,this._mdf=this._isFirstFrame;var t=this.effectsSequence.length,s=this.kf?this.pv:this.data.k;for(e=0;e<t;e+=1)s=this.effectsSequence[e](s);this.setVValue(s),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function ValueProperty(e,t,s,r){this.propType="unidimensional",this.mult=s||1,this.data=t,this.v=s?t.k*s:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(e,t,s,r){var a;this.propType="multidimensional",this.mult=s||1,this.data=t,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i=t.k.length;for(this.v=createTypedArray("float32",i),this.pv=createTypedArray("float32",i),this.vel=createTypedArray("float32",i),a=0;a<i;a+=1)this.v[a]=t.k[a]*this.mult,this.pv[a]=t.k[a];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(e,t,s,r){this.propType="unidimensional",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=s||1,this.elem=e,this.container=r,this.comp=e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(e,t,s,r){var a;this.propType="multidimensional";var i,n,o,l,c=t.k.length;for(a=0;a<c-1;a+=1)t.k[a].to&&t.k[a].s&&t.k[a+1]&&t.k[a+1].s&&(i=t.k[a].s,n=t.k[a+1].s,o=t.k[a].to,l=t.k[a].ti,(2===i.length&&(i[0]!==n[0]||i[1]!==n[1])&&bez.pointOnLine2D(i[0],i[1],n[0],n[1],i[0]+o[0],i[1]+o[1])&&bez.pointOnLine2D(i[0],i[1],n[0],n[1],n[0]+l[0],n[1]+l[1])||3===i.length&&(i[0]!==n[0]||i[1]!==n[1]||i[2]!==n[2])&&bez.pointOnLine3D(i[0],i[1],i[2],n[0],n[1],n[2],i[0]+o[0],i[1]+o[1],i[2]+o[2])&&bez.pointOnLine3D(i[0],i[1],i[2],n[0],n[1],n[2],n[0]+l[0],n[1]+l[1],n[2]+l[2]))&&(t.k[a].to=null,t.k[a].ti=null),i[0]===n[0]&&i[1]===n[1]&&0===o[0]&&0===o[1]&&0===l[0]&&0===l[1]&&(2===i.length||i[2]===n[2]&&0===o[2]&&0===l[2])&&(t.k[a].to=null,t.k[a].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=s||1,this.elem=e,this.container=r,this.comp=e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var h=t.k[0].s.length;for(this.v=createTypedArray("float32",h),this.pv=createTypedArray("float32",h),a=0;a<h;a+=1)this.v[a]=initFrame,this.pv[a]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",h)},this.addEffect=addEffect}var PropertyFactory=function(){return{getProp:function(e,t,s,r,a){var i;if(t.sid&&(t=e.globalData.slotManager.getProp(t)),t.k.length)if("number"==typeof t.k[0])i=new MultiDimensionalProperty(e,t,r,a);else switch(s){case 0:i=new KeyframedValueProperty(e,t,r,a);break;case 1:i=new KeyframedMultidimensionalProperty(e,t,r,a)}else i=new ValueProperty(e,t,r,a);return i.effectsSequence.length&&a.addDynamicProperty(i),i}}}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var e;this._mdf=!1;var t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var s=0;s<t;)this.v[s]=pointPool.newElement(),this.o[s]=pointPool.newElement(),this.i[s]=pointPool.newElement(),s+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,s,r,a){var i;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),s){case"v":i=this.v;break;case"i":i=this.i;break;case"o":i=this.o;break;default:i=[]}(!i[r]||i[r]&&!a)&&(i[r]=pointPool.newElement()),i[r][0]=e,i[r][1]=t},ShapePath.prototype.setTripleAt=function(e,t,s,r,a,i,n,o){this.setXYAt(e,t,"v",n,o),this.setXYAt(s,r,"o",n,o),this.setXYAt(a,i,"i",n,o)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,s=this.o,r=this.i,a=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],r[0][0],r[0][1],s[0][0],s[0][1],0,!1),a=1);var i,n=this._length-1,o=this._length;for(i=a;i<o;i+=1)e.setTripleAt(t[n][0],t[n][1],r[n][0],r[n][1],s[n][0],s[n][1],i,!1),n-=1;return e},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory2=poolFactory(4,function(){return new ShapePath},function(e){var t,s=e._length;for(t=0;t<s;t+=1)pointPool.release(e.v[t]),pointPool.release(e.i[t]),pointPool.release(e.o[t]),e.v[t]=null,e.i[t]=null,e.o[t]=null;e._length=0,e.c=!1}),factory2.clone=function(e){var t,s=factory2.newElement(),r=void 0===e._length?e.v.length:e._length;for(s.setLength(r),s.c=e.c,t=0;t<r;t+=1)s.setTripleAt(e.v[t][0],e.v[t][1],e.o[t][0],e.o[t][1],e.i[t][0],e.i[t][1],t);return s},factory2),factory2;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0};var shapeCollectionPool=(ob2={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(e){var t,s=e._length;for(t=0;t<s;t+=1)shapePool.release(e.shapes[t]);e._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=e,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob2),ob2,_length,_maxLength,pool,ShapePropertyFactory=function(){var e=-999999;function t(e,t,s){var r,a,i,n,o,l,c,h,p,d=s.lastIndex,m=this.keyframes;if(e<m[0].t-this.offsetTime)r=m[0].s[0],i=!0,d=0;else if(e>=m[m.length-1].t-this.offsetTime)r=m[m.length-1].s?m[m.length-1].s[0]:m[m.length-2].e[0],i=!0;else{for(var u,x,f,g=d,y=m.length-1,v=!0;v&&(u=m[g],!((x=m[g+1]).t-this.offsetTime>e));)g<y-1?g+=1:v=!1;if(f=this.keyframesMetadata[g]||{},d=g,!(i=1===u.h)){if(e>=x.t-this.offsetTime)h=1;else if(e<u.t-this.offsetTime)h=0;else{var b;f.__fnct?b=f.__fnct:(b=BezierFactory.getBezierEasing(u.o.x,u.o.y,u.i.x,u.i.y).get,f.__fnct=b),h=b((e-(u.t-this.offsetTime))/(x.t-this.offsetTime-(u.t-this.offsetTime)))}a=x.s?x.s[0]:u.e[0]}r=u.s[0]}for(l=t._length,c=r.i[0].length,s.lastIndex=d,n=0;n<l;n+=1)for(o=0;o<c;o+=1)p=i?r.i[n][o]:r.i[n][o]+(a.i[n][o]-r.i[n][o])*h,t.i[n][o]=p,p=i?r.o[n][o]:r.o[n][o]+(a.o[n][o]-r.o[n][o])*h,t.o[n][o]=p,p=i?r.v[n][o]:r.v[n][o]+(a.v[n][o]-r.v[n][o])*h,t.v[n][o]=p}function s(){var t=this.comp.renderedFrame-this.offsetTime,s=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,a=this._caching.lastFrame;return a!==e&&(a<s&&t<s||a>r&&t>r)||(this._caching.lastIndex=a<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}function r(){this.paths=this.localShapeCollection}function a(e){(function(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var s,r=e._length;for(s=0;s<r;s+=1)if(e.v[s][0]!==t.v[s][0]||e.v[s][1]!==t.v[s][1]||e.o[s][0]!==t.o[s][0]||e.o[s][1]!==t.o[s][1]||e.i[s][0]!==t.i[s][0]||e.i[s][1]!==t.i[s][1])return!1;return!0})(this.v,e)||(this.v=shapePool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function i(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e,t;this.lock=!0,this._mdf=!1,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var s=this.effectsSequence.length;for(t=0;t<s;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function n(e,t,s){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;var a=3===s?t.pt.k:t.ks.k;this.v=shapePool.clone(a),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function o(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function l(t,a,i){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=3===i?a.pt.k:a.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var n=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,n),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=r,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[s.bind(this)]}n.prototype.interpolateShape=t,n.prototype.getValue=i,n.prototype.setVValue=a,n.prototype.addEffect=o,l.prototype.getValue=i,l.prototype.interpolateShape=t,l.prototype.setVValue=a,l.prototype.addEffect=o;var c=function(){var e=roundCorner;function t(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],s=this.p.v[1],r=this.s.v[0]/2,a=this.s.v[1]/2,i=3!==this.d,n=this.v;n.v[0][0]=t,n.v[0][1]=s-a,n.v[1][0]=i?t+r:t-r,n.v[1][1]=s,n.v[2][0]=t,n.v[2][1]=s+a,n.v[3][0]=i?t-r:t+r,n.v[3][1]=s,n.i[0][0]=i?t-r*e:t+r*e,n.i[0][1]=s-a,n.i[1][0]=i?t+r:t-r,n.i[1][1]=s-a*e,n.i[2][0]=i?t+r*e:t-r*e,n.i[2][1]=s+a,n.i[3][0]=i?t-r:t+r,n.i[3][1]=s+a*e,n.o[0][0]=i?t+r*e:t-r*e,n.o[0][1]=s-a,n.o[1][0]=i?t+r:t-r,n.o[1][1]=s+a*e,n.o[2][0]=i?t-r*e:t+r*e,n.o[2][1]=s+a,n.o[3][0]=i?t-r:t+r,n.o[3][1]=s-a*e}},extendPrototype([DynamicPropertyContainer],t),t}(),h=function(){function e(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e,t,s,r,a=2*Math.floor(this.pt.v),i=2*Math.PI/a,n=!0,o=this.or.v,l=this.ir.v,c=this.os.v,h=this.is.v,p=2*Math.PI*o/(2*a),d=2*Math.PI*l/(2*a),m=-Math.PI/2;m+=this.r.v;var u=3===this.data.d?-1:1;for(this.v._length=0,e=0;e<a;e+=1){s=n?c:h,r=n?p:d;var x=(t=n?o:l)*Math.cos(m),f=t*Math.sin(m),g=0===x&&0===f?0:f/Math.sqrt(x*x+f*f),y=0===x&&0===f?0:-x/Math.sqrt(x*x+f*f);x+=+this.p.v[0],f+=+this.p.v[1],this.v.setTripleAt(x,f,x-g*r*s*u,f-y*r*s*u,x+g*r*s*u,f+y*r*s*u,e,!0),n=!n,m+=i*u}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),s=2*Math.PI/t,r=this.or.v,a=this.os.v,i=2*Math.PI*r/(4*t),n=.5*-Math.PI,o=3===this.data.d?-1:1;for(n+=this.r.v,this.v._length=0,e=0;e<t;e+=1){var l=r*Math.cos(n),c=r*Math.sin(n),h=0===l&&0===c?0:c/Math.sqrt(l*l+c*c),p=0===l&&0===c?0:-l/Math.sqrt(l*l+c*c);l+=+this.p.v[0],c+=+this.p.v[1],this.v.setTripleAt(l,c,l-h*i*a*o,c-p*i*a*o,l+h*i*a*o,c+p*i*a*o,e,!0),n+=s*o}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],e),e}(),p=function(){function e(e,t){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return e.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],s=this.s.v[0]/2,r=this.s.v[1]/2,a=bmMin(s,r,this.r.v),i=a*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+s,t-r+a,e+s,t-r+a,e+s,t-r+i,0,!0),this.v.setTripleAt(e+s,t+r-a,e+s,t+r-i,e+s,t+r-a,1,!0),0!==a?(this.v.setTripleAt(e+s-a,t+r,e+s-a,t+r,e+s-i,t+r,2,!0),this.v.setTripleAt(e-s+a,t+r,e-s+i,t+r,e-s+a,t+r,3,!0),this.v.setTripleAt(e-s,t+r-a,e-s,t+r-a,e-s,t+r-i,4,!0),this.v.setTripleAt(e-s,t-r+a,e-s,t-r+i,e-s,t-r+a,5,!0),this.v.setTripleAt(e-s+a,t-r,e-s+a,t-r,e-s+i,t-r,6,!0),this.v.setTripleAt(e+s-a,t-r,e+s-i,t-r,e+s-a,t-r,7,!0)):(this.v.setTripleAt(e-s,t+r,e-s+i,t+r,e-s,t+r,2),this.v.setTripleAt(e-s,t-r,e-s,t-r+i,e-s,t-r,3))):(this.v.setTripleAt(e+s,t-r+a,e+s,t-r+i,e+s,t-r+a,0,!0),0!==a?(this.v.setTripleAt(e+s-a,t-r,e+s-a,t-r,e+s-i,t-r,1,!0),this.v.setTripleAt(e-s+a,t-r,e-s+i,t-r,e-s+a,t-r,2,!0),this.v.setTripleAt(e-s,t-r+a,e-s,t-r+a,e-s,t-r+i,3,!0),this.v.setTripleAt(e-s,t+r-a,e-s,t+r-i,e-s,t+r-a,4,!0),this.v.setTripleAt(e-s+a,t+r,e-s+a,t+r,e-s+i,t+r,5,!0),this.v.setTripleAt(e+s-a,t+r,e+s-i,t+r,e+s-a,t+r,6,!0),this.v.setTripleAt(e+s,t+r-a,e+s,t+r-a,e+s,t+r-i,7,!0)):(this.v.setTripleAt(e-s,t-r,e-s+i,t-r,e-s,t-r,1,!0),this.v.setTripleAt(e-s,t+r,e-s,t+r-i,e-s,t+r,2,!0),this.v.setTripleAt(e+s,t+r,e+s-i,t+r,e+s,t+r,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],e),e}(),d={getShapeProp:function(e,t,s){var r;return 3===s||4===s?r=(3===s?t.pt:t.ks).k.length?new l(e,t,s):new n(e,t,s):5===s?r=new p(e,t):6===s?r=new c(e,t):7===s&&(r=new h(e,t)),r.k&&e.addDynamicProperty(r),r},getConstructorFunction:function(){return n},getKeyframedConstructorFunction:function(){return l}};return d}(),Matrix=function(){var e=Math.cos,t=Math.sin,s=Math.tan,r=Math.round;function a(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function i(s){if(0===s)return this;var r=e(s),a=t(s);return this._t(r,-a,0,0,a,r,0,0,0,0,1,0,0,0,0,1)}function n(s){if(0===s)return this;var r=e(s),a=t(s);return this._t(1,0,0,0,0,r,-a,0,0,a,r,0,0,0,0,1)}function o(s){if(0===s)return this;var r=e(s),a=t(s);return this._t(r,0,a,0,0,1,0,0,-a,0,r,0,0,0,0,1)}function l(s){if(0===s)return this;var r=e(s),a=t(s);return this._t(r,-a,0,0,a,r,0,0,0,0,1,0,0,0,0,1)}function c(e,t){return this._t(1,t,e,1,0,0)}function h(e,t){return this.shear(s(e),s(t))}function p(r,a){var i=e(a),n=t(a);return this._t(i,n,0,0,-n,i,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,s(r),1,0,0,0,0,1,0,0,0,0,1)._t(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1)}function d(e,t,s){return s||0===s||(s=1),1===e&&1===t&&1===s?this:this._t(e,0,0,0,0,t,0,0,0,0,s,0,0,0,0,1)}function m(e,t,s,r,a,i,n,o,l,c,h,p,d,m,u,x){return this.props[0]=e,this.props[1]=t,this.props[2]=s,this.props[3]=r,this.props[4]=a,this.props[5]=i,this.props[6]=n,this.props[7]=o,this.props[8]=l,this.props[9]=c,this.props[10]=h,this.props[11]=p,this.props[12]=d,this.props[13]=m,this.props[14]=u,this.props[15]=x,this}function u(e,t,s){return s=s||0,0!==e||0!==t||0!==s?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,s,1):this}function x(e,t,s,r,a,i,n,o,l,c,h,p,d,m,u,x){var f=this.props;if(1===e&&0===t&&0===s&&0===r&&0===a&&1===i&&0===n&&0===o&&0===l&&0===c&&1===h&&0===p)return f[12]=f[12]*e+f[15]*d,f[13]=f[13]*i+f[15]*m,f[14]=f[14]*h+f[15]*u,f[15]*=x,this._identityCalculated=!1,this;var g=f[0],y=f[1],v=f[2],b=f[3],E=f[4],j=f[5],R=f[6],w=f[7],S=f[8],N=f[9],C=f[10],_=f[11],P=f[12],T=f[13],A=f[14],k=f[15];return f[0]=g*e+y*a+v*l+b*d,f[1]=g*t+y*i+v*c+b*m,f[2]=g*s+y*n+v*h+b*u,f[3]=g*r+y*o+v*p+b*x,f[4]=E*e+j*a+R*l+w*d,f[5]=E*t+j*i+R*c+w*m,f[6]=E*s+j*n+R*h+w*u,f[7]=E*r+j*o+R*p+w*x,f[8]=S*e+N*a+C*l+_*d,f[9]=S*t+N*i+C*c+_*m,f[10]=S*s+N*n+C*h+_*u,f[11]=S*r+N*o+C*p+_*x,f[12]=P*e+T*a+A*l+k*d,f[13]=P*t+T*i+A*c+k*m,f[14]=P*s+T*n+A*h+k*u,f[15]=P*r+T*o+A*p+k*x,this._identityCalculated=!1,this}function f(e){var t=e.props;return this.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function g(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function y(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function v(e){var t;for(t=0;t<16;t+=1)e.props[t]=this.props[t];return e}function b(e){var t;for(t=0;t<16;t+=1)this.props[t]=e[t]}function E(e,t,s){return{x:e*this.props[0]+t*this.props[4]+s*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+s*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+s*this.props[10]+this.props[14]}}function j(e,t,s){return e*this.props[0]+t*this.props[4]+s*this.props[8]+this.props[12]}function R(e,t,s){return e*this.props[1]+t*this.props[5]+s*this.props[9]+this.props[13]}function w(e,t,s){return e*this.props[2]+t*this.props[6]+s*this.props[10]+this.props[14]}function S(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,s=-this.props[1]/e,r=-this.props[4]/e,a=this.props[0]/e,i=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,n=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,o=new Matrix;return o.props[0]=t,o.props[1]=s,o.props[4]=r,o.props[5]=a,o.props[12]=i,o.props[13]=n,o}function N(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function C(e){var t,s=e.length,r=[];for(t=0;t<s;t+=1)r[t]=N(e[t]);return r}function _(e,t,s){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=e[0],r[1]=e[1],r[2]=t[0],r[3]=t[1],r[4]=s[0],r[5]=s[1];else{var a=this.props[0],i=this.props[1],n=this.props[4],o=this.props[5],l=this.props[12],c=this.props[13];r[0]=e[0]*a+e[1]*n+l,r[1]=e[0]*i+e[1]*o+c,r[2]=t[0]*a+t[1]*n+l,r[3]=t[0]*i+t[1]*o+c,r[4]=s[0]*a+s[1]*n+l,r[5]=s[0]*i+s[1]*o+c}return r}function P(e,t,s){return this.isIdentity()?[e,t,s]:[e*this.props[0]+t*this.props[4]+s*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+s*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+s*this.props[10]+this.props[14]]}function T(e,t){if(this.isIdentity())return e+","+t;var s=this.props;return Math.round(100*(e*s[0]+t*s[4]+s[12]))/100+","+Math.round(100*(e*s[1]+t*s[5]+s[13]))/100}function A(){for(var e=0,t=this.props,s="matrix3d(";e<16;)s+=r(1e4*t[e])/1e4,s+=15===e?")":",",e+=1;return s}function k(e){return e<1e-6&&e>0||e>-1e-6&&e<0?r(1e4*e)/1e4:e}function D(){var e=this.props;return"matrix("+k(e[0])+","+k(e[1])+","+k(e[4])+","+k(e[5])+","+k(e[12])+","+k(e[13])+")"}return function(){this.reset=a,this.rotate=i,this.rotateX=n,this.rotateY=o,this.rotateZ=l,this.skew=h,this.skewFromAxis=p,this.shear=c,this.scale=d,this.setTransform=m,this.translate=u,this.transform=x,this.multiply=f,this.applyToPoint=E,this.applyToX=j,this.applyToY=R,this.applyToZ=w,this.applyToPointArray=P,this.applyToTriplePoints=_,this.applyToPointStringified=T,this.toCSS=A,this.to2dCSS=D,this.clone=v,this.cloneFromProps=b,this.equals=y,this.inversePoints=C,this.inversePoint=N,this.getInverseMatrix=S,this._t=this.transform,this.isIdentity=g,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var lottie={};function setLocation(e){setLocationHref(e)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(e){setSubframeEnabled(e)}function setPrefix(e){setIdPrefix(e)}function loadAnimation(e){return animationManager.loadAnimation(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(e)&&e>1&&setDefaultCurveSegments(e)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&setExpressionsPlugin(t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),s=0;s<t.length;s+=1){var r=t[s].split("=");if(decodeURIComponent(r[0])==e)return decodeURIComponent(r[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";var queryString="",scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer");var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&(window.bodymovin=lottie)}catch(err){}var ShapeModifiers=function(){var e={},t={};return e.registerModifier=function(e,s){t[e]||(t[e]=s)},e.getModifier=function(e,s,r){return new t[e](s,r)},e}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var t={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,s,r,a){var i=[];t<=1?i.push({s:e,e:t}):e>=1?i.push({s:e-1,e:t-1}):(i.push({s:e,e:1}),i.push({s:0,e:t-1}));var n,o,l=[],c=i.length;for(n=0;n<c;n+=1){var h,p;(o=i[n]).e*a<r||o.s*a>r+s||(h=o.s*a<=r?0:(o.s*a-r)/s,p=o.e*a>=r+s?1:(o.e*a-r)/s,l.push([h,p]))}return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(e){var t,s=e.length;for(t=0;t<s;t+=1)segmentsLengthPool.release(e[t]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,s,r,a;if(this._mdf||e){var i=this.o.v%360/360;if(i<0&&(i+=1),(t=this.s.v>1?1+i:this.s.v<0?0+i:this.s.v+i)>(s=this.e.v>1?1+i:this.e.v<0?0+i:this.e.v+i)){var n=t;t=s,s=n}t=1e-4*Math.round(1e4*t),s=1e-4*Math.round(1e4*s),this.sValue=t,this.eValue=s}else t=this.sValue,s=this.eValue;var o,l,c,h,p,d=this.shapes.length,m=0;if(s===t)for(a=0;a<d;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection,this._mdf&&(this.shapes[a].pathsData.length=0);else if(1===s&&0===t||0===s&&1===t){if(this._mdf)for(a=0;a<d;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var u,x,f=[];for(a=0;a<d;a+=1)if((u=this.shapes[a]).shape._mdf||this._mdf||e||2===this.m){if(l=(r=u.shape.paths)._length,p=0,!u.shape._mdf&&u.pathsData.length)p=u.totalShapeLength;else{for(c=this.releasePathsData(u.pathsData),o=0;o<l;o+=1)h=bez.getSegmentsLength(r.shapes[o]),c.push(h),p+=h.totalLength;u.totalShapeLength=p,u.pathsData=c}m+=p,u.shape._mdf=!0}else u.shape.paths=u.localShapeCollection;var g,y=t,v=s,b=0;for(a=d-1;a>=0;a-=1)if((u=this.shapes[a]).shape._mdf){for((x=u.localShapeCollection).releaseShapes(),2===this.m&&d>1?(g=this.calculateShapeEdges(t,s,u.totalShapeLength,b,m),b+=u.totalShapeLength):g=[[y,v]],l=g.length,o=0;o<l;o+=1){y=g[o][0],v=g[o][1],f.length=0,v<=1?f.push({s:u.totalShapeLength*y,e:u.totalShapeLength*v}):y>=1?f.push({s:u.totalShapeLength*(y-1),e:u.totalShapeLength*(v-1)}):(f.push({s:u.totalShapeLength*y,e:u.totalShapeLength}),f.push({s:0,e:u.totalShapeLength*(v-1)}));var E=this.addShapes(u,f[0]);if(f[0].s!==f[0].e){if(f.length>1)if(u.shape.paths.shapes[u.shape.paths._length-1].c){var j=E.pop();this.addPaths(E,x),E=this.addShapes(u,f[1],j)}else this.addPaths(E,x),E=this.addShapes(u,f[1]);this.addPaths(E,x)}}u.shape.paths=x}}},TrimModifier.prototype.addPaths=function(e,t){var s,r=e.length;for(s=0;s<r;s+=1)t.addShape(e[s])},TrimModifier.prototype.addSegment=function(e,t,s,r,a,i,n){a.setXYAt(t[0],t[1],"o",i),a.setXYAt(s[0],s[1],"i",i+1),n&&a.setXYAt(e[0],e[1],"v",i),a.setXYAt(r[0],r[1],"v",i+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,s,r){t.setXYAt(e[1],e[5],"o",s),t.setXYAt(e[2],e[6],"i",s+1),r&&t.setXYAt(e[0],e[4],"v",s),t.setXYAt(e[3],e[7],"v",s+1)},TrimModifier.prototype.addShapes=function(e,t,s){var r,a,i,n,o,l,c,h,p=e.pathsData,d=e.shape.paths.shapes,m=e.shape.paths._length,u=0,x=[],f=!0;for(s?(o=s._length,h=s._length):(s=shapePool.newElement(),o=0,h=0),x.push(s),r=0;r<m;r+=1){for(l=p[r].lengths,s.c=d[r].c,i=d[r].c?l.length:l.length+1,a=1;a<i;a+=1)if(u+(n=l[a-1]).addedLength<t.s)u+=n.addedLength,s.c=!1;else{if(u>t.e){s.c=!1;break}t.s<=u&&t.e>=u+n.addedLength?(this.addSegment(d[r].v[a-1],d[r].o[a-1],d[r].i[a],d[r].v[a],s,o,f),f=!1):(c=bez.getNewSegment(d[r].v[a-1],d[r].v[a],d[r].o[a-1],d[r].i[a],(t.s-u)/n.addedLength,(t.e-u)/n.addedLength,l[a-1]),this.addSegmentFromArray(c,s,o,f),f=!1,s.c=!1),u+=n.addedLength,o+=1}if(d[r].c&&l.length){if(n=l[a-1],u<=t.e){var g=l[a-1].addedLength;t.s<=u&&t.e>=u+g?(this.addSegment(d[r].v[a-1],d[r].o[a-1],d[r].i[0],d[r].v[0],s,o,f),f=!1):(c=bez.getNewSegment(d[r].v[a-1],d[r].v[0],d[r].o[a-1],d[r].i[0],(t.s-u)/g,(t.e-u)/g,l[a-1]),this.addSegmentFromArray(c,s,o,f),f=!1,s.c=!1)}else s.c=!1;u+=n.addedLength,o+=1}if(s._length&&(s.setXYAt(s.v[h][0],s.v[h][1],"i",h),s.setXYAt(s.v[s._length-1][0],s.v[s._length-1][1],"o",s._length-1)),u>t.e)break;r<m-1&&(s=shapePool.newElement(),f=!0,x.push(s),o=0)}return x},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,t){var s=t/100,r=[0,0],a=e._length,i=0;for(i=0;i<a;i+=1)r[0]+=e.v[i][0],r[1]+=e.v[i][1];r[0]/=a,r[1]/=a;var n,o,l,c,h,p,d=shapePool.newElement();for(d.c=e.c,i=0;i<a;i+=1)n=e.v[i][0]+(r[0]-e.v[i][0])*s,o=e.v[i][1]+(r[1]-e.v[i][1])*s,l=e.o[i][0]+(r[0]-e.o[i][0])*-s,c=e.o[i][1]+(r[1]-e.o[i][1])*-s,h=e.i[i][0]+(r[0]-e.i[i][0])*-s,p=e.i[i][1]+(r[1]-e.i[i][1])*-s,d.setTripleAt(n,o,l,c,h,p,i);return d},PuckerAndBloatModifier.prototype.processShapes=function(e){var t,s,r,a,i,n,o=this.shapes.length,l=this.amount.v;if(0!==l)for(s=0;s<o;s+=1){if(n=(i=this.shapes[s]).localShapeCollection,i.shape._mdf||this._mdf||e)for(n.releaseShapes(),i.shape._mdf=!0,t=i.shape.paths.shapes,a=i.shape.paths._length,r=0;r<a;r+=1)n.addShape(this.processPath(t[r],l));i.shape.paths=i.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var e=[0,0];function t(e,t,s){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(s||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti){var r,a=t.or.k.length;for(r=0;r<a;r+=1)t.or.k[r].to=null,t.or.k[r].ti=null}this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=PropertyFactory.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){var s;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,a;if(s=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/s,0),a=this.p.getValueAtTime(this.p.keyframes[0].t/s,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/s,0),a=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/s,0)):(r=this.p.pv,a=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/s,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],a=[];var i=this.px,n=this.py;i._caching.lastFrame+i.offsetTime<=i.keyframes[0].t?(r[0]=i.getValueAtTime((i.keyframes[0].t+.01)/s,0),r[1]=n.getValueAtTime((n.keyframes[0].t+.01)/s,0),a[0]=i.getValueAtTime(i.keyframes[0].t/s,0),a[1]=n.getValueAtTime(n.keyframes[0].t/s,0)):i._caching.lastFrame+i.offsetTime>=i.keyframes[i.keyframes.length-1].t?(r[0]=i.getValueAtTime(i.keyframes[i.keyframes.length-1].t/s,0),r[1]=n.getValueAtTime(n.keyframes[n.keyframes.length-1].t/s,0),a[0]=i.getValueAtTime((i.keyframes[i.keyframes.length-1].t-.01)/s,0),a[1]=n.getValueAtTime((n.keyframes[n.keyframes.length-1].t-.01)/s,0)):(r=[i.pv,n.pv],a[0]=i.getValueAtTime((i._caching.lastFrame+i.offsetTime-.01)/s,i.offsetTime),a[1]=n.getValueAtTime((n._caching.lastFrame+n.offsetTime-.01)/s,n.offsetTime))}else r=a=e;this.v.rotate(-Math.atan2(r[1]-a[1],r[0]-a[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,s,r){return new t(e,s,r)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(e,t){return 1e5*Math.abs(e-t)<=Math.min(Math.abs(e),Math.abs(t))}function floatZero(e){return Math.abs(e)<=1e-5}function lerp(e,t,s){return e*(1-s)+t*s}function lerpPoint(e,t,s){return[lerp(e[0],t[0],s),lerp(e[1],t[1],s)]}function quadRoots(e,t,s){if(0===e)return[];var r=t*t-4*e*s;if(r<0)return[];var a=-t/(2*e);if(0===r)return[a];var i=Math.sqrt(r)/(2*e);return[a-i,a+i]}function polynomialCoefficients(e,t,s,r){return[3*t-e-3*s+r,3*e-6*t+3*s,-3*e+3*t,e]}function singlePoint(e){return new PolynomialBezier(e,e,e,e,!1)}function PolynomialBezier(e,t,s,r,a){a&&pointEqual(e,t)&&(t=lerpPoint(e,r,1/3)),a&&pointEqual(s,r)&&(s=lerpPoint(e,r,2/3));var i=polynomialCoefficients(e[0],t[0],s[0],r[0]),n=polynomialCoefficients(e[1],t[1],s[1],r[1]);this.a=[i[0],n[0]],this.b=[i[1],n[1]],this.c=[i[2],n[2]],this.d=[i[3],n[3]],this.points=[e,t,s,r]}function extrema(e,t){var s=e.points[0][t],r=e.points[e.points.length-1][t];if(s>r){var a=r;r=s,s=a}for(var i=quadRoots(3*e.a[t],2*e.b[t],e.c[t]),n=0;n<i.length;n+=1)if(i[n]>0&&i[n]<1){var o=e.point(i[n])[t];o<s?s=o:o>r&&(r=o)}return{min:s,max:r}}function intersectData(e,t,s){var r=e.boundingBox();return{cx:r.cx,cy:r.cy,width:r.width,height:r.height,bez:e,t:(t+s)/2,t1:t,t2:s}}function splitData(e){var t=e.bez.split(.5);return[intersectData(t[0],e.t1,e.t),intersectData(t[1],e.t,e.t2)]}function boxIntersect(e,t){return 2*Math.abs(e.cx-t.cx)<e.width+t.width&&2*Math.abs(e.cy-t.cy)<e.height+t.height}function intersectsImpl(e,t,s,r,a,i){if(boxIntersect(e,t))if(s>=i||e.width<=r&&e.height<=r&&t.width<=r&&t.height<=r)a.push([e.t,t.t]);else{var n=splitData(e),o=splitData(t);intersectsImpl(n[0],o[0],s+1,r,a,i),intersectsImpl(n[0],o[1],s+1,r,a,i),intersectsImpl(n[1],o[0],s+1,r,a,i),intersectsImpl(n[1],o[1],s+1,r,a,i)}}function crossProduct(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function lineIntersection(e,t,s,r){var a=[e[0],e[1],1],i=[t[0],t[1],1],n=[s[0],s[1],1],o=[r[0],r[1],1],l=crossProduct(crossProduct(a,i),crossProduct(n,o));return floatZero(l[2])?null:[l[0]/l[2],l[1]/l[2]]}function polarOffset(e,t,s){return[e[0]+Math.cos(t)*s,e[1]-Math.sin(t)*s]}function pointDistance(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1])}function pointEqual(e,t){return floatEqual(e[0],t[0])&&floatEqual(e[1],t[1])}function ZigZagModifier(){}function setPoint(e,t,s,r,a,i,n){var o=s-Math.PI/2,l=s+Math.PI/2,c=t[0]+Math.cos(s)*r*a,h=t[1]-Math.sin(s)*r*a;e.setTripleAt(c,h,c+Math.cos(o)*i,h-Math.sin(o)*i,c+Math.cos(l)*n,h-Math.sin(l)*n,e.length())}function getPerpendicularVector(e,t){var s=[t[0]-e[0],t[1]-e[1]],r=.5*-Math.PI;return[Math.cos(r)*s[0]-Math.sin(r)*s[1],Math.sin(r)*s[0]+Math.cos(r)*s[1]]}function getProjectingAngle(e,t){var s=0===t?e.length()-1:t-1,r=(t+1)%e.length(),a=getPerpendicularVector(e.v[s],e.v[r]);return Math.atan2(0,1)-Math.atan2(a[1],a[0])}function zigZagCorner(e,t,s,r,a,i,n){var o=getProjectingAngle(t,s),l=t.v[s%t._length],c=t.v[0===s?t._length-1:s-1],h=t.v[(s+1)%t._length],p=2===i?Math.sqrt(Math.pow(l[0]-c[0],2)+Math.pow(l[1]-c[1],2)):0,d=2===i?Math.sqrt(Math.pow(l[0]-h[0],2)+Math.pow(l[1]-h[1],2)):0;setPoint(e,t.v[s%t._length],o,n,r,d/(2*(a+1)),p/(2*(a+1)))}function zigZagSegment(e,t,s,r,a,i){for(var n=0;n<r;n+=1){var o=(n+1)/(r+1),l=2===a?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,c=t.normalAngle(o);setPoint(e,t.point(o),c,i,s,l/(2*(r+1)),l/(2*(r+1))),i=-i}return i}function linearOffset(e,t,s){var r=Math.atan2(t[0]-e[0],t[1]-e[1]);return[polarOffset(e,r,s),polarOffset(t,r,s)]}function offsetSegment(e,t){var s,r,a,i,n,o,l;s=(l=linearOffset(e.points[0],e.points[1],t))[0],r=l[1],a=(l=linearOffset(e.points[1],e.points[2],t))[0],i=l[1],n=(l=linearOffset(e.points[2],e.points[3],t))[0],o=l[1];var c=lineIntersection(s,r,a,i);null===c&&(c=r);var h=lineIntersection(n,o,a,i);return null===h&&(h=n),new PolynomialBezier(s,c,h,o)}function joinLines(e,t,s,r,a){var i=t.points[3],n=s.points[0];if(3===r)return i;if(pointEqual(i,n))return i;if(2===r){var o=-t.tangentAngle(1),l=-s.tangentAngle(0)+Math.PI,c=lineIntersection(i,polarOffset(i,o+Math.PI/2,100),n,polarOffset(n,o+Math.PI/2,100)),h=c?pointDistance(c,i):pointDistance(i,n)/2,p=polarOffset(i,o,2*h*roundCorner);return e.setXYAt(p[0],p[1],"o",e.length()-1),p=polarOffset(n,l,2*h*roundCorner),e.setTripleAt(n[0],n[1],n[0],n[1],p[0],p[1],e.length()),n}var d=lineIntersection(pointEqual(i,t.points[2])?t.points[0]:t.points[2],i,n,pointEqual(n,s.points[1])?s.points[3]:s.points[1]);return d&&pointDistance(d,i)<a?(e.setTripleAt(d[0],d[1],d[0],d[1],d[0],d[1],e.length()),d):i}function getIntersection(e,t){var s=e.intersections(t);return s.length&&floatEqual(s[0][0],1)&&s.shift(),s.length?s[0]:null}function pruneSegmentIntersection(e,t){var s=e.slice(),r=t.slice(),a=getIntersection(e[e.length-1],t[0]);return a&&(s[e.length-1]=e[e.length-1].split(a[0])[0],r[0]=t[0].split(a[1])[1]),e.length>1&&t.length>1&&(a=getIntersection(e[0],t[t.length-1]))?[[e[0].split(a[0])[0]],[t[t.length-1].split(a[1])[1]]]:[s,r]}function pruneIntersections(e){for(var t,s=1;s<e.length;s+=1)t=pruneSegmentIntersection(e[s-1],e[s]),e[s-1]=t[0],e[s]=t[1];return e.length>1&&(t=pruneSegmentIntersection(e[e.length-1],e[0]),e[e.length-1]=t[0],e[0]=t[1]),e}function offsetSegmentSplit(e,t){var s,r,a,i,n=e.inflectionPoints();if(0===n.length)return[offsetSegment(e,t)];if(1===n.length||floatEqual(n[1],1))return s=(a=e.split(n[0]))[0],r=a[1],[offsetSegment(s,t),offsetSegment(r,t)];s=(a=e.split(n[0]))[0];var o=(n[1]-n[0])/(1-n[0]);return i=(a=a[1].split(o))[0],r=a[1],[offsetSegment(s,t),offsetSegment(i,t),offsetSegment(r,t)]}function OffsetPathModifier(){}function getFontProperties(e){for(var t=e.fStyle?e.fStyle.split(" "):[],s="normal",r="normal",a=t.length,i=0;i<a;i+=1)switch(t[i].toLowerCase()){case"italic":r="italic";break;case"bold":s="700";break;case"black":s="900";break;case"medium":s="500";break;case"regular":case"normal":s="400";break;case"light":case"thin":s="200"}return{style:r,weight:e.fWeight||s}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,s,r,a,i){var n=i?-1:1,o=r.s.v[0]+(1-r.s.v[0])*(1-a),l=r.s.v[1]+(1-r.s.v[1])*(1-a);e.translate(r.p.v[0]*n*a,r.p.v[1]*n*a,r.p.v[2]),t.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),t.rotate(-r.r.v*n*a),t.translate(r.a.v[0],r.a.v[1],r.a.v[2]),s.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),s.scale(i?1/o:o,i?1/l:l),s.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(e,t,s,r){for(this.elem=e,this.arr=t,this.pos=s,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[s]);s>0;)s-=1,this._elements.unshift(t[s]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,s=e.length;for(t=0;t<s;t+=1)e[t]._processed=!1,"gr"===e[t].ty&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var s,r=e.length;for(s=0;s<r;s+=1)e[s]._render=t,"gr"===e[s].ty&&this.changeGroupRender(e[s].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,s,r,a,i,n=!1;if(this._mdf||e){var o,l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var c={it:this.cloneElements(this._elements),ty:"gr"};c.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,c),this._groups.splice(0,0,c),this._currentCopies+=1}this.elem.reloadShapes(),n=!0}for(i=0,r=0;r<=this._groups.length-1;r+=1){if(o=i<l,this._groups[r]._render=o,this.changeGroupRender(this._groups[r].it,o),!o){var h=this.elemsData[r].it,p=h[h.length-1];0!==p.transform.op.v?(p.transform.op._mdf=!0,p.transform.op.v=0):p.transform.op._mdf=!1}i+=1}this._currentCopies=l;var d=this.o.v,m=d%1,u=d>0?Math.floor(d):Math.ceil(d),x=this.pMatrix.props,f=this.rMatrix.props,g=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var y,v,b=0;if(d>0){for(;b<u;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),b+=1;m&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,m,!1),b+=m)}else if(d<0){for(;b>u;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),b-=1;m&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-m,!0),b-=m)}for(r=1===this.data.m?0:this._currentCopies-1,a=1===this.data.m?1:-1,i=this._currentCopies;i;){if(v=(s=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),0!==b){for((0!==r&&1===a||r!==this._currentCopies-1&&-1===a)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15]),y=0;y<v;y+=1)s[y]=this.matrix.props[y];this.matrix.reset()}else for(this.matrix.reset(),y=0;y<v;y+=1)s[y]=this.matrix.props[y];b+=1,i-=1,r+=a}}else for(i=this._currentCopies,r=0,a=1;i;)s=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,i-=1,r+=a;return n},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var s,r=shapePool.newElement();r.c=e.c;var a,i,n,o,l,c,h,p,d,m,u,x,f=e._length,g=0;for(s=0;s<f;s+=1)a=e.v[s],n=e.o[s],i=e.i[s],a[0]===n[0]&&a[1]===n[1]&&a[0]===i[0]&&a[1]===i[1]?0!==s&&s!==f-1||e.c?(o=0===s?e.v[f-1]:e.v[s-1],c=(l=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)))?Math.min(l/2,t)/l:0,h=u=a[0]+(o[0]-a[0])*c,p=x=a[1]-(a[1]-o[1])*c,d=h-(h-a[0])*roundCorner,m=p-(p-a[1])*roundCorner,r.setTripleAt(h,p,d,m,u,x,g),g+=1,o=s===f-1?e.v[0]:e.v[s+1],c=(l=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)))?Math.min(l/2,t)/l:0,h=d=a[0]+(o[0]-a[0])*c,p=m=a[1]+(o[1]-a[1])*c,u=h-(h-a[0])*roundCorner,x=p-(p-a[1])*roundCorner,r.setTripleAt(h,p,d,m,u,x,g),g+=1):(r.setTripleAt(a[0],a[1],n[0],n[1],i[0],i[1],g),g+=1):(r.setTripleAt(e.v[s][0],e.v[s][1],e.o[s][0],e.o[s][1],e.i[s][0],e.i[s][1],g),g+=1);return r},RoundCornersModifier.prototype.processShapes=function(e){var t,s,r,a,i,n,o=this.shapes.length,l=this.rd.v;if(0!==l)for(s=0;s<o;s+=1){if(n=(i=this.shapes[s]).localShapeCollection,i.shape._mdf||this._mdf||e)for(n.releaseShapes(),i.shape._mdf=!0,t=i.shape.paths.shapes,a=i.shape.paths._length,r=0;r<a;r+=1)n.addShape(this.processPath(t[r],l));i.shape.paths=i.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(e){return[((this.a[0]*e+this.b[0])*e+this.c[0])*e+this.d[0],((this.a[1]*e+this.b[1])*e+this.c[1])*e+this.d[1]]},PolynomialBezier.prototype.derivative=function(e){return[(3*e*this.a[0]+2*this.b[0])*e+this.c[0],(3*e*this.a[1]+2*this.b[1])*e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(e){var t=this.derivative(e);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(e){var t=this.derivative(e);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(e))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/e,s=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/e;if(s<0)return[];var r=Math.sqrt(s);return floatZero(r)?r>0&&r<1?[t]:[]:[t-r,t+r].filter(function(e){return e>0&&e<1})},PolynomialBezier.prototype.split=function(e){if(e<=0)return[singlePoint(this.points[0]),this];if(e>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],e),s=lerpPoint(this.points[1],this.points[2],e),r=lerpPoint(this.points[2],this.points[3],e),a=lerpPoint(t,s,e),i=lerpPoint(s,r,e),n=lerpPoint(a,i,e);return[new PolynomialBezier(this.points[0],t,a,n,!0),new PolynomialBezier(n,i,r,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var e=this.bounds();return{left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max,width:e.x.max-e.x.min,height:e.y.max-e.y.min,cx:(e.x.max+e.x.min)/2,cy:(e.y.max+e.y.min)/2}},PolynomialBezier.prototype.intersections=function(e,t,s){void 0===t&&(t=2),void 0===s&&(s=7);var r=[];return intersectsImpl(intersectData(this,0,1),intersectData(e,0,1),0,t,r,s),r},PolynomialBezier.shapeSegment=function(e,t){var s=(t+1)%e.length();return new PolynomialBezier(e.v[t],e.o[t],e.i[s],e.v[s],!0)},PolynomialBezier.shapeSegmentInverted=function(e,t){var s=(t+1)%e.length();return new PolynomialBezier(e.v[s],e.i[s],e.o[t],e.v[t],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(e,t.s,0,null,this),this.frequency=PropertyFactory.getProp(e,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(e,t.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(e,t,s,r){var a=e._length,i=shapePool.newElement();if(i.c=e.c,e.c||(a-=1),0===a)return i;var n=-1,o=PolynomialBezier.shapeSegment(e,0);zigZagCorner(i,e,0,t,s,r,n);for(var l=0;l<a;l+=1)n=zigZagSegment(i,o,t,s,r,-n),o=l!==a-1||e.c?PolynomialBezier.shapeSegment(e,(l+1)%a):null,zigZagCorner(i,e,l+1,t,s,r,n);return i},ZigZagModifier.prototype.processShapes=function(e){var t,s,r,a,i,n,o=this.shapes.length,l=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),h=this.pointsType.v;if(0!==l)for(s=0;s<o;s+=1){if(n=(i=this.shapes[s]).localShapeCollection,i.shape._mdf||this._mdf||e)for(n.releaseShapes(),i.shape._mdf=!0,t=i.shape.paths.shapes,a=i.shape.paths._length,r=0;r<a;r+=1)n.addShape(this.processPath(t[r],l,c,h));i.shape.paths=i.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(e,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(e,t,s,r){var a=shapePool.newElement();a.c=e.c;var i,n,o,l=e.length();e.c||(l-=1);var c=[];for(i=0;i<l;i+=1)o=PolynomialBezier.shapeSegment(e,i),c.push(offsetSegmentSplit(o,t));if(!e.c)for(i=l-1;i>=0;i-=1)o=PolynomialBezier.shapeSegmentInverted(e,i),c.push(offsetSegmentSplit(o,t));c=pruneIntersections(c);var h=null,p=null;for(i=0;i<c.length;i+=1){var d=c[i];for(p&&(h=joinLines(a,p,d[0],s,r)),p=d[d.length-1],n=0;n<d.length;n+=1)o=d[n],h&&pointEqual(o.points[0],h)?a.setXYAt(o.points[1][0],o.points[1][1],"o",a.length()-1):a.setTripleAt(o.points[0][0],o.points[0][1],o.points[1][0],o.points[1][1],o.points[0][0],o.points[0][1],a.length()),a.setTripleAt(o.points[3][0],o.points[3][1],o.points[3][0],o.points[3][1],o.points[2][0],o.points[2][1],a.length()),h=o.points[3]}return c.length&&joinLines(a,p,c[0][0],s,r),a},OffsetPathModifier.prototype.processShapes=function(e){var t,s,r,a,i,n,o=this.shapes.length,l=this.amount.v,c=this.miterLimit.v,h=this.lineJoin;if(0!==l)for(s=0;s<o;s+=1){if(n=(i=this.shapes[s]).localShapeCollection,i.shape._mdf||this._mdf||e)for(n.releaseShapes(),i.shape._mdf=!0,t=i.shape.paths.shapes,a=i.shape.paths._length,r=0;r<a;r+=1)n.addShape(this.processPath(t[r],l,h,c));i.shape.paths=i.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var e={w:0,size:0,shapes:[],data:{shapes:[]}},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var s=127988,r=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function a(e,t){var s=createTag("span");s.setAttribute("aria-hidden",!0),s.style.fontFamily=t;var r=createTag("span");r.innerText="giItT1WQy@!-/#",s.style.position="absolute",s.style.left="-10000px",s.style.top="-10000px",s.style.fontSize="300px",s.style.fontVariant="normal",s.style.fontStyle="normal",s.style.fontWeight="normal",s.style.letterSpacing="0",s.appendChild(r),document.body.appendChild(s);var a=r.offsetWidth;return r.style.fontFamily=function(e){var t,s=e.split(","),r=s.length,a=[];for(t=0;t<r;t+=1)"sans-serif"!==s[t]&&"monospace"!==s[t]&&a.push(s[t]);return a.join(",")}(e)+", "+t,{node:r,w:a,parent:s}}function i(e,t){var s,r=document.body&&t?"svg":"canvas",a=getFontProperties(e);if("svg"===r){var i=createNS("text");i.style.fontSize="100px",i.setAttribute("font-family",e.fFamily),i.setAttribute("font-style",a.style),i.setAttribute("font-weight",a.weight),i.textContent="1",e.fClass?(i.style.fontFamily="inherit",i.setAttribute("class",e.fClass)):i.style.fontFamily=e.fFamily,t.appendChild(i),s=i}else{var n=new OffscreenCanvas(500,500).getContext("2d");n.font=a.style+" "+a.weight+" 100px "+e.fFamily,s=n}return{measureText:function(e){return"svg"===r?(s.textContent=e,s.getComputedTextLength()):s.measureText(e).width}}}function n(e){var t=0,s=e.charCodeAt(0);if(s>=55296&&s<=56319){var r=e.charCodeAt(1);r>=56320&&r<=57343&&(t=1024*(s-55296)+r-56320+65536)}return t}function o(e){var t=n(e);return t>=127462&&t<=127487}var l=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return l.isModifier=function(e,t){var s=e.toString(16)+t.toString(16);return-1!==r.indexOf(s)},l.isZeroWidthJoiner=function(e){return 8205===e},l.isFlagEmoji=function(e){return o(e.substr(0,2))&&o(e.substr(2,2))},l.isRegionalCode=o,l.isCombinedCharacter=function(e){return-1!==t.indexOf(e)},l.isRegionalFlag=function(e,t){var r=n(e.substr(t,2));if(r!==s)return!1;var a=0;for(t+=2;a<5;){if((r=n(e.substr(t,2)))<917601||r>917626)return!1;a+=1,t+=2}return 917631===n(e.substr(t,2))},l.isVariationSelector=function(e){return 65039===e},l.BLACK_FLAG_CODE_POINT=s,l.prototype={addChars:function(e){if(e){var t;this.chars||(this.chars=[]);var s,r,a=e.length,i=this.chars.length;for(t=0;t<a;t+=1){for(s=0,r=!1;s<i;)this.chars[s].style===e[t].style&&this.chars[s].fFamily===e[t].fFamily&&this.chars[s].ch===e[t].ch&&(r=!0),s+=1;r||(this.chars.push(e[t]),i+=1)}}},addFonts:function(e,t){if(e){if(this.chars)return this.isLoaded=!0,void(this.fonts=e.list);if(!document.body)return this.isLoaded=!0,e.list.forEach(function(e){e.helper=i(e),e.cache={}}),void(this.fonts=e.list);var s,r=e.list,n=r.length,o=n;for(s=0;s<n;s+=1){var l,c,h=!0;if(r[s].loaded=!1,r[s].monoCase=a(r[s].fFamily,"monospace"),r[s].sansCase=a(r[s].fFamily,"sans-serif"),r[s].fPath){if("p"===r[s].fOrigin||3===r[s].origin){if((l=document.querySelectorAll('style[f-forigin="p"][f-family="'+r[s].fFamily+'"], style[f-origin="3"][f-family="'+r[s].fFamily+'"]')).length>0&&(h=!1),h){var p=createTag("style");p.setAttribute("f-forigin",r[s].fOrigin),p.setAttribute("f-origin",r[s].origin),p.setAttribute("f-family",r[s].fFamily),p.type="text/css",p.innerText="@font-face {font-family: "+r[s].fFamily+"; font-style: normal; src: url('"+r[s].fPath+"');}",t.appendChild(p)}}else if("g"===r[s].fOrigin||1===r[s].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),c=0;c<l.length;c+=1)-1!==l[c].href.indexOf(r[s].fPath)&&(h=!1);if(h){var d=createTag("link");d.setAttribute("f-forigin",r[s].fOrigin),d.setAttribute("f-origin",r[s].origin),d.type="text/css",d.rel="stylesheet",d.href=r[s].fPath,document.body.appendChild(d)}}else if("t"===r[s].fOrigin||2===r[s].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),c=0;c<l.length;c+=1)r[s].fPath===l[c].src&&(h=!1);if(h){var m=createTag("link");m.setAttribute("f-forigin",r[s].fOrigin),m.setAttribute("f-origin",r[s].origin),m.setAttribute("rel","stylesheet"),m.setAttribute("href",r[s].fPath),t.appendChild(m)}}}else r[s].loaded=!0,o-=1;r[s].helper=i(r[s],t),r[s].cache={},this.fonts.push(r[s])}0===o?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(t,s,r){for(var a=0,i=this.chars.length;a<i;){if(this.chars[a].ch===t&&this.chars[a].style===s&&this.chars[a].fFamily===r)return this.chars[a];a+=1}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",t,s,r)),e},getFontByName:function(e){for(var t=0,s=this.fonts.length;t<s;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},measureText:function(e,t,s){var r=this.getFontByName(t),a=e;if(!r.cache[a]){var i=r.helper;if(" "===e){var n=i.measureText("|"+e+"|"),o=i.measureText("||");r.cache[a]=(n-o)/100}else r.cache[a]=i.measureText(e)/100}return r.cache[a]*s},checkLoadedFonts:function(){var e,t,s,r=this.fonts.length,a=r;for(e=0;e<r;e+=1)this.fonts[e].loaded?a-=1:"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:(t=this.fonts[e].monoCase.node,s=this.fonts[e].monoCase.w,t.offsetWidth!==s?(a-=1,this.fonts[e].loaded=!0):(t=this.fonts[e].sansCase.node,s=this.fonts[e].sansCase.w,t.offsetWidth!==s&&(a-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==a&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},l}();function SlotManager(e){this.animationData=e}function slotFactory(e){return new SlotManager(e)}function RenderableElement(){}SlotManager.prototype.getProp=function(e){return this.animationData.slots&&this.animationData.slots[e.sid]?Object.assign(e,this.animationData.slots[e.sid].p):e},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var e={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(t){return e[t]||""}}();function SliderEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,0,0,s)}function AngleEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,0,0,s)}function ColorEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,1,0,s)}function PointEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,1,0,s)}function LayerIndexEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,0,0,s)}function MaskIndexEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,0,0,s)}function CheckboxEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,0,0,s)}function NoValueEffect(){this.p={}}function EffectsManager(e,t){var s,r=e.ef||[];this.effectElements=[];var a,i=r.length;for(s=0;s<i;s+=1)a=new GroupEffect(r[s],t),this.effectElements.push(a)}function GroupEffect(e,t){this.init(e,t)}function BaseElement(){}function FrameElement(){}function FootageElement(e,t,s){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(e,t,s)}function AudioElement(e,t,s){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,s),this._isPlaying=!1,this._canPlay=!1;var r=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(r),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,e.au&&e.au.lv?e.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){var s;this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);var r,a=this.data.ef.length,i=this.data.ef;for(s=0;s<a;s+=1){switch(r=null,i[s].ty){case 0:r=new SliderEffect(i[s],t,this);break;case 1:r=new AngleEffect(i[s],t,this);break;case 2:r=new ColorEffect(i[s],t,this);break;case 3:r=new PointEffect(i[s],t,this);break;case 4:case 7:r=new CheckboxEffect(i[s],t,this);break;case 10:r=new LayerIndexEffect(i[s],t,this);break;case 11:r=new MaskIndexEffect(i[s],t,this);break;case 5:r=new EffectsManager(i[s],t);break;default:r=new NoValueEffect(i[s])}r&&this.effectElements.push(r)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var t=e("layer"),s=e("effects"),r=e("shape"),a=e("text"),i=e("comp");this.layerInterface=t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var n=s.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(n),0===this.data.ty||this.data.xt?this.compInterface=i(this):4===this.data.ty?(this.layerInterface.shapeInterface=r(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=a(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,s){this.globalData=t,this.comp=s,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var s,r=this.dynamicProperties.length;for(s=0;s<r;s+=1)(t||this._isParent&&"transform"===this.dynamicProperties[s].propType)&&(this.dynamicProperties[s].getValue(),this.dynamicProperties[s]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var e=getExpressionInterfaces();if(e){var t=e("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var s=this._volume*this._volumeMultiplier;this._previousVolume!==s&&(this._previousVolume=s,this.audio.volume(s))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this._volumeMultiplier=e,this._previousVolume=e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(e){var t,s,r=this.layers.length;for(this.completeLayers=!0,t=r-1;t>=0;t-=1)this.elements[t]||(s=this.layers[t]).ip-s.st<=e-this.layers[t].st&&s.op-s.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:default:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){var t;this.completeLayers=!1;var s,r=e.length,a=this.layers.length;for(t=0;t<r;t+=1)for(s=0;s<a;){if(this.layers[s].id===e[t].id){this.layers[s]=e[t];break}s+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,s){for(var r=this.elements,a=this.layers,i=0,n=a.length;i<n;)a[i].ind==t&&(r[i]&&!0!==r[i]?(s.push(r[i]),r[i].setAsParent(),void 0!==a[i].parent?this.buildElementParenting(e,a[i].parent,s):e.setHierarchy(s)):(this.buildItem(i),this.addPendingElement(e))),i+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var t,s=e.length;for(t=0;t<s;t+=1)if(e[t].xt){var r=this.createComp(e[t]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.getElementById=function(e){var t,s=this.elements.length;for(t=0;t<s;t+=1)if(this.elements[t].data.ind===e)return this.elements[t];return null},BaseRenderer.prototype.getElementByPath=function(e){var t,s=e.shift();if("number"==typeof s)t=this.elements[s];else{var r,a=this.elements.length;for(r=0;r<a;r+=1)if(this.elements[r].data.nm===s){t=this.elements[r];break}}return 0===e.length?t:t.getElementByPath(e)},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(e),this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(e,t,s){this.data=e,this.element=t,this.globalData=s,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,a,i=this.globalData.defs,n=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(n),this.solidPath="";var o,l,c,h,p,d,m=this.masksProperties,u=0,x=[],f=createElementID(),g="clipPath",y="clip-path";for(r=0;r<n;r+=1)if(("a"!==m[r].mode&&"n"!==m[r].mode||m[r].inv||100!==m[r].o.k||m[r].o.x)&&(g="mask",y="mask"),"s"!==m[r].mode&&"i"!==m[r].mode||0!==u?c=null:((c=createNS("rect")).setAttribute("fill","#ffffff"),c.setAttribute("width",this.element.comp.data.w||0),c.setAttribute("height",this.element.comp.data.h||0),x.push(c)),a=createNS("path"),"n"===m[r].mode)this.viewData[r]={op:PropertyFactory.getProp(this.element,m[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,m[r],3),elem:a,lastPath:""},i.appendChild(a);else{var v;if(u+=1,a.setAttribute("fill","s"===m[r].mode?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero"),0!==m[r].x.k?(g="mask",y="mask",d=PropertyFactory.getProp(this.element,m[r].x,0,null,this.element),v=createElementID(),(h=createNS("filter")).setAttribute("id",v),(p=createNS("feMorphology")).setAttribute("operator","erode"),p.setAttribute("in","SourceGraphic"),p.setAttribute("radius","0"),h.appendChild(p),i.appendChild(h),a.setAttribute("stroke","s"===m[r].mode?"#000000":"#ffffff")):(p=null,d=null),this.storedData[r]={elem:a,x:d,expan:p,lastPath:"",lastOperator:"",filterId:v,lastRadius:0},"i"===m[r].mode){l=x.length;var b=createNS("g");for(o=0;o<l;o+=1)b.appendChild(x[o]);var E=createNS("mask");E.setAttribute("mask-type","alpha"),E.setAttribute("id",f+"_"+u),E.appendChild(a),i.appendChild(E),b.setAttribute("mask","url("+getLocationHref()+"#"+f+"_"+u+")"),x.length=0,x.push(b)}else x.push(a);m[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,m[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,m[r],3),invRect:c},this.viewData[r].prop.k||this.drawPath(m[r],this.viewData[r].prop.v,this.viewData[r])}for(this.maskElement=createNS(g),n=x.length,r=0;r<n;r+=1)this.maskElement.appendChild(x[r]);u>0&&(this.maskElement.setAttribute("id",f),this.element.maskedElement.setAttribute(y,"url("+getLocationHref()+"#"+f+")"),i.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,s=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;s<r;){if(this.hierarchy[s].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}s+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),s=0;s<r;s+=1)t.multiply(this.hierarchy[s].finalTransform.mProp.v)}this.localTransforms&&!this.finalTransform._matMdf||(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<t;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var s=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(s),e=1;e<t;e+=1){var r=this.localTransforms[e].matrix;s.multiply(r)}s.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var a=this.finalTransform.localOpacity;for(e=0;e<t;e+=1)a*=.01*this.localTransforms[e].opacity;this.finalTransform.localOpacity=a}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var t=0,s=e.length;for(t=0;t<s;t+=1)this.localTransforms.push(e[t])}}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var s,r=!0,a=this.comp;r;)a.finalTransform?(a.data.hasMask&&t.splice(0,0,a.finalTransform),a=a.comp):r=!1;var i,n=t.length;for(s=0;s<n;s+=1)i=t[s].mat.applyToPointArray(0,0,0),e=[e[0]-i[0],e[1]-i[1],0];return e},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var t,s=this.element.finalTransform.mat,r=this.masksProperties.length;for(t=0;t<r;t+=1)if((this.viewData[t].prop._mdf||e)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||e)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[t].invRect.setAttribute("transform",s.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||e))){var a=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[t].filterId+")")),a.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,s){var r,a,i=" M"+t.v[0][0]+","+t.v[0][1];for(a=t._length,r=1;r<a;r+=1)i+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[r][0]+","+t.i[r][1]+" "+t.v[r][0]+","+t.v[r][1];if(t.c&&a>1&&(i+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),s.lastPath!==i){var n="";s.elem&&(t.c&&(n=e.inv?this.solidPath+i:i),s.elem.setAttribute("d",n)),s.lastPath=i}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var e={createFilter:function(e,t){var s=createNS("filter");return s.setAttribute("id",e),!0!==t&&(s.setAttribute("filterUnits","objectBoundingBox"),s.setAttribute("x","0%"),s.setAttribute("y","0%"),s.setAttribute("width","100%"),s.setAttribute("height","100%")),s},createAlphaToLuminanceFilter:function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}};return e}(),featureSupport=function(){var e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(e.svgLumaHidden=!1),e}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(e){var t,s,r="SourceGraphic",a=e.data.ef?e.data.ef.length:0,i=createElementID(),n=filtersFactory.createFilter(i,!0),o=0;for(this.filters=[],t=0;t<a;t+=1){s=null;var l=e.data.ef[t].ty;registeredEffects$1[l]&&(s=new(0,registeredEffects$1[l].effect)(n,e.effectsManager.effectElements[t],e,idPrefix+o,r),r=idPrefix+o,registeredEffects$1[l].countsAsEffect&&(o+=1)),s&&this.filters.push(s)}o&&(e.globalData.defs.appendChild(n),e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+i+")")),this.filters.length&&e.addRenderableComponent(this)}function registerEffect$1(e,t,s){registeredEffects$1[e]={effect:t,countsAsEffect:s}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(e,t,s){this.assetData=t.getAssetData(e.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(e,t,s),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(e,t){this.elem=e,this.pos=t}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(e){var t,s=this.filters.length;for(t=0;t<s;t+=1)this.filters[t].renderFrame(e)},SVGEffects.prototype.getEffects=function(e){var t,s=this.filters.length,r=[];for(t=0;t<s;t+=1)this.filters[t].type===e&&r.push(this.filters[t]);return r},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var t=createNS("g");t.setAttribute("id",this.layerId),t.appendChild(this.layerElement),e=t,this.globalData.defs.appendChild(t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var s=createNS("clipPath"),r=createNS("path");r.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var a=createElementID();if(s.setAttribute("id",a),s.appendChild(r),this.globalData.defs.appendChild(s),this.checkMasks()){var i=createNS("g");i.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),i.appendChild(this.layerElement),this.transformedElement=i,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var t,s,r,a,i=this.layerId+"_"+e;if(1===e||3===e){var n=createNS("mask");n.setAttribute("id",i),n.setAttribute("mask-type",3===e?"luminance":"alpha"),(r=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),n.appendChild(r),this.globalData.defs.appendChild(n),featureSupport.maskType||1!==e||(n.setAttribute("mask-type","luminance"),t=createElementID(),s=filtersFactory.createFilter(t),this.globalData.defs.appendChild(s),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(a=createNS("g")).appendChild(r),n.appendChild(a),a.setAttribute("filter","url("+getLocationHref()+"#"+t+")"))}else if(2===e){var o=createNS("mask");o.setAttribute("id",i),o.setAttribute("mask-type","alpha");var l=createNS("g");o.appendChild(l),t=createElementID(),s=filtersFactory.createFilter(t);var c=createNS("feComponentTransfer");c.setAttribute("in","SourceGraphic"),s.appendChild(c);var h=createNS("feFuncA");h.setAttribute("type","table"),h.setAttribute("tableValues","1.0 0.0"),c.appendChild(h),this.globalData.defs.appendChild(s);var p=createNS("rect");p.setAttribute("width",this.comp.data.w),p.setAttribute("height",this.comp.data.h),p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("fill","#ffffff"),p.setAttribute("opacity","0"),l.setAttribute("filter","url("+getLocationHref()+"#"+t+")"),l.appendChild(p),(r=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),l.appendChild(r),featureSupport.maskType||(o.setAttribute("mask-type","luminance"),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),a=createNS("g"),l.appendChild(p),a.appendChild(this.layerElement),l.appendChild(a)),this.globalData.defs.appendChild(o)}this.matteMasks[e]=i}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,s){this.initFrame(),this.initBaseData(e,t,s),this.initTransform(e,t,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(e){var t,s=this.shapeModifiers.length;for(t=0;t<s;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();for(e=(t=this.shapeModifiers.length)-1;e>=0&&!this.shapeModifiers[e].processShapes(this._isFirstFrame);e-=1);}},searchProcessedElement:function(e){for(var t=this.processedElements,s=0,r=t.length;s<r;){if(t[s].elem===e)return t[s].pos;s+=1}return 0},addProcessedElement:function(e,t){for(var s=this.processedElements,r=s.length;r;)if(s[r-=1].elem===e)return void(s[r].pos=t);s.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(e,t,s){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=s,this.lvl=t,this._isAnimated=!!s.k;for(var r=0,a=e.length;r<a;){if(e[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(e,t,s,r){var a;this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=s,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var i,n=t.length||0;for(a=0;a<n;a+=1)i=PropertyFactory.getProp(e,t[a].v,0,0,this),this.k=i.k||this.k,this.dataProps[a]={n:t[a].n,p:i};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(e,t,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=s,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=s}function SVGNoStyleData(e,t,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.style=s}function GradientProperty(e,t,s){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var r=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(s),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(e,t,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,s)}function SVGGradientStrokeStyleData(e,t,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,s),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(e,t,s){this.transform={mProps:e,op:t,container:s},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,s=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<s;t+=1)"o"!==this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(e,t){for(var s=0,r=this.o.length/2;s<r;){if(Math.abs(e[4*s]-e[4*t+2*s])>.01)return!1;s+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var t,s,r,a=4*this.data.p;for(t=0;t<a;t+=1)s=t%4==0?100:255,r=Math.round(this.prop.v[t]*s),this.c[t]!==r&&(this.c[t]=r,this._cmdf=!e);if(this.o.length)for(a=this.prop.v.length,t=4*this.data.p;t<a;t+=1)s=t%2==0?100:1,r=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==r&&(this.o[t-4*this.data.p]=r,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,s){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=s,this.stops=[],this.setGradientData(s.pElem,t),this.setGradientOpacity(t,s),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var s=createElementID(),r=createNS(1===t.t?"linearGradient":"radialGradient");r.setAttribute("id",s),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var a,i,n,o=[];for(n=4*t.g.p,i=0;i<n;i+=4)a=createNS("stop"),r.appendChild(a),o.push(a);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+getLocationHref()+"#"+s+")"),this.gf=r,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var s,r,a,i=createNS("mask"),n=createNS("path");i.appendChild(n);var o=createElementID(),l=createElementID();i.setAttribute("id",l);var c=createNS(1===e.t?"linearGradient":"radialGradient");c.setAttribute("id",o),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),a=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var h=this.stops;for(r=4*e.g.p;r<a;r+=2)(s=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(s),h.push(s);n.setAttribute("gf"===e.ty?"fill":"stroke","url("+getLocationHref()+"#"+o+")"),"gs"===e.ty&&(n.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),n.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),1===e.lj&&n.setAttribute("stroke-miterlimit",e.ml)),this.of=c,this.ms=i,this.ost=h,this.maskId=l,t.msElem=n}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(e,t,s,r){if(0===t)return"";var a,i=e.o,n=e.i,o=e.v,l=" M"+r.applyToPointStringified(o[0][0],o[0][1]);for(a=1;a<t;a+=1)l+=" C"+r.applyToPointStringified(i[a-1][0],i[a-1][1])+" "+r.applyToPointStringified(n[a][0],n[a][1])+" "+r.applyToPointStringified(o[a][0],o[a][1]);return s&&t&&(l+=" C"+r.applyToPointStringified(i[a-1][0],i[a-1][1])+" "+r.applyToPointStringified(n[0][0],n[0][1])+" "+r.applyToPointStringified(o[0][0],o[0][1]),l+="z"),l},SVGElementsRenderer=function(){var e=new Matrix,t=new Matrix;function s(e,t,s){(s||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(s||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function r(){}function a(s,r,a){var i,n,o,l,c,h,p,d,m,u,x=r.styles.length,f=r.lvl;for(h=0;h<x;h+=1){if(l=r.sh._mdf||a,r.styles[h].lvl<f){for(d=t.reset(),m=f-r.styles[h].lvl,u=r.transformers.length-1;!l&&m>0;)l=r.transformers[u].mProps._mdf||l,m-=1,u-=1;if(l)for(m=f-r.styles[h].lvl,u=r.transformers.length-1;m>0;)d.multiply(r.transformers[u].mProps.v),m-=1,u-=1}else d=e;if(n=(p=r.sh.paths)._length,l){for(o="",i=0;i<n;i+=1)(c=p.shapes[i])&&c._length&&(o+=buildShapeString(c,c._length,c.c,d));r.caches[h]=o}else o=r.caches[h];r.styles[h].d+=!0===s.hd?"":o,r.styles[h]._mdf=l||r.styles[h]._mdf}}function i(e,t,s){var r=t.style;(t.c._mdf||s)&&r.pElem.setAttribute("fill","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||s)&&r.pElem.setAttribute("fill-opacity",t.o.v)}function n(e,t,s){o(e,t,s),l(0,t,s)}function o(e,t,s){var r,a,i,n,o,l=t.gf,c=t.g._hasOpacity,h=t.s.v,p=t.e.v;if(t.o._mdf||s){var d="gf"===e.ty?"fill-opacity":"stroke-opacity";t.style.pElem.setAttribute(d,t.o.v)}if(t.s._mdf||s){var m=1===e.t?"x1":"cx",u="x1"===m?"y1":"cy";l.setAttribute(m,h[0]),l.setAttribute(u,h[1]),c&&!t.g._collapsable&&(t.of.setAttribute(m,h[0]),t.of.setAttribute(u,h[1]))}if(t.g._cmdf||s){r=t.cst;var x=t.g.c;for(i=r.length,a=0;a<i;a+=1)(n=r[a]).setAttribute("offset",x[4*a]+"%"),n.setAttribute("stop-color","rgb("+x[4*a+1]+","+x[4*a+2]+","+x[4*a+3]+")")}if(c&&(t.g._omdf||s)){var f=t.g.o;for(i=(r=t.g._collapsable?t.cst:t.ost).length,a=0;a<i;a+=1)n=r[a],t.g._collapsable||n.setAttribute("offset",f[2*a]+"%"),n.setAttribute("stop-opacity",f[2*a+1])}if(1===e.t)(t.e._mdf||s)&&(l.setAttribute("x2",p[0]),l.setAttribute("y2",p[1]),c&&!t.g._collapsable&&(t.of.setAttribute("x2",p[0]),t.of.setAttribute("y2",p[1])));else if((t.s._mdf||t.e._mdf||s)&&(o=Math.sqrt(Math.pow(h[0]-p[0],2)+Math.pow(h[1]-p[1],2)),l.setAttribute("r",o),c&&!t.g._collapsable&&t.of.setAttribute("r",o)),t.s._mdf||t.e._mdf||t.h._mdf||t.a._mdf||s){o||(o=Math.sqrt(Math.pow(h[0]-p[0],2)+Math.pow(h[1]-p[1],2)));var g=Math.atan2(p[1]-h[1],p[0]-h[0]),y=t.h.v;y>=1?y=.99:y<=-1&&(y=-.99);var v=o*y,b=Math.cos(g+t.a.v)*v+h[0],E=Math.sin(g+t.a.v)*v+h[1];l.setAttribute("fx",b),l.setAttribute("fy",E),c&&!t.g._collapsable&&(t.of.setAttribute("fx",b),t.of.setAttribute("fy",E))}}function l(e,t,s){var r=t.style,a=t.d;a&&(a._mdf||s)&&a.dashStr&&(r.pElem.setAttribute("stroke-dasharray",a.dashStr),r.pElem.setAttribute("stroke-dashoffset",a.dashoffset[0])),t.c&&(t.c._mdf||s)&&r.pElem.setAttribute("stroke","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||s)&&r.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||s)&&(r.pElem.setAttribute("stroke-width",t.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",t.w.v))}return{createRenderFunction:function(e){switch(e.ty){case"fl":return i;case"gf":return o;case"gs":return n;case"st":return l;case"sh":case"el":case"rc":case"sr":return a;case"tr":return s;case"no":return r;default:return null}}}}();function SVGShapeElement(e,t,s){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,s),this.prevViewData=[]}function LetterProps(e,t,s,r,a,i){this.o=e,this.sw=t,this.sc=s,this.fc=r,this.m=a,this.p=i,this._mdf={o:!0,sw:!!t,sc:!!s,fc:!!r,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,t.d&&t.d.sid&&(t.d=e.globalData.slotManager.getProp(t.d)),this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,t,s,r,a=this.shapes.length,i=this.stylesList.length,n=[],o=!1;for(s=0;s<i;s+=1){for(r=this.stylesList[s],o=!1,n.length=0,e=0;e<a;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(r)&&(n.push(t),o=t._isAnimated||o);n.length>1&&o&&this.setShapesAsAnimated(n)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var t,s=e.length;for(t=0;t<s;t+=1)e[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var s,r=new SVGStyleData(e,t),a=r.pElem;return"st"===e.ty?s=new SVGStrokeStyleData(this,e,r):"fl"===e.ty?s=new SVGFillStyleData(this,e,r):"gf"===e.ty||"gs"===e.ty?(s=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,r),this.globalData.defs.appendChild(s.gf),s.maskId&&(this.globalData.defs.appendChild(s.ms),this.globalData.defs.appendChild(s.of),a.setAttribute("mask","url("+getLocationHref()+"#"+s.maskId+")"))):"no"===e.ty&&(s=new SVGNoStyleData(this,e,r)),"st"!==e.ty&&"gs"!==e.ty||(a.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),a.setAttribute("fill-opacity","0"),1===e.lj&&a.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&a.setAttribute("fill-rule","evenodd"),e.ln&&a.setAttribute("id",e.ln),e.cl&&a.setAttribute("class",e.cl),e.bm&&(a.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(r),this.addToAnimatedContents(e,s),s},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var s=TransformPropertyFactory.getTransformProperty(this,e,this),r=new SVGTransformData(s,s.o,t);return this.addToAnimatedContents(e,r),r},SVGShapeElement.prototype.createShapeElement=function(e,t,s){var r=4;"rc"===e.ty?r=5:"el"===e.ty?r=6:"sr"===e.ty&&(r=7);var a=new SVGShapeData(t,s,ShapePropertyFactory.getShapeProp(this,e,r,this));return this.shapes.push(a),this.addShapeToModifiers(a),this.addToAnimatedContents(e,a),a},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var s=0,r=this.animatedContents.length;s<r;){if(this.animatedContents[s].element===t)return;s+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var t,s=e.styles,r=this.stylesList.length;for(t=0;t<r;t+=1)-1!==s.indexOf(this.stylesList[t])||this.stylesList[t].closed||s.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,s,r,a,i,n){var o,l,c,h,p,d,m=[].concat(i),u=e.length-1,x=[],f=[];for(o=u;o>=0;o-=1){if((d=this.searchProcessedElement(e[o]))?t[o]=s[d-1]:e[o]._render=n,"fl"===e[o].ty||"st"===e[o].ty||"gf"===e[o].ty||"gs"===e[o].ty||"no"===e[o].ty)d?t[o].style.closed=e[o].hd:t[o]=this.createStyleElement(e[o],a),e[o]._render&&t[o].style.pElem.parentNode!==r&&r.appendChild(t[o].style.pElem),x.push(t[o].style);else if("gr"===e[o].ty){if(d)for(c=t[o].it.length,l=0;l<c;l+=1)t[o].prevViewData[l]=t[o].it[l];else t[o]=this.createGroupElement(e[o]);this.searchShapes(e[o].it,t[o].it,t[o].prevViewData,t[o].gr,a+1,m,n),e[o]._render&&t[o].gr.parentNode!==r&&r.appendChild(t[o].gr)}else"tr"===e[o].ty?(d||(t[o]=this.createTransformElement(e[o],r)),h=t[o].transform,m.push(h)):"sh"===e[o].ty||"rc"===e[o].ty||"el"===e[o].ty||"sr"===e[o].ty?(d||(t[o]=this.createShapeElement(e[o],m,a)),this.setElementStyles(t[o])):"tm"===e[o].ty||"rd"===e[o].ty||"ms"===e[o].ty||"pb"===e[o].ty||"zz"===e[o].ty||"op"===e[o].ty?(d?(p=t[o]).closed=!1:((p=ShapeModifiers.getModifier(e[o].ty)).init(this,e[o]),t[o]=p,this.shapeModifiers.push(p)),f.push(p)):"rp"===e[o].ty&&(d?(p=t[o]).closed=!0:(p=ShapeModifiers.getModifier(e[o].ty),t[o]=p,p.init(this,e,o,t),this.shapeModifiers.push(p),n=!1),f.push(p));this.addProcessedElement(e[o],o+1)}for(u=x.length,o=0;o<u;o+=1)x[o].closed=!0;for(u=f.length,o=0;o<u;o+=1)f[o].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var e;this.renderModifiers();var t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,t,s=this.animatedContents.length;for(e=0;e<s;e+=1)t=this.animatedContents[e],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(e,t,s,r,a,i){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var n=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,n=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,n=!0),this.sc!==s&&(this.sc=s,this._mdf.sc=!0,n=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,n=!0),this.m!==a&&(this.m=a,this._mdf.m=!0,n=!0),!i.length||this.p[0]===i[0]&&this.p[1]===i[1]&&this.p[4]===i[4]&&this.p[5]===i[5]&&this.p[12]===i[12]&&this.p[13]===i[13]||(this.p=i,this._mdf.p=!0,n=!0),n},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,s=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var r;this.lock=!0,this._mdf=!1;var a=this.effectsSequence.length,i=e||this.data.d.k[this.keysIndex].s;for(r=0;r<a;r+=1)i=s!==this.keysIndex?this.effectsSequence[r](i,i.t):this.effectsSequence[r](this.currentData,i.t);t!==i&&this.setCurrentData(i),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,s=0,r=e.length;s<=r-1&&!(s===r-1||e[s+1].t>t);)s+=1;return this.keysIndex!==s&&(this.keysIndex=s),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,s,r=[],a=0,i=e.length,n=!1,o=!1,l="";a<i;)n=o,o=!1,t=e.charCodeAt(a),l=e.charAt(a),FontManager.isCombinedCharacter(t)?n=!0:t>=55296&&t<=56319?FontManager.isRegionalFlag(e,a)?l=e.substr(a,14):(s=e.charCodeAt(a+1))>=56320&&s<=57343&&(FontManager.isModifier(t,s)?(l=e.substr(a,2),n=!0):l=FontManager.isFlagEmoji(e.substr(a,4))?e.substr(a,4):e.substr(a,2)):t>56319?(s=e.charCodeAt(a+1),FontManager.isVariationSelector(t)&&(n=!0)):FontManager.isZeroWidthJoiner(t)&&(n=!0,o=!0),n?(r[r.length-1]+=l,n=!1):r.push(l),a+=l.length;return r},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,s,r,a,i,n,o,l=this.elem.globalData.fontManager,c=this.data,h=[],p=0,d=c.m.g,m=0,u=0,x=0,f=[],g=0,y=0,v=l.getFontByName(e.f),b=0,E=getFontProperties(v);e.fWeight=E.weight,e.fStyle=E.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),s=e.finalText.length,e.finalLineHeight=e.lh;var j,R=e.tr/1e3*e.finalSize;if(e.sz)for(var w,S,N=!0,C=e.sz[0],_=e.sz[1];N;){w=0,g=0,s=(S=this.buildFinalText(e.t)).length,R=e.tr/1e3*e.finalSize;var P=-1;for(t=0;t<s;t+=1)j=S[t].charCodeAt(0),r=!1," "===S[t]?P=t:13!==j&&3!==j||(g=0,r=!0,w+=e.finalLineHeight||1.2*e.finalSize),l.chars?(o=l.getCharData(S[t],v.fStyle,v.fFamily),b=r?0:o.w*e.finalSize/100):b=l.measureText(S[t],e.f,e.finalSize),g+b>C&&" "!==S[t]?(-1===P?s+=1:t=P,w+=e.finalLineHeight||1.2*e.finalSize,S.splice(t,P===t?1:0,"\r"),P=-1,g=0):(g+=b,g+=R);w+=v.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&_<w?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=S,s=e.finalText.length,N=!1)}g=-R,b=0;var T,A=0;for(t=0;t<s;t+=1)if(r=!1,13===(j=(T=e.finalText[t]).charCodeAt(0))||3===j?(A=0,f.push(g),y=g>y?g:y,g=-2*R,a="",r=!0,x+=1):a=T,l.chars?(o=l.getCharData(T,v.fStyle,l.getFontByName(e.f).fFamily),b=r?0:o.w*e.finalSize/100):b=l.measureText(a,e.f,e.finalSize)," "===T?A+=b+R:(g+=b+R+A,A=0),h.push({l:b,an:b,add:m,n:r,anIndexes:[],val:a,line:x,animatorJustifyOffset:0}),2==d){if(m+=b,""===a||" "===a||t===s-1){for(""!==a&&" "!==a||(m-=b);u<=t;)h[u].an=m,h[u].ind=p,h[u].extra=b,u+=1;p+=1,m=0}}else if(3==d){if(m+=b,""===a||t===s-1){for(""===a&&(m-=b);u<=t;)h[u].an=m,h[u].ind=p,h[u].extra=b,u+=1;m=0,p+=1}}else h[p].ind=p,h[p].extra=0,p+=1;if(e.l=h,y=g>y?g:y,f.push(g),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=y,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=f;var k,D,I,M,F=c.a;n=F.length;var L=[];for(i=0;i<n;i+=1){for((k=F[i]).a.sc&&(e.strokeColorAnim=!0),k.a.sw&&(e.strokeWidthAnim=!0),(k.a.fc||k.a.fh||k.a.fs||k.a.fb)&&(e.fillColorAnim=!0),M=0,I=k.s.b,t=0;t<s;t+=1)(D=h[t]).anIndexes[i]=M,(1==I&&""!==D.val||2==I&&""!==D.val&&" "!==D.val||3==I&&(D.n||" "==D.val||t==s-1)||4==I&&(D.n||t==s-1))&&(1===k.s.rn&&L.push(M),M+=1);c.a[i].s.totalChars=M;var B,O=-1;if(1===k.s.rn)for(t=0;t<s;t+=1)O!=(D=h[t]).anIndexes[i]&&(O=D.anIndexes[i],B=L.splice(Math.floor(Math.random()*L.length),1)[0]),D.anIndexes[i]=B}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=v.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var s=this.copyData({},this.data.d.k[t].s);s=this.copyData(s,e),this.data.d.k[t].s=s,this.recalculate(t),this.setCurrentData(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,t=Math.min,s=Math.floor;function r(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),this.e="e"in t?PropertyFactory.getProp(e,t.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(e,t.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var a=0,i=0,n=1,o=1;this.ne.v>0?a=this.ne.v/100:i=-this.ne.v/100,this.xe.v>0?n=1-this.xe.v/100:o=1+this.xe.v/100;var l=BezierFactory.getBezierEasing(a,i,n,o).get,c=0,h=this.finalS,p=this.finalE,d=this.data.sh;if(2===d)c=l(c=p===h?r>=p?1:0:e(0,t(.5/(p-h)+(r-h)/(p-h),1)));else if(3===d)c=l(c=p===h?r>=p?0:1:1-e(0,t(.5/(p-h)+(r-h)/(p-h),1)));else if(4===d)p===h?c=0:(c=e(0,t(.5/(p-h)+(r-h)/(p-h),1)))<.5?c*=2:c=1-2*(c-.5),c=l(c);else if(5===d){if(p===h)c=0;else{var m=p-h,u=-m/2+(r=t(e(0,r+.5-h),p-h)),x=m/2;c=Math.sqrt(1-u*u/(x*x))}c=l(c)}else 6===d?(p===h?c=0:(r=t(e(0,r+.5-h),p-h),c=(1+Math.cos(Math.PI+2*Math.PI*r/(p-h)))/2),c=l(c)):(r>=s(h)&&(c=e(0,t(r-h<0?t(p,1)-(h-r):p-r,1))),c=l(c));if(100!==this.sm.v){var f=.01*this.sm.v;0===f&&(f=1e-8);var g=.5-.5*f;c<g?c=0:(c=(c-g)/f)>1&&(c=1)}return c*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,s=this.o.v/t,r=this.s.v/t+s,a=this.e.v/t+s;if(r>a){var i=r;r=a,a=i}this.finalS=r,this.finalE=a}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(e,t,s){return new r(e,t)}}}();function TextAnimatorDataProperty(e,t,s){var r={propType:!1},a=PropertyFactory.getProp,i=t.a;this.a={r:i.r?a(e,i.r,0,degToRads,s):r,rx:i.rx?a(e,i.rx,0,degToRads,s):r,ry:i.ry?a(e,i.ry,0,degToRads,s):r,sk:i.sk?a(e,i.sk,0,degToRads,s):r,sa:i.sa?a(e,i.sa,0,degToRads,s):r,s:i.s?a(e,i.s,1,.01,s):r,a:i.a?a(e,i.a,1,0,s):r,o:i.o?a(e,i.o,0,.01,s):r,p:i.p?a(e,i.p,1,0,s):r,sw:i.sw?a(e,i.sw,0,0,s):r,sc:i.sc?a(e,i.sc,1,0,s):r,fc:i.fc?a(e,i.fc,1,0,s):r,fh:i.fh?a(e,i.fh,0,0,s):r,fs:i.fs?a(e,i.fs,0,.01,s):r,fb:i.fb?a(e,i.fb,0,.01,s):r,t:i.t?a(e,i.t,0,0,s):r},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,s),this.s.t=t.s.t}function TextAnimatorProperty(e,t,s){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=s,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(s)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var e,t,s=this._textData.a.length,r=PropertyFactory.getProp;for(e=0;e<s;e+=1)t=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:r(this._elem,this._textData.p.a,0,0,this),f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:r(this._elem,this._textData.p.r,0,0,this),p:r(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var s,r,a,i,n,o,l,c,h,p,d,m,u,x,f,g,y,v,b,E=this._moreOptions.alignment.v,j=this._animatorsData,R=this._textData,w=this.mHelper,S=this._renderType,N=this.renderedLetters.length,C=e.l;if(this._hasMaskedPath){if(b=this._pathData.m,!this._pathData.n||this._pathData._mdf){var _,P=b.v;for(this._pathData.r.v&&(P=P.reverse()),n={tLength:0,segments:[]},i=P._length-1,g=0,a=0;a<i;a+=1)_=bez.buildBezierData(P.v[a],P.v[a+1],[P.o[a][0]-P.v[a][0],P.o[a][1]-P.v[a][1]],[P.i[a+1][0]-P.v[a+1][0],P.i[a+1][1]-P.v[a+1][1]]),n.tLength+=_.segmentLength,n.segments.push(_),g+=_.segmentLength;a=i,b.v.c&&(_=bez.buildBezierData(P.v[a],P.v[0],[P.o[a][0]-P.v[a][0],P.o[a][1]-P.v[a][1]],[P.i[0][0]-P.v[0][0],P.i[0][1]-P.v[0][1]]),n.tLength+=_.segmentLength,n.segments.push(_),g+=_.segmentLength),this._pathData.pi=n}if(n=this._pathData.pi,o=this._pathData.f.v,d=0,p=1,c=0,h=!0,x=n.segments,o<0&&b.v.c)for(n.tLength<Math.abs(o)&&(o=-Math.abs(o)%n.tLength),p=(u=x[d=x.length-1].points).length-1;o<0;)o+=u[p].partialLength,(p-=1)<0&&(p=(u=x[d-=1].points).length-1);m=(u=x[d].points)[p-1],f=(l=u[p]).partialLength}i=C.length,s=0,r=0;var T,A,k,D,I,M=1.2*e.finalSize*.714,F=!0;k=j.length;var L,B,O,V,z,G,$,H,q,W,U,Y,K=-1,J=o,X=d,Z=p,Q=-1,ee="",te=this.defaultPropsArray;if(2===e.j||1===e.j){var se=0,re=0,ae=2===e.j?-.5:-1,ie=0,ne=!0;for(a=0;a<i;a+=1)if(C[a].n){for(se&&(se+=re);ie<a;)C[ie].animatorJustifyOffset=se,ie+=1;se=0,ne=!0}else{for(A=0;A<k;A+=1)(T=j[A].a).t.propType&&(ne&&2===e.j&&(re+=T.t.v*ae),(I=j[A].s.getMult(C[a].anIndexes[A],R.a[A].s.totalChars)).length?se+=T.t.v*I[0]*ae:se+=T.t.v*I*ae);ne=!1}for(se&&(se+=re);ie<a;)C[ie].animatorJustifyOffset=se,ie+=1}for(a=0;a<i;a+=1){if(w.reset(),V=1,C[a].n)s=0,r+=e.yOffset,r+=F?1:0,o=J,F=!1,this._hasMaskedPath&&(p=Z,m=(u=x[d=X].points)[p-1],f=(l=u[p]).partialLength,c=0),ee="",U="",q="",Y="",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Q!==C[a].line){switch(e.j){case 1:o+=g-e.lineWidths[C[a].line];break;case 2:o+=(g-e.lineWidths[C[a].line])/2}Q=C[a].line}K!==C[a].ind&&(C[K]&&(o+=C[K].extra),o+=C[a].an/2,K=C[a].ind),o+=E[0]*C[a].an*.005;var oe=0;for(A=0;A<k;A+=1)(T=j[A].a).p.propType&&((I=j[A].s.getMult(C[a].anIndexes[A],R.a[A].s.totalChars)).length?oe+=T.p.v[0]*I[0]:oe+=T.p.v[0]*I),T.a.propType&&((I=j[A].s.getMult(C[a].anIndexes[A],R.a[A].s.totalChars)).length?oe+=T.a.v[0]*I[0]:oe+=T.a.v[0]*I);for(h=!0,this._pathData.a.v&&(o=.5*C[0].an+(g-this._pathData.f.v-.5*C[0].an-.5*C[C.length-1].an)*K/(i-1),o+=this._pathData.f.v);h;)c+f>=o+oe||!u?(y=(o+oe-c)/l.partialLength,B=m.point[0]+(l.point[0]-m.point[0])*y,O=m.point[1]+(l.point[1]-m.point[1])*y,w.translate(-E[0]*C[a].an*.005,-E[1]*M*.01),h=!1):u&&(c+=l.partialLength,(p+=1)>=u.length&&(p=0,x[d+=1]?u=x[d].points:b.v.c?(p=0,u=x[d=0].points):(c-=l.partialLength,u=null)),u&&(m=l,f=(l=u[p]).partialLength));L=C[a].an/2-C[a].add,w.translate(-L,0,0)}else L=C[a].an/2-C[a].add,w.translate(-L,0,0),w.translate(-E[0]*C[a].an*.005,-E[1]*M*.01,0);for(A=0;A<k;A+=1)(T=j[A].a).t.propType&&(I=j[A].s.getMult(C[a].anIndexes[A],R.a[A].s.totalChars),0===s&&0===e.j||(this._hasMaskedPath?I.length?o+=T.t.v*I[0]:o+=T.t.v*I:I.length?s+=T.t.v*I[0]:s+=T.t.v*I));for(e.strokeWidthAnim&&(G=e.sw||0),e.strokeColorAnim&&(z=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&($=[e.fc[0],e.fc[1],e.fc[2]]),A=0;A<k;A+=1)(T=j[A].a).a.propType&&((I=j[A].s.getMult(C[a].anIndexes[A],R.a[A].s.totalChars)).length?w.translate(-T.a.v[0]*I[0],-T.a.v[1]*I[1],T.a.v[2]*I[2]):w.translate(-T.a.v[0]*I,-T.a.v[1]*I,T.a.v[2]*I));for(A=0;A<k;A+=1)(T=j[A].a).s.propType&&((I=j[A].s.getMult(C[a].anIndexes[A],R.a[A].s.totalChars)).length?w.scale(1+(T.s.v[0]-1)*I[0],1+(T.s.v[1]-1)*I[1],1):w.scale(1+(T.s.v[0]-1)*I,1+(T.s.v[1]-1)*I,1));for(A=0;A<k;A+=1){if(T=j[A].a,I=j[A].s.getMult(C[a].anIndexes[A],R.a[A].s.totalChars),T.sk.propType&&(I.length?w.skewFromAxis(-T.sk.v*I[0],T.sa.v*I[1]):w.skewFromAxis(-T.sk.v*I,T.sa.v*I)),T.r.propType&&(I.length?w.rotateZ(-T.r.v*I[2]):w.rotateZ(-T.r.v*I)),T.ry.propType&&(I.length?w.rotateY(T.ry.v*I[1]):w.rotateY(T.ry.v*I)),T.rx.propType&&(I.length?w.rotateX(T.rx.v*I[0]):w.rotateX(T.rx.v*I)),T.o.propType&&(I.length?V+=(T.o.v*I[0]-V)*I[0]:V+=(T.o.v*I-V)*I),e.strokeWidthAnim&&T.sw.propType&&(I.length?G+=T.sw.v*I[0]:G+=T.sw.v*I),e.strokeColorAnim&&T.sc.propType)for(H=0;H<3;H+=1)I.length?z[H]+=(T.sc.v[H]-z[H])*I[0]:z[H]+=(T.sc.v[H]-z[H])*I;if(e.fillColorAnim&&e.fc){if(T.fc.propType)for(H=0;H<3;H+=1)I.length?$[H]+=(T.fc.v[H]-$[H])*I[0]:$[H]+=(T.fc.v[H]-$[H])*I;T.fh.propType&&($=I.length?addHueToRGB($,T.fh.v*I[0]):addHueToRGB($,T.fh.v*I)),T.fs.propType&&($=I.length?addSaturationToRGB($,T.fs.v*I[0]):addSaturationToRGB($,T.fs.v*I)),T.fb.propType&&($=I.length?addBrightnessToRGB($,T.fb.v*I[0]):addBrightnessToRGB($,T.fb.v*I))}}for(A=0;A<k;A+=1)(T=j[A].a).p.propType&&(I=j[A].s.getMult(C[a].anIndexes[A],R.a[A].s.totalChars),this._hasMaskedPath?I.length?w.translate(0,T.p.v[1]*I[0],-T.p.v[2]*I[1]):w.translate(0,T.p.v[1]*I,-T.p.v[2]*I):I.length?w.translate(T.p.v[0]*I[0],T.p.v[1]*I[1],-T.p.v[2]*I[2]):w.translate(T.p.v[0]*I,T.p.v[1]*I,-T.p.v[2]*I));if(e.strokeWidthAnim&&(q=G<0?0:G),e.strokeColorAnim&&(W="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),e.fillColorAnim&&e.fc&&(U="rgb("+Math.round(255*$[0])+","+Math.round(255*$[1])+","+Math.round(255*$[2])+")"),this._hasMaskedPath){if(w.translate(0,-e.ls),w.translate(0,E[1]*M*.01+r,0),this._pathData.p.v){v=(l.point[1]-m.point[1])/(l.point[0]-m.point[0]);var le=180*Math.atan(v)/Math.PI;l.point[0]<m.point[0]&&(le+=180),w.rotate(-le*Math.PI/180)}w.translate(B,O,0),o-=E[0]*C[a].an*.005,C[a+1]&&K!==C[a+1].ind&&(o+=C[a].an/2,o+=.001*e.tr*e.finalSize)}else{switch(w.translate(s,r,0),e.ps&&w.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:w.translate(C[a].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[C[a].line]),0,0);break;case 2:w.translate(C[a].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[C[a].line])/2,0,0)}w.translate(0,-e.ls),w.translate(L,0,0),w.translate(E[0]*C[a].an*.005,E[1]*M*.01,0),s+=C[a].l+.001*e.tr*e.finalSize}"html"===S?ee=w.toCSS():"svg"===S?ee=w.to2dCSS():te=[w.props[0],w.props[1],w.props[2],w.props[3],w.props[4],w.props[5],w.props[6],w.props[7],w.props[8],w.props[9],w.props[10],w.props[11],w.props[12],w.props[13],w.props[14],w.props[15]],Y=V}N<=a?(D=new LetterProps(Y,q,W,U,ee,te),this.renderedLetters.push(D),N+=1,this.lettersChangedFlag=!0):(D=this.renderedLetters[a],this.lettersChangedFlag=D.update(Y,q,W,U,ee,te)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(e,t,s){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,s),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)},ITextElement.prototype.createPathShape=function(e,t){var s,r,a=t.length,i="";for(s=0;s<a;s+=1)"sh"===t[s].ty&&(r=t[s].ks.k,i+=buildShapeString(r,r.i.length,!0,e));return i},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,s,r,a){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[s]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[s])/2,0,0)}t.translate(r,a,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(e,t,s){this.textSpans=[],this.renderType="svg",this.initElement(e,t,s)}function ISolidElement(e,t,s){this.initElement(e,t,s)}function NullElement(e,t,s){this.initFrame(),this.initBaseData(e,t,s),this.initFrame(),this.initTransform(e,t,s),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(e,t,s){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,s),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var s="";if(t&&t.title){var r=createNS("title"),a=createElementID();r.setAttribute("id",a),r.textContent=t.title,this.svgElement.appendChild(r),s+=a}if(t&&t.description){var i=createNS("desc"),n=createElementID();i.setAttribute("id",n),i.textContent=t.description,this.svgElement.appendChild(i),s+=" "+n}s&&this.svgElement.setAttribute("aria-labelledby",s);var o=createNS("defs");this.svgElement.appendChild(o);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&!1===t.hideOnTransparent),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:o,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var t=0,s=e.length,r=[],a="";t<s;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(r.push(a),a=""):a+=e[t],t+=1;return r.push(a),r},SVGTextLottieElement.prototype.buildShapeData=function(e,t){if(e.shapes&&e.shapes.length){var s=e.shapes[0];if(s.it){var r=s.it[s.it.length-1];r.s&&(r.s.k[0]=t,r.s.k[1]=t)}}return e},SVGTextLottieElement.prototype.buildNewText=function(){var e,t;this.addDynamicProperty(this);var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s?s.l.length:0),s.fc?this.layerElement.setAttribute("fill",this.buildColor(s.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),s.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(s.sc)),this.layerElement.setAttribute("stroke-width",s.sw)),this.layerElement.setAttribute("font-size",s.finalSize);var r=this.globalData.fontManager.getFontByName(s.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var a=s.fWeight,i=s.fStyle;this.layerElement.setAttribute("font-style",i),this.layerElement.setAttribute("font-weight",a)}this.layerElement.setAttribute("aria-label",s.t);var n,o=s.l||[],l=!!this.globalData.fontManager.chars;t=o.length;var c=this.mHelper,h=this.data.singleShape,p=0,d=0,m=!0,u=.001*s.tr*s.finalSize;if(!h||l||s.sz){var x,f=this.textSpans.length;for(e=0;e<t;e+=1){if(this.textSpans[e]||(this.textSpans[e]={span:null,childSpan:null,glyph:null}),!l||!h||0===e){if(n=f>e?this.textSpans[e].span:createNS(l?"g":"text"),f<=e){if(n.setAttribute("stroke-linecap","butt"),n.setAttribute("stroke-linejoin","round"),n.setAttribute("stroke-miterlimit","4"),this.textSpans[e].span=n,l){var g=createNS("g");n.appendChild(g),this.textSpans[e].childSpan=g}this.textSpans[e].span=n,this.layerElement.appendChild(n)}n.style.display="inherit"}if(c.reset(),h&&(o[e].n&&(p=-u,d+=s.yOffset,d+=m?1:0,m=!1),this.applyTextPropertiesToMatrix(s,c,o[e].line,p,d),p+=o[e].l||0,p+=u),l){var y;if(1===(x=this.globalData.fontManager.getCharData(s.finalText[e],r.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily)).t)y=new SVGCompElement(x.data,this.globalData,this);else{var v=emptyShapeData;x.data&&x.data.shapes&&(v=this.buildShapeData(x.data,s.finalSize)),y=new SVGShapeElement(v,this.globalData,this)}if(this.textSpans[e].glyph){var b=this.textSpans[e].glyph;this.textSpans[e].childSpan.removeChild(b.layerElement),b.destroy()}this.textSpans[e].glyph=y,y._debug=!0,y.prepareFrame(0),y.renderFrame(),this.textSpans[e].childSpan.appendChild(y.layerElement),1===x.t&&this.textSpans[e].childSpan.setAttribute("transform","scale("+s.finalSize/100+","+s.finalSize/100+")")}else h&&n.setAttribute("transform","translate("+c.props[12]+","+c.props[13]+")"),n.textContent=o[e].val,n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}h&&n&&n.setAttribute("d","")}else{var E=this.textContainer,j="start";switch(s.j){case 1:j="end";break;case 2:j="middle";break;default:j="start"}E.setAttribute("text-anchor",j),E.setAttribute("letter-spacing",u);var R=this.buildTextContents(s.finalText);for(t=R.length,d=s.ps?s.ps[1]+s.ascent:0,e=0;e<t;e+=1)(n=this.textSpans[e].span||createNS("tspan")).textContent=R[e],n.setAttribute("x",0),n.setAttribute("y",d),n.style.display="inherit",E.appendChild(n),this.textSpans[e]||(this.textSpans[e]={span:null,glyph:null}),this.textSpans[e].span=n,d+=s.finalLineHeight;this.layerElement.appendChild(E)}for(;e<this.textSpans.length;)this.textSpans[e].span.style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var e,t,s=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,e=0;e<s;e+=1)(t=this.textSpans[e].glyph)&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var e,t;this._sizeChanged=!0;var s,r,a,i=this.textAnimator.renderedLetters,n=this.textProperty.currentData.l;for(t=n.length,e=0;e<t;e+=1)n[e].n||(s=i[e],r=this.textSpans[e].span,(a=this.textSpans[e].glyph)&&a.renderFrame(),s._mdf.m&&r.setAttribute("transform",s.m),s._mdf.o&&r.setAttribute("opacity",s.o),s._mdf.sw&&r.setAttribute("stroke-width",s.sw),s._mdf.sc&&r.setAttribute("stroke",s.sc),s._mdf.fc&&r.setAttribute("fill",s.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRendererBase.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var s=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",e.w),r.setAttribute("height",e.h),r.setAttribute("x",0),r.setAttribute("y",0);var a=createElementID();s.setAttribute("id",a),s.appendChild(r),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),t.appendChild(s),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRendererBase.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(e){var t=0,s=this.layers.length;for(t=0;t<s;t+=1)if(this.layers[t].ind===e)return t;return-1},SVGRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){t[e]=!0;var s=this.createItem(this.layers[e]);if(t[e]=s,getExpressionsPlugin()&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(s),s.initExpressions()),this.appendElementInPos(s,e),this.layers[e].tt){var r="tp"in this.layers[e]?this.findIndexByInd(this.layers[e].tp):e-1;if(-1===r)return;if(this.elements[r]&&!0!==this.elements[r]){var a=t[r].getMatte(this.layers[e].tt);s.setMatte(a)}else this.buildItem(r),this.addPendingElement(s)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,s=this.elements.length;t<s;){if(this.elements[t]===e){var r="tp"in e.data?this.findIndexByInd(e.data.tp):t-1,a=this.elements[r].getMatte(this.layers[t].tt);e.setMatte(a);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){var t;null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var s=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=s-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<s;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(e,t){var s=e.getBaseElement();if(s){for(var r,a=0;a<t;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement()&&(r=this.elements[a].getBaseElement()),a+=1;r?this.layerElement.insertBefore(s,r):this.layerElement.appendChild(s)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,s){this.initFrame(),this.initBaseData(e,t,s),this.initTransform(e,t,s),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var s,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),s=r-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&(this.elements[s].prepareFrame(this.renderedFrame-this.layers[s].st),this.elements[s]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(e){var t,s=e.length,r="_";for(t=0;t<s;t+=1)r+=e[t].transform.key+"_";var a=this.sequences[r];return a||(a={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=a,this.sequenceList.push(a)),a},processSequence:function(e,t){for(var s=0,r=e.transforms.length,a=t;s<r&&!t;){if(e.transforms[s].transform.mProps._mdf){a=!0;break}s+=1}if(a)for(e.finalTransform.reset(),s=r-1;s>=0;s-=1)e.finalTransform.multiply(e.transforms[s].transform.mProps.v);e._mdf=a},processSequences:function(e){var t,s=this.sequenceList.length;for(t=0;t<s;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",t=null,s=null,r=null;function a(){var a,i,n;t||(a=createNS("svg"),i=createNS("filter"),n=createNS("feColorMatrix"),i.setAttribute("id",e),n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),i.appendChild(n),a.appendChild(i),a.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(a.style.display="none"),r=a,document.body.appendChild(r),t=createTag("canvas"),(s=t.getContext("2d")).filter="url(#"+e+")",s.fillStyle="rgba(0,0,0,0)",s.fillRect(0,0,1,1))}return{load:a,get:function(r){return t||a(),t.width=r.width,t.height=r.height,s.filter="url(#"+e+")",t}}};function createCanvas(e,t){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(e,t);var s=createTag("canvas");return s.width=e,s.height=t,s}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas:createCanvas},registeredEffects={};function CVEffects(e){var t,s,r=e.data.ef?e.data.ef.length:0;for(this.filters=[],t=0;t<r;t+=1){s=null;var a=e.data.ef[t].ty;registeredEffects[a]&&(s=new(0,registeredEffects[a].effect)(e.effectsManager.effectElements[t],e)),s&&this.filters.push(s)}this.filters.length&&e.addRenderableComponent(this)}function registerEffect(e,t){registeredEffects[e]={effect:t}}function CVMaskElement(e,t){var s;this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r=this.masksProperties.length,a=!1;for(s=0;s<r;s+=1)"n"!==this.masksProperties[s].mode&&(a=!0),this.viewData[s]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[s],3);this.hasMasks=a,a&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(e){var t,s=this.filters.length;for(t=0;t<s;t+=1)this.filters[t].renderFrame(e)},CVEffects.prototype.getEffects=function(e){var t,s=this.filters.length,r=[];for(t=0;t<s;t+=1)this.filters[t].type===e&&r.push(this.filters[t]);return r},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e,t,s,r,a=this.element.finalTransform.mat,i=this.element.canvasContext,n=this.masksProperties.length;for(i.beginPath(),e=0;e<n;e+=1)if("n"!==this.masksProperties[e].mode){var o;this.masksProperties[e].inv&&(i.moveTo(0,0),i.lineTo(this.element.globalData.compSize.w,0),i.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),i.lineTo(0,this.element.globalData.compSize.h),i.lineTo(0,0)),r=this.viewData[e].v,t=a.applyToPointArray(r.v[0][0],r.v[0][1],0),i.moveTo(t[0],t[1]);var l=r._length;for(o=1;o<l;o+=1)s=a.applyToTriplePoints(r.o[o-1],r.i[o],r.v[o]),i.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);s=a.applyToTriplePoints(r.o[o-1],r.i[0],r.v[0]),i.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}this.element.globalData.renderer.save(!0),i.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(e,t,s,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var a,i=4;"rc"===t.ty?i=5:"el"===t.ty?i=6:"sr"===t.ty&&(i=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,i,e);var n,o=s.length;for(a=0;a<o;a+=1)s[a].closed||(n={transforms:r.addTransformSequence(s[a].transforms),trNodes:[]},this.styledShapes.push(n),s[a].elements.push(n))}function CVShapeElement(e,t,s){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,s)}function CVTextElement(e,t,s){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,s)}function CVImageElement(e,t,s){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(e,t,s)}function CVSolidElement(e,t,s){this.initElement(e,t,s)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var e;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,e=0;e<15;e+=1){var t=new CanvasContext;this.stack[e]=t}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(e,t,s){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,s),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(e,t,s){this.initElement(e,t,s)}function HShapeElement(e,t,s){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,s),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,s){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,s)}function HCameraElement(e,t,s){this.initFrame(),this.initBaseData(e,t,s),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,e.pe,0,0,this),e.ks.p.s?(this.px=r(this,e.ks.p.x,1,0,this),this.py=r(this,e.ks.p.y,1,0,this),this.pz=r(this,e.ks.p.z,1,0,this)):this.p=r(this,e.ks.p,1,0,this),e.ks.a&&(this.a=r(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var a,i=e.ks.or.k.length;for(a=0;a<i;a+=1)e.ks.or.k[a].to=null,e.ks.or.k[a].ti=null}this.or=r(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,e.ks.rx,0,degToRads,this),this.ry=r(this,e.ks.ry,0,degToRads,this),this.rz=r(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(e,t,s){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,s)}function HybridRendererBase(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(e,t,s){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,s),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,t=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(t);var s=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(s),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0].getContext("2d");this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],t=e.getContext("2d");if(this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var s=assetLoader.getLumaCanvas(this.canvasContext.canvas);s.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(s,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var t=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var s={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},r={};if("fl"===e.ty||"st"===e.ty?(r.c=PropertyFactory.getProp(this,e.c,1,255,this),r.c.k||(s.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")")):"gf"!==e.ty&&"gs"!==e.ty||(r.s=PropertyFactory.getProp(this,e.s,1,null,this),r.e=PropertyFactory.getProp(this,e.e,1,null,this),r.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,e.g,this)),r.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"===e.ty||"gs"===e.ty){if(s.lc=lineCapEnum[e.lc||2],s.lj=lineJoinEnum[e.lj||2],1==e.lj&&(s.ml=e.ml),r.w=PropertyFactory.getProp(this,e.w,0,null,this),r.w.k||(s.wi=r.w.v),e.d){var a=new DashProperty(this,e.d,"canvas",this);r.d=a,r.d.k||(s.da=r.d.dashArray,s.do=r.d.dashoffset[0])}}else s.r=2===e.r?"evenodd":"nonzero";return this.stylesList.push(s),r.style=s,r},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var t,s=this.stylesList.length;for(t=0;t<s;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var t,s=e.length;for(t=0;t<s;t+=1)e[t].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,s,r,a){var i,n,o,l,c,h,p=e.length-1,d=[],m=[],u=[].concat(a);for(i=p;i>=0;i-=1){if((l=this.searchProcessedElement(e[i]))?t[i]=s[l-1]:e[i]._shouldRender=r,"fl"===e[i].ty||"st"===e[i].ty||"gf"===e[i].ty||"gs"===e[i].ty)l?t[i].style.closed=!1:t[i]=this.createStyleElement(e[i],u),d.push(t[i].style);else if("gr"===e[i].ty){if(l)for(o=t[i].it.length,n=0;n<o;n+=1)t[i].prevViewData[n]=t[i].it[n];else t[i]=this.createGroupElement(e[i]);this.searchShapes(e[i].it,t[i].it,t[i].prevViewData,r,u)}else"tr"===e[i].ty?(l||(h=this.createTransformElement(e[i]),t[i]=h),u.push(t[i]),this.addTransformToStyleList(t[i])):"sh"===e[i].ty||"rc"===e[i].ty||"el"===e[i].ty||"sr"===e[i].ty?l||(t[i]=this.createShapeElement(e[i])):"tm"===e[i].ty||"rd"===e[i].ty||"pb"===e[i].ty||"zz"===e[i].ty||"op"===e[i].ty?(l?(c=t[i]).closed=!1:((c=ShapeModifiers.getModifier(e[i].ty)).init(this,e[i]),t[i]=c,this.shapeModifiers.push(c)),m.push(c)):"rp"===e[i].ty&&(l?(c=t[i]).closed=!0:(c=ShapeModifiers.getModifier(e[i].ty),t[i]=c,c.init(this,e,i,t),this.shapeModifiers.push(c),r=!1),m.push(c));this.addProcessedElement(e[i],i+1)}for(this.removeTransformFromStyleList(),this.closeStyles(d),p=m.length,i=0;i<p;i+=1)m[i].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,t,s,r,a,i,n,o,l,c=this.stylesList.length,h=this.globalData.renderer,p=this.globalData.canvasContext;for(e=0;e<c;e+=1)if(("st"!==(o=(l=this.stylesList[e]).type)&&"gs"!==o||0!==l.wi)&&l.data._shouldRender&&0!==l.coOp&&0!==this.globalData.currentGlobalAlpha){for(h.save(),i=l.elements,"st"===o||"gs"===o?(h.ctxStrokeStyle("st"===o?l.co:l.grd),h.ctxLineWidth(l.wi),h.ctxLineCap(l.lc),h.ctxLineJoin(l.lj),h.ctxMiterLimit(l.ml||0)):h.ctxFillStyle("fl"===o?l.co:l.grd),h.ctxOpacity(l.coOp),"st"!==o&&"gs"!==o&&p.beginPath(),h.ctxTransform(l.preTransforms.finalTransform.props),s=i.length,t=0;t<s;t+=1){for("st"!==o&&"gs"!==o||(p.beginPath(),l.da&&(p.setLineDash(l.da),p.lineDashOffset=l.do)),a=(n=i[t].trNodes).length,r=0;r<a;r+=1)"m"===n[r].t?p.moveTo(n[r].p[0],n[r].p[1]):"c"===n[r].t?p.bezierCurveTo(n[r].pts[0],n[r].pts[1],n[r].pts[2],n[r].pts[3],n[r].pts[4],n[r].pts[5]):p.closePath();"st"!==o&&"gs"!==o||(h.ctxStroke(),l.da&&p.setLineDash(this.dashResetter))}"st"!==o&&"gs"!==o&&this.globalData.renderer.ctxFill(l.r),h.restore()}},CVShapeElement.prototype.renderShape=function(e,t,s,r){var a,i;for(i=e,a=t.length-1;a>=0;a-=1)"tr"===t[a].ty?(i=s[a].transform,this.renderShapeTransform(e,i)):"sh"===t[a].ty||"el"===t[a].ty||"rc"===t[a].ty||"sr"===t[a].ty?this.renderPath(t[a],s[a]):"fl"===t[a].ty?this.renderFill(t[a],s[a],i):"st"===t[a].ty?this.renderStroke(t[a],s[a],i):"gf"===t[a].ty||"gs"===t[a].ty?this.renderGradientFill(t[a],s[a],i):"gr"===t[a].ty?this.renderShape(i,t[a].it,s[a].it):t[a].ty;r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var s,r,a,i=e.trNodes,n=t.paths,o=n._length;i.length=0;var l=e.transforms.finalTransform;for(a=0;a<o;a+=1){var c=n.shapes[a];if(c&&c.v){for(r=c._length,s=1;s<r;s+=1)1===s&&i.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),i.push({t:"c",pts:l.applyToTriplePoints(c.o[s-1],c.i[s],c.v[s])});1===r&&i.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&r&&(i.push({t:"c",pts:l.applyToTriplePoints(c.o[s-1],c.i[0],c.v[0])}),i.push({t:"z"}))}}e.trNodes=i}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender){var s,r=t.styledShapes.length;for(s=0;s<r;s+=1)this.renderStyledShape(t.styledShapes[s],t.sh)}},CVShapeElement.prototype.renderFill=function(e,t,s){var r=t.style;(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||s._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*s.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,s){var r,a=t.style;if(!a.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){var i,n=this.globalData.canvasContext,o=t.s.v,l=t.e.v;if(1===e.t)r=n.createLinearGradient(o[0],o[1],l[0],l[1]);else{var c=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),h=Math.atan2(l[1]-o[1],l[0]-o[0]),p=t.h.v;p>=1?p=.99:p<=-1&&(p=-.99);var d=c*p,m=Math.cos(h+t.a.v)*d+o[0],u=Math.sin(h+t.a.v)*d+o[1];r=n.createRadialGradient(m,u,0,o[0],o[1],c)}var x=e.g.p,f=t.g.c,g=1;for(i=0;i<x;i+=1)t.g._hasOpacity&&t.g._collapsable&&(g=t.g.o[2*i+1]),r.addColorStop(f[4*i]/100,"rgba("+f[4*i+1]+","+f[4*i+2]+","+f[4*i+3]+","+g+")");a.grd=r}a.coOp=t.o.v*s.opacity},CVShapeElement.prototype.renderStroke=function(e,t,s){var r=t.style,a=t.d;a&&(a._mdf||this._isFirstFrame)&&(r.da=a.dashArray,r.do=a.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||s._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*s.opacity),(t.w._mdf||this._isFirstFrame)&&(r.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var s=!1;e.sc&&(s=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var r,a,i,n,o,l,c,h,p,d,m,u,x=this.globalData.fontManager.getFontByName(e.f),f=e.l,g=this.mHelper;this.stroke=s,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,a=e.finalText.length;var y=this.data.singleShape,v=.001*e.tr*e.finalSize,b=0,E=0,j=!0,R=0;for(r=0;r<a;r+=1){n=(i=this.globalData.fontManager.getCharData(e.finalText[r],x.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&i.data||{},g.reset(),y&&f[r].n&&(b=-v,E+=e.yOffset,E+=j?1:0,j=!1),p=(c=n.shapes?n.shapes[0].it:[]).length,g.scale(e.finalSize/100,e.finalSize/100),y&&this.applyTextPropertiesToMatrix(e,g,f[r].line,b,E),m=createSizedArray(p-1);var w=0;for(h=0;h<p;h+=1)if("sh"===c[h].ty){for(l=c[h].ks.k.i.length,d=c[h].ks.k,u=[],o=1;o<l;o+=1)1===o&&u.push(g.applyToX(d.v[0][0],d.v[0][1],0),g.applyToY(d.v[0][0],d.v[0][1],0)),u.push(g.applyToX(d.o[o-1][0],d.o[o-1][1],0),g.applyToY(d.o[o-1][0],d.o[o-1][1],0),g.applyToX(d.i[o][0],d.i[o][1],0),g.applyToY(d.i[o][0],d.i[o][1],0),g.applyToX(d.v[o][0],d.v[o][1],0),g.applyToY(d.v[o][0],d.v[o][1],0));u.push(g.applyToX(d.o[o-1][0],d.o[o-1][1],0),g.applyToY(d.o[o-1][0],d.o[o-1][1],0),g.applyToX(d.i[0][0],d.i[0][1],0),g.applyToY(d.i[0][0],d.i[0][1],0),g.applyToX(d.v[0][0],d.v[0][1],0),g.applyToY(d.v[0][0],d.v[0][1],0)),m[w]=u,w+=1}y&&(b+=f[r].l,b+=v),this.textSpans[R]?this.textSpans[R].elem=m:this.textSpans[R]={elem:m},R+=1}},CVTextElement.prototype.renderInnerContent=function(){var e,t,s,r,a,i;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var n,o=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;t=l.length;var c,h,p=null,d=null,m=null,u=this.globalData.renderer;for(e=0;e<t;e+=1)if(!l[e].n){if((n=o[e])&&(u.save(),u.ctxTransform(n.p),u.ctxOpacity(n.o)),this.fill){for(n&&n.fc?p!==n.fc&&(u.ctxFillStyle(n.fc),p=n.fc):p!==this.values.fill&&(p=this.values.fill,u.ctxFillStyle(this.values.fill)),r=(c=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),s=0;s<r;s+=1)for(i=(h=c[s]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),a=2;a<i;a+=6)this.globalData.canvasContext.bezierCurveTo(h[a],h[a+1],h[a+2],h[a+3],h[a+4],h[a+5]);this.globalData.canvasContext.closePath(),u.ctxFill()}if(this.stroke){for(n&&n.sw?m!==n.sw&&(m=n.sw,u.ctxLineWidth(n.sw)):m!==this.values.sWidth&&(m=this.values.sWidth,u.ctxLineWidth(this.values.sWidth)),n&&n.sc?d!==n.sc&&(d=n.sc,u.ctxStrokeStyle(n.sc)):d!==this.values.stroke&&(d=this.values.stroke,u.ctxStrokeStyle(this.values.stroke)),r=(c=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),s=0;s<r;s+=1)for(i=(h=c[s]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),a=2;a<i;a+=6)this.globalData.canvasContext.bezierCurveTo(h[a],h[a+1],h[a+2],h[a+3],h[a+4],h[a+5]);this.globalData.canvasContext.closePath(),u.ctxStroke()}n&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t,s,r=e.getContext("2d"),a=this.img.width,i=this.img.height,n=a/i,o=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;n>o&&"xMidYMid slice"===l||n<o&&"xMidYMid slice"!==l?t=(s=i)*o:s=(t=a)/o,r.drawImage(this.img,(a-t)/2,(i-s)/2,t,s,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(e){1===e[0]&&0===e[1]&&0===e[4]&&1===e[5]&&0===e[12]&&0===e[13]||this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRendererBase.prototype.ctxOpacity=function(e){this.canvasContext.globalAlpha*=e<0?0:e},CanvasRendererBase.prototype.ctxFillStyle=function(e){this.canvasContext.fillStyle=e},CanvasRendererBase.prototype.ctxStrokeStyle=function(e){this.canvasContext.strokeStyle=e},CanvasRendererBase.prototype.ctxLineWidth=function(e){this.canvasContext.lineWidth=e},CanvasRendererBase.prototype.ctxLineCap=function(e){this.canvasContext.lineCap=e},CanvasRendererBase.prototype.ctxLineJoin=function(e){this.canvasContext.lineJoin=e},CanvasRendererBase.prototype.ctxMiterLimit=function(e){this.canvasContext.miterLimit=e},CanvasRendererBase.prototype.ctxFill=function(e){this.canvasContext.fill(e)},CanvasRendererBase.prototype.ctxFillRect=function(e,t,s,r){this.canvasContext.fillRect(e,t,s,r)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(e){this.renderConfig.clearCanvas?(e&&(this.globalData.blendMode="source-over"),this.contextData.restore(e)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var s="0px 0px 0px";t.transformOrigin=s,t.mozTransformOrigin=s,t.webkitTransformOrigin=s,t["-webkit-transform"]=s,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(e,t){var s,r,a,i;if(this.reset(),e?(s=e,r=t,this.canvasContext.canvas.width=s,this.canvasContext.canvas.height=r):(this.animationItem.wrapper&&this.animationItem.container?(s=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight):(s=this.canvasContext.canvas.width,r=this.canvasContext.canvas.height),this.canvasContext.canvas.width=s*this.renderConfig.dpr,this.canvasContext.canvas.height=r*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var n=this.renderConfig.preserveAspectRatio.split(" "),o=n[1]||"meet",l=n[0]||"xMidYMid",c=l.substr(0,4),h=l.substr(4);a=s/r,(i=this.transformCanvas.w/this.transformCanvas.h)>a&&"meet"===o||i<a&&"slice"===o?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===c&&(i<a&&"meet"===o||i>a&&"slice"===o)?(s-this.transformCanvas.w*(r/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===c&&(i<a&&"meet"===o||i>a&&"slice"===o)?(s-this.transformCanvas.w*(r/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===h&&(i>a&&"meet"===o||i<a&&"slice"===o)?(r-this.transformCanvas.h*(s/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===h&&(i>a&&"meet"===o||i<a&&"slice"===o)?(r-this.transformCanvas.h*(s/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),e=(this.layers?this.layers.length:0)-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){var s;this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var r=this.layers.length;for(this.completeLayers||this.checkLayers(e),s=r-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].prepareFrame(e-this.layers[s].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),s=r-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){var s=this.createItem(this.layers[e],this,this.globalData);t[e]=s,s.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=0;for(t=this._length;t<e;t+=1)this.stack[t]=new CanvasContext;this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(e){this.cArrPos-=1;var t,s=this.stack[this.cArrPos],r=s.transform,a=this.cTr.props;for(t=0;t<16;t+=1)a[t]=r[t];if(e){this.nativeContext.restore();var i=this.stack[this.cArrPos+1];this.appliedFillStyle=i.fillStyle,this.appliedStrokeStyle=i.strokeStyle,this.appliedLineWidth=i.lineWidth,this.appliedLineCap=i.lineCap,this.appliedLineJoin=i.lineJoin,this.appliedMiterLimit=i.miterLimit}this.nativeContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),(e||-1!==s.opacity&&this.currentOpacity!==s.opacity)&&(this.nativeContext.globalAlpha=s.opacity,this.currentOpacity=s.opacity),this.currentFillStyle=s.fillStyle,this.currentStrokeStyle=s.strokeStyle,this.currentLineWidth=s.lineWidth,this.currentLineCap=s.lineCap,this.currentLineJoin=s.lineJoin,this.currentMiterLimit=s.miterLimit},CVContextData.prototype.save=function(e){e&&this.nativeContext.save();var t=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var s,r=this.stack[this.cArrPos];for(s=0;s<16;s+=1)r.transform[s]=t[s];this.cArrPos+=1;var a=this.stack[this.cArrPos];a.opacity=r.opacity,a.fillStyle=r.fillStyle,a.strokeStyle=r.strokeStyle,a.lineWidth=r.lineWidth,a.lineCap=r.lineCap,a.lineJoin=r.lineJoin,a.miterLimit=r.miterLimit},CVContextData.prototype.setOpacity=function(e){this.stack[this.cArrPos].opacity=e},CVContextData.prototype.setContext=function(e){this.nativeContext=e},CVContextData.prototype.fillStyle=function(e){this.stack[this.cArrPos].fillStyle!==e&&(this.currentFillStyle=e,this.stack[this.cArrPos].fillStyle=e)},CVContextData.prototype.strokeStyle=function(e){this.stack[this.cArrPos].strokeStyle!==e&&(this.currentStrokeStyle=e,this.stack[this.cArrPos].strokeStyle=e)},CVContextData.prototype.lineWidth=function(e){this.stack[this.cArrPos].lineWidth!==e&&(this.currentLineWidth=e,this.stack[this.cArrPos].lineWidth=e)},CVContextData.prototype.lineCap=function(e){this.stack[this.cArrPos].lineCap!==e&&(this.currentLineCap=e,this.stack[this.cArrPos].lineCap=e)},CVContextData.prototype.lineJoin=function(e){this.stack[this.cArrPos].lineJoin!==e&&(this.currentLineJoin=e,this.stack[this.cArrPos].lineJoin=e)},CVContextData.prototype.miterLimit=function(e){this.stack[this.cArrPos].miterLimit!==e&&(this.currentMiterLimit=e,this.stack[this.cArrPos].miterLimit=e)},CVContextData.prototype.transform=function(e){this.transformMat.cloneFromProps(e);var t=this.cTr;this.transformMat.multiply(t),t.cloneFromProps(this.transformMat.props);var s=t.props;this.nativeContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13])},CVContextData.prototype.opacity=function(e){var t=this.stack[this.cArrPos].opacity;t*=e<0?0:e,this.stack[this.cArrPos].opacity!==t&&(this.currentOpacity!==e&&(this.nativeContext.globalAlpha=e,this.currentOpacity=e),this.stack[this.cArrPos].opacity=t)},CVContextData.prototype.fill=function(e){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(e)},CVContextData.prototype.fillRect=function(e,t,s,r){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(e,t,s,r)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),e=this.layers.length-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();e.transform=t,e.webkitTransform=t}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){var s,r=e.length;for(s=0;s<r;s+=1)t=e[s].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var s,r,a,i,n,o=e.sh.v,l=e.transformers,c=o._length;if(!(c<=1)){for(s=0;s<c-1;s+=1)r=this.getTransformedPoint(l,o.v[s]),a=this.getTransformedPoint(l,o.o[s]),i=this.getTransformedPoint(l,o.i[s+1]),n=this.getTransformedPoint(l,o.v[s+1]),this.checkBounds(r,a,i,n,t);o.c&&(r=this.getTransformedPoint(l,o.v[s]),a=this.getTransformedPoint(l,o.o[s]),i=this.getTransformedPoint(l,o.i[0]),n=this.getTransformedPoint(l,o.v[0]),this.checkBounds(r,a,i,n,t))}},HShapeElement.prototype.checkBounds=function(e,t,s,r,a){this.getBoundsOfCurve(e,t,s,r);var i=this.shapeBoundingBox;a.x=bmMin(i.left,a.x),a.xMax=bmMax(i.right,a.xMax),a.y=bmMin(i.top,a.y),a.yMax=bmMax(i.bottom,a.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,s,r){for(var a,i,n,o,l,c,h,p=[[e[0],r[0]],[e[1],r[1]]],d=0;d<2;++d)i=6*e[d]-12*t[d]+6*s[d],a=-3*e[d]+9*t[d]-9*s[d]+3*r[d],n=3*t[d]-3*e[d],i|=0,n|=0,0==(a|=0)&&0===i||(0===a?(o=-n/i)>0&&o<1&&p[d].push(this.calculateF(o,e,t,s,r,d)):(l=i*i-4*n*a)>=0&&((c=(-i+bmSqrt(l))/(2*a))>0&&c<1&&p[d].push(this.calculateF(c,e,t,s,r,d)),(h=(-i-bmSqrt(l))/(2*a))>0&&h<1&&p[d].push(this.calculateF(h,e,t,s,r,d))));this.shapeBoundingBox.left=bmMin.apply(null,p[0]),this.shapeBoundingBox.top=bmMin.apply(null,p[1]),this.shapeBoundingBox.right=bmMax.apply(null,p[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,p[1])},HShapeElement.prototype.calculateF=function(e,t,s,r,a,i){return bmPow(1-e,3)*t[i]+3*bmPow(1-e,2)*e*s[i]+3*(1-e)*bmPow(e,2)*r[i]+bmPow(e,3)*a[i]},HShapeElement.prototype.calculateBoundingBox=function(e,t){var s,r=e.length;for(s=0;s<r;s+=1)e[s]&&e[s].sh?this.calculateShapeBoundingBox(e[s],t):e[s]&&e[s].it?this.calculateBoundingBox(e[s].it,t):e[s]&&e[s].style&&e[s].w&&this.expandStrokeBoundingBox(e[s].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(e,t){var s=0;if(e.keyframes){for(var r=0;r<e.keyframes.length;r+=1){var a=e.keyframes[r].s;a>s&&(s=a)}s*=e.mult}else s=e.v*e.mult;t.x-=s,t.xMax+=s,t.y-=s,t.yMax+=s},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var s=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),s=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),s=!0),s||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var r=this.shapeCont.style,a="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=a,r.webkitTransform=a}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style,s=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";t.fill=s,t.color=s,e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var r,a,i=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",i.fClass)this.innerElem.className=i.fClass;else{t.fontFamily=i.fFamily;var n=e.fWeight,o=e.fStyle;t.fontStyle=o,t.fontWeight=n}var l,c,h,p=e.l;a=p.length;var d,m=this.mHelper,u="",x=0;for(r=0;r<a;r+=1){if(this.globalData.fontManager.chars?(this.textPaths[x]?l=this.textPaths[x]:((l=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),l.setAttribute("stroke-linejoin",lineJoinEnum[2]),l.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[x]?h=(c=this.textSpans[x]).children[0]:((c=createTag("div")).style.lineHeight=0,(h=createNS("svg")).appendChild(l),styleDiv(c)))):this.isMasked?l=this.textPaths[x]?this.textPaths[x]:createNS("text"):this.textSpans[x]?(c=this.textSpans[x],l=this.textPaths[x]):(styleDiv(c=createTag("span")),styleDiv(l=createTag("span")),c.appendChild(l)),this.globalData.fontManager.chars){var f,g=this.globalData.fontManager.getCharData(e.finalText[r],i.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(f=g?g.data:null,m.reset(),f&&f.shapes&&f.shapes.length&&(d=f.shapes[0].it,m.scale(e.finalSize/100,e.finalSize/100),u=this.createPathShape(m,d),l.setAttribute("d",u)),this.isMasked)this.innerElem.appendChild(l);else{if(this.innerElem.appendChild(c),f&&f.shapes){document.body.appendChild(h);var y=h.getBBox();h.setAttribute("width",y.width+2),h.setAttribute("height",y.height+2),h.setAttribute("viewBox",y.x-1+" "+(y.y-1)+" "+(y.width+2)+" "+(y.height+2));var v=h.style,b="translate("+(y.x-1)+"px,"+(y.y-1)+"px)";v.transform=b,v.webkitTransform=b,p[r].yOffset=y.y-1}else h.setAttribute("width",1),h.setAttribute("height",1);c.appendChild(h)}}else if(l.textContent=p[r].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(l);else{this.innerElem.appendChild(c);var E=l.style,j="translate3d(0,"+-e.finalSize/1.2+"px,0)";E.transform=j,E.webkitTransform=j}this.isMasked?this.textSpans[x]=l:this.textSpans[x]=c,this.textSpans[x].style.display="block",this.textPaths[x]=l,x+=1}for(;x<this.textSpans.length;)this.textSpans[x].style.display="none",x+=1},HTextElement.prototype.renderInnerContent=function(){var e;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=t,e.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var s,r,a,i,n,o=0,l=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;for(r=c.length,s=0;s<r;s+=1)c[s].n?o+=1:(i=this.textSpans[s],n=this.textPaths[s],a=l[o],o+=1,a._mdf.m&&(this.isMasked?i.setAttribute("transform",a.m):(i.style.webkitTransform=a.m,i.style.transform=a.m)),i.style.opacity=a.o,a.sw&&a._mdf.sw&&n.setAttribute("stroke-width",a.sw),a.sc&&a._mdf.sc&&n.setAttribute("stroke",a.sc),a.fc&&a._mdf.fc&&(n.setAttribute("fill",a.fc),n.style.color=a.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var h=this.innerElem.getBBox();if(this.currentBBox.w!==h.width&&(this.currentBBox.w=h.width,this.svgElement.setAttribute("width",h.width)),this.currentBBox.h!==h.height&&(this.currentBBox.h=h.height,this.svgElement.setAttribute("height",h.height)),this.currentBBox.w!==h.width+2||this.currentBBox.h!==h.height+2||this.currentBBox.x!==h.x-1||this.currentBBox.y!==h.y-1){this.currentBBox.w=h.width+2,this.currentBBox.h=h.height+2,this.currentBBox.x=h.x-1,this.currentBBox.y=h.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var p="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=p,e.webkitTransform=p}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,t,s,r,a=this.comp.threeDElements.length;for(e=0;e<a;e+=1)if("3d"===(t=this.comp.threeDElements[e]).type){s=t.perspectiveElem.style,r=t.container.style;var i=this.pe.v+"px",n="0px 0px 0px",o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";s.perspective=i,s.webkitPerspective=i,r.transformOrigin=n,r.mozTransformOrigin=n,r.webkitTransformOrigin=n,s.transform=o,s.webkitTransform=o}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,s=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)s=this.hierarchy[e].finalTransform.mProp._mdf||s;if(s||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(e=t=this.hierarchy.length-1;e>=0;e-=1){var r=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var a;a=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var i=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)),n=[a[0]/i,a[1]/i,a[2]/i],o=Math.sqrt(n[2]*n[2]+n[0]*n[0]),l=Math.atan2(n[1],o),c=Math.atan2(n[0],-n[2]);this.mat.rotateY(c).rotateX(-l)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var h=!this._prevMat.equals(this.mat);if((h||this.pe._mdf)&&this.comp.threeDElements){var p,d,m;for(t=this.comp.threeDElements.length,e=0;e<t;e+=1)if("3d"===(p=this.comp.threeDElements[e]).type){if(h){var u=this.mat.toCSS();(m=p.container.style).transform=u,m.webkitTransform=u}this.pe._mdf&&((d=p.perspectiveElem.style).perspective=this.pe.v+"px",d.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(e,t){var s=e.getBaseElement();if(s){var r=this.layers[t];if(r.ddd&&this.supports3d)this.addTo3dContainer(s,t);else if(this.threeDElements)this.addTo3dContainer(s,t);else{for(var a,i,n=0;n<t;)this.elements[n]&&!0!==this.elements[n]&&this.elements[n].getBaseElement&&(i=this.elements[n],a=(this.layers[n].ddd?this.getThreeDContainerByPos(n):i.getBaseElement())||a),n+=1;a?r.ddd&&this.supports3d||this.layerElement.insertBefore(s,a):r.ddd&&this.supports3d||this.layerElement.appendChild(s)}}},HybridRendererBase.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRendererBase.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(e){for(var t=0,s=this.threeDElements.length;t<s;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(e,t){var s,r,a=createTag("div");styleDiv(a);var i=createTag("div");if(styleDiv(i),"3d"===t){(s=a.style).width=this.globalData.compSize.w+"px",s.height=this.globalData.compSize.h+"px";var n="50% 50%";s.webkitTransformOrigin=n,s.mozTransformOrigin=n,s.transformOrigin=n;var o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(r=i.style).transform=o,r.webkitTransform=o}a.appendChild(i);var l={container:i,perspectiveElem:a,startPos:e,endPos:e,type:t};return this.threeDElements.push(l),l},HybridRendererBase.prototype.build3dContainers=function(){var e,t,s=this.layers.length,r="";for(e=0;e<s;e+=1)this.layers[e].ddd&&3!==this.layers[e].ty?("3d"!==r&&(r="3d",t=this.createThreeDContainer(e,"3d")),t.endPos=Math.max(t.endPos,e)):("2d"!==r&&(r="2d",t=this.createThreeDContainer(e,"2d")),t.endPos=Math.max(t.endPos,e));for(e=(s=this.threeDElements.length)-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(e,t){for(var s=0,r=this.threeDElements.length;s<r;){if(t<=this.threeDElements[s].endPos){for(var a,i=this.threeDElements[s].startPos;i<t;)this.elements[i]&&this.elements[i].getBaseElement&&(a=this.elements[i].getBaseElement()),i+=1;a?this.threeDElements[s].container.insertBefore(e,a):this.threeDElements[s].container.appendChild(e);break}s+=1}},HybridRendererBase.prototype.configAnimation=function(e){var t=createTag("div"),s=this.animationItem.wrapper,r=t.style;r.width=e.w+"px",r.height=e.h+"px",this.resizerElem=t,styleDiv(t),r.transformStyle="flat",r.mozTransformStyle="flat",r.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),s.appendChild(t),r.overflow="hidden";var a=createNS("svg");a.setAttribute("width","1"),a.setAttribute("height","1"),styleDiv(a),this.resizerElem.appendChild(a);var i=createNS("defs");a.appendChild(i),this.data=e,this.setupGlobalData(e,a),this.globalData.defs=i,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var e,t,s,r,a=this.animationItem.wrapper.offsetWidth,i=this.animationItem.wrapper.offsetHeight,n=a/i;this.globalData.compSize.w/this.globalData.compSize.h>n?(e=a/this.globalData.compSize.w,t=a/this.globalData.compSize.w,s=0,r=(i-this.globalData.compSize.h*(a/this.globalData.compSize.w))/2):(e=i/this.globalData.compSize.h,t=i/this.globalData.compSize.h,s=(a-this.globalData.compSize.w*(i/this.globalData.compSize.h))/2,r=0);var o=this.resizerElem.style;o.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+s+","+r+",0,1)",o.transform=o.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,s=this.globalData.compSize.h,r=this.threeDElements.length;for(e=0;e<r;e+=1){var a=this.threeDElements[e].perspectiveElem.style;a.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(s,2))+"px",a.perspective=a.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(e){var t,s=e.length,r=createTag("div");for(t=0;t<s;t+=1)if(e[t].xt){var a=this.createComp(e[t],r,this.globalData.comp,null);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var s,r=0;r<t;)this.elements[r]&&this.elements[r].getBaseElement&&(s=this.elements[r].getBaseElement()),r+=1;s?this.layerElement.insertBefore(e,s):this.layerElement.appendChild(e)},HCompElement.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};var CompExpressionInterface=function(){return function(e){function t(t){for(var s=0,r=e.layers.length;s<r;){if(e.layers[s].nm===t||e.layers[s].ind===t)return e.elements[s].layerInterface;s+=1}return null}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.data.h||e.globalData.compSize.h,t.width=e.data.w||e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t.displayStartTime=0,t.numLayers=e.layers.length,t}}();function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function seedRandom(e,t){var s=this,r=256,a="random",i=t.pow(r,6),n=t.pow(2,52),o=2*n,l=255;function c(e){var t,s=e.length,a=this,i=0,n=a.i=a.j=0,o=a.S=[];for(s||(e=[s++]);i<r;)o[i]=i++;for(i=0;i<r;i++)o[i]=o[n=l&n+e[i%s]+(t=o[i])],o[n]=t;a.g=function(e){for(var t,s=0,i=a.i,n=a.j,o=a.S;e--;)t=o[i=l&i+1],s=s*r+o[l&(o[i]=o[n=l&n+t])+(o[n]=t)];return a.i=i,a.j=n,s}}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var s,r=[],a=_typeof$2(e);if(t&&"object"==a)for(s in e)try{r.push(p(e[s],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function d(e,t){for(var s,r=e+"",a=0;a<r.length;)t[l&a]=l&(s^=19*t[l&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}t["seed"+a]=function(l,u,x){var f=[],g=d(p((u=!0===u?{entropy:!0}:u||{}).entropy?[l,m(e)]:null===l?function(){try{var t=new Uint8Array(r);return(s.crypto||s.msCrypto).getRandomValues(t),m(t)}catch(n){var a=s.navigator,i=a&&a.plugins;return[+new Date,s,i,s.screen,m(e)]}}():l,3),f),y=new c(f),v=function(){for(var e=y.g(6),t=i,s=0;e<n;)e=(e+s)*r,t*=r,s=y.g(1);for(;e>=o;)e/=2,t/=2,s>>>=1;return(e+s)/t};return v.int32=function(){return 0|y.g(4)},v.quick=function(){return y.g(4)/4294967296},v.double=v,d(m(y.S),e),(u.pass||x||function(e,s,r,i){return i&&(i.S&&h(i,y),e.state=function(){return h(y,{})}),r?(t[a]=e,s):e})(v,g,"global"in u?u.global:this==t,u.state)},d(t.random(),e)}function initialize$2(e){seedRandom([],e)}var propTypes={SHAPE:"shape"};function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return"number"===e||t instanceof Number||"boolean"===e||"string"===e}function $bm_neg(e){var t=_typeof$1(e);if("number"===t||e instanceof Number||"boolean"===t)return-e;if($bm_isInstanceOfArray(e)){var s,r=e.length,a=[];for(s=0;s<r;s+=1)a[s]=-e[s];return a}return e.propType?e.v:-e}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var s=_typeof$1(e),r=_typeof$1(t);if(isNumerable(s,e)&&isNumerable(r,t)||"string"===s||"string"===r)return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]+=t,e;if(isNumerable(s,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var a=0,i=e.length,n=t.length,o=[];a<i||a<n;)("number"==typeof e[a]||e[a]instanceof Number)&&("number"==typeof t[a]||t[a]instanceof Number)?o[a]=e[a]+t[a]:o[a]=void 0===t[a]?e[a]:e[a]||t[a],a+=1;return o}return 0}var add=sum;function sub(e,t){var s=_typeof$1(e),r=_typeof$1(t);if(isNumerable(s,e)&&isNumerable(r,t))return"string"===s&&(e=parseInt(e,10)),"string"===r&&(t=parseInt(t,10)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]-=t,e;if(isNumerable(s,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var a=0,i=e.length,n=t.length,o=[];a<i||a<n;)("number"==typeof e[a]||e[a]instanceof Number)&&("number"==typeof t[a]||t[a]instanceof Number)?o[a]=e[a]-t[a]:o[a]=void 0===t[a]?e[a]:e[a]||t[a],a+=1;return o}return 0}function mul(e,t){var s,r,a,i=_typeof$1(e),n=_typeof$1(t);if(isNumerable(i,e)&&isNumerable(n,t))return e*t;if($bm_isInstanceOfArray(e)&&isNumerable(n,t)){for(a=e.length,s=createTypedArray("float32",a),r=0;r<a;r+=1)s[r]=e[r]*t;return s}if(isNumerable(i,e)&&$bm_isInstanceOfArray(t)){for(a=t.length,s=createTypedArray("float32",a),r=0;r<a;r+=1)s[r]=e*t[r];return s}return 0}function div(e,t){var s,r,a,i=_typeof$1(e),n=_typeof$1(t);if(isNumerable(i,e)&&isNumerable(n,t))return e/t;if($bm_isInstanceOfArray(e)&&isNumerable(n,t)){for(a=e.length,s=createTypedArray("float32",a),r=0;r<a;r+=1)s[r]=e[r]/t;return s}if(isNumerable(i,e)&&$bm_isInstanceOfArray(t)){for(a=t.length,s=createTypedArray("float32",a),r=0;r<a;r+=1)s[r]=e/t[r];return s}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e,10)),"string"==typeof t&&(t=parseInt(t,10)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,s){if(t>s){var r=s;s=t,t=r}return Math.min(Math.max(e,t),s)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);var s;t||(t=helperLengthArray);var r=Math.min(e.length,t.length),a=0;for(s=0;s<r;s+=1)a+=Math.pow(t[s]-e[s],2);return Math.sqrt(a)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,s,r=e[0],a=e[1],i=e[2],n=Math.max(r,a,i),o=Math.min(r,a,i),l=(n+o)/2;if(n===o)t=0,s=0;else{var c=n-o;switch(s=l>.5?c/(2-n-o):c/(n+o),n){case r:t=(a-i)/c+(a<i?6:0);break;case a:t=(i-r)/c+2;break;case i:t=(r-a)/c+4}t/=6}return[t,s,l,e[3]]}function hue2rgb(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function hslToRgb(e){var t,s,r,a=e[0],i=e[1],n=e[2];if(0===i)t=n,r=n,s=n;else{var o=n<.5?n*(1+i):n+i-n*i,l=2*n-o;t=hue2rgb(l,o,a+1/3),s=hue2rgb(l,o,a),r=hue2rgb(l,o,a-1/3)}return[t,s,r,e[3]]}function linear(e,t,s,r,a){if(void 0!==r&&void 0!==a||(r=t,a=s,t=0,s=1),s<t){var i=s;s=t,t=i}if(e<=t)return r;if(e>=s)return a;var n,o=s===t?0:(e-t)/(s-t);if(!r.length)return r+(a-r)*o;var l=r.length,c=createTypedArray("float32",l);for(n=0;n<l;n+=1)c[n]=r[n]+(a[n]-r[n])*o;return c}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var s,r=t.length;e||(e=createTypedArray("float32",r));var a=createTypedArray("float32",r),i=BMMath.random();for(s=0;s<r;s+=1)a[s]=e[s]+i*(t[s]-e[s]);return a}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,s,r){var a,i=e.length,n=shapePool.newElement();n.setPathData(!!r,i);var o,l,c=[0,0];for(a=0;a<i;a+=1)o=t&&t[a]?t[a]:c,l=s&&s[a]?s[a]:c,n.setTripleAt(e[a][0],e[a][1],l[0]+e[a][0],l[1]+e[a][1],o[0]+e[a][0],o[1]+e[a][1],a,!0);return n}function initiateExpression(elem,data,property){function noOp(e){return e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(e,t){var s,r,a=this.pv.length?this.pv.length:1,i=createTypedArray("float32",a),n=Math.floor(5*time);for(s=0,r=0;s<n;){for(r=0;r<a;r+=1)i[r]+=-t+2*t*BMMath.random();s+=1}var o=5*time,l=o-Math.floor(o),c=createTypedArray("float32",a);if(a>1){for(r=0;r<a;r+=1)c[r]=this.pv[r]+i[r]+(-t+2*t*BMMath.random())*l;return c}return this.pv+i[0]+(-t+2*t*BMMath.random())*l}.bind(this);function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(e,t){var s=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],r=Math.atan2(s[0],Math.sqrt(s[1]*s[1]+s[2]*s[2]))/degToRads;return[-Math.atan2(s[1],s[2])/degToRads,r,0]}function easeOut(e,t,s,r,a){return applyEase(easeOutBez,e,t,s,r,a)}function easeIn(e,t,s,r,a){return applyEase(easeInBez,e,t,s,r,a)}function ease(e,t,s,r,a){return applyEase(easeInOutBez,e,t,s,r,a)}function applyEase(e,t,s,r,a,i){void 0===a?(a=s,i=r):t=(t-s)/(r-s),t>1?t=1:t<0&&(t=0);var n=e(t);if($bm_isInstanceOfArray(a)){var o,l=a.length,c=createTypedArray("float32",l);for(o=0;o<l;o+=1)c[o]=(i[o]-a[o])*n+a[o];return c}return(i-a)*n+a}function nearestKey(e){var t,s,r,a=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(s=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)s=1,r=data.k[0].t;else{for(t=0;t<a-1;t+=1){if(e===data.k[t].t){s=t+1,r=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(s=t+2,r=data.k[t+1].t):(s=t+1,r=data.k[t].t);break}}-1===s&&(s=t+1,r=data.k[t].t)}else s=0,r=0;var i={};return i.index=s,i.time=r/elem.comp.globalData.frameRate,i}function key(e){var t,s,r;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+e);e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var a=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(r=a.length,s=0;s<r;s+=1)t[s]=a[s],t.value[s]=a[s];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return"string"==typeof value?void 0===t?value.substring(e):value.substring(e,t):""}function substr(e,t){return"string"==typeof value?void 0===t?value.substr(e):value.substr(e,t):""}function posterizeTime(e){time=0===e?0:Math.floor(time*e)/e,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return value=e,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var e={initExpressions:function(e){var t=0,s=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){0==(t-=1)&&function(){var e,t=s.length;for(e=0;e<t;e+=1)s[e].release();s.length=0}()},e.renderer.globalData.registerExpressionProperty=function(e){-1===s.indexOf(e)&&s.push(e)}}};return e.resetFrame=ExpressionManager.resetFrame,e}(),MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}return Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t){var s,r=createSizedArray(t.viewData.length),a=t.viewData.length;for(s=0;s<a;s+=1)r[s]=new e(t.viewData[s],t.masksProperties[s]);return function(e){for(s=0;s<a;){if(t.masksProperties[s].nm===e)return r[s];s+=1}return null}}}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function s(e,t,s){Object.defineProperty(e,"velocity",{get:function(){return t.getVelocityAtTime(t.comp.currentFrame)}}),e.numKeys=t.keyframes?t.keyframes.length:0,e.key=function(r){if(!e.numKeys)return 0;var a="";a="s"in t.keyframes[r-1]?t.keyframes[r-1].s:"e"in t.keyframes[r-2]?t.keyframes[r-2].e:t.keyframes[r-2].s;var i="unidimensional"===s?new Number(a):Object.assign({},a);return i.time=t.keyframes[r-1].t/t.elem.comp.globalData.frameRate,i.value="unidimensional"===s?a[0]:a,i},e.valueAtTime=t.getValueAtTime,e.speedAtTime=t.getSpeedAtTime,e.velocityAtTime=t.getVelocityAtTime,e.propertyGroup=t.propertyGroup}function r(){return e}return function(a){return a?"unidimensional"===a.propType?function(t){t&&"pv"in t||(t=e);var r=1/t.mult,a=t.pv*r,i=new Number(a);return i.value=a,s(i,t,"unidimensional"),function(){return t.k&&t.getValue(),a=t.v*r,i.value!==a&&((i=new Number(a)).value=a,i[0]=a,s(i,t,"unidimensional")),i}}(a):function(e){e&&"pv"in e||(e=t);var r=1/e.mult,a=e.data&&e.data.l||e.pv.length,i=createTypedArray("float32",a),n=createTypedArray("float32",a);return i.value=n,s(i,e,"multidimensional"),function(){e.k&&e.getValue();for(var t=0;t<a;t+=1)n[t]=e.v[t]*r,i[t]=n[t];return i}}(a):r}}(),TransformExpressionInterface=function(){return function(e){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}var s,r,a,i;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p?i=ExpressionPropertyInterface(e.p):(s=ExpressionPropertyInterface(e.px),r=ExpressionPropertyInterface(e.py),e.pz&&(a=ExpressionPropertyInterface(e.pz))),Object.defineProperty(t,"position",{get:function(){return e.p?i():[s(),r(),a?a():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t}}(),LayerExpressionInterface=function(){function e(e){var t=new Matrix;return void 0!==e?this._elem.finalTransform.mProp.getValueAtTime(e).clone(t):this._elem.finalTransform.mProp.applyToMatrix(t),t}function t(e,t){var s=this.getMatrix(t);return s.props[12]=0,s.props[13]=0,s.props[14]=0,this.applyPoint(s,e)}function s(e,t){var s=this.getMatrix(t);return this.applyPoint(s,e)}function r(e,t){var s=this.getMatrix(t);return s.props[12]=0,s.props[13]=0,s.props[14]=0,this.invertPoint(s,e)}function a(e,t){var s=this.getMatrix(t);return this.invertPoint(s,e)}function i(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var s,r=this._elem.hierarchy.length;for(s=0;s<r;s+=1)this._elem.hierarchy[s].finalTransform.mProp.applyToMatrix(e)}return e.applyToPointArray(t[0],t[1],t[2]||0)}function n(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var s,r=this._elem.hierarchy.length;for(s=0;s<r;s+=1)this._elem.hierarchy[s].finalTransform.mProp.applyToMatrix(e)}return e.inversePoint(t)}function o(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var s,r=this._elem.hierarchy.length;for(s=0;s<r;s+=1)this._elem.hierarchy[s].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function l(){return[1,1,1,1]}return function(c){var h;function p(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return p.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return h;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return p.effect;case"ADBE Text Properties":return p.textInterface;default:return null}}p.getMatrix=e,p.invertPoint=n,p.applyPoint=i,p.toWorld=s,p.toWorldVec=t,p.fromWorld=a,p.fromWorldVec=r,p.toComp=s,p.fromComp=o,p.sampleImage=l,p.sourceRectAtTime=c.sourceRectAtTime.bind(c),p._elem=c;var d=getDescriptor(h=TransformExpressionInterface(c.finalTransform.mProp),"anchorPoint");return Object.defineProperties(p,{hasParent:{get:function(){return c.hierarchy.length}},parent:{get:function(){return c.hierarchy[0].layerInterface}},rotation:getDescriptor(h,"rotation"),scale:getDescriptor(h,"scale"),position:getDescriptor(h,"position"),opacity:getDescriptor(h,"opacity"),anchorPoint:d,anchor_point:d,transform:{get:function(){return h}},active:{get:function(){return c.isInRange}}}),p.startTime=c.data.st,p.index=c.data.ind,p.source=c.data.refId,p.height=0===c.data.ty?c.data.h:100,p.width=0===c.data.ty?c.data.w:100,p.inPoint=c.data.ip/c.comp.globalData.frameRate,p.outPoint=c.data.op/c.comp.globalData.frameRate,p._name=c.data.nm,p.registerMaskInterface=function(e){p.mask=new MaskManagerInterface(e,c)},p.registerEffectsInterface=function(e){p.effect=e},p}}(),propertyGroupFactory=function(){return function(e,t){return function(s){return(s=void 0===s?1:s)<=0?e:t(s-1)}}}(),PropertyInterface=function(){return function(e,t){var s={_name:e};return function(e){return(e=void 0===e?1:e)<=0?s:t(e-1)}}}(),EffectsExpressionInterface=function(){function e(s,r,a,i){function n(e){for(var t=s.ef,r=0,a=t.length;r<a;){if(e===t[r].nm||e===t[r].mn||e===t[r].ix)return 5===t[r].ty?c[r]:c[r]();r+=1}throw new Error}var o,l=propertyGroupFactory(n,a),c=[],h=s.ef.length;for(o=0;o<h;o+=1)5===s.ef[o].ty?c.push(e(s.ef[o],r.effectElements[o],r.effectElements[o].propertyGroup,i)):c.push(t(r.effectElements[o],s.ef[o].ty,i,l));return"ADBE Color Control"===s.mn&&Object.defineProperty(n,"color",{get:function(){return c[0]()}}),Object.defineProperties(n,{numProperties:{get:function(){return s.np}},_name:{value:s.nm},propertyGroup:{value:l}}),n.enabled=0!==s.en,n.active=n.enabled,n}function t(e,t,s,r){var a=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(PropertyInterface("",r)),function(){return 10===t?s.comp.compInterface(e.p.v):a()}}return{createEffectsInterface:function(t,s){if(t.effectsManager){var r,a=[],i=t.data.ef,n=t.effectsManager.effectElements.length;for(r=0;r<n;r+=1)a.push(e(i[r],t.effectsManager.effectElements[r],s,t));var o=t.data.ef||[],l=function(e){for(r=0,n=o.length;r<n;){if(e===o[r].nm||e===o[r].mn||e===o[r].ix)return a[r];r+=1}return null};return Object.defineProperty(l,"numProperties",{get:function(){return o.length}}),l}return null}}}(),ShapePathInterface=function(){return function(e,t,s){var r=t.sh;function a(e){return"Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e?a.path:null}var i=propertyGroupFactory(a,s);return r.setGroupProperty(PropertyInterface("Path",i)),Object.defineProperties(a,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:s}}),a}}(),ShapeExpressionInterface=function(){function e(e,o,m){var u,x=[],f=e?e.length:0;for(u=0;u<f;u+=1)"gr"===e[u].ty?x.push(t(e[u],o[u],m)):"fl"===e[u].ty?x.push(s(e[u],o[u],m)):"st"===e[u].ty?x.push(i(e[u],o[u],m)):"tm"===e[u].ty?x.push(n(e[u],o[u],m)):"tr"===e[u].ty||("el"===e[u].ty?x.push(l(e[u],o[u],m)):"sr"===e[u].ty?x.push(c(e[u],o[u],m)):"sh"===e[u].ty?x.push(ShapePathInterface(e[u],o[u],m)):"rc"===e[u].ty?x.push(h(e[u],o[u],m)):"rd"===e[u].ty?x.push(p(e[u],o[u],m)):"rp"===e[u].ty?x.push(d(e[u],o[u],m)):"gf"===e[u].ty?x.push(r(e[u],o[u],m)):x.push(a(e[u],o[u])));return x}function t(t,s,r){var a=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return a.content;default:return a.transform}};a.propertyGroup=propertyGroupFactory(a,r);var i=function(t,s,r){var a,i=function(e){for(var t=0,s=a.length;t<s;){if(a[t]._name===e||a[t].mn===e||a[t].propertyIndex===e||a[t].ix===e||a[t].ind===e)return a[t];t+=1}return"number"==typeof e?a[e-1]:null};i.propertyGroup=propertyGroupFactory(i,r),a=e(t.it,s.it,i.propertyGroup),i.numProperties=a.length;var n=o(t.it[t.it.length-1],s.it[s.it.length-1],i.propertyGroup);return i.transform=n,i.propertyIndex=t.cix,i._name=t.nm,i}(t,s,a.propertyGroup),n=o(t.it[t.it.length-1],s.it[s.it.length-1],a.propertyGroup);return a.content=i,a.transform=n,Object.defineProperty(a,"_name",{get:function(){return t.nm}}),a.numProperties=t.np,a.propertyIndex=t.ix,a.nm=t.nm,a.mn=t.mn,a}function s(e,t,s){function r(e){return"Color"===e||"color"===e?r.color:"Opacity"===e||"opacity"===e?r.opacity:null}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",s)),t.o.setGroupProperty(PropertyInterface("Opacity",s)),r}function r(e,t,s){function r(e){return"Start Point"===e||"start point"===e?r.startPoint:"End Point"===e||"end point"===e?r.endPoint:"Opacity"===e||"opacity"===e?r.opacity:null}return Object.defineProperties(r,{startPoint:{get:ExpressionPropertyInterface(t.s)},endPoint:{get:ExpressionPropertyInterface(t.e)},opacity:{get:ExpressionPropertyInterface(t.o)},type:{get:function(){return"a"}},_name:{value:e.nm},mn:{value:e.mn}}),t.s.setGroupProperty(PropertyInterface("Start Point",s)),t.e.setGroupProperty(PropertyInterface("End Point",s)),t.o.setGroupProperty(PropertyInterface("Opacity",s)),r}function a(){return function(){return null}}function i(e,t,s){var r,a=propertyGroupFactory(c,s),i=propertyGroupFactory(l,a);function n(s){Object.defineProperty(l,e.d[s].nm,{get:ExpressionPropertyInterface(t.d.dataProps[s].p)})}var o=e.d?e.d.length:0,l={};for(r=0;r<o;r+=1)n(r),t.d.dataProps[r].p.setGroupProperty(i);function c(e){return"Color"===e||"color"===e?c.color:"Opacity"===e||"opacity"===e?c.opacity:"Stroke Width"===e||"stroke width"===e?c.strokeWidth:null}return Object.defineProperties(c,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return l}},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",a)),t.o.setGroupProperty(PropertyInterface("Opacity",a)),t.w.setGroupProperty(PropertyInterface("Stroke Width",a)),c}function n(e,t,s){function r(t){return t===e.e.ix||"End"===t||"end"===t?r.end:t===e.s.ix?r.start:t===e.o.ix?r.offset:null}var a=propertyGroupFactory(r,s);return r.propertyIndex=e.ix,t.s.setGroupProperty(PropertyInterface("Start",a)),t.e.setGroupProperty(PropertyInterface("End",a)),t.o.setGroupProperty(PropertyInterface("Offset",a)),r.propertyIndex=e.ix,r.propertyGroup=s,Object.defineProperties(r,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),r.mn=e.mn,r}function o(e,t,s){function r(t){return e.a.ix===t||"Anchor Point"===t?r.anchorPoint:e.o.ix===t||"Opacity"===t?r.opacity:e.p.ix===t||"Position"===t?r.position:e.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?r.rotation:e.s.ix===t||"Scale"===t?r.scale:e.sk&&e.sk.ix===t||"Skew"===t?r.skew:e.sa&&e.sa.ix===t||"Skew Axis"===t?r.skewAxis:null}var a=propertyGroupFactory(r,s);return t.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",a)),t.transform.mProps.p.setGroupProperty(PropertyInterface("Position",a)),t.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",a)),t.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",a)),t.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",a)),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",a)),t.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",a))),t.transform.op.setGroupProperty(PropertyInterface("Opacity",a)),Object.defineProperties(r,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:e.nm}}),r.ty="tr",r.mn=e.mn,r.propertyGroup=s,r}function l(e,t,s){function r(t){return e.p.ix===t?r.position:e.s.ix===t?r.size:null}var a=propertyGroupFactory(r,s);r.propertyIndex=e.ix;var i="tm"===t.sh.ty?t.sh.prop:t.sh;return i.s.setGroupProperty(PropertyInterface("Size",a)),i.p.setGroupProperty(PropertyInterface("Position",a)),Object.defineProperties(r,{size:{get:ExpressionPropertyInterface(i.s)},position:{get:ExpressionPropertyInterface(i.p)},_name:{value:e.nm}}),r.mn=e.mn,r}function c(e,t,s){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.rotation:e.pt.ix===t?r.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?r.outerRadius:e.os.ix===t?r.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?r.innerRoundness:null:r.innerRadius}var a=propertyGroupFactory(r,s),i="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,i.or.setGroupProperty(PropertyInterface("Outer Radius",a)),i.os.setGroupProperty(PropertyInterface("Outer Roundness",a)),i.pt.setGroupProperty(PropertyInterface("Points",a)),i.p.setGroupProperty(PropertyInterface("Position",a)),i.r.setGroupProperty(PropertyInterface("Rotation",a)),e.ir&&(i.ir.setGroupProperty(PropertyInterface("Inner Radius",a)),i.is.setGroupProperty(PropertyInterface("Inner Roundness",a))),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(i.p)},rotation:{get:ExpressionPropertyInterface(i.r)},points:{get:ExpressionPropertyInterface(i.pt)},outerRadius:{get:ExpressionPropertyInterface(i.or)},outerRoundness:{get:ExpressionPropertyInterface(i.os)},innerRadius:{get:ExpressionPropertyInterface(i.ir)},innerRoundness:{get:ExpressionPropertyInterface(i.is)},_name:{value:e.nm}}),r.mn=e.mn,r}function h(e,t,s){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.roundness:e.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?r.size:null}var a=propertyGroupFactory(r,s),i="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,i.p.setGroupProperty(PropertyInterface("Position",a)),i.s.setGroupProperty(PropertyInterface("Size",a)),i.r.setGroupProperty(PropertyInterface("Rotation",a)),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(i.p)},roundness:{get:ExpressionPropertyInterface(i.r)},size:{get:ExpressionPropertyInterface(i.s)},_name:{value:e.nm}}),r.mn=e.mn,r}function p(e,t,s){function r(t){return e.r.ix===t||"Round Corners 1"===t?r.radius:null}var a=propertyGroupFactory(r,s),i=t;return r.propertyIndex=e.ix,i.rd.setGroupProperty(PropertyInterface("Radius",a)),Object.defineProperties(r,{radius:{get:ExpressionPropertyInterface(i.rd)},_name:{value:e.nm}}),r.mn=e.mn,r}function d(e,t,s){function r(t){return e.c.ix===t||"Copies"===t?r.copies:e.o.ix===t||"Offset"===t?r.offset:null}var a=propertyGroupFactory(r,s),i=t;return r.propertyIndex=e.ix,i.c.setGroupProperty(PropertyInterface("Copies",a)),i.o.setGroupProperty(PropertyInterface("Offset",a)),Object.defineProperties(r,{copies:{get:ExpressionPropertyInterface(i.c)},offset:{get:ExpressionPropertyInterface(i.o)},_name:{value:e.nm}}),r.mn=e.mn,r}return function(t,s,r){var a;function i(e){if("number"==typeof e)return 0===(e=void 0===e?1:e)?r:a[e-1];for(var t=0,s=a.length;t<s;){if(a[t]._name===e)return a[t];t+=1}return null}return i.propertyGroup=propertyGroupFactory(i,function(){return r}),a=e(t,s,i.propertyGroup),i.numProperties=a.length,i._name="Contents",i}}(),TextExpressionInterface=function(){return function(e){var t;function s(e){return"ADBE Text Document"===e?s.sourceText:null}return Object.defineProperty(s,"sourceText",{get:function(){e.textProperty.getValue();var s=e.textProperty.currentData.t;return t&&s===t.value||((t=new String(s)).value=s||new String(s),Object.defineProperty(t,"style",{get:function(){return{fillColor:e.textProperty.currentData.fc}}})),t}}),s}}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var FootageInterface=function(){var e=function(e){function t(e){return"Outline"===e?t.outlineInterface():null}return t._name="Outline",t.outlineInterface=function(e){var t="",s=e.getFootageData();function r(e){if(s[e])return t=e,"object"===_typeof(s=s[e])?r:s;var a=e.indexOf(t);if(-1!==a){var i=parseInt(e.substr(a+t.length),10);return"object"===_typeof(s=s[i])?r:s}return""}return function(){return t="",s=e.getFootageData(),r}}(e),t};return function(t){function s(e){return"Data"===e?s.dataInterface:null}return s._name="Data",s.dataInterface=e(t),s}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(e){return interfaces[e]||null}var expressionHelpers=function(){return{searchExpressions:function(e,t,s){t.x&&(s.k=!0,s.x=!0,s.initiateExpression=ExpressionManager.initiateExpression,s.effectsSequence.push(s.initiateExpression(e,t,s).bind(s)))},getSpeedAtTime:function(e){var t=this.getValueAtTime(e),s=this.getValueAtTime(e+-.01),r=0;if(t.length){var a;for(a=0;a<t.length;a+=1)r+=Math.pow(s[a]-t[a],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t,s,r=-.001,a=this.getValueAtTime(e),i=this.getValueAtTime(e+r);if(a.length)for(t=createTypedArray("float32",a.length),s=0;s<a.length;s+=1)t[s]=(i[s]-a[s])/r;else t=(i-a)/r;return t},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}}}();function addPropertyDecorator(){function e(e,t,s){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var r,a,i,n,o,l=this.comp.renderedFrame,c=this.keyframes,h=c[c.length-1].t;if(l<=h)return this.pv;if(s?a=h-(r=t?Math.abs(h-this.elem.comp.globalData.frameRate*t):Math.max(0,h-this.elem.data.ip)):((!t||t>c.length-1)&&(t=c.length-1),r=h-(a=c[c.length-1-t].t)),"pingpong"===e){if(Math.floor((l-a)/r)%2!=0)return this.getValueAtTime((r-(l-a)%r+a)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var p=this.getValueAtTime(a/this.comp.globalData.frameRate,0),d=this.getValueAtTime(h/this.comp.globalData.frameRate,0),m=this.getValueAtTime(((l-a)%r+a)/this.comp.globalData.frameRate,0),u=Math.floor((l-a)/r);if(this.pv.length){for(n=(o=new Array(p.length)).length,i=0;i<n;i+=1)o[i]=(d[i]-p[i])*u+m[i];return o}return(d-p)*u+m}if("continue"===e){var x=this.getValueAtTime(h/this.comp.globalData.frameRate,0),f=this.getValueAtTime((h-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(n=(o=new Array(x.length)).length,i=0;i<n;i+=1)o[i]=x[i]+(x[i]-f[i])*((l-h)/this.comp.globalData.frameRate)/5e-4;return o}return x+(l-h)/.001*(x-f)}}return this.getValueAtTime(((l-a)%r+a)/this.comp.globalData.frameRate,0)}function t(e,t,s){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var r,a,i,n,o,l=this.comp.renderedFrame,c=this.keyframes,h=c[0].t;if(l>=h)return this.pv;if(s?a=h+(r=t?Math.abs(this.elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-h)):((!t||t>c.length-1)&&(t=c.length-1),r=(a=c[t].t)-h),"pingpong"===e){if(Math.floor((h-l)/r)%2==0)return this.getValueAtTime(((h-l)%r+h)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var p=this.getValueAtTime(h/this.comp.globalData.frameRate,0),d=this.getValueAtTime(a/this.comp.globalData.frameRate,0),m=this.getValueAtTime((r-(h-l)%r+h)/this.comp.globalData.frameRate,0),u=Math.floor((h-l)/r)+1;if(this.pv.length){for(n=(o=new Array(p.length)).length,i=0;i<n;i+=1)o[i]=m[i]-(d[i]-p[i])*u;return o}return m-(d-p)*u}if("continue"===e){var x=this.getValueAtTime(h/this.comp.globalData.frameRate,0),f=this.getValueAtTime((h+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(n=(o=new Array(x.length)).length,i=0;i<n;i+=1)o[i]=x[i]+(x[i]-f[i])*(h-l)/.001;return o}return x+(x-f)*(h-l)/.001}}return this.getValueAtTime((r-((h-l)%r+h))/this.comp.globalData.frameRate,0)}function s(e,t){if(!this.k)return this.pv;if(e=.5*(e||.4),(t=Math.floor(t||5))<=1)return this.pv;var s,r,a=this.comp.renderedFrame/this.comp.globalData.frameRate,i=a-e,n=t>1?(a+e-i)/(t-1):1,o=0,l=0;for(s=this.pv.length?createTypedArray("float32",this.pv.length):0;o<t;){if(r=this.getValueAtTime(i+o*n),this.pv.length)for(l=0;l<this.pv.length;l+=1)s[l]+=r[l];else s+=r;o+=1}if(this.pv.length)for(l=0;l<this.pv.length;l+=1)s[l]/=t;else s/=t;return s}function r(e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var t=this._transformCachingAtTime.v;if(t.cloneFromProps(this.pre.props),this.appliedTransformations<1){var s=this.a.getValueAtTime(e);t.translate(-s[0]*this.a.mult,-s[1]*this.a.mult,s[2]*this.a.mult)}if(this.appliedTransformations<2){var r=this.s.getValueAtTime(e);t.scale(r[0]*this.s.mult,r[1]*this.s.mult,r[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var a=this.sk.getValueAtTime(e),i=this.sa.getValueAtTime(e);t.skewFromAxis(-a*this.sk.mult,i*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var n=this.r.getValueAtTime(e);t.rotate(-n*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var o=this.rz.getValueAtTime(e),l=this.ry.getValueAtTime(e),c=this.rx.getValueAtTime(e),h=this.or.getValueAtTime(e);t.rotateZ(-o*this.rz.mult).rotateY(l*this.ry.mult).rotateX(c*this.rx.mult).rotateZ(-h[2]*this.or.mult).rotateY(h[1]*this.or.mult).rotateX(h[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var p=this.px.getValueAtTime(e),d=this.py.getValueAtTime(e);if(this.data.p.z){var m=this.pz.getValueAtTime(e);t.translate(p*this.px.mult,d*this.py.mult,-m*this.pz.mult)}else t.translate(p*this.px.mult,d*this.py.mult,0)}else{var u=this.p.getValueAtTime(e);t.translate(u[0]*this.p.mult,u[1]*this.p.mult,-u[2]*this.p.mult)}return t}function a(){return this.v.clone(new Matrix)}var i=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,s){var n=i(e,t,s);return n.dynamicProperties.length?n.getValueAtTime=r.bind(n):n.getValueAtTime=a.bind(n),n.setGroupProperty=expressionHelpers.setGroupProperty,n};var n=PropertyFactory.getProp;PropertyFactory.getProp=function(r,a,i,o,l){var c=n(r,a,i,o,l);c.kf?c.getValueAtTime=expressionHelpers.getValueAtTime.bind(c):c.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(c),c.setGroupProperty=expressionHelpers.setGroupProperty,c.loopOut=e,c.loopIn=t,c.smooth=s,c.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(c),c.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(c),c.numKeys=1===a.a?a.k.length:0,c.propertyIndex=a.ix;var h=0;return 0!==i&&(h=createTypedArray("float32",1===a.a?a.k[0].s.length:a.k.length)),c._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:h},expressionHelpers.searchExpressions(r,a,c),c.k&&l.addDynamicProperty(c),c};var o=ShapePropertyFactory.getConstructorFunction(),l=ShapePropertyFactory.getKeyframedConstructorFunction();function c(){}c.prototype={vertices:function(e,t){this.k&&this.getValue();var s,r=this.v;void 0!==t&&(r=this.getValueAtTime(t,0));var a=r._length,i=r[e],n=r.v,o=createSizedArray(a);for(s=0;s<a;s+=1)o[s]="i"===e||"o"===e?[i[s][0]-n[s][0],i[s][1]-n[s][1]]:[i[s][0],i[s][1]];return o},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var s=this.v;void 0!==t&&(s=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(s));for(var r,a=this._segmentsLength,i=a.lengths,n=a.totalLength*e,o=0,l=i.length,c=0;o<l;){if(c+i[o].addedLength>n){var h=o,p=s.c&&o===l-1?0:o+1,d=(n-c)/i[o].addedLength;r=bez.getPointInSegment(s.v[h],s.v[p],s.o[h],s.i[p],d,i[o]);break}c+=i[o].addedLength,o+=1}return r||(r=s.c?[s.v[0][0],s.v[0][1]]:[s.v[s._length-1][0],s.v[s._length-1][1]]),r},vectorOnPath:function(e,t,s){1==e?e=this.v.c:0==e&&(e=.999);var r=this.pointOnPath(e,t),a=this.pointOnPath(e+.001,t),i=a[0]-r[0],n=a[1]-r[1],o=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));return 0===o?[0,0]:"tangent"===s?[i/o,n/o]:[-n/o,i/o]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([c],o),extendPrototype([c],l),l.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},l.prototype.initiateExpression=ExpressionManager.initiateExpression;var h=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,s,r,a){var i=h(e,t,s,r,a);return i.propertyIndex=t.ix,i.lock=!1,3===s?expressionHelpers.searchExpressions(e,t.pt,i):4===s&&expressionHelpers.searchExpressions(e,t.ks,i),i.k&&e.addDynamicProperty(i),i}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(e,t){var s=this.calculateExpression(t);if(e.t!==s){var r={};return this.copyData(r,e),r.t=s.toString(),r.__complete=!1,r}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(e,t){var s,r,a=createNS("feMerge");for(a.setAttribute("result",e),r=0;r<t.length;r+=1)(s=createNS("feMergeNode")).setAttribute("in",t[r]),a.appendChild(s),a.appendChild(s);return a}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(e,t,s,r,a){this.filterManager=t;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=i,i.setAttribute("result",r+"_tint_1"),e.appendChild(i),(i=createNS("feColorMatrix")).setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result",r+"_tint_2"),e.appendChild(i),this.matrixFilter=i;var n=this.createMergeNode(r,[a,r+"_tint_1",r+"_tint_2"]);e.appendChild(n)}function SVGFillFilter(e,t,s,r){this.filterManager=t;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",r),e.appendChild(a),this.matrixFilter=a}function SVGStrokeEffect(e,t,s){this.initialized=!1,this.filterManager=t,this.elem=s,this.paths=[]}function SVGTritoneFilter(e,t,s,r){this.filterManager=t;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.appendChild(a);var i=createNS("feComponentTransfer");i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("result",r),this.matrixFilter=i;var n=createNS("feFuncR");n.setAttribute("type","table"),i.appendChild(n),this.feFuncR=n;var o=createNS("feFuncG");o.setAttribute("type","table"),i.appendChild(o),this.feFuncG=o;var l=createNS("feFuncB");l.setAttribute("type","table"),i.appendChild(l),this.feFuncB=l,e.appendChild(i)}function SVGProLevelsFilter(e,t,s,r){this.filterManager=t;var a=this.filterManager.effectElements,i=createNS("feComponentTransfer");(a[10].p.k||0!==a[10].p.v||a[11].p.k||1!==a[11].p.v||a[12].p.k||1!==a[12].p.v||a[13].p.k||0!==a[13].p.v||a[14].p.k||1!==a[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",i)),(a[17].p.k||0!==a[17].p.v||a[18].p.k||1!==a[18].p.v||a[19].p.k||1!==a[19].p.v||a[20].p.k||0!==a[20].p.v||a[21].p.k||1!==a[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",i)),(a[24].p.k||0!==a[24].p.v||a[25].p.k||1!==a[25].p.v||a[26].p.k||1!==a[26].p.v||a[27].p.k||0!==a[27].p.v||a[28].p.k||1!==a[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",i)),(a[31].p.k||0!==a[31].p.v||a[32].p.k||1!==a[32].p.v||a[33].p.k||1!==a[33].p.v||a[34].p.k||0!==a[34].p.v||a[35].p.k||1!==a[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",i)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(i.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(i)),(a[3].p.k||0!==a[3].p.v||a[4].p.k||1!==a[4].p.v||a[5].p.k||1!==a[5].p.v||a[6].p.k||0!==a[6].p.v||a[7].p.k||1!==a[7].p.v)&&((i=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("result",r),e.appendChild(i),this.feFuncRComposed=this.createFeFunc("feFuncR",i),this.feFuncGComposed=this.createFeFunc("feFuncG",i),this.feFuncBComposed=this.createFeFunc("feFuncB",i))}function SVGDropShadowEffect(e,t,s,r,a){var i=t.container.globalData.renderConfig.filterSize,n=t.data.fs||i;e.setAttribute("x",n.x||i.x),e.setAttribute("y",n.y||i.y),e.setAttribute("width",n.width||i.width),e.setAttribute("height",n.height||i.height),this.filterManager=t;var o=createNS("feGaussianBlur");o.setAttribute("in","SourceAlpha"),o.setAttribute("result",r+"_drop_shadow_1"),o.setAttribute("stdDeviation","0"),this.feGaussianBlur=o,e.appendChild(o);var l=createNS("feOffset");l.setAttribute("dx","25"),l.setAttribute("dy","0"),l.setAttribute("in",r+"_drop_shadow_1"),l.setAttribute("result",r+"_drop_shadow_2"),this.feOffset=l,e.appendChild(l);var c=createNS("feFlood");c.setAttribute("flood-color","#00ff00"),c.setAttribute("flood-opacity","1"),c.setAttribute("result",r+"_drop_shadow_3"),this.feFlood=c,e.appendChild(c);var h=createNS("feComposite");h.setAttribute("in",r+"_drop_shadow_3"),h.setAttribute("in2",r+"_drop_shadow_2"),h.setAttribute("operator","in"),h.setAttribute("result",r+"_drop_shadow_4"),e.appendChild(h);var p=this.createMergeNode(r,[r+"_drop_shadow_4",a]);e.appendChild(p)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+r+" 0"),this.matrixFilter.setAttribute("values",s[0]-t[0]+" 0 0 0 "+t[0]+" "+(s[1]-t[1])+" 0 0 0 "+t[1]+" "+(s[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,s=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+s+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var e,t,s,r,a=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,s=0):r=1+(s=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);s<r;s+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:s});if(3===this.filterManager.effectElements[10].p.v){var i=createNS("mask"),n=createElementID();i.setAttribute("id",n),i.setAttribute("mask-type","alpha"),i.appendChild(t),this.elem.globalData.defs.appendChild(i);var o=createNS("g");for(o.setAttribute("mask","url("+getLocationHref()+"#"+n+")");a[0];)o.appendChild(a[0]);this.elem.layerElement.appendChild(o),this.masker=i,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(a=this.elem.layerElement.children||this.elem.layerElement.childNodes;a.length;)this.elem.layerElement.removeChild(a[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){var t;this.initialized||this.initialize();var s,r,a=this.paths.length;for(t=0;t<a;t+=1)if(-1!==this.paths[t].m&&(s=this.elem.maskManager.viewData[this.paths[t].m],r=this.paths[t].p,(e||this.filterManager._mdf||s.prop._mdf)&&r.setAttribute("d",s.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||s.prop._mdf)){var i;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var n=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),o=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),l=r.getTotalLength();i="0 0 0 "+l*n+" ";var c,h=l*(o-n),p=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,d=Math.floor(h/p);for(c=0;c<d;c+=1)i+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";i+="0 "+10*l+" 0 0"}else i="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;r.setAttribute("stroke-dasharray",i)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p._mdf)){var m=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*m[0])+","+bmFloor(255*m[1])+","+bmFloor(255*m[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,a=r[0]+" "+s[0]+" "+t[0],i=r[1]+" "+s[1]+" "+t[1],n=r[2]+" "+s[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",a),this.feFuncG.setAttribute("tableValues",i),this.feFuncB.setAttribute("tableValues",n)}},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var s=createNS(e);return s.setAttribute("type","table"),t.appendChild(s),s},SVGProLevelsFilter.prototype.getTableValue=function(e,t,s,r,a){for(var i,n,o=0,l=Math.min(e,t),c=Math.max(e,t),h=Array.call(null,{length:256}),p=0,d=a-r,m=t-e;o<=256;)n=(i=o/256)<=l?m<0?a:r:i>=c?m<0?r:a:r+d*Math.pow((i-e)/m,1/s),h[p]=n,p+=1,o+=256/255;return h.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t,s=this.filterManager.effectElements;this.feFuncRComposed&&(e||s[3].p._mdf||s[4].p._mdf||s[5].p._mdf||s[6].p._mdf||s[7].p._mdf)&&(t=this.getTableValue(s[3].p.v,s[4].p.v,s[5].p.v,s[6].p.v,s[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||s[10].p._mdf||s[11].p._mdf||s[12].p._mdf||s[13].p._mdf||s[14].p._mdf)&&(t=this.getTableValue(s[10].p.v,s[11].p.v,s[12].p.v,s[13].p.v,s[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||s[17].p._mdf||s[18].p._mdf||s[19].p._mdf||s[20].p._mdf||s[21].p._mdf)&&(t=this.getTableValue(s[17].p.v,s[18].p.v,s[19].p.v,s[20].p.v,s[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||s[24].p._mdf||s[25].p._mdf||s[26].p._mdf||s[27].p._mdf||s[28].p._mdf)&&(t=this.getTableValue(s[24].p.v,s[25].p.v,s[26].p.v,s[27].p.v,s[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||s[31].p._mdf||s[32].p._mdf||s[33].p._mdf||s[34].p._mdf||s[35].p._mdf)&&(t=this.getTableValue(s[31].p.v,s[32].p.v,s[33].p.v,s[34].p.v,s[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var s=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,a=s*Math.cos(r),i=s*Math.sin(r);this.feOffset.setAttribute("dx",a),this.feOffset.setAttribute("dy",i)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,s){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=s,s.matteElement=createNS("g"),s.matteElement.appendChild(s.layerElement),s.matteElement.appendChild(s.transformedElement),s.baseElement=s.matteElement}function SVGGaussianBlurEffect(e,t,s,r){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var a=createNS("feGaussianBlur");a.setAttribute("result",r),e.appendChild(a),this.feGaussianBlur=a}function TransformEffect(){}function SVGTransformEffect(e,t){this.init(t)}function CVTransformEffect(e){this.init(e)}return SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,s=_svgMatteSymbols.length;t<s;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var s=e.layerElement.parentNode;if(s){for(var r,a=s.children,i=0,n=a.length;i<n&&a[i]!==e.layerElement;)i+=1;i<=n-2&&(r=a[i+1]);var o=createNS("use");o.setAttribute("href","#"+t),r?s.insertBefore(o,r):s.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){if(!this.findSymbol(t)){var s=createElementID(),r=createNS("mask");r.setAttribute("id",t.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var a=e.globalData.defs;a.appendChild(r);var i=createNS("symbol");i.setAttribute("id",s),this.replaceInParent(t,s),i.appendChild(t.layerElement),a.appendChild(i);var n=createNS("use");n.setAttribute("href","#"+s),r.appendChild(n),t.data.hd=!1,t.show()}e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,s=0,r=t.length;s<r;)t[s]&&t[s].data.ind===e&&this.setElementAsMask(this.elem,t[s]),s+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,r=3==s?0:t,a=2==s?0:t;this.feGaussianBlur.setAttribute("stdDeviation",r+" "+a);var i=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",i)}},TransformEffect.prototype.init=function(e){this.effectsManager=e,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(e){if(this._opMdf=!1,this._mdf=!1,e||this.effectsManager._mdf){var t=this.effectsManager.effectElements,s=t[0].p.v,r=t[1].p.v,a=1===t[2].p.v,i=t[3].p.v,n=a?i:t[4].p.v,o=t[5].p.v,l=t[6].p.v,c=t[7].p.v;this.matrix.reset(),this.matrix.translate(-s[0],-s[1],s[2]),this.matrix.scale(.01*n,.01*i,1),this.matrix.rotate(-c*degToRads),this.matrix.skewFromAxis(-o*degToRads,(l+90)*degToRads),this.matrix.translate(r[0],r[1],0),this._mdf=!0,this.opacity!==t[8].p.v&&(this.opacity=t[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=factory2())}(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs(lottieExports);function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=Array(t);s<t;s++)r[s]=e[s];return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,t,s){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function _iterableToArrayLimit(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,i,n,o=[],l=!0,c=!1;try{if(i=(s=s.call(e)).next,0===t);else for(;!(l=(r=i.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,a=h}finally{try{if(!l&&null!=s.return&&(n=s.return(),Object(n)!==n))return}finally{if(c)throw a}}return o}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach(function(t){_defineProperty(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function _objectWithoutProperties(e,t){if(null==e)return{};var s,r,a=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var s={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;s[r]=e[r]}return s}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var s={}.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(e,t):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function(e,t){var s=e.animationData,r=e.loop,a=e.autoplay,i=e.initialSegment,n=e.onComplete,o=e.onLoopComplete,l=e.onEnterFrame,c=e.onSegmentStart,h=e.onConfigReady,p=e.onDataReady,d=e.onDataFailed,m=e.onLoadedImages,u=e.onDOMLoaded,x=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var f=_objectWithoutProperties(e,_excluded$1),g=_slicedToArray(reactExports.useState(!1),2),y=g[0],v=g[1],b=reactExports.useRef(),E=reactExports.useRef(null);return reactExports.useEffect(function(){var t=function(){var t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(E.current){null===(t=b.current)||void 0===t||t.destroy();var r=_objectSpread2(_objectSpread2(_objectSpread2({},e),s),{},{container:E.current});return b.current=lottie.loadAnimation(r),v(!!b.current),function(){var e;null===(e=b.current)||void 0===e||e.destroy(),b.current=void 0}}}();return function(){return null==t?void 0:t()}},[s,r]),reactExports.useEffect(function(){b.current&&(b.current.autoplay=!!a)},[a]),reactExports.useEffect(function(){b.current&&(i?Array.isArray(i)&&i.length&&((b.current.currentRawFrame<i[0]||b.current.currentRawFrame>i[1])&&(b.current.currentRawFrame=i[0]),b.current.setSegment(i[0],i[1])):b.current.resetSegments(!0))},[i]),reactExports.useEffect(function(){var e=[{name:"complete",handler:n},{name:"loopComplete",handler:o},{name:"enterFrame",handler:l},{name:"segmentStart",handler:c},{name:"config_ready",handler:h},{name:"data_ready",handler:p},{name:"data_failed",handler:d},{name:"loaded_images",handler:m},{name:"DOMLoaded",handler:u},{name:"destroy",handler:x}].filter(function(e){return null!=e.handler});if(e.length){var t=e.map(function(e){var t;return null===(t=b.current)||void 0===t||t.addEventListener(e.name,e.handler),function(){var t;null===(t=b.current)||void 0===t||t.removeEventListener(e.name,e.handler)}});return function(){t.forEach(function(e){return e()})}}},[n,o,l,c,h,p,d,m,u,x]),{View:React.createElement("div",_objectSpread2({style:t,ref:E},f)),play:function(){var e;null===(e=b.current)||void 0===e||e.play()},stop:function(){var e;null===(e=b.current)||void 0===e||e.stop()},pause:function(){var e;null===(e=b.current)||void 0===e||e.pause()},setSpeed:function(e){var t;null===(t=b.current)||void 0===t||t.setSpeed(e)},goToAndStop:function(e,t){var s;null===(s=b.current)||void 0===s||s.goToAndStop(e,t)},goToAndPlay:function(e,t){var s;null===(s=b.current)||void 0===s||s.goToAndPlay(e,t)},setDirection:function(e){var t;null===(t=b.current)||void 0===t||t.setDirection(e)},playSegments:function(e,t){var s;null===(s=b.current)||void 0===s||s.playSegments(e,t)},setSubframe:function(e){var t;null===(t=b.current)||void 0===t||t.setSubframe(e)},getDuration:function(e){var t;return null===(t=b.current)||void 0===t?void 0:t.getDuration(e)},destroy:function(){var e;null===(e=b.current)||void 0===e||e.destroy(),b.current=void 0},animationContainerRef:E,animationLoaded:y,animationItem:b.current}};function getContainerVisibility(e){var t=e.getBoundingClientRect(),s=t.top,r=t.height;return(window.innerHeight-s)/(window.innerHeight+r)}function getContainerCursorPosition(e,t,s){var r=e.getBoundingClientRect(),a=r.top;return{x:(t-r.left)/r.width,y:(s-a)/r.height}}var useInitInteractivity=function(e){var t=e.wrapperRef,s=e.animationItem,r=e.mode,a=e.actions;reactExports.useEffect(function(){var e=t.current;if(e&&s&&a.length){s.stop();var i,n,o,l,c;switch(r){case"scroll":return l=null,c=function(){var t=getContainerVisibility(e),r=a.find(function(e){var s=e.visibility;return s&&t>=s[0]&&t<=s[1]});if(r){if("seek"===r.type&&r.visibility&&2===r.frames.length){var i=r.frames[0]+Math.ceil((t-r.visibility[0])/(r.visibility[1]-r.visibility[0])*r.frames[1]);
//! goToAndStop must be relative to the start of the current segment
s.goToAndStop(i-s.firstFrame-1,!0)}"loop"===r.type&&(null===l||l!==r.frames||s.isPaused)&&(s.playSegments(r.frames,!0),l=r.frames),"play"===r.type&&s.isPaused&&(s.resetSegments(!0),s.play()),"stop"===r.type&&s.goToAndStop(r.frames[0]-s.firstFrame-1,!0)}},document.addEventListener("scroll",c),function(){document.removeEventListener("scroll",c)};case"cursor":return i=function(t,r){var i=t,n=r;if(-1!==i&&-1!==n){var o=getContainerCursorPosition(e,i,n);i=o.x,n=o.y}var l=a.find(function(e){var t=e.position;return t&&Array.isArray(t.x)&&Array.isArray(t.y)?i>=t.x[0]&&i<=t.x[1]&&n>=t.y[0]&&n<=t.y[1]:!(!t||Number.isNaN(t.x)||Number.isNaN(t.y))&&i===t.x&&n===t.y});if(l){if("seek"===l.type&&l.position&&Array.isArray(l.position.x)&&Array.isArray(l.position.y)&&2===l.frames.length){var c=(i-l.position.x[0])/(l.position.x[1]-l.position.x[0]),h=(n-l.position.y[0])/(l.position.y[1]-l.position.y[0]);s.playSegments(l.frames,!0),s.goToAndStop(Math.ceil((c+h)/2*(l.frames[1]-l.frames[0])),!0)}"loop"===l.type&&s.playSegments(l.frames,!0),"play"===l.type&&(s.isPaused&&s.resetSegments(!1),s.playSegments(l.frames)),"stop"===l.type&&s.goToAndStop(l.frames[0],!0)}},n=function(e){i(e.clientX,e.clientY)},o=function(){i(-1,-1)},e.addEventListener("mousemove",n),e.addEventListener("mouseout",o),function(){e.removeEventListener("mousemove",n),e.removeEventListener("mouseout",o)}}}},[r,s])},useLottieInteractivity=function(e){var t=e.actions,s=e.mode,r=e.lottieObj,a=r.animationItem,i=r.View,n=r.animationContainerRef;return useInitInteractivity({actions:t,animationItem:a,mode:s,wrapperRef:n}),i},_excluded=["style","interactivity"],Lottie=function(e){var t,s,r,a=e.style,i=e.interactivity,n=_objectWithoutProperties(e,_excluded),o=useLottie(n,a),l=o.View,c=o.play,h=o.stop,p=o.pause,d=o.setSpeed,m=o.goToAndStop,u=o.goToAndPlay,x=o.setDirection,f=o.playSegments,g=o.setSubframe,y=o.getDuration,v=o.destroy,b=o.animationContainerRef,E=o.animationLoaded,j=o.animationItem;return reactExports.useEffect(function(){e.lottieRef&&(e.lottieRef.current={play:c,stop:h,pause:p,setSpeed:d,goToAndPlay:u,goToAndStop:m,setDirection:x,playSegments:f,setSubframe:g,getDuration:y,destroy:v,animationContainerRef:b,animationLoaded:E,animationItem:j})},[null===(t=e.lottieRef)||void 0===t?void 0:t.current]),useLottieInteractivity({lottieObj:{View:l,play:c,stop:h,pause:p,setSpeed:d,goToAndStop:m,goToAndPlay:u,setDirection:x,playSegments:f,setSubframe:g,getDuration:y,destroy:v,animationContainerRef:b,animationLoaded:E,animationItem:j},actions:null!==(s=null==i?void 0:i.actions)&&void 0!==s?s:[],mode:null!==(r=null==i?void 0:i.mode)&&void 0!==r?r:"scroll"})};const Sidebar=({activeTab:e,onTabChange:t})=>{const[s,r]=reactExports.useState(null),[a,i]=reactExports.useState(!1);reactExports.useEffect(()=>{fetch("/home-icon.json").then(e=>e.json()).then(e=>r(e)).catch(e=>console.error("Erro ao carregar cone:",e))},[]);const n=e=>{t(e)},o=()=>{i(!0),n("dashboard")};return reactExports.useEffect(()=>{"dashboard"!==e&&i(!1)},[e]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden lg:block w-64 bg-white border-r border-gray-200 min-h-screen",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-white font-bold text-xl",children:"F"})}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"FinTrack"})]}),jsxRuntimeExports.jsxs("nav",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("button",{onClick:o,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+("dashboard"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5",children:s?jsxRuntimeExports.jsx(Lottie,{animationData:s,loop:!1,autoplay:a,style:{width:"20px",height:"20px"}}):jsxRuntimeExports.jsx("span",{children:""})}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Dashboard"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("transactions"),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+("transactions"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Transaes"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{console.log(" [Sidebar] Clicando na aba Relatrios"),n("budgets")},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+("budgets"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Relatrios"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("settings"),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+("settings"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Configuraes"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("admin"),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors "+("admin"===e?"bg-red-50 text-red-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Admin"})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-lg mobile-bottom-nav",children:jsxRuntimeExports.jsx("div",{className:"px-2 py-2",children:jsxRuntimeExports.jsxs("nav",{className:"flex justify-around items-center",children:[jsxRuntimeExports.jsxs("button",{onClick:o,className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors "+("dashboard"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"),children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6",children:s?jsxRuntimeExports.jsx(Lottie,{animationData:s,loop:!1,autoplay:a,style:{width:"24px",height:"24px"}}):jsxRuntimeExports.jsx("span",{className:"text-lg",children:""})}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:"Dashboard"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("transactions"),className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors "+("transactions"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"),children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:"Transaes"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{console.log(" [Sidebar] Clicando na aba Relatrios"),n("budgets")},className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors "+("budgets"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"),children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:"Relatrios"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("settings"),className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors "+("settings"===e?"bg-green-50 text-green-700":"text-gray-600 hover:bg-gray-50"),children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:"Configuraes"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n("admin"),className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg transition-colors "+("admin"===e?"bg-red-50 text-red-700":"text-gray-600 hover:bg-gray-50"),children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:"Admin"})]})]})})})]})},DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=12e4,DEFAULT_MAX_UPLOAD_RETRY_TIME=6e5;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class StorageError extends FirebaseError{constructor(e,t,s=0){super(prependCode(e),`Firebase Storage: ${t} (${prependCode(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return prependCode(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode,StorageErrorCode2,ErrorCode,ErrorCode2;function prependCode(e){return"storage/"+e}function unknown(){return new StorageError(StorageErrorCode.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(e){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+e+"'.")}function invalidDefaultBucket(e){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function invalidArgument(e){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,e)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(e){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */StorageErrorCode2=StorageErrorCode||(StorageErrorCode={}),StorageErrorCode2.UNKNOWN="unknown",StorageErrorCode2.OBJECT_NOT_FOUND="object-not-found",StorageErrorCode2.BUCKET_NOT_FOUND="bucket-not-found",StorageErrorCode2.PROJECT_NOT_FOUND="project-not-found",StorageErrorCode2.QUOTA_EXCEEDED="quota-exceeded",StorageErrorCode2.UNAUTHENTICATED="unauthenticated",StorageErrorCode2.UNAUTHORIZED="unauthorized",StorageErrorCode2.UNAUTHORIZED_APP="unauthorized-app",StorageErrorCode2.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",StorageErrorCode2.INVALID_CHECKSUM="invalid-checksum",StorageErrorCode2.CANCELED="canceled",StorageErrorCode2.INVALID_EVENT_NAME="invalid-event-name",StorageErrorCode2.INVALID_URL="invalid-url",StorageErrorCode2.INVALID_DEFAULT_BUCKET="invalid-default-bucket",StorageErrorCode2.NO_DEFAULT_BUCKET="no-default-bucket",StorageErrorCode2.CANNOT_SLICE_BLOB="cannot-slice-blob",StorageErrorCode2.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",StorageErrorCode2.NO_DOWNLOAD_URL="no-download-url",StorageErrorCode2.INVALID_ARGUMENT="invalid-argument",StorageErrorCode2.INVALID_ARGUMENT_COUNT="invalid-argument-count",StorageErrorCode2.APP_DELETED="app-deleted",StorageErrorCode2.INVALID_ROOT_OPERATION="invalid-root-operation",StorageErrorCode2.INVALID_FORMAT="invalid-format",StorageErrorCode2.INTERNAL_ERROR="internal-error",StorageErrorCode2.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class Location{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Location.makeFromUrl(e,t)}catch(r){return new Location(e,"")}if(""===s.path)return s;throw invalidDefaultBucket(e)}static makeFromUrl(e,t){let s=null;const r="([A-Za-z0-9.\\-_]+)";const a=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const n=t.replace(/[.]/g,"\\."),o=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${n}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${t===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let a=r[t.indices.path];a||(a=""),s=new Location(e,a),t.postModify(s);break}}if(null==s)throw invalidUrl(e);return s}}class FailRequest{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start$1(e,t,s){let r=1,a=null,i=null,n=!1,o=0;function l(){return 2===o}let c=!1;function h(...e){c||(c=!0,t.apply(null,e))}function p(t){a=setTimeout(()=>{a=null,e(m,l())},t)}function d(){i&&clearTimeout(i)}function m(e,...t){if(c)return void d();if(e)return d(),void h.call(null,e,...t);if(l()||n)return d(),void h.call(null,e,...t);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),p(s)}let u=!1;function x(e){u||(u=!0,d(),c||(null!==a?(e||(o=2),clearTimeout(a),p(0)):e||(o=1)))}return p(0),i=setTimeout(()=>{n=!0,x(!0)},s),x}function stop(e){e(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(e){return void 0!==e}function validateNumber(e,t,s,r){if(r<t)throw invalidArgument(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>s)throw invalidArgument(`Invalid value for '${e}'. Expected ${s} or less.`)}function makeQueryString(e){const t=encodeURIComponent;let s="?";for(const r in e)if(e.hasOwnProperty(r)){s=s+(t(r)+"="+t(e[r]))+"&"}return s=s.slice(0,-1),s}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function isRetryStatusCode(e,t){const s=e>=500&&e<600,r=-1!==[408,429].indexOf(e),a=-1!==t.indexOf(e);return s||r||a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ErrorCode2=ErrorCode||(ErrorCode={}),ErrorCode2[ErrorCode2.NO_ERROR=0]="NO_ERROR",ErrorCode2[ErrorCode2.NETWORK_ERROR=1]="NETWORK_ERROR",ErrorCode2[ErrorCode2.ABORT=2]="ABORT";class NetworkRequest{constructor(e,t,s,r,a,i,n,o,l,c,h,p=!0,d=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=i,this.callback_=n,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new RequestEndStatus(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const r=e=>{const t=e.loaded,s=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,s)};null!==this.progressCallback_&&s.addUploadProgressListener(r),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(r),this.pendingConnection_=null;const t=s.getErrorCode()===ErrorCode.NO_ERROR,a=s.getStatus();if(!t||isRetryStatusCode(a,this.additionalRetryCodes_)&&this.retry){const t=s.getErrorCode()===ErrorCode.ABORT;return void e(!1,new RequestEndStatus(!1,null,t))}const i=-1!==this.successCodes_.indexOf(a);e(!0,new RequestEndStatus(i,s))})},t=(e,t)=>{const s=this.resolve_,r=this.reject_,a=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(a,a.getResponse());isJustDef(e)?s(e):s()}catch(i){r(i)}else if(null!==a){const e=unknown();e.serverResponse=a.getErrorText(),this.errorCallback_?r(this.errorCallback_(a,e)):r(e)}else if(t.canceled){r(this.appDelete_?appDeleted():canceled())}else{r(retryLimitExceeded())}};this.canceled_?t(0,new RequestEndStatus(!1,null,!0)):this.backoffId_=start$1(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&stop(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function addAuthHeader_(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function addVersionHeader_(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function addGmpidHeader_(e,t){t&&(e["X-Firebase-GMPID"]=t)}function addAppCheckHeader_(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function makeRequest(e,t,s,r,a,i,n=!0,o=!1){const l=makeQueryString(e.urlParams),c=e.url+l,h=Object.assign({},e.headers);return addGmpidHeader_(h,t),addAuthHeader_(h,s),addVersionHeader_(h,i),addAppCheckHeader_(h,r),new NetworkRequest(c,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,n,o)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(e){if(0===e.length)return null;const t=e.lastIndexOf("/");if(-1===t)return"";return e.slice(0,t)}function lastComponent(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(e,t){this._service=e,this._location=t instanceof Location?t:Location.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Reference(e,t)}get root(){const e=new Location(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const e=parent(this._location.path);if(null===e)return null;const t=new Location(this._location.bucket,e);return new Reference(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw invalidRootOperation(e)}}function extractBucket(e,t){const s=t?.[CONFIG_STORAGE_BUCKET_KEY];return null==s?null:Location.makeFromBucketSpec(s,e)}function connectStorageEmulator$1(e,t,s,r={}){e.host=`${t}:${s}`;const a=isCloudWorkstation(t);a&&(pingServer(`https://${e.host}/b`),updateEmulatorBanner("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:createMockUserToken(i,e.app.options.projectId))}class FirebaseStorageImpl{constructor(e,t,s,r,a,i=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=r,this._firebaseVersion=a,this._isUsingEmulator=i,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,this._bucket=null!=r?Location.makeFromBucketSpec(r,this._host):extractBucket(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Location.makeFromBucketSpec(this._url,e):this._bucket=extractBucket(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Reference(this,e)}_makeRequest(e,t,s,r,a=!0){if(this._deleted)return new FailRequest(appDeleted());{const i=makeRequest(e,this._appId,s,r,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,r).getPromise()}}const name$2="@firebase/storage",version$2="0.14.0",STORAGE_TYPE="storage";function getStorage(e=getApp(),t){e=getModularInstance(e);const s=_getProvider(e,STORAGE_TYPE).getImmediate({identifier:t}),r=getDefaultEmulatorHostnameAndPort("storage");return r&&connectStorageEmulator(s,...r),s}function connectStorageEmulator(e,t,s,r={}){connectStorageEmulator$1(e,t,s,r)}function factory$1(e,{instanceIdentifier:t}){const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new FirebaseStorageImpl(s,r,a,t,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory$1,"PUBLIC").setMultipleInstances(!0)),registerVersion(name$2,version$2,""),registerVersion(name$2,version$2,"esm2020")}registerStorage();const name$1="@firebase/installations",version$1="0.6.19",PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$1}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=36e5,SERVICE="installations",SERVICE_NAME="Installations",ERROR_DESCRIPTION_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(e){return e instanceof FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getInstallationsEndpoint({projectId:e}){return`${INSTALLATIONS_API_URL}/projects/${e}/installations`}function extractAuthTokenInfoFromResponse(e){return{token:e.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(e.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(e,t){const s=(await t.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function getHeaders$1({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function getHeadersWithAuth(e,{refreshToken:t}){const s=getHeaders$1(e);return s.append("Authorization",getAuthorizationHeader(t)),s}async function retryIfServerError(e){const t=await e();return t.status>=500&&t.status<600?e():t}function getExpiresInFromResponseExpiresIn(e){return Number(e.replace("s","000"))}function getAuthorizationHeader(e){return`${INTERNAL_AUTH_VERSION} ${e}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function createInstallationRequest({appConfig:e,heartbeatServiceProvider:t},{fid:s}){const r=getInstallationsEndpoint(e),a=getHeaders$1(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const n={fid:s,authVersion:INTERNAL_AUTH_VERSION,appId:e.appId,sdkVersion:PACKAGE_VERSION},o={method:"POST",headers:a,body:JSON.stringify(n)},l=await retryIfServerError(()=>fetch(r,o));if(l.ok){const e=await l.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:extractAuthTokenInfoFromResponse(e.authToken)}}throw await getErrorFromResponse("Create Installation",l)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sleep$1(e){return new Promise(t=>{setTimeout(t,e)})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bufferToBase64UrlSafe(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=encode(e);return VALID_FID_PATTERN.test(t)?t:INVALID_FID}catch{return INVALID_FID}}function encode(e){return bufferToBase64UrlSafe(e).substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getKey(e){return`${e.appName}!${e.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fidChangeCallbacks=new Map;function fidChanged(e,t){const s=getKey(e);callFidChangeCallbacks(s,t),broadcastFidChange(s,t)}function callFidChangeCallbacks(e,t){const s=fidChangeCallbacks.get(e);if(s)for(const r of s)r(t)}function broadcastFidChange(e,t){const s=getBroadcastChannel();s&&s.postMessage({key:e,fid:t}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=e=>{callFidChangeCallbacks(e.data.key,e.data.fid)}),broadcastChannel}function closeBroadcastChannel(){0===fidChangeCallbacks.size&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME="firebase-installations-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-installations-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(OBJECT_STORE_NAME)}})),dbPromise}async function set$2(e,t){const s=getKey(e),r=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),a=r.objectStore(OBJECT_STORE_NAME),i=await a.get(s);return await a.put(t,s),await r.done,i&&i.fid===t.fid||fidChanged(e,t.fid),t}async function remove$1(e){const t=getKey(e),s=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");await s.objectStore(OBJECT_STORE_NAME).delete(t),await s.done}async function update(e,t){const s=getKey(e),r=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),a=r.objectStore(OBJECT_STORE_NAME),i=await a.get(s),n=t(i);return void 0===n?await a.delete(s):await a.put(n,s),await r.done,!n||i&&i.fid===n.fid||fidChanged(e,n.fid),n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getInstallationEntry(e){let t;const s=await update(e.appConfig,s=>{const r=updateOrCreateInstallationEntry(s),a=triggerRegistrationIfNecessary(e,r);return t=a.registrationPromise,a.installationEntry});return s.fid===INVALID_FID?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}function updateOrCreateInstallationEntry(e){return clearTimedOutRequest(e||{fid:generateFid(),registrationStatus:0})}function triggerRegistrationIfNecessary(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(ERROR_FACTORY$1.create("app-offline"))}}const s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:s,registrationPromise:registerInstallation(e,s)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:waitUntilFidRegistration(e)}:{installationEntry:t}}async function registerInstallation(e,t){try{const s=await createInstallationRequest(e,t);return set$2(e.appConfig,s)}catch(s){throw isServerError(s)&&409===s.customData.serverCode?await remove$1(e.appConfig):await set$2(e.appConfig,{fid:t.fid,registrationStatus:0}),s}}async function waitUntilFidRegistration(e){let t=await updateInstallationRequest(e.appConfig);for(;1===t.registrationStatus;)await sleep$1(100),t=await updateInstallationRequest(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:s}=await getInstallationEntry(e);return s||t}return t}function updateInstallationRequest(e){return update(e,e=>{if(!e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(e)})}function clearTimedOutRequest(e){return hasInstallationRequestTimedOut(e)?{fid:e.fid,registrationStatus:0}:e}function hasInstallationRequestTimedOut(e){return 1===e.registrationStatus&&e.registrationTime+PENDING_TIMEOUT_MS<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateAuthTokenRequest({appConfig:e,heartbeatServiceProvider:t},s){const r=getGenerateAuthTokenEndpoint(e,s),a=getHeadersWithAuth(e,s),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const n={installation:{sdkVersion:PACKAGE_VERSION,appId:e.appId}},o={method:"POST",headers:a,body:JSON.stringify(n)},l=await retryIfServerError(()=>fetch(r,o));if(l.ok){return extractAuthTokenInfoFromResponse(await l.json())}throw await getErrorFromResponse("Generate Auth Token",l)}function getGenerateAuthTokenEndpoint(e,{fid:t}){return`${getInstallationsEndpoint(e)}/${t}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function refreshAuthToken(e,t=!1){let s;const r=await update(e.appConfig,r=>{if(!isEntryRegistered(r))throw ERROR_FACTORY$1.create("not-registered");const a=r.authToken;if(!t&&isAuthTokenValid(a))return r;if(1===a.requestStatus)return s=waitUntilAuthTokenRequest(e,t),r;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const t=makeAuthTokenRequestInProgressEntry(r);return s=fetchAuthTokenFromServer(e,t),t}});return s?await s:r.authToken}async function waitUntilAuthTokenRequest(e,t){let s=await updateAuthTokenRequest(e.appConfig);for(;1===s.authToken.requestStatus;)await sleep$1(100),s=await updateAuthTokenRequest(e.appConfig);const r=s.authToken;return 0===r.requestStatus?refreshAuthToken(e,t):r}function updateAuthTokenRequest(e){return update(e,e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");return hasAuthTokenRequestTimedOut(e.authToken)?{...e,authToken:{requestStatus:0}}:e})}async function fetchAuthTokenFromServer(e,t){try{const s=await generateAuthTokenRequest(e,t),r={...t,authToken:s};return await set$2(e.appConfig,r),s}catch(s){if(!isServerError(s)||401!==s.customData.serverCode&&404!==s.customData.serverCode){const s={...t,authToken:{requestStatus:0}};await set$2(e.appConfig,s)}else await remove$1(e.appConfig);throw s}}function isEntryRegistered(e){return void 0!==e&&2===e.registrationStatus}function isAuthTokenValid(e){return 2===e.requestStatus&&!isAuthTokenExpired(e)}function isAuthTokenExpired(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(e){return{...e,authToken:{requestStatus:1,requestTime:Date.now()}}}function hasAuthTokenRequestTimedOut(e){return 1===e.requestStatus&&e.requestTime+PENDING_TIMEOUT_MS<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getId(e){const t=e,{installationEntry:s,registrationPromise:r}=await getInstallationEntry(t);return r?r.catch(console.error):refreshAuthToken(t).catch(console.error),s.fid}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken(e,t=!1){const s=e;await completeInstallationRegistration(s);return(await refreshAuthToken(s,t)).token}async function completeInstallationRegistration(e){const{registrationPromise:t}=await getInstallationEntry(e);t&&await t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig(e){if(!e||!e.options)throw getMissingValueError("App Configuration");if(!e.name)throw getMissingValueError("App Name");const t=["projectId","apiKey","appId"];for(const s of t)if(!e.options[s])throw getMissingValueError(s);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function getMissingValueError(e){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:extractAppConfig(t),heartbeatServiceProvider:_getProvider(t,"heartbeat"),_delete:()=>Promise.resolve()}},internalFactory=e=>{const t=e.getProvider("app").getImmediate(),s=_getProvider(t,INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(s),getToken:e=>getToken(s,e)}};function registerInstallations(){_registerComponent(new Component(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations(),registerVersion(name$1,version$1),registerVersion(name$1,version$1,"esm2020");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ANALYTICS_TYPE="analytics",GA_FID_KEY="firebase_id",ORIGIN_KEY="origin",FETCH_TIMEOUT_MILLIS=6e4,DYNAMIC_CONFIG_URL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",GTAG_URL="https://www.googletagmanager.com/gtag/js",logger=new Logger("@firebase/analytics"),ERRORS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ERROR_FACTORY=new ErrorFactory("analytics","Analytics",ERRORS);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function createGtagTrustedTypesScriptURL(e){if(!e.startsWith(GTAG_URL)){const t=ERROR_FACTORY.create("invalid-gtag-resource",{gtagURL:e});return logger.warn(t.message),""}return e}function promiseAllSettled(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function createTrustedTypesPolicy(e,t){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(e,t)),s}function insertScriptTag(e,t){const s=createTrustedTypesPolicy("firebase-js-sdk-policy",{createScriptURL:createGtagTrustedTypesScriptURL}),r=document.createElement("script"),a=`${GTAG_URL}?l=${e}&id=${t}`;r.src=s?s?.createScriptURL(a):a,r.async=!0,document.head.appendChild(r)}function getOrCreateDataLayer(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function gtagOnConfig(e,t,s,r,a,i){const n=r[a];try{if(n)await t[n];else{const e=(await promiseAllSettled(s)).find(e=>e.measurementId===a);e&&await t[e.appId]}}catch(o){logger.error(o)}e("config",a,i)}async function gtagOnEvent(e,t,s,r,a){try{let i=[];if(a&&a.send_to){let e=a.send_to;Array.isArray(e)||(e=[e]);const r=await promiseAllSettled(s);for(const s of e){const e=r.find(e=>e.measurementId===s),a=e&&t[e.appId];if(!a){i=[];break}i.push(a)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,a||{})}catch(i){logger.error(i)}}function wrapGtag(e,t,s,r){return async function(a,...i){try{if("event"===a){const[r,a]=i;await gtagOnEvent(e,t,s,r,a)}else if("config"===a){const[a,n]=i;await gtagOnConfig(e,t,s,r,a,n)}else if("consent"===a){const[t,s]=i;e("consent",t,s)}else if("get"===a){const[t,s,r]=i;e("get",t,s,r)}else if("set"===a){const[t]=i;e("set",t)}else e(a,...i)}catch(n){logger.error(n)}}}function wrapOrCreateGtag(e,t,s,r,a){let i=function(...e){window[r].push(arguments)};return window[a]&&"function"==typeof window[a]&&(i=window[a]),window[a]=wrapGtag(i,e,t,s),{gtagCore:i,wrappedGtag:window[a]}}function findGtagScriptOnPage(e){const t=window.document.getElementsByTagName("script");for(const s of Object.values(t))if(s.src&&s.src.includes(GTAG_URL)&&s.src.includes(e))return s;return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LONG_RETRY_FACTOR=30,BASE_INTERVAL_MILLIS=1e3;class RetryData{constructor(e={},t=BASE_INTERVAL_MILLIS){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const defaultRetryData=new RetryData;function getHeaders(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function fetchDynamicConfig(e){const{appId:t,apiKey:s}=e,r={method:"GET",headers:getHeaders(s)},a=DYNAMIC_CONFIG_URL.replace("{app-id}",t),i=await fetch(a,r);if(200!==i.status&&304!==i.status){let e="";try{const t=await i.json();t.error?.message&&(e=t.error.message)}catch(n){}throw ERROR_FACTORY.create("config-fetch-failed",{httpStatus:i.status,responseMessage:e})}return i.json()}async function fetchDynamicConfigWithRetry(e,t=defaultRetryData,s){const{appId:r,apiKey:a,measurementId:i}=e.options;if(!r)throw ERROR_FACTORY.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:r};throw ERROR_FACTORY.create("no-api-key")}const n=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new AnalyticsAbortSignal;return setTimeout(async()=>{o.abort()},FETCH_TIMEOUT_MILLIS),attemptFetchDynamicConfigWithRetry({appId:r,apiKey:a,measurementId:i},n,o,t)}async function attemptFetchDynamicConfigWithRetry(e,{throttleEndTimeMillis:t,backoffCount:s},r,a=defaultRetryData){const{appId:i,measurementId:n}=e;try{await setAbortableTimeout(r,t)}catch(o){if(n)return logger.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${n} provided in the "measurementId" field in the local Firebase config. [${o?.message}]`),{appId:i,measurementId:n};throw o}try{const t=await fetchDynamicConfig(e);return a.deleteThrottleMetadata(i),t}catch(o){const t=o;if(!isRetriableError(t)){if(a.deleteThrottleMetadata(i),n)return logger.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${n} provided in the "measurementId" field in the local Firebase config. [${t?.message}]`),{appId:i,measurementId:n};throw o}const l=503===Number(t?.customData?.httpStatus)?calculateBackoffMillis(s,a.intervalMillis,LONG_RETRY_FACTOR):calculateBackoffMillis(s,a.intervalMillis),c={throttleEndTimeMillis:Date.now()+l,backoffCount:s+1};return a.setThrottleMetadata(i,c),logger.debug(`Calling attemptFetch again in ${l} millis`),attemptFetchDynamicConfigWithRetry(e,c,r,a)}}function setAbortableTimeout(e,t){return new Promise((s,r)=>{const a=Math.max(t-Date.now(),0),i=setTimeout(s,a);e.addEventListener(()=>{clearTimeout(i),r(ERROR_FACTORY.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function isRetriableError(e){if(!(e instanceof FirebaseError&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class AnalyticsAbortSignal{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function logEvent$1(e,t,s,r,a){if(a&&a.global)e("event",s,r);else{const a=await t;e("event",s,{...r,send_to:a})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function validateIndexedDB(){if(!isIndexedDBAvailable())return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await validateIndexedDBOpenable()}catch(e){return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}return!0}async function _initializeAnalytics(e,t,s,r,a,i,n){const o=fetchDynamicConfigWithRetry(e);o.then(t=>{s[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&logger.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>logger.error(e)),t.push(o);const l=validateIndexedDB().then(e=>e?r.getId():void 0),[c,h]=await Promise.all([o,l]);findGtagScriptOnPage(i)||insertScriptTag(i,c.measurementId),a("js",new Date);const p=n?.config??{};return p[ORIGIN_KEY]="firebase",p.update=!0,null!=h&&(p[GA_FID_KEY]=h),a("config",c.measurementId,p),c.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AnalyticsService{constructor(e){this.app=e}_delete(){return delete initializationPromisesMap[this.app.options.appId],Promise.resolve()}}let initializationPromisesMap={},dynamicConfigPromisesList=[];const measurementIdToAppId={};let dataLayerName="dataLayer",gtagName="gtag",gtagCoreFunction,wrappedGtagFunction,globalInitDone=!1;function warnOnBrowserContextMismatch(){const e=[];if(isBrowserExtension()&&e.push("This is a browser extension environment."),areCookiesEnabled()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),s=ERROR_FACTORY.create("invalid-analytics-context",{errorInfo:t});logger.warn(s.message)}}function factory(e,t,s){warnOnBrowserContextMismatch();const r=e.options.appId;if(!r)throw ERROR_FACTORY.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ERROR_FACTORY.create("no-api-key");logger.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=initializationPromisesMap[r])throw ERROR_FACTORY.create("already-exists",{id:r});if(!globalInitDone){getOrCreateDataLayer(dataLayerName);const{wrappedGtag:e,gtagCore:t}=wrapOrCreateGtag(initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,dataLayerName,gtagName);wrappedGtagFunction=e,gtagCoreFunction=t,globalInitDone=!0}initializationPromisesMap[r]=_initializeAnalytics(e,dynamicConfigPromisesList,measurementIdToAppId,t,gtagCoreFunction,dataLayerName,s);return new AnalyticsService(e)}function logEvent(e,t,s,r){e=getModularInstance(e),logEvent$1(wrappedGtagFunction,initializationPromisesMap[e.app.options.appId],t,s,r).catch(e=>logger.error(e))}const name="@firebase/analytics",version="0.10.18";function registerAnalytics(){_registerComponent(new Component(ANALYTICS_TYPE,(e,{options:t})=>factory(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),_registerComponent(new Component("analytics-internal",function(e){try{const t=e.getProvider(ANALYTICS_TYPE).getImmediate();return{logEvent:(e,s,r)=>logEvent(t,e,s,r)}}catch(t){throw ERROR_FACTORY.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),registerVersion(name,version),registerVersion(name,version,"esm2020")}registerAnalytics();const firebaseConfig={apiKey:"AIzaSyAKOQ_7Q6pR6UvinMwtzrNdLgpBxZ-QTxk",authDomain:"apprafael-c7411.firebaseapp.com",projectId:"apprafael-c7411",storageBucket:"apprafael-c7411.firebasestorage.app",messagingSenderId:"389810659865",appId:"1:389810659865:web:3392a3c2fe3aef4710c088",measurementId:"G-0P0HZ6ST2P"},app=initializeApp(firebaseConfig);console.log(" Firebase config:",{apiKey:firebaseConfig.apiKey?" Configurada":" No configurada",authDomain:firebaseConfig.authDomain?" Configurada":" No configurada",projectId:firebaseConfig.projectId?" Configurada":" No configurada",environment:"development"});const db=getFirestore(app),auth=getAuth(app);getStorage(app);const COLLECTION_NAME$1="transactions",transactionService={async create(e){const t=new Date,s={...Object.fromEntries(Object.entries(e).filter(([e,t])=>void 0!==t)),date:Timestamp.fromDate(e.date),createdAt:Timestamp.fromDate(t),updatedAt:Timestamp.fromDate(t)};return(await addDoc(collection(db,COLLECTION_NAME$1),s)).id},async getByUser(e){const t=query(collection(db,COLLECTION_NAME$1),where("userId","==",e));return(await getDocs(t)).docs.map(e=>{const t=e.data();return{id:e.id,userId:t.userId,description:t.description,amount:t.amount,type:t.type,category:t.category,date:t.date.toDate(),paymentMethod:t.paymentMethod,installments:t.installments,installmentNumber:t.installmentNumber,totalInstallmentAmount:t.totalInstallmentAmount,installmentGroupId:t.installmentGroupId,isPaid:t.isPaid,notes:t.notes,recurring:t.recurring,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate()}}).sort((e,t)=>t.date.getTime()-e.date.getTime())},async getByDateRange(e,t,s){const r=query(collection(db,COLLECTION_NAME$1),where("userId","==",e),where("date",">=",Timestamp.fromDate(t)),where("date","<=",Timestamp.fromDate(s)),orderBy("date","desc"));return(await getDocs(r)).docs.map(e=>({id:e.id,...e.data(),date:e.data().date.toDate(),createdAt:e.data().createdAt.toDate(),updatedAt:e.data().updatedAt.toDate()}))},async getByCategory(e,t){const s=query(collection(db,COLLECTION_NAME$1),where("userId","==",e),where("category","==",t),orderBy("date","desc"));return(await getDocs(s)).docs.map(e=>({id:e.id,...e.data(),date:e.data().date.toDate(),createdAt:e.data().createdAt.toDate(),updatedAt:e.data().updatedAt.toDate()}))},async update(e,t){const s=doc(db,COLLECTION_NAME$1,e),r=Object.fromEntries(Object.entries(t).filter(([e,t])=>void 0!==t));console.log(" Firebase Service: Atualizando transao:",{id:e,updates:JSON.stringify(t),cleanUpdates:JSON.stringify(r)}),await updateDoc(s,{...r,updatedAt:Timestamp.fromDate(new Date)}),console.log(" Firebase Service: Transao atualizada no Firebase")},async delete(e){const t=doc(db,COLLECTION_NAME$1,e);await deleteDoc(t)},async getById(e){const t=doc(db,COLLECTION_NAME$1,e),s=await getDoc(t);return s.exists()?{id:s.id,...s.data(),date:s.data().date.toDate(),createdAt:s.data().createdAt.toDate(),updatedAt:s.data().updatedAt.toDate()}:null},async getRecent(e,t=10){const s=query(collection(db,COLLECTION_NAME$1),where("userId","==",e),orderBy("createdAt","desc"),limit(t));return(await getDocs(s)).docs.map(e=>({id:e.id,...e.data(),date:e.data().date.toDate(),createdAt:e.data().createdAt.toDate(),updatedAt:e.data().updatedAt.toDate()}))},async markAsPaid(e){const t=doc(db,COLLECTION_NAME$1,e);await updateDoc(t,{isPaid:!0,updatedAt:Timestamp.fromDate(new Date)})},async markAsUnpaid(e){const t=doc(db,COLLECTION_NAME$1,e);await updateDoc(t,{isPaid:!1,updatedAt:Timestamp.fromDate(new Date)})}},TransactionsContext=reactExports.createContext(void 0),TransactionsProvider=({children:e,userId:t})=>{const[s,r]=reactExports.useState([]),[a,i]=reactExports.useState(!1),[n,o]=reactExports.useState(null),l=React.useCallback(async()=>{if(t)try{i(!0),o(null);const e=await transactionService.getByUser(t);r(e)}catch(e){const t=e instanceof Error?e.message:"Erro desconhecido ao carregar transaes";o(t),r([])}finally{i(!1)}},[t]);reactExports.useEffect(()=>{t&&l()},[t]);const c={transactions:s,loading:a,error:n,createTransaction:async e=>{try{const t=await transactionService.create(e),s={...e,id:t,createdAt:new Date,updatedAt:new Date};return r(e=>[s,...e]),t}catch(t){throw o("Erro ao criar transao"),t}},updateTransaction:async(e,t)=>{try{r(s=>s.map(s=>s.id===e?{...s,...t,updatedAt:new Date}:s)),await transactionService.update(e,t)}catch(s){throw o("Erro ao atualizar transao"),s}},deleteTransaction:async e=>{try{r(t=>t.filter(t=>t.id!==e)),await transactionService.delete(e)}catch(t){try{await l()}catch(s){o("Erro ao deletar transao e recarregar dados")}throw t}},loadTransactions:l};return jsxRuntimeExports.jsx(TransactionsContext.Provider,{value:c,children:e})},useTransactionsContext=()=>{const e=reactExports.useContext(TransactionsContext);if(void 0===e)throw new Error("useTransactionsContext deve ser usado dentro de um TransactionsProvider");return e},DEFAULT_CATEGORIES=[{userId:"",name:"Alimentao",color:"#FF6B6B",icon:"",type:"despesa"},{userId:"",name:"Transporte",color:"#4ECDC4",icon:"",type:"despesa"},{userId:"",name:"Moradia",color:"#45B7D1",icon:"",type:"despesa"},{userId:"",name:"Sade",color:"#96CEB4",icon:"",type:"despesa"},{userId:"",name:"Lazer",color:"#FFEAA7",icon:"",type:"despesa"},{userId:"",name:"Educao",color:"#DDA0DD",icon:"",type:"despesa"},{userId:"",name:"Roupas",color:"#F8BBD9",icon:"",type:"despesa"},{userId:"",name:"Contas",color:"#FFB347",icon:"",type:"despesa"},{userId:"",name:"Outros",color:"#D3D3D3",icon:"",type:"despesa"},{userId:"",name:"Salrio",color:"#2ECC71",icon:"",type:"receita"},{userId:"",name:"Freelance",color:"#3498DB",icon:"",type:"receita"},{userId:"",name:"Investimentos",color:"#9B59B6",icon:"",type:"receita"},{userId:"",name:"Vendas",color:"#E67E22",icon:"",type:"receita"},{userId:"",name:"Outros",color:"#95A5A6",icon:"",type:"receita"}],initializeDefaultCategories=async(e,t)=>{console.log(" [DefaultCategories] Inicializando categorias padro para usurio:",e);try{if((await t.getByUser(e)).length>0)return void console.log(" [DefaultCategories] Usurio j possui categorias, pulando inicializao");console.log(" [DefaultCategories] Criando categorias padro...");const s=DEFAULT_CATEGORIES.map(s=>t.create({...s,userId:e}));await Promise.all(s),console.log(" [DefaultCategories] Categorias padro criadas com sucesso!")}catch(s){throw console.error(" [DefaultCategories] Erro ao inicializar categorias padro:",s),s}},COLLECTION_NAME="categories",categoryService={async create(e){try{const t=new Date;return(await addDoc(collection(db,COLLECTION_NAME),{...e,createdAt:Timestamp.fromDate(t),updatedAt:Timestamp.fromDate(t)})).id}catch(t){throw console.error(" Firebase Service: Erro ao criar categoria:",t),t}},async getByUser(e){const t=query(collection(db,COLLECTION_NAME),where("userId","==",e));return(await getDocs(t)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate(),updatedAt:e.data().updatedAt.toDate()})).sort((e,t)=>e.name.localeCompare(t.name))},async getByType(e,t){const s=query(collection(db,COLLECTION_NAME),where("userId","==",e),where("type","==",t));return(await getDocs(s)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate(),updatedAt:e.data().updatedAt.toDate()})).sort((e,t)=>e.name.localeCompare(t.name))},async update(e,t){const s=doc(db,COLLECTION_NAME,e);await updateDoc(s,{...t,updatedAt:Timestamp.fromDate(new Date)})},async delete(e){const t=doc(db,COLLECTION_NAME,e);await deleteDoc(t)},async getById(e){const t=doc(db,COLLECTION_NAME,e),s=await getDoc(t);return s.exists()?{id:s.id,...s.data(),createdAt:s.data().createdAt.toDate(),updatedAt:s.data().updatedAt.toDate()}:null}},AuthContext=reactExports.createContext(void 0),useAuth=()=>{const e=reactExports.useContext(AuthContext);if(void 0===e)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return e},AuthProvider=({children:e})=>{const[t,s]=reactExports.useState(null),[r,a]=reactExports.useState(!0);reactExports.useEffect(()=>onAuthStateChanged(auth,e=>{s(e),a(!1)}),[]);const i={user:t,loading:r,login:async(e,t)=>{try{await signInWithEmailAndPassword(auth,e,t)}catch(s){throw console.error("Erro no login:",s),s}},register:async(e,t)=>{try{const r=await createUserWithEmailAndPassword(auth,e,t);try{await initializeDefaultCategories(r.user.uid,categoryService)}catch(s){}}catch(r){throw console.error("Erro no registro:",r),r}},loginWithGoogle:async()=>{try{const t=new GoogleAuthProvider,s=await signInWithPopup(auth,t);if(s.user.metadata.creationTime===s.user.metadata.lastSignInTime)try{await initializeDefaultCategories(s.user.uid,categoryService)}catch(e){}}catch(t){throw console.error("Erro no login com Google:",t),t}},logout:async()=>{try{await signOut(auth)}catch(e){throw console.error("Erro no logout:",e),e}}};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:i,children:e})},SummaryCards=()=>{const{user:e}=useAuth(),{transactions:t,loading:s,error:r,createTransaction:a}=useTransactionsContext();if(s)return jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border animate-pulse",children:[jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),jsxRuntimeExports.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),jsxRuntimeExports.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]},e))});if(r)return jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar dados"}),jsxRuntimeExports.jsx("p",{className:"text-red-600",children:r}),jsxRuntimeExports.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Tentar novamente"})]});const i=reactExports.useMemo(()=>0===t.length?{currentBalance:0,currentMonthRevenue:0,currentMonthExpense:0,previousMonthRevenue:0,previousMonthExpense:0,revenuePercentage:0,expensePercentage:0,balancePercentage:0}:(e=>{const t=new Date,s=t.getMonth(),r=t.getFullYear(),a=0===s?11:s-1,i=0===s?r-1:r,n=e.filter(e=>{const t=new Date(e.date);return t.getMonth()===s&&t.getFullYear()===r}),o=e.filter(e=>{const t=new Date(e.date);return t.getMonth()===a&&t.getFullYear()===i}),l=n.filter(e=>"receita"===e.type&&!e.isPaid).reduce((e,t)=>e+t.amount,0),c=n.filter(e=>"despesa"===e.type&&!e.isPaid).reduce((e,t)=>e+t.amount,0),h=o.filter(e=>"receita"===e.type).reduce((e,t)=>e+t.amount,0),p=o.filter(e=>"despesa"===e.type).reduce((e,t)=>e+t.amount,0),d=e.filter(e=>!e.isPaid),m=h-p;return{currentBalance:d.filter(e=>"receita"===e.type).reduce((e,t)=>e+t.amount,0)-d.filter(e=>"despesa"===e.type).reduce((e,t)=>e+t.amount,0),currentMonthRevenue:l,currentMonthExpense:c,previousMonthRevenue:h,previousMonthExpense:p,revenuePercentage:h>0?(l-h)/h*100:0,expensePercentage:p>0?(c-p)/p*100:0,balancePercentage:0!==m?(l-c-m)/Math.abs(m)*100:0}})(t),[t]),n=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),o=e=>`${e>=0?"+":""}${e.toFixed(1)}%`;return s?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[1,2,3].map(e=>jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border animate-pulse",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"})}),jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),jsxRuntimeExports.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 rounded"})]},e))}):r?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:jsxRuntimeExports.jsx("div",{className:"col-span-full bg-red-50 border border-red-200 rounded-lg p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-red-600 text-xl mr-3",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Erro ao carregar dados"}),jsxRuntimeExports.jsx("p",{className:"text-red-600 mt-1",children:r})]})]})})}):jsxRuntimeExports.jsxs("div",{className:"mb-1.5 lg:mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"lg:hidden space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border",children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-1",children:"Saldo Atual"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-gray-900",children:n(i.currentBalance)})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-1",children:"Receitas"}),jsxRuntimeExports.jsx("p",{className:"text-base font-bold text-gray-900",children:n(i.currentMonthRevenue)})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-xs font-medium text-gray-600 mb-1",children:"Despesas"}),jsxRuntimeExports.jsx("p",{className:"text-base font-bold text-gray-900",children:n(i.currentMonthExpense)})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"hidden lg:grid grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-blue-600 text-xl",children:""})})}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Saldo Atual"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:n(i.currentBalance)}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium "+(i.balancePercentage>=0?"text-green-600":"text-red-600"),children:o(i.balancePercentage)}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"desde o ms passado"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-green-600 text-xl",children:""})})}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Receitas"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:n(i.currentMonthRevenue)}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium "+(i.revenuePercentage>=0?"text-green-600":"text-red-600"),children:o(i.revenuePercentage)}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"desde o ms passado"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-red-600 text-xl",children:""})})}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Despesas"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:n(i.currentMonthExpense)}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium "+(i.expensePercentage<=0?"text-green-600":"text-red-600"),children:o(i.expensePercentage)}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"desde o ms passado"})]})]})]})]})},useCategories=e=>{const[t,s]=reactExports.useState([]),[r,a]=reactExports.useState(!0),[i,n]=reactExports.useState(null),o=async()=>{try{a(!0),n(null);const t=await categoryService.getByUser(e);s(t)}catch(t){n("Erro ao carregar categorias"),console.error(" Hook useCategories: Erro ao carregar categorias:",t)}finally{a(!1)}};return reactExports.useEffect(()=>{e&&o()},[e]),{categories:t,loading:r,error:i,createCategory:async e=>{try{n(null);const t=await categoryService.create(e);return await o(),t}catch(t){throw n("Erro ao criar categoria"),console.error(" Hook useCategories: Erro ao criar categoria:",t),t}},updateCategory:async(e,t)=>{try{n(null),await categoryService.update(e,t),await o()}catch(s){throw n("Erro ao atualizar categoria"),console.error("Erro ao atualizar categoria:",s),s}},deleteCategory:async e=>{try{n(null),await categoryService.delete(e),await o()}catch(t){throw n("Erro ao deletar categoria"),console.error("Erro ao deletar categoria:",t),t}},loadCategories:o,loadCategoriesByType:async t=>{try{a(!0),n(null);const r=await categoryService.getByType(e,t);s(r)}catch(r){n("Erro ao carregar categorias por tipo"),console.error("Erro ao carregar categorias por tipo:",r)}finally{a(!1)}}}},ExpenseChart=()=>{const[e,t]=reactExports.useState("receita-vs-despesa"),[s,r]=reactExports.useState(null),[a,i]=reactExports.useState(null),{user:n}=useAuth(),{transactions:o,loading:l,error:c}=useTransactionsContext(),{categories:h}=useCategories(n?.uid||"test-user-123"),p=reactExports.useMemo(()=>{if(!o||0===o.length)return[];const t=o.filter(t=>!(t.installmentNumber&&!0===t.isPaid)&&("receita-vs-despesa"===e||t.type===e));if(0===t.length)return[];if("receita-vs-despesa"===e){const e=t.reduce((e,t)=>{const s="receita"===t.type?"Receitas":"Despesas";return e[s]||(e[s]=0),e[s]+=t.amount,e},{}),s=Object.values(e).reduce((e,t)=>e+t,0);return Object.entries(e).map(([e,t])=>({name:e,value:s>0?t/s*100:0,color:"Receitas"===e?"rgba(34, 197, 94, 0.6)":"rgba(239, 68, 68, 0.6)",amount:`R$ ${t.toFixed(2).replace(".",",")}`,totalAmount:t})).sort((e,t)=>t.totalAmount-e.totalAmount)}const s=t.reduce((e,t)=>{const s=t.category;return e[s]||(e[s]=0),e[s]+=t.amount,e},{}),r=Object.values(s).reduce((e,t)=>e+t,0);return Object.entries(s).map(([e,t])=>{const s=h.find(t=>t.name===e);return{name:e,value:r>0?t/r*100:0,color:s?.color||"#6b7280",amount:`R$ ${t.toFixed(2).replace(".",",")}`,totalAmount:t}}).sort((e,t)=>t.totalAmount-e.totalAmount)},[o,e,h]);return l?jsxRuntimeExports.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Carregando dados..."})]})})}):c?jsxRuntimeExports.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-red-600",children:[jsxRuntimeExports.jsx("p",{children:"Erro ao carregar dados"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1",children:c})]})})}):jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 lg:p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 lg:mb-6 space-y-3 sm:space-y-0",children:[jsxRuntimeExports.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"receita-vs-despesa"===e?"Receita vs Despesa":"despesa"===e?"Despesas":"Receitas"}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>t("receita-vs-despesa"),className:"px-2 lg:px-3 py-1 lg:py-1.5 rounded-md text-xs lg:text-sm font-medium transition-all duration-200 "+("receita-vs-despesa"===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),style:{backgroundColor:"receita-vs-despesa"===e?"rgba(59, 130, 246, 0.6)":void 0,color:"receita-vs-despesa"===e?"white":void 0},children:" Receita vs Despesa"}),jsxRuntimeExports.jsx("button",{onClick:()=>t("receita"),className:"px-2 lg:px-3 py-1 lg:py-1.5 rounded-md text-xs lg:text-sm font-medium transition-all duration-200 "+("receita"===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),style:{backgroundColor:"receita"===e?"rgba(34, 197, 94, 0.6)":void 0,color:"receita"===e?"white":void 0},children:" Receita"}),jsxRuntimeExports.jsx("button",{onClick:()=>t("despesa"),className:"px-2 lg:px-3 py-1 lg:py-1.5 rounded-md text-xs lg:text-sm font-medium transition-all duration-200 "+("despesa"===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),style:{backgroundColor:"despesa"===e?"rgba(239, 68, 68, 0.6)":void 0,color:"despesa"===e?"white":void 0},children:" Despesa"})]})})]}),0===p.length?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-500",children:[jsxRuntimeExports.jsx("p",{children:"receita-vs-despesa"===e?"Nenhuma transao encontrada":"despesa"===e?"Nenhuma despesa encontrada":"Nenhuma receita encontrada"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1",children:"Adicione transaes para ver o grfico"})]})}):jsxRuntimeExports.jsx("div",{className:"relative h-96",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsxs(Pie,{data:p,cx:"50%",cy:"50%",innerRadius:80,outerRadius:140,paddingAngle:2,dataKey:"value",stroke:"#ffffff",strokeWidth:2,onMouseEnter:e=>r(e),onMouseLeave:()=>r(null),children:[p.map((e,t)=>{const s=a===e.name;return jsxRuntimeExports.jsx(Cell,{fill:e.color,style:{filter:s?"brightness(1.3) drop-shadow(0 0 12px rgba(0,0,0,0.4)) saturate(1.2)":"none",transition:"all 0.3s ease",transform:s?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${t}`)}),jsxRuntimeExports.jsx(Label,{position:"center",content:()=>{if(s)return jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("text",{x:"50%",y:"35%",textAnchor:"middle",dominantBaseline:"central",fontSize:"14",fontWeight:"bold",fill:"#1f2937",children:s.name}),jsxRuntimeExports.jsx("text",{x:"50%",y:"45%",textAnchor:"middle",dominantBaseline:"central",fontSize:"16",fontWeight:"bold",fill:"#1f2937",children:s.amount}),jsxRuntimeExports.jsxs("text",{x:"50%",y:"55%",textAnchor:"middle",dominantBaseline:"central",fontSize:"12",fill:"#6b7280",children:[s.value.toFixed(1).replace(".",","),"%"]})]});{const t=p.reduce((e,t)=>e+t.totalAmount,0);return jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("text",{x:"50%",y:"35%",textAnchor:"middle",dominantBaseline:"central",fontSize:"14",fontWeight:"bold",fill:"#1f2937",children:"receita-vs-despesa"===e?"Total Geral":"despesa"===e?"Total Despesas":"Total Receitas"}),jsxRuntimeExports.jsxs("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"central",fontSize:"16",fontWeight:"bold",fill:"#1f2937",children:["R$ ",t.toFixed(2).replace(".",",")]})]})}}})]}),jsxRuntimeExports.jsx(Legend,{verticalAlign:"bottom",height:60,iconType:"circle",iconSize:12,wrapperStyle:{fontSize:"14px",lineHeight:"20px",paddingTop:"20px"},formatter:(e,t)=>jsxRuntimeExports.jsxs("span",{className:"text-gray-700 text-sm font-medium cursor-pointer hover:text-gray-900 transition-colors",onMouseEnter:()=>{r(t.payload),i(t.payload.name)},onMouseLeave:()=>{r(null),i(null)},children:[e," ",Math.round(t.payload.value),"%"]})})]})})})]})};var noop={value:()=>{}};function dispatch(){for(var e,t=0,s=arguments.length,r={};t<s;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Dispatch(r)}function Dispatch(e){this._=e}function parseTypenames$1(e,t){return e.trim().split(/^|\s+/).map(function(e){var s="",r=e.indexOf(".");if(r>=0&&(s=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:s}})}function get$1(e,t){for(var s,r=0,a=e.length;r<a;++r)if((s=e[r]).name===t)return s.value}function set$1(e,t,s){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=noop,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=s&&e.push({name:t,value:s}),e}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(e,t){var s,r=this._,a=parseTypenames$1(e+"",r),i=-1,n=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<n;)if(s=(e=a[i]).type)r[s]=set$1(r[s],e.name,t);else if(null==t)for(s in r)r[s]=set$1(r[s],e.name,null);return this}for(;++i<n;)if((s=(e=a[i]).type)&&(s=get$1(r[s],e.name)))return s},copy:function(){var e={},t=this._;for(var s in t)e[s]=t[s].slice();return new Dispatch(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var s,r,a=new Array(s),i=0;i<s;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,s=(r=this._[e]).length;i<s;++i)r[i].value.apply(t,a)},apply:function(e,t,s){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,s)}};var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(e){var t=e+="",s=t.indexOf(":");return s>=0&&"xmlns"!==(t=e.slice(0,s))&&(e=e.slice(s+1)),namespaces.hasOwnProperty(t)?{space:namespaces[t],local:e}:e}function creatorInherit(e){return function(){var t=this.ownerDocument,s=this.namespaceURI;return s===xhtml&&t.documentElement.namespaceURI===xhtml?t.createElement(e):t.createElementNS(s,e)}}function creatorFixed(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function creator(e){var t=namespace(e);return(t.local?creatorFixed:creatorInherit)(t)}function none(){}function selector(e){return null==e?none:function(){return this.querySelector(e)}}function selection_select(e){"function"!=typeof e&&(e=selector(e));for(var t=this._groups,s=t.length,r=new Array(s),a=0;a<s;++a)for(var i,n,o=t[a],l=o.length,c=r[a]=new Array(l),h=0;h<l;++h)(i=o[h])&&(n=e.call(i,i.__data__,h,o))&&("__data__"in i&&(n.__data__=i.__data__),c[h]=n);return new Selection$1(r,this._parents)}function array(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function empty(){return[]}function selectorAll(e){return null==e?empty:function(){return this.querySelectorAll(e)}}function arrayAll(e){return function(){return array(e.apply(this,arguments))}}function selection_selectAll(e){e="function"==typeof e?arrayAll(e):selectorAll(e);for(var t=this._groups,s=t.length,r=[],a=[],i=0;i<s;++i)for(var n,o=t[i],l=o.length,c=0;c<l;++c)(n=o[c])&&(r.push(e.call(n,n.__data__,c,o)),a.push(n));return new Selection$1(r,a)}function matcher(e){return function(){return this.matches(e)}}function childMatcher(e){return function(t){return t.matches(e)}}var find=Array.prototype.find;function childFind(e){return function(){return find.call(this.children,e)}}function childFirst(){return this.firstElementChild}function selection_selectChild(e){return this.select(null==e?childFirst:childFind("function"==typeof e?e:childMatcher(e)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(e){return function(){return filter.call(this.children,e)}}function selection_selectChildren(e){return this.selectAll(null==e?children:childrenFilter("function"==typeof e?e:childMatcher(e)))}function selection_filter(e){"function"!=typeof e&&(e=matcher(e));for(var t=this._groups,s=t.length,r=new Array(s),a=0;a<s;++a)for(var i,n=t[a],o=n.length,l=r[a]=[],c=0;c<o;++c)(i=n[c])&&e.call(i,i.__data__,c,n)&&l.push(i);return new Selection$1(r,this._parents)}function sparse(e){return new Array(e.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function constant(e){return function(){return e}}function bindIndex(e,t,s,r,a,i){for(var n,o=0,l=t.length,c=i.length;o<c;++o)(n=t[o])?(n.__data__=i[o],r[o]=n):s[o]=new EnterNode(e,i[o]);for(;o<l;++o)(n=t[o])&&(a[o]=n)}function bindKey(e,t,s,r,a,i,n){var o,l,c,h=new Map,p=t.length,d=i.length,m=new Array(p);for(o=0;o<p;++o)(l=t[o])&&(m[o]=c=n.call(l,l.__data__,o,t)+"",h.has(c)?a[o]=l:h.set(c,l));for(o=0;o<d;++o)c=n.call(e,i[o],o,i)+"",(l=h.get(c))?(r[o]=l,l.__data__=i[o],h.delete(c)):s[o]=new EnterNode(e,i[o]);for(o=0;o<p;++o)(l=t[o])&&h.get(m[o])===l&&(a[o]=l)}function datum(e){return e.__data__}function selection_data(e,t){if(!arguments.length)return Array.from(this,datum);var s=t?bindKey:bindIndex,r=this._parents,a=this._groups;"function"!=typeof e&&(e=constant(e));for(var i=a.length,n=new Array(i),o=new Array(i),l=new Array(i),c=0;c<i;++c){var h=r[c],p=a[c],d=p.length,m=arraylike(e.call(h,h&&h.__data__,c,r)),u=m.length,x=o[c]=new Array(u),f=n[c]=new Array(u);s(h,p,x,f,l[c]=new Array(d),m,t);for(var g,y,v=0,b=0;v<u;++v)if(g=x[v]){for(v>=b&&(b=v+1);!(y=f[b])&&++b<u;);g._next=y||null}}return(n=new Selection$1(n,r))._enter=o,n._exit=l,n}function arraylike(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(e,t,s){var r=this.enter(),a=this,i=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==s?i.remove():s(i),r&&a?r.merge(a).order():a}function selection_merge(e){for(var t=e.selection?e.selection():e,s=this._groups,r=t._groups,a=s.length,i=r.length,n=Math.min(a,i),o=new Array(a),l=0;l<n;++l)for(var c,h=s[l],p=r[l],d=h.length,m=o[l]=new Array(d),u=0;u<d;++u)(c=h[u]||p[u])&&(m[u]=c);for(;l<a;++l)o[l]=s[l];return new Selection$1(o,this._parents)}function selection_order(){for(var e=this._groups,t=-1,s=e.length;++t<s;)for(var r,a=e[t],i=a.length-1,n=a[i];--i>=0;)(r=a[i])&&(n&&4^r.compareDocumentPosition(n)&&n.parentNode.insertBefore(r,n),n=r);return this}function selection_sort(e){function t(t,s){return t&&s?e(t.__data__,s.__data__):!t-!s}e||(e=ascending);for(var s=this._groups,r=s.length,a=new Array(r),i=0;i<r;++i){for(var n,o=s[i],l=o.length,c=a[i]=new Array(l),h=0;h<l;++h)(n=o[h])&&(c[h]=n);c.sort(t)}return new Selection$1(a,this._parents).order()}function ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function selection_call(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var n=r[a];if(n)return n}return null}function selection_size(){let e=0;for(const t of this)++e;return e}function selection_empty(){return!this.node()}function selection_each(e){for(var t=this._groups,s=0,r=t.length;s<r;++s)for(var a,i=t[s],n=0,o=i.length;n<o;++n)(a=i[n])&&e.call(a,a.__data__,n,i);return this}function attrRemove$1(e){return function(){this.removeAttribute(e)}}function attrRemoveNS$1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant$1(e,t){return function(){this.setAttribute(e,t)}}function attrConstantNS$1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function attrFunction$1(e,t){return function(){var s=t.apply(this,arguments);null==s?this.removeAttribute(e):this.setAttribute(e,s)}}function attrFunctionNS$1(e,t){return function(){var s=t.apply(this,arguments);null==s?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,s)}}function selection_attr(e,t){var s=namespace(e);if(arguments.length<2){var r=this.node();return s.local?r.getAttributeNS(s.space,s.local):r.getAttribute(s)}return this.each((null==t?s.local?attrRemoveNS$1:attrRemove$1:"function"==typeof t?s.local?attrFunctionNS$1:attrFunction$1:s.local?attrConstantNS$1:attrConstant$1)(s,t))}function defaultView(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function styleRemove$1(e){return function(){this.style.removeProperty(e)}}function styleConstant$1(e,t,s){return function(){this.style.setProperty(e,t,s)}}function styleFunction$1(e,t,s){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,s)}}function selection_style(e,t,s){return arguments.length>1?this.each((null==t?styleRemove$1:"function"==typeof t?styleFunction$1:styleConstant$1)(e,t,null==s?"":s)):styleValue(this.node(),e)}function styleValue(e,t){return e.style.getPropertyValue(t)||defaultView(e).getComputedStyle(e,null).getPropertyValue(t)}function propertyRemove(e){return function(){delete this[e]}}function propertyConstant(e,t){return function(){this[e]=t}}function propertyFunction(e,t){return function(){var s=t.apply(this,arguments);null==s?delete this[e]:this[e]=s}}function selection_property(e,t){return arguments.length>1?this.each((null==t?propertyRemove:"function"==typeof t?propertyFunction:propertyConstant)(e,t)):this.node()[e]}function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(e){this._node=e,this._names=classArray(e.getAttribute("class")||"")}function classedAdd(e,t){for(var s=classList(e),r=-1,a=t.length;++r<a;)s.add(t[r])}function classedRemove(e,t){for(var s=classList(e),r=-1,a=t.length;++r<a;)s.remove(t[r])}function classedTrue(e){return function(){classedAdd(this,e)}}function classedFalse(e){return function(){classedRemove(this,e)}}function classedFunction(e,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,e)}}function selection_classed(e,t){var s=classArray(e+"");if(arguments.length<2){for(var r=classList(this.node()),a=-1,i=s.length;++a<i;)if(!r.contains(s[a]))return!1;return!0}return this.each(("function"==typeof t?classedFunction:t?classedTrue:classedFalse)(s,t))}function textRemove(){this.textContent=""}function textConstant$1(e){return function(){this.textContent=e}}function textFunction$1(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function selection_text(e){return arguments.length?this.each(null==e?textRemove:("function"==typeof e?textFunction$1:textConstant$1)(e)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(e){return function(){this.innerHTML=e}}function htmlFunction(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function selection_html(e){return arguments.length?this.each(null==e?htmlRemove:("function"==typeof e?htmlFunction:htmlConstant)(e)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(e){var t="function"==typeof e?e:creator(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function constantNull(){return null}function selection_insert(e,t){var s="function"==typeof e?e:creator(e),r=null==t?constantNull:"function"==typeof t?t:selector(t);return this.select(function(){return this.insertBefore(s.apply(this,arguments),r.apply(this,arguments)||null)})}function remove(){var e=this.parentNode;e&&e.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_cloneDeep(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_clone(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)}function selection_datum(e){return arguments.length?this.property("__data__",e):this.node().__data__}function contextListener(e){return function(t){e.call(this,t,this.__data__)}}function parseTypenames(e){return e.trim().split(/^|\s+/).map(function(e){var t="",s=e.indexOf(".");return s>=0&&(t=e.slice(s+1),e=e.slice(0,s)),{type:e,name:t}})}function onRemove(e){return function(){var t=this.__on;if(t){for(var s,r=0,a=-1,i=t.length;r<i;++r)s=t[r],e.type&&s.type!==e.type||s.name!==e.name?t[++a]=s:this.removeEventListener(s.type,s.listener,s.options);++a?t.length=a:delete this.__on}}}function onAdd(e,t,s){return function(){var r,a=this.__on,i=contextListener(t);if(a)for(var n=0,o=a.length;n<o;++n)if((r=a[n]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=s),void(r.value=t);this.addEventListener(e.type,i,s),r={type:e.type,name:e.name,value:t,listener:i,options:s},a?a.push(r):this.__on=[r]}}function selection_on(e,t,s){var r,a,i=parseTypenames(e+""),n=i.length;if(!(arguments.length<2)){for(o=t?onAdd:onRemove,r=0;r<n;++r)this.each(o(i[r],t,s));return this}var o=this.node().__on;if(o)for(var l,c=0,h=o.length;c<h;++c)for(r=0,l=o[c];r<n;++r)if((a=i[r]).type===l.type&&a.name===l.name)return l.value}function dispatchEvent(e,t,s){var r=defaultView(e),a=r.CustomEvent;"function"==typeof a?a=new a(t,s):(a=r.document.createEvent("Event"),s?(a.initEvent(t,s.bubbles,s.cancelable),a.detail=s.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function dispatchConstant(e,t){return function(){return dispatchEvent(this,e,t)}}function dispatchFunction(e,t){return function(){return dispatchEvent(this,e,t.apply(this,arguments))}}function selection_dispatch(e,t){return this.each(("function"==typeof t?dispatchFunction:dispatchConstant)(e,t))}function*selection_iterator(){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var r,a=e[t],i=0,n=a.length;i<n;++i)(r=a[i])&&(yield r)}EnterNode.prototype={constructor:EnterNode,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},ClassList.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var root=[null];function Selection$1(e,t){this._groups=e,this._parents=t}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(e,t,s){var r=new Timer;return r.restart(e,t,s),r}function timerFlush(){now(),++frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(void 0,e),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var e=clock.now(),t=e-clockLast;t>pokeDelay&&(clockSkew-=t,clockLast=e)}function nap(){for(var e,t,s=taskHead,r=1/0;s;)s._call?(r>s._time&&(r=s._time),e=s,s=s._next):(t=s._next,s._next=null,s=e?e._next=t:taskHead=t);taskTail=e,sleep(r)}function sleep(e){frame||(timeout$1&&(timeout$1=clearTimeout(timeout$1)),e-clockNow>24?(e<1/0&&(timeout$1=setTimeout(wake,e-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}function timeout(e,t,s){var r=new Timer;return t=null==t?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,s),r}Timer.prototype=timer.prototype={constructor:Timer,restart:function(e,t,s){if("function"!=typeof e)throw new TypeError("callback is not a function");s=(null==s?now():+s)+(null==t?0:+t),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=e,this._time=s,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(e,t,s,r,a,i){var n=e.__transition;if(n){if(s in n)return}else e.__transition={};create(e,s,{name:t,index:r,group:a,on:emptyOn,tween:emptyTween,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:CREATED})}function init(e,t){var s=get(e,t);if(s.state>CREATED)throw new Error("too late; already scheduled");return s}function set(e,t){var s=get(e,t);if(s.state>STARTED)throw new Error("too late; already running");return s}function get(e,t){var s=e.__transition;if(!s||!(s=s[t]))throw new Error("transition not found");return s}function create(e,t,s){var r,a=e.__transition;function i(l){var c,h,p,d;if(s.state!==SCHEDULED)return o();for(c in a)if((d=a[c]).name===s.name){if(d.state===STARTED)return timeout(i);d.state===RUNNING?(d.state=ENDED,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete a[c]):+c<t&&(d.state=ENDED,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete a[c])}if(timeout(function(){s.state===STARTED&&(s.state=RUNNING,s.timer.restart(n,s.delay,s.time),n(l))}),s.state=STARTING,s.on.call("start",e,e.__data__,s.index,s.group),s.state===STARTING){for(s.state=STARTED,r=new Array(p=s.tween.length),c=0,h=-1;c<p;++c)(d=s.tween[c].value.call(e,e.__data__,s.index,s.group))&&(r[++h]=d);r.length=h+1}}function n(t){for(var a=t<s.duration?s.ease.call(null,t/s.duration):(s.timer.restart(o),s.state=ENDING,1),i=-1,n=r.length;++i<n;)r[i].call(e,a);s.state===ENDING&&(s.on.call("end",e,e.__data__,s.index,s.group),o())}function o(){for(var r in s.state=ENDED,s.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=s,s.timer=timer(function(e){s.state=SCHEDULED,s.timer.restart(i,s.delay,s.time),s.delay<=e&&i(e-s.delay)},0,s.time)}function interrupt(e,t){var s,r,a,i=e.__transition,n=!0;if(i){for(a in t=null==t?null:t+"",i)(s=i[a]).name===t?(r=s.state>STARTING&&s.state<ENDING,s.state=ENDED,s.timer.stop(),s.on.call(r?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete i[a]):n=!1;n&&delete e.__transition}}function selection_interrupt(e){return this.each(function(){interrupt(this,e)})}function tweenRemove(e,t){var s,r;return function(){var a=set(this,e),i=a.tween;if(i!==s)for(var n=0,o=(r=s=i).length;n<o;++n)if(r[n].name===t){(r=r.slice()).splice(n,1);break}a.tween=r}}function tweenFunction(e,t,s){var r,a;if("function"!=typeof s)throw new Error;return function(){var i=set(this,e),n=i.tween;if(n!==r){a=(r=n).slice();for(var o={name:t,value:s},l=0,c=a.length;l<c;++l)if(a[l].name===t){a[l]=o;break}l===c&&a.push(o)}i.tween=a}}function transition_tween(e,t){var s=this._id;if(e+="",arguments.length<2){for(var r,a=get(this.node(),s).tween,i=0,n=a.length;i<n;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?tweenRemove:tweenFunction)(s,e,t))}function tweenValue(e,t,s){var r=e._id;return e.each(function(){var e=set(this,r);(e.value||(e.value={}))[t]=s.apply(this,arguments)}),function(e){return get(e,r).value[t]}}function interpolate(e,t){var s;return("number"==typeof t?interpolateNumber:t instanceof color?interpolateRgb:(s=color(t))?(t=s,interpolateRgb):interpolateString)(e,t)}function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t,s){var r,a,i=s+"";return function(){var n=this.getAttribute(e);return n===i?null:n===r?a:a=t(r=n,s)}}function attrConstantNS(e,t,s){var r,a,i=s+"";return function(){var n=this.getAttributeNS(e.space,e.local);return n===i?null:n===r?a:a=t(r=n,s)}}function attrFunction(e,t,s){var r,a,i;return function(){var n,o,l=s(this);if(null!=l)return(n=this.getAttribute(e))===(o=l+"")?null:n===r&&o===a?i:(a=o,i=t(r=n,l));this.removeAttribute(e)}}function attrFunctionNS(e,t,s){var r,a,i;return function(){var n,o,l=s(this);if(null!=l)return(n=this.getAttributeNS(e.space,e.local))===(o=l+"")?null:n===r&&o===a?i:(a=o,i=t(r=n,l));this.removeAttributeNS(e.space,e.local)}}function transition_attr(e,t){var s=namespace(e),r="transform"===s?interpolateTransformSvg:interpolate;return this.attrTween(e,"function"==typeof t?(s.local?attrFunctionNS:attrFunction)(s,r,tweenValue(this,"attr."+e,t)):null==t?(s.local?attrRemoveNS:attrRemove)(s):(s.local?attrConstantNS:attrConstant)(s,r,t))}function attrInterpolate(e,t){return function(s){this.setAttribute(e,t.call(this,s))}}function attrInterpolateNS(e,t){return function(s){this.setAttributeNS(e.space,e.local,t.call(this,s))}}function attrTweenNS(e,t){var s,r;function a(){var a=t.apply(this,arguments);return a!==r&&(s=(r=a)&&attrInterpolateNS(e,a)),s}return a._value=t,a}function attrTween(e,t){var s,r;function a(){var a=t.apply(this,arguments);return a!==r&&(s=(r=a)&&attrInterpolate(e,a)),s}return a._value=t,a}function transition_attrTween(e,t){var s="attr."+e;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==t)return this.tween(s,null);if("function"!=typeof t)throw new Error;var r=namespace(e);return this.tween(s,(r.local?attrTweenNS:attrTween)(r,t))}function delayFunction(e,t){return function(){init(this,e).delay=+t.apply(this,arguments)}}function delayConstant(e,t){return t=+t,function(){init(this,e).delay=t}}function transition_delay(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?delayFunction:delayConstant)(t,e)):get(this.node(),t).delay}function durationFunction(e,t){return function(){set(this,e).duration=+t.apply(this,arguments)}}function durationConstant(e,t){return t=+t,function(){set(this,e).duration=t}}function transition_duration(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?durationFunction:durationConstant)(t,e)):get(this.node(),t).duration}function easeConstant(e,t){if("function"!=typeof t)throw new Error;return function(){set(this,e).ease=t}}function transition_ease(e){var t=this._id;return arguments.length?this.each(easeConstant(t,e)):get(this.node(),t).ease}function easeVarying(e,t){return function(){var s=t.apply(this,arguments);if("function"!=typeof s)throw new Error;set(this,e).ease=s}}function transition_easeVarying(e){if("function"!=typeof e)throw new Error;return this.each(easeVarying(this._id,e))}function transition_filter(e){"function"!=typeof e&&(e=matcher(e));for(var t=this._groups,s=t.length,r=new Array(s),a=0;a<s;++a)for(var i,n=t[a],o=n.length,l=r[a]=[],c=0;c<o;++c)(i=n[c])&&e.call(i,i.__data__,c,n)&&l.push(i);return new Transition(r,this._parents,this._name,this._id)}function transition_merge(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,s=e._groups,r=t.length,a=s.length,i=Math.min(r,a),n=new Array(r),o=0;o<i;++o)for(var l,c=t[o],h=s[o],p=c.length,d=n[o]=new Array(p),m=0;m<p;++m)(l=c[m]||h[m])&&(d[m]=l);for(;o<r;++o)n[o]=t[o];return new Transition(n,this._parents,this._name,this._id)}function start(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}function onFunction(e,t,s){var r,a,i=start(t)?init:set;return function(){var n=i(this,e),o=n.on;o!==r&&(a=(r=o).copy()).on(t,s),n.on=a}}function transition_on(e,t){var s=this._id;return arguments.length<2?get(this.node(),s).on.on(e):this.each(onFunction(s,e,t))}function removeFunction(e){return function(){var t=this.parentNode;for(var s in this.__transition)if(+s!==e)return;t&&t.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(e){var t=this._name,s=this._id;"function"!=typeof e&&(e=selector(e));for(var r=this._groups,a=r.length,i=new Array(a),n=0;n<a;++n)for(var o,l,c=r[n],h=c.length,p=i[n]=new Array(h),d=0;d<h;++d)(o=c[d])&&(l=e.call(o,o.__data__,d,c))&&("__data__"in o&&(l.__data__=o.__data__),p[d]=l,schedule(p[d],t,s,d,p,get(o,s)));return new Transition(i,this._parents,t,s)}function transition_selectAll(e){var t=this._name,s=this._id;"function"!=typeof e&&(e=selectorAll(e));for(var r=this._groups,a=r.length,i=[],n=[],o=0;o<a;++o)for(var l,c=r[o],h=c.length,p=0;p<h;++p)if(l=c[p]){for(var d,m=e.call(l,l.__data__,p,c),u=get(l,s),x=0,f=m.length;x<f;++x)(d=m[x])&&schedule(d,t,s,x,m,u);i.push(m),n.push(l)}return new Transition(i,n,t,s)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(e,t){var s,r,a;return function(){var i=styleValue(this,e),n=(this.style.removeProperty(e),styleValue(this,e));return i===n?null:i===s&&n===r?a:a=t(s=i,r=n)}}function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,t,s){var r,a,i=s+"";return function(){var n=styleValue(this,e);return n===i?null:n===r?a:a=t(r=n,s)}}function styleFunction(e,t,s){var r,a,i;return function(){var n=styleValue(this,e),o=s(this),l=o+"";return null==o&&(this.style.removeProperty(e),l=o=styleValue(this,e)),n===l?null:n===r&&l===a?i:(a=l,i=t(r=n,o))}}function styleMaybeRemove(e,t){var s,r,a,i,n="style."+t,o="end."+n;return function(){var l=set(this,e),c=l.on,h=null==l.value[n]?i||(i=styleRemove(t)):void 0;c===s&&a===h||(r=(s=c).copy()).on(o,a=h),l.on=r}}function transition_style(e,t,s){var r="transform"==(e+="")?interpolateTransformCss:interpolate;return null==t?this.styleTween(e,styleNull(e,r)).on("end.style."+e,styleRemove(e)):"function"==typeof t?this.styleTween(e,styleFunction(e,r,tweenValue(this,"style."+e,t))).each(styleMaybeRemove(this._id,e)):this.styleTween(e,styleConstant(e,r,t),s).on("end.style."+e,null)}function styleInterpolate(e,t,s){return function(r){this.style.setProperty(e,t.call(this,r),s)}}function styleTween(e,t,s){var r,a;function i(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&styleInterpolate(e,i,s)),r}return i._value=t,i}function transition_styleTween(e,t,s){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,styleTween(e,t,null==s?"":s))}function textConstant(e){return function(){this.textContent=e}}function textFunction(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function transition_text(e){return this.tween("text","function"==typeof e?textFunction(tweenValue(this,"text",e)):textConstant(null==e?"":e+""))}function textInterpolate(e){return function(t){this.textContent=e.call(this,t)}}function textTween(e){var t,s;function r(){var r=e.apply(this,arguments);return r!==s&&(t=(s=r)&&textInterpolate(r)),t}return r._value=e,r}function transition_textTween(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,textTween(e))}function transition_transition(){for(var e=this._name,t=this._id,s=newId(),r=this._groups,a=r.length,i=0;i<a;++i)for(var n,o=r[i],l=o.length,c=0;c<l;++c)if(n=o[c]){var h=get(n,t);schedule(n,e,s,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Transition(r,this._parents,e,s)}function transition_end(){var e,t,s=this,r=s._id,a=s.size();return new Promise(function(i,n){var o={value:n},l={value:function(){0===--a&&i()}};s.each(function(){var s=set(this,r),a=s.on;a!==e&&((t=(e=a).copy())._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),s.on=t}),0===a&&i()})}var id=0;function Transition(e,t,s,r){this._groups=e,this._parents=t,this._name=s,this._id=r}function newId(){return++id}var selection_prototype=selection.prototype;function cubicInOut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(e,t){for(var s;!(s=e.__transition)||!(s=s[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return s}function selection_transition(e){var t,s;e instanceof Transition?(t=e._id,e=e._name):(t=newId(),(s=defaultTiming).time=now(),e=null==e?null:e+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var n,o=r[i],l=o.length,c=0;c<l;++c)(n=o[c])&&schedule(n,e,t,c,o,s||inherit(n,t));return new Transition(r,this._parents,e,t)}function Transform(e,t,s){this.k=e,this.x=t,this.y=s}selection.prototype.interrupt=selection_interrupt,selection.prototype.transition=selection_transition,Transform.prototype={constructor:Transform,scale:function(e){return 1===e?this:new Transform(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Transform(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Transform.prototype;const BarChartLine=({data:e,hoveredLegend:t,setHoveredLegend:s,tooltipData:r,setTooltipData:a,totalReceitas:i,totalDespesas:n,totalSaldo:o})=>{const[l,c]=reactExports.useState(null),h=band().domain(e.map(e=>e.key)).range([0,100]).padding(.3),p=max(e.map(e=>e.receitas))??0,d=max(e.map(e=>e.despesas))??0,m=Math.max(p,d),u=linear().domain([0,m]).range([100,0]),x=e.map(e=>e.saldo),f=max(x)??0,g=min(x)??0;let y;if(f>0||g<0){const e=1.2*Math.max(Math.abs(f),Math.abs(g));y=[-e,e]}else y=[-1,1];const v=linear().domain(y).range([100,0]),b=[];if(e.length>0){const t=h(e[0].key)??0,s=h.bandwidth()??0,r=Math.max(0,t-.3*s);b.push({key:"before",receitas:0,despesas:0,saldo:e[0].saldo,x:r})}if(e.forEach(e=>{const t=h(e.key)??0,s=h.bandwidth()??0;b.push({...e,x:t+s/2})}),e.length>0){const t=h(e[e.length-1].key)??0,s=h.bandwidth()??0,r=Math.min(100,t+1.3*s);b.push({key:"after",receitas:0,despesas:0,saldo:e[e.length-1].saldo,x:r})}const E=d3_line().x(e=>e.x).y(e=>v(e.saldo)).curve(monotoneX).defined(e=>"before"!==e.key&&"after"!==e.key)(b);return jsxRuntimeExports.jsx("div",{className:"relative h-72 w-full grid",style:{"--marginTop":"0px","--marginRight":"0px","--marginBottom":"0px","--marginLeft":"0px"},children:jsxRuntimeExports.jsxs("div",{className:"absolute inset-0\n          z-10\n          h-[calc(100%-var(--marginTop)-var(--marginBottom))]\n          w-[calc(100%-var(--marginLeft)-var(--marginRight))]\n          translate-x-[var(--marginLeft)]\n          translate-y-[var(--marginTop)]\n          overflow-visible\n        ",children:[jsxRuntimeExports.jsx("div",{className:"relative w-full h-full",children:e.map((e,s)=>{const r=.4*h.bandwidth(),i=u(0)-u(e.receitas),n=u(0)-u(e.despesas),o=h(e.key)||0;return e.receitas>0||e.despesas,jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{width:`${r}%`,height:`${Math.max(i,20)}%`,borderRadius:"6px 6px 0 0",marginLeft:`${o+.05*h.bandwidth()}%`,backgroundColor:e.receitas>0?l===`${s}-receitas`||"receitas"===t&&e.receitas>0?"rgba(34, 197, 94, 1)":"rgba(34, 197, 94, 0.6)":"rgba(34, 197, 94, 0.1)",transform:l===`${s}-receitas`||"receitas"===t&&e.receitas>0?"scale(1.05)":"scale(1)",transition:"all 0.3s ease",boxShadow:l===`${s}-receitas`||"receitas"===t&&e.receitas>0?"0 4px 12px rgba(34, 197, 94, 0.4), 0 0 0 2px rgba(34, 197, 94, 0.3)":"none",zIndex:l===`${s}-receitas`||"receitas"===t&&e.receitas>0?40:30,filter:l===`${s}-receitas`||"receitas"===t&&e.receitas>0?"drop-shadow(0 0 6px rgba(34, 197, 94, 0.5))":"none"},className:"absolute bottom-0 cursor-pointer",onMouseEnter:()=>{c(`${s}-receitas`),a({x:o+h.bandwidth()/2,y:50,month:e.key,receitas:e.receitas,despesas:e.despesas,saldo:e.saldo})},onMouseLeave:()=>{c(null),a(null)}}),jsxRuntimeExports.jsx("div",{style:{width:`${r}%`,height:`${Math.max(n,20)}%`,borderRadius:"6px 6px 0 0",marginLeft:`${o+.5*h.bandwidth()}%`,backgroundColor:e.despesas>0?l===`${s}-despesas`||"despesas"===t&&e.despesas>0?"rgba(239, 68, 68, 1)":"rgba(239, 68, 68, 0.6)":"rgba(239, 68, 68, 0.1)",transform:l===`${s}-despesas`||"despesas"===t&&e.despesas>0?"scale(1.05)":"scale(1)",transition:"all 0.3s ease",boxShadow:l===`${s}-despesas`||"despesas"===t&&e.despesas>0?"0 4px 12px rgba(239, 68, 68, 0.4), 0 0 0 2px rgba(239, 68, 68, 0.3)":"none",zIndex:l===`${s}-despesas`||"despesas"===t&&e.despesas>0?40:30,filter:l===`${s}-despesas`||"despesas"===t&&e.despesas>0?"drop-shadow(0 0 6px rgba(239, 68, 68, 0.5))":"none"},className:"absolute bottom-0 cursor-pointer",onMouseEnter:()=>{c(`${s}-despesas`),a({x:o+h.bandwidth()/2,y:50,month:e.key,receitas:e.receitas,despesas:e.despesas,saldo:e.saldo})},onMouseLeave:()=>{c(null),a(null)}}),jsxRuntimeExports.jsx("div",{className:"absolute overflow-visible text-gray-400",style:{left:`${o+h.bandwidth()/2}%`,top:"100%",transform:"rotate(45deg) translateX(4px) translateY(8px)"},children:jsxRuntimeExports.jsx("div",{className:"absolute text-xs -translate-y-1/2",children:e.key})})]},e.key)})}),jsxRuntimeExports.jsx("svg",{viewBox:"0 0 100 100",className:"absolute inset-0 w-full h-full overflow-visible z-10",preserveAspectRatio:"none",children:jsxRuntimeExports.jsx("path",{d:E??"",fill:"none",className:"text-blue-500 cursor-pointer transition-all duration-300 "+(l?.includes("line")||"saldo"===t&&0!==o?"drop-shadow-lg":""),stroke:"currentColor",strokeWidth:l?.includes("line")||"saldo"===t&&0!==o?"5":"3",vectorEffect:"non-scaling-stroke",onMouseEnter:()=>{c("line"),a({x:50,y:30,month:"Saldo Acumulado",receitas:0,despesas:0,saldo:e.reduce((e,t)=>e+t.saldo,0)})},onMouseLeave:()=>{c(null),a(null)},style:{filter:l?.includes("line")||"saldo"===t&&0!==o?"drop-shadow(0 0 8px rgba(59, 130, 246, 0.6))":"none",stroke:l?.includes("line")||"saldo"===t&&0!==o?"rgba(59, 130, 246, 1)":"rgba(59, 130, 246, 0.8)"}})}),b.length>0&&(()=>{const t=b[b.length-2],s=t.x,r=v(t.saldo);return jsxRuntimeExports.jsx("div",{className:"absolute size-2 z-50",style:{left:`${s}%`,top:`${r}%`,transform:"translate(-50%, -50%)"},children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full bg-blue-500 border-2 border-blue-400 cursor-pointer animate-ping",onMouseEnter:()=>{c("line"),a({x:s,y:r,month:"Saldo Acumulado",receitas:0,despesas:0,saldo:e.reduce((e,t)=>e+t.saldo,0)})},onMouseLeave:()=>{c(null),a(null)}})})})(),r&&jsxRuntimeExports.jsxs("div",{className:"absolute z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 pointer-events-none",style:{left:`${r.x}%`,top:`${r.y}%`,transform:"translate(-50%, -100%)"},children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2 border-b pb-1",children:r.month}),"Saldo Acumulado"===r.month?jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-blue-600 font-semibold",children:"Saldo Total:"}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-bold "+(r.saldo>0?"text-green-600":r.saldo<0?"text-red-600":"text-gray-600"),children:["R$ ",(1e3*r.saldo).toFixed(2)]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Soma dos saldos de todos os meses"})]}):"receitas"===t?jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"Total de Receitas:"}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-green-600 font-bold",children:["R$ ",(1e3*i).toFixed(2)]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Soma de todas as receitas dos 12 meses"})]}):"despesas"===t?jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-red-600 font-semibold",children:"Total de Despesas:"}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-red-600 font-bold",children:["R$ ",(1e3*n).toFixed(2)]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Soma de todas as despesas dos 12 meses"})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Receitas:"}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-green-600 font-semibold",children:["R$ ",(1e3*r.receitas).toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Despesas:"}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-red-600 font-semibold",children:["R$ ",(1e3*r.despesas).toFixed(2)]})]}),jsxRuntimeExports.jsx("div",{className:"border-t pt-1 mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-blue-600 font-semibold",children:"Saldo do Ms:"}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-bold "+(r.saldo>0?"text-green-600":r.saldo<0?"text-red-600":"text-gray-600"),children:["R$ ",(1e3*r.saldo).toFixed(2)]})]})}),0===r.receitas&&0===r.despesas&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:"Nenhuma transao neste ms"})]})]})]})})},processTransactionsData=(e,t)=>{const s=new Date,r=s.getMonth(),a=s.getFullYear(),i=[];for(let n=-3;n<9;n++){const e=new Date(a,r+n,1),t=e.toLocaleDateString("pt-BR",{month:"short"}),s=e.getFullYear();i.push({name:t,year:s,monthIndex:e.getMonth()})}return i.map((t,s)=>{const r=new Date(t.year,t.monthIndex,1),a=new Date(t.year,t.monthIndex+1,0,23,59,59);if(isNaN(r.getTime())||isNaN(a.getTime()))return console.warn(` [FinancialEvolution] Datas invlidas para ms ${t.name}:`,{monthName:t.name,year:t.year,monthIndex:t.monthIndex,monthStart:r,monthEnd:a}),{key:t.name,receitas:0,despesas:0,saldo:0};const i=e.filter(e=>{try{const t=new Date(e.date);if(isNaN(t.getTime()))return console.warn(` [FinancialEvolution] Data invlida para transao ${e.description}:`,e.date),!1;const s=t>=r&&t<=a,i=e.installmentNumber&&!0===e.isPaid;return s&&!i}catch(t){return console.warn(` [FinancialEvolution] Erro ao processar transao ${e.description}:`,t),!1}}),n=i.filter(e=>"receita"===e.type).reduce((e,t)=>e+t.amount,0),o=i.filter(e=>"despesa"===e.type).reduce((e,t)=>e+t.amount,0),l=n-o;return{key:t.name,receitas:n/1e3,despesas:o/1e3,saldo:l/1e3}})},FinancialEvolution=({selectedMonth:e,selectedYear:t})=>{const[s,r]=reactExports.useState(null),[a,i]=reactExports.useState(null);try{const{transactions:e,loading:n,error:o}=useTransactionsContext();if(n)return jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow border h-full p-6 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Carregando dados..."})]})});if(o)return jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow border h-full p-6 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-red-600",children:[jsxRuntimeExports.jsx("p",{children:"Erro ao carregar dados"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1",children:o})]})});const l=processTransactionsData(e,t),c=l.reduce((e,t)=>e+t.receitas,0),h=l.reduce((e,t)=>e+t.despesas,0),p=l.reduce((e,t)=>e+t.saldo,0);return jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow border h-full p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Evoluo Financeira"}),jsxRuntimeExports.jsx("div",{className:"h-72 w-full",children:jsxRuntimeExports.jsx(BarChartLine,{data:l,hoveredLegend:s,setHoveredLegend:r,tooltipData:a,setTooltipData:i,totalReceitas:c,totalDespesas:h,totalSaldo:p})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-4 mt-16 text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer hover:opacity-80 transition-opacity",onMouseEnter:()=>{r("receitas"),i({x:50,y:30,month:"Total de Receitas",receitas:c,despesas:0,saldo:0})},onMouseLeave:()=>{r(null),i(null)},children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-2 rounded-sm bg-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Receitas"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer hover:opacity-80 transition-opacity",onMouseEnter:()=>{r("despesas"),i({x:50,y:30,month:"Total de Despesas",receitas:0,despesas:h,saldo:0})},onMouseLeave:()=>{r(null),i(null)},children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-2 rounded-sm bg-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Despesas"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer hover:opacity-80 transition-opacity",onMouseEnter:()=>{r("saldo"),i({x:50,y:30,month:"Saldo Acumulado",receitas:0,despesas:0,saldo:p})},onMouseLeave:()=>{r(null),i(null)},children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-0.5 bg-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Saldo"})]})]})]})}catch(n){return console.error(" [FinancialEvolution] Erro no componente:",n),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow border h-full p-6 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-red-600",children:[jsxRuntimeExports.jsx("p",{children:"Erro no componente"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1",children:String(n)})]})})}},NewTransactionModal=({isOpen:e,onClose:t,userId:s,onTransactionCreating:r})=>{const[a,i]=reactExports.useState({description:"",amount:"",type:"Despesa",category:"",date:(new Date).toISOString().split("T")[0],dueDate:(new Date).toISOString().split("T")[0],paymentMethod:"dinheiro",installments:2,recurring:!1,automaticCategorization:!1,notifications:!1}),[n,o]=reactExports.useState(!1),[l,c]=reactExports.useState(!1),[h,p]=reactExports.useState(!1),[d,m]=reactExports.useState(null),[u,x]=reactExports.useState(!1),[f,g]=reactExports.useState(!1),[y,v]=reactExports.useState(1),[b]=reactExports.useState(10),E=reactExports.useRef(null),j=reactExports.useRef(null),R=reactExports.useRef(null),w=reactExports.useRef(null),[S,N]=reactExports.useState({name:"",color:"#3B82F6",icon:""}),{categories:C,createCategory:_,updateCategory:P,deleteCategory:T,loading:A,error:k}=useCategories(s),{createTransaction:D,loading:I}=useTransactionsContext(),M=React.useMemo(()=>C.reduce((e,t)=>(e.find(e=>e.name===t.name)||e.push(t),e),[]),[C]).filter(e=>!0),F=Math.ceil(M.length/b),L=(y-1)*b,B=L+b,O=M.slice(L,B);React.useEffect(()=>{v(1)},[a.type]);const V=e=>{m(e),N({name:e.name,color:e.color,icon:e.icon}),p(!0)},z=()=>{m(null),N({name:"",color:"#3B82F6",icon:""}),p(!1)},G=async e=>{if(confirm(`Tem certeza que deseja excluir a categoria "${e.name}"?`))try{await T(e.id)}catch(t){console.error(" Erro ao excluir categoria:",t)}};return reactExports.useEffect(()=>{const e=e=>{E.current&&!E.current.contains(e.target)&&j.current&&!j.current.contains(e.target)&&x(!1),R.current&&!R.current.contains(e.target)&&w.current&&!w.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),e?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-1 sm:p-4 animate-in fade-in duration-200",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl sm:rounded-3xl shadow-2xl w-full max-w-6xl max-h-[98vh] sm:max-h-[95vh] overflow-hidden animate-in zoom-in-95 duration-200",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-3 sm:p-6 border-b border-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-7 h-7 sm:w-10 sm:h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg sm:rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-white text-sm sm:text-xl",children:""})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-base sm:text-2xl font-bold text-gray-900",children:"Nova Transao"}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm text-gray-600 hidden sm:block",children:"Registre sua movimentao financeira"})]})]}),jsxRuntimeExports.jsx("button",{onClick:t,className:"p-1.5 sm:p-2 hover:bg-white/80 rounded-lg sm:rounded-xl transition-all duration-200 hover:scale-105 group",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4 sm:w-6 sm:h-6 text-gray-500 group-hover:text-gray-700",children:[jsxRuntimeExports.jsx("path",{d:"M18 6 6 18"}),jsxRuntimeExports.jsx("path",{d:"m6 6 12 12"})]})})]})}),jsxRuntimeExports.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),a.amount&&a.category)try{r?.(!0);const e=parseFloat(a.amount.replace(",",".")),l=Math.round(e/(a.installments||1)*100)/100,c=a.dueDate||(new Date).toISOString().split("T")[0],[h,p,d]=c.split("-").map(Number),m=new Date(h,p-1,d);if(isNaN(m.getTime()))return void alert("Por favor, selecione uma data vlida.");if(n&&a.installments>1){const t=[],r=`installment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;for(let n=0;n<a.installments;n++){const i=new Date(m);i.setMonth(m.getMonth()+n);const o={userId:s,description:`${a.description.trim()} (${n+1}/${a.installments})`,amount:l,type:a.type.toLowerCase(),category:a.category,date:i,paymentMethod:a.paymentMethod.toLowerCase(),installments:a.installments,installmentNumber:n+1,totalInstallmentAmount:e,installmentGroupId:r,isPaid:!1,recurring:!1,notes:`Parcela ${n+1} de ${a.installments}`};console.log(` [NewTransactionModal] Criando parcela ${n+1}:`,{...o,amount:o.amount,installmentAmount:l,baseAmount:e}),t.push(D(o))}const i=await Promise.all(t);console.log(" [NewTransactionModal] Todas as parcelas criadas com sucesso! IDs:",i),alert(`${a.installments} parcelas criadas com sucesso!`)}else{const t={userId:s,description:a.description.trim(),amount:e,type:a.type.toLowerCase(),category:a.category,date:m,paymentMethod:a.paymentMethod.toLowerCase(),installments:void 0,recurring:!1,notes:""};console.log(" [NewTransactionModal] Dados da transao:",t);const r=await D(t);console.log(" [NewTransactionModal] Transao criada com sucesso! ID:",r),alert("Transao criada com sucesso!")}console.log(" [NewTransactionModal] Limpando formulrio e fechando modal..."),i({description:"",amount:"",type:"Despesa",category:"",date:(new Date).toISOString().split("T")[0],dueDate:(new Date).toISOString().split("T")[0],paymentMethod:"dinheiro",installments:1,recurring:!1,automaticCategorization:!1,notifications:!1}),o(!1),console.log(" [NewTransactionModal] Formulrio limpo, fechando modal..."),r?.(!1),t()}catch(l){console.error(" [NewTransactionModal] Erro ao criar transao:",l),r?.(!1),alert(`Erro ao criar transao: ${l instanceof Error?l.message:"Erro desconhecido"}`)}else alert("Por favor, preencha o valor e a categoria")},className:"p-2 sm:p-8",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-2 sm:gap-8",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-2",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-xl sm:rounded-2xl p-3 sm:p-6 space-y-3 sm:space-y-6 max-h-[70vh] sm:max-h-[75vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-2 sm:p-3 shadow-sm border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-2 sm:mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-blue-100 rounded-md flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-blue-600 text-xs sm:text-sm",children:""})}),jsxRuntimeExports.jsx("h3",{className:"text-xs sm:text-sm font-bold text-gray-900",children:"Informaes da Transao"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs font-semibold text-gray-700 mb-2 flex items-center space-x-1",children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),jsxRuntimeExports.jsx("span",{children:"Descrio"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Ex: Supermercado, Salrio...",className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs sm:text-sm",value:a.description,onChange:e=>i({...a,description:e.target.value})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-xs",children:""})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs font-semibold text-gray-700 mb-2 flex items-center space-x-1",children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),jsxRuntimeExports.jsx("span",{children:"Valor*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-xs sm:text-sm font-medium",children:"R$"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"0,00",className:"w-full pl-6 sm:pl-8 pr-2 sm:pr-3 py-1.5 sm:py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs sm:text-sm",value:a.amount,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t&&(t=(parseInt(t)/100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})),i({...a,amount:t})},required:!0})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs font-semibold text-gray-700 mb-2 flex items-center space-x-1",children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),jsxRuntimeExports.jsx("span",{children:"Data"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"date",className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-xs sm:text-sm",value:a.dueDate,onChange:e=>i({...a,dueDate:e.target.value})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-xs",children:""})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 sm:mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"installment",checked:n,onChange:e=>o(e.target.checked),className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-1"}),jsxRuntimeExports.jsx("label",{htmlFor:"installment",className:"text-xs font-semibold text-gray-700 cursor-pointer",children:"Parcelar transao"})]}),n&&jsxRuntimeExports.jsx("div",{className:"bg-green-50 rounded-md p-3 border border-green-200",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Parcelas"}),jsxRuntimeExports.jsx("input",{type:"number",min:"2",max:"60",value:a.installments||2,onChange:e=>i({...a,installments:parseInt(e.target.value)||2}),className:"w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-transparent text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Valor por parcela"}),jsxRuntimeExports.jsxs("div",{className:"px-2 py-1 bg-white border border-gray-300 rounded-md text-sm font-semibold text-green-600",children:["R$ ",a.amount?(Math.round(parseFloat(a.amount.replace(",","."))/(a.installments||1)*100)/100).toFixed(2):"0,00"]})]})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-md flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-purple-600 text-sm",children:""})}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"Tipo de Transao"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>i({...a,type:"Receita"}),className:"p-2 rounded-md border transition-all duration-200 transform hover:scale-105 "+("Receita"===a.type?"border-green-500 bg-green-50 shadow-sm":"border-gray-200 bg-white hover:border-green-300 hover:shadow-sm"),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center "+("Receita"===a.type?"bg-green-500":"bg-gray-100"),children:jsxRuntimeExports.jsx("span",{className:"text-xs",children:""})}),jsxRuntimeExports.jsx("div",{className:"text-left",children:jsxRuntimeExports.jsx("div",{className:"text-xs font-bold "+("Receita"===a.type?"text-green-700":"text-gray-700"),children:"Receita"})})]})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>i({...a,type:"Despesa"}),className:"p-2 rounded-md border transition-all duration-200 transform hover:scale-105 "+("Despesa"===a.type?"border-red-500 bg-red-50 shadow-sm":"border-gray-200 bg-white hover:border-red-300 hover:shadow-sm"),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center "+("Despesa"===a.type?"bg-red-500":"bg-gray-100"),children:jsxRuntimeExports.jsx("span",{className:"text-xs",children:""})}),jsxRuntimeExports.jsx("div",{className:"text-left",children:jsxRuntimeExports.jsx("div",{className:"text-xs font-bold "+("Despesa"===a.type?"text-red-700":"text-gray-700"),children:"Despesa"})})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"hidden sm:block bg-white rounded-xl p-3 sm:p-6 shadow-sm border border-gray-200 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs sm:text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-orange-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Categoria*"}),A&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Carregando..."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-orange-400 rounded-full"}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[M.length," categoria",1!==M.length?"s":"",F>1&&` (pgina ${y} de ${F})`]})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>c(!0),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs font-semibold text-green-600 bg-green-100 hover:bg-green-200 rounded-lg transition-all duration-200 hover:scale-105 shadow-sm hover:shadow-md",children:"+ Nova Categoria"}),jsxRuntimeExports.jsx("button",{type:"button",ref:w,onClick:()=>g(!f),className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs font-semibold text-blue-600 bg-blue-100 hover:bg-blue-200 rounded-lg transition-all duration-200 hover:scale-105 shadow-sm hover:shadow-md",children:" Selecionar Categoria"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"hidden sm:block",children:jsxRuntimeExports.jsx("div",{className:"hidden sm:grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 sm:gap-4 max-h-80 overflow-y-auto pr-2 pt-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 scrollbar-thumb-opacity-30 scrollbar-track-opacity-10",children:O.length>0?O.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>i({...a,category:e.name}),className:"w-full p-5 rounded-lg border-2 transition-all duration-200 "+(a.category===e.name?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white shadow-md",style:{backgroundColor:e.color},children:jsxRuntimeExports.jsx("span",{className:"text-xl",children:e.icon})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-gray-800 text-center leading-tight",children:e.name})]})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>V(e),className:"absolute top-1 right-1 w-6 h-6 bg-gray-600 hover:bg-gray-700 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 z-[9999]",children:jsxRuntimeExports.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>G(e),className:"absolute top-1 left-1 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 z-[9999]",children:jsxRuntimeExports.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t)):jsxRuntimeExports.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-8 text-center",children:k?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Erro ao carregar categorias"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Tente recarregar a pgina ou criar uma nova categoria"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors mr-2",children:"Recarregar"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>c(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"+ Criar Categoria"})]}):jsxRuntimeExports.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 px-4",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center mb-6 shadow-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-10 h-10 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Nenhuma categoria encontrada"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6 text-center max-w-sm",children:"Crie categorias personalizadas para organizar suas transaes"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>c(!0),className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:" Criar Primeira Categoria"})]})})})}),F>1&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{y>1&&v(y-1)},disabled:1===y,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}),Array.from({length:F},(e,t)=>t+1).map(e=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>(e=>{v(e)})(e),className:"w-8 h-8 rounded-lg text-sm font-medium transition-colors "+(y===e?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:e},e)),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{y<F&&v(y+1)},disabled:y===F,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"})]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"space-y-4 lg:space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-3 lg:p-6 shadow-sm border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 lg:w-8 lg:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-blue-600 text-sm lg:text-lg",children:""})}),jsxRuntimeExports.jsx("h3",{className:"text-base lg:text-lg font-bold text-gray-900",children:"Visualizao Prvia"})]}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs font-semibold text-blue-600 bg-blue-100 hover:bg-blue-200 rounded-lg transition-all duration-200 hover:scale-105 shadow-sm hover:shadow-md lg:hidden",onClick:()=>g(!0),children:" Selecionar Categoria"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 lg:p-4 mb-4 lg:mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg flex items-center justify-center shadow-sm",style:{backgroundColor:a.category?C.find(e=>e.name===a.category)?.color||"#3B82F6":"#9CA3AF"},children:jsxRuntimeExports.jsx("span",{className:"text-sm lg:text-lg",children:a.category&&C.find(e=>e.name===a.category)?.icon||""})}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-0",children:jsxRuntimeExports.jsx("div",{className:"text-xs lg:text-sm font-semibold text-gray-800 truncate",children:a.category||"Categoria"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-md "+("Receita"===a.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:a.type}),jsxRuntimeExports.jsxs("div",{className:"text-sm lg:text-lg font-bold "+("Receita"===a.type?"text-green-600":"text-red-600"),children:["Receita"===a.type?"+":"-","R$ ",a.amount||"0,00"]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:a.dueDate}),n&&a.installments>1&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-2 lg:p-3 bg-blue-50 rounded-lg border border-blue-200",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-blue-700 font-medium mb-2",children:[a.installments,"x de R$ ",a.amount?(Math.round(parseFloat(a.amount.replace(",","."))/a.installments*100)/100).toFixed(2):"0.00"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-blue-600",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold mb-1",children:"Datas das parcelas:"}),jsxRuntimeExports.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:Array.from({length:a.installments},(e,t)=>{const s=new Date(a.dueDate);return s.setMonth(s.getMonth()+t),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs",children:[jsxRuntimeExports.jsxs("span",{children:["Parcela ",t+1,":"]}),jsxRuntimeExports.jsx("span",{children:s.toLocaleDateString("pt-BR")})]},t)})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-2 lg:space-y-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:t,className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 text-sm lg:text-base text-gray-700 bg-white hover:bg-gray-50 rounded-xl font-semibold transition-all duration-200 border-2 border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-md transform hover:scale-105",children:"Cancelar"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:I,className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:from-gray-400 disabled:to-gray-500 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none disabled:cursor-not-allowed text-sm lg:text-base",children:I?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 lg:w-4 lg:h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("span",{children:"Criando..."})]}):" Criar Transao"})]})]})})]})})]}),l&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[10000] p-4 animate-in fade-in duration-200",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden animate-in zoom-in-95 duration-200",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-white text-xl",children:""})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Nova Categoria"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Personalize sua categoria"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-white/80 rounded-xl transition-all duration-200 hover:scale-105 group",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-6 h-6 text-gray-500 group-hover:text-gray-700",children:[jsxRuntimeExports.jsx("path",{d:"M18 6 6 18"}),jsxRuntimeExports.jsx("path",{d:"m6 6 12 12"})]})})]})}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),jsxRuntimeExports.jsx("span",{children:"Nome da Categoria*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Ex: Supermercado, Salrio, Lazer...",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-lg",value:S.name,onChange:e=>N({...S,name:e.target.value}),required:!0}),jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:""})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),jsxRuntimeExports.jsx("span",{children:"Personalizar Categoria"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-6 border-2 border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{ref:j,className:"w-24 h-24 rounded-3xl border-4 border-white shadow-2xl flex items-center justify-center mx-auto mb-4 transform hover:scale-110 transition-all duration-300 cursor-pointer hover:shadow-3xl",style:{backgroundColor:S.color},onClick:()=>x(!u),children:jsxRuntimeExports.jsx("span",{className:"text-4xl",children:S.icon})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-gray-800",children:S.name||"Nome da categoria"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[jsxRuntimeExports.jsx("input",{type:"color",className:"w-12 h-12 rounded-xl border-2 border-gray-300 cursor-pointer hover:scale-110 transition-transform duration-200 shadow-lg",value:S.color,onChange:e=>N({...S,color:e.target.value})}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Cor"}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-white rounded-lg text-xs font-mono text-gray-600 shadow-sm",children:S.color})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Emoji"}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-white rounded-lg text-xs text-gray-600 shadow-sm",children:S.icon})]})]})]})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-t border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-6 py-3 text-gray-700 bg-white hover:bg-gray-50 rounded-xl font-semibold transition-all duration-200 border-2 border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-md",children:"Cancelar"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:async()=>{if(S.name.trim())try{console.log(" [NewTransactionModal] Iniciando criao de categoria...");const e={name:S.name,color:S.color,icon:S.icon,type:"geral",userId:s};console.log(" [NewTransactionModal] Dados da categoria:",e),console.log(" [NewTransactionModal] UserId:",s);const t=await _(e);console.log(" [NewTransactionModal] Categoria criada com sucesso! ID:",t),N({name:"",color:"#3B82F6",icon:""}),c(!1)}catch(e){console.error(" [NewTransactionModal] Erro ao criar categoria:",e)}},disabled:!S.name.trim(),className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none disabled:cursor-not-allowed",children:" Criar Categoria"})]})})]})}),h&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[10000] p-4 animate-in fade-in duration-200",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden animate-in zoom-in-95 duration-200",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 p-6 border-b border-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-white text-xl",children:""})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Editar Categoria"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Modifique sua categoria"})]})]}),jsxRuntimeExports.jsx("button",{onClick:z,className:"p-2 hover:bg-white/80 rounded-xl transition-all duration-200 hover:scale-105 group",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-6 h-6 text-gray-500 group-hover:text-gray-700",children:[jsxRuntimeExports.jsx("path",{d:"M18 6 6 18"}),jsxRuntimeExports.jsx("path",{d:"m6 6 12 12"})]})})]})}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),jsxRuntimeExports.jsx("span",{children:"Nome da Categoria*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Ex: Supermercado, Salrio, Lazer...",className:"w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white text-lg",value:S.name,onChange:e=>N({...S,name:e.target.value}),required:!0}),jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:""})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),jsxRuntimeExports.jsx("span",{children:"Personalizar Categoria"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-6 border-2 border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{ref:j,className:"w-24 h-24 rounded-3xl border-4 border-white shadow-2xl flex items-center justify-center mx-auto mb-4 transform hover:scale-110 transition-all duration-300 cursor-pointer hover:shadow-3xl",style:{backgroundColor:S.color},onClick:()=>x(!u),children:jsxRuntimeExports.jsx("span",{className:"text-4xl",children:S.icon})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-gray-800",children:S.name||"Nome da categoria"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[jsxRuntimeExports.jsx("input",{type:"color",className:"w-12 h-12 rounded-xl border-2 border-gray-300 cursor-pointer hover:scale-110 transition-transform duration-200 shadow-lg",value:S.color,onChange:e=>N({...S,color:e.target.value})}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Cor"}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-white rounded-lg text-xs font-mono text-gray-600 shadow-sm",children:S.color})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Emoji"}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-white rounded-lg text-xs text-gray-600 shadow-sm",children:S.icon})]})]})]})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-t border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:z,className:"px-6 py-3 text-gray-700 bg-white hover:bg-gray-50 rounded-xl font-semibold transition-all duration-200 border-2 border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-md",children:"Cancelar"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:async()=>{if(d&&S.name.trim())try{await P(d.id,{name:S.name,color:S.color,icon:S.icon}),m(null),N({name:"",color:"#3B82F6",icon:""}),p(!1)}catch(e){console.error(" Erro ao atualizar categoria:",e)}},disabled:!S.name.trim(),className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:from-gray-300 disabled:to-gray-400 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none disabled:cursor-not-allowed",children:" Atualizar Categoria"})]})})]})}),f&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-end justify-center z-[9998] sm:hidden",children:jsxRuntimeExports.jsxs("div",{ref:R,className:"bg-white rounded-t-3xl w-full max-h-[70vh] overflow-hidden animate-in slide-in-from-bottom duration-300",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 border-b border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-white text-sm",children:""})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Selecionar Categoria"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600",children:"Arraste para navegar"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-white/80 rounded-lg transition-all duration-200",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),jsxRuntimeExports.jsx("div",{className:"p-4 max-h-[50vh] overflow-y-auto",children:M.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:M.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{i({...a,category:e.name}),g(!1)},className:"w-full p-4 rounded-xl border-2 transition-all duration-200 "+(a.category===e.name?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white shadow-md flex-shrink-0",style:{backgroundColor:e.color},children:jsxRuntimeExports.jsx("span",{className:"text-xl",children:e.icon})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-base font-semibold text-gray-800",children:e.name}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:a.category===e.name?"Selecionada":"Toque para selecionar"})]}),a.category===e.name&&jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]})}),jsxRuntimeExports.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),g(!1),V(e)},className:"w-6 h-6 bg-gray-600 hover:bg-gray-700 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 z-[9999]",children:jsxRuntimeExports.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),g(!1),G(e)},className:"w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-110 z-[9999]",children:jsxRuntimeExports.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},t))}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:""}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma categoria encontrada"}),jsxRuntimeExports.jsx("button",{onClick:()=>{g(!1),c(!0)},className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors",children:"Criar Primeira Categoria"})]})}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>c(!0),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:"+ Nova Categoria"}),jsxRuntimeExports.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg text-sm font-medium hover:bg-gray-600 transition-colors",children:"Cancelar"})]})})]})}),u&&jsxRuntimeExports.jsx("div",{ref:E,className:"fixed z-[10001] shadow-2xl rounded-lg overflow-hidden bg-white border border-gray-200",style:{top:j.current?j.current.getBoundingClientRect().bottom+window.scrollY+10:0,left:j.current?j.current.getBoundingClientRect().left+window.scrollX:0,minWidth:"320px",maxWidth:"90vw"},children:jsxRuntimeExports.jsx($e5534fc185f7111e$export$2e2bcd8739ae039,{data:data,onEmojiSelect:e=>{N({...S,icon:e.native}),x(!1)},theme:"light",previewPosition:"none",searchPosition:"top",skinTonePosition:"none",perLine:8,maxFrequentRows:2})})]}):null},PaidAccountsButton=({onClick:e,className:t="",notificationCount:s=0})=>jsxRuntimeExports.jsxs("button",{onClick:e,className:`rounded-full font-medium transition-all duration-200 relative ${t}`,children:["Pagas",s>0&&jsxRuntimeExports.jsx("div",{className:"absolute top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center shadow-lg border border-white animate-pulse",style:{animationDuration:"2s"},children:s>99?"99+":s})]}),Transactions=()=>{const[e,t]=reactExports.useState(!1),[s,r]=reactExports.useState(!1),[a,i]=reactExports.useState(!1),[n,o]=reactExports.useState(null),[l,c]=reactExports.useState([]),[h,p]=reactExports.useState(""),[d,m]=reactExports.useState("all"),[u,x]=reactExports.useState("all"),[f,g]=reactExports.useState(""),[y,v]=reactExports.useState(1),[b]=reactExports.useState(5),[E,j]=reactExports.useState(!1),[R,w]=reactExports.useState(!1),[S,N]=reactExports.useState("personalizado"),[C,_]=reactExports.useState(""),[P,T]=reactExports.useState(""),[A,k]=reactExports.useState("todas"),[D,I]=reactExports.useState("all"),[M,F]=reactExports.useState(0),[L,B]=reactExports.useState(0),O=reactExports.useRef(new Set),{user:V}=useAuth(),z=useTransactionsContext(),{categories:G}=useCategories(V?.uid||"test-user-123");if(!z)return jsxRuntimeExports.jsx("div",{children:"Erro: Contexto no encontrado"});const{transactions:$,loading:H,error:q,loadTransactions:W,deleteTransaction:U,updateTransaction:Y}=z;React.useEffect(()=>{if(!$||0===$.length)return;const e=$.filter(e=>{if(e.installments&&e.installments>1){return $.filter(t=>t.installmentGroupId===e.installmentGroupId).every(e=>!0===e.isPaid)}return!0===e.isPaid}),t=new Set(e.map(e=>e.id)),s=Array.from(t).filter(e=>!O.current.has(e));O.current=t;const r=e.length,a=Math.max(0,r-L+s.length);F(a)},[$,L]),React.useEffect(()=>{if("personalizado"!==S){const{start:e,end:t}=J(S);_(e),T(t)}},[S]);const K=e=>G.find(t=>t.name===e)||{name:e,color:"#9CA3AF",icon:""},J=e=>{const t=new Date,s=t.getFullYear(),r=t.getMonth();switch(e){case"este-mes":const e=new Date(s,r,1),t=new Date(s,r+1,0);return{start:e.toISOString().split("T")[0],end:t.toISOString().split("T")[0]};case"mes-passado":const a=new Date(s,r-1,1),i=new Date(s,r,0);return{start:a.toISOString().split("T")[0],end:i.toISOString().split("T")[0]};case"ultimos-3-meses":const n=new Date(s,r-2,1),o=new Date(s,r+1,0);return{start:n.toISOString().split("T")[0],end:o.toISOString().split("T")[0]};default:return{start:"",end:""}}},X=e=>{o(e),c([]),r(!0)},Z=()=>{const e=$.filter(e=>{if(e.installments&&e.installments>1){return $.filter(t=>t.installmentGroupId===e.installmentGroupId).every(e=>!0===e.isPaid)}return!0===e.isPaid}),t=e.length,s=new Set(e.map(e=>e.id));B(t),O.current=s,F(0),I("paid")},Q=async e=>{try{const t=e.installmentGroupId||e.id.startsWith("installment_");let s=`Tem certeza que deseja excluir a transao "${e.description}"?\n\nEsta ao no pode ser desfeita.`;t&&e.installments>1&&(s=`Tem certeza que deseja excluir TODAS as ${e.installments} parcelas da transao "${e.description}"?\n\nEsta ao no pode ser desfeita e excluir todas as parcelas.`);if(window.confirm(s))if(t&&e.installments>1){const t=e.installmentGroupId||e.id,s=$.filter(e=>e.installmentGroupId===t);alert(`Excluindo ${s.length} parcelas...`);for(const e of s)await U(e.id);alert(`Todas as ${s.length} parcelas foram excludas com sucesso!`)}else await U(e.id),alert("Transao excluda com sucesso!")}catch(t){alert("Erro ao excluir transao. Tente novamente.");try{await W()}catch(s){}}},ee=async()=>{if(n)try{if(n.isGrouped){const e=$.filter(e=>e.installmentGroupId===n.installmentGroupId);if(l.length>0){const t=e.filter(e=>l.includes(e.id));if(0===t.length)return void alert("Nenhuma fatura foi selecionada!");const s=t.filter(e=>!e.isPaid),r=t.filter(e=>e.isPaid);for(const e of s)await Y(e.id,{isPaid:!0});for(const e of r)await Y(e.id,{isPaid:!1})}else{const t=e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()).find(e=>!e.isPaid);if(!t)return void alert(" Todas as faturas desta transao j foram pagas!");await Y(t.id,{isPaid:!0})}}else n.isPaid?await Y(n.id,{isPaid:!1}):await Y(n.id,{isPaid:!0});r(!1),o(null)}catch(e){}},te=async()=>{if(n)try{if(l.length>0){const e=$.filter(e=>e.installmentGroupId===n.installmentGroupId&&l.includes(e.id)&&!0===e.isPaid);for(const t of e)await Y(t.id,{isPaid:!1})}else{const e=$.filter(e=>e.installmentGroupId===n.installmentGroupId).sort((e,t)=>{const s=new Date(e.date).getTime();return new Date(t.date).getTime()-s}),t=e.filter(e=>!0===e.isPaid)[0];t&&await Y(t.id,{isPaid:!1})}r(!1),o(null)}catch(e){}};let se=[...$.filter(e=>{const t=e.description.toLowerCase().includes(h.toLowerCase());let s=!0;"all"===d?s=!0:"receita"===d?s="receita"===e.type:"despesa"===d?s="despesa"===e.type:"parceladas"===d?s=!!(e.installments&&e.installments>1):"receitas-parceladas"===d&&(s="receita"===e.type&&!!(e.installments&&e.installments>1));const r="all"===u||e.category===u;let a=!0;if(!e.installmentGroupId||!e.installments||e.installments<=1)if(f)a=e.date.toISOString().split("T")[0]===f;else{const{start:t,end:s}=J(S),r="personalizado"===S?C:t,i="personalizado"===S?P:s;if(r&&i){const t=e.date.toISOString().split("T")[0];a=t>=r&&t<=i}}return t&&s&&r&&a})];if("near-due"===D){const e=new Date,t=new Date(e.getTime()+6048e5);se=se.filter(s=>"despesa"===s.type&&(s.installments&&s.installments,!s.isPaid&&s.date>=e&&s.date<=t))}else if("high-expenses"===D){const e=se.filter(e=>"despesa"===e.type);se=e.sort((e,t)=>t.amount-e.amount).slice(0,5)}else if("high-revenues"===D){const e=se.filter(e=>"receita"===e.type);se=e.sort((e,t)=>t.amount-e.amount).slice(0,5)}else"paid"===D&&(se=se.filter(e=>(e.installments&&e.installments,!0===e.isPaid)));let re=[];try{re=Array.isArray(se)?((e,t)=>{try{const s=new Map,r=[];if(!Array.isArray(e))return[];const{start:a,end:i}=J(S),n="personalizado"===S?C:a,o="personalizado"===S?P:i;e.forEach(e=>{if(e.installmentGroupId&&e.installments&&e.installments>1){s.has(e.installmentGroupId)||s.set(e.installmentGroupId,{id:e.installmentGroupId,description:e.description.replace(/ \(\d+\/\d+\)$/,""),category:e.category,type:e.type,installments:e.installments,installmentAmount:e.amount,totalAmount:e.totalInstallmentAmount||e.amount*e.installments,firstDate:e.date,lastDate:e.date,installmentGroupId:e.installmentGroupId,isGrouped:!0,paidInstallments:0,totalInstallments:1,allTransactions:[]});const t=s.get(e.installmentGroupId);t.allTransactions.push(e),e.date<t.firstDate&&(t.firstDate=e.date),e.date>t.lastDate&&(t.lastDate=e.date)}else r.push(e)}),s.forEach(e=>{const t=e.allTransactions.filter(e=>{if(f)return e.date.toISOString().split("T")[0]===f;if(n&&o){const t=e.date.toISOString().split("T")[0];return t>=n&&t<=o}return!0});if(0!==t.length){if(e.paidInstallments=t.filter(e=>!0===e.isPaid).length,e.totalInstallments=t.length,e.allTransactions&&e.allTransactions.length>0){const t=e.allTransactions[0];e.totalAmount=t.totalInstallmentAmount||t.amount*t.installments}t.length>0&&(e.firstDate=t.reduce((e,t)=>t.date<e.date?t:e).date,e.lastDate=t.reduce((e,t)=>t.date>e.date?t:e).date),delete e.allTransactions}else e.shouldRemove=!0}),s.forEach((e,t)=>{e.shouldRemove&&s.delete(t)});const l=Array.from(s.values());if("paid"===t){const e=r.filter(e=>e.isPaid);return[...l.filter(e=>e.isGrouped?e.paidInstallments===e.totalInstallments:e.isPaid),...e]}if("pending"===t){const e=r.filter(e=>!e.isPaid);return[...l.filter(e=>e.isGrouped?e.paidInstallments<e.totalInstallments:!e.isPaid),...e]}return[...l,...r]}catch(s){return[]}})(se,D):[]}catch(pe){re=[]}const ae=Array.isArray(re)?re:[],ie=Math.ceil(ae.length/b),ne=(y-1)*b,oe=ne+b,le=ae.slice(ne,oe);React.useEffect(()=>{v(1)},[h,d,u,f]),React.useEffect(()=>{if("personalizado"!==S){const{start:e,end:t}=J(S);_(e||""),T(t||"")}let e="all";"receitas"===A?e="receita":"despesas"===A?e="despesa":"contas-parceladas"===A?e="parceladas":"receitas-parceladas"===A&&(e="receitas-parceladas"),m(e),"personalizado"!==S&&g("")},[S,A]),React.useEffect(()=>{"personalizado"===S&&C&&P&&g("")},[C,P,S]);const ce=e=>{v(e)},he=()=>{t(!0)};return jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 lg:p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 lg:mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center justify-between gap-1 lg:gap-3 mb-3 lg:mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-base lg:text-xl font-semibold text-gray-900",children:"Transaes"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>w(!R),className:"lg:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),jsxRuntimeExports.jsxs("button",{onClick:()=>i(!0),className:"lg:hidden flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[jsxRuntimeExports.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"Configuraes",className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Filtros Avanados"})]}),jsxRuntimeExports.jsxs("div",{className:"relative max-w-[200px] lg:max-w-none hidden lg:block",children:[jsxRuntimeExports.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"Buscar",className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar...",value:h,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),jsxRuntimeExports.jsxs("button",{onClick:he,className:"hidden lg:flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),jsxRuntimeExports.jsx("span",{children:"Nova Transao"})]})]})]}),R&&jsxRuntimeExports.jsx("div",{className:"mb-4 lg:hidden",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"Buscar",className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar transaes...",value:h,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),jsxRuntimeExports.jsx("button",{onClick:()=>w(!1),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),f&&jsxRuntimeExports.jsx("div",{className:"mb-3 lg:mb-4 p-2 lg:p-3 bg-blue-50 border border-blue-200 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3 lg:w-4 lg:h-4 text-blue-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),jsxRuntimeExports.jsxs("span",{className:"text-xs lg:text-sm font-medium text-blue-800",children:["Filtrando por: ",new Date(f).toLocaleDateString("pt-BR")]}),jsxRuntimeExports.jsxs("span",{className:"text-xs lg:text-sm text-blue-600",children:["(",ae.length," transao",1!==ae.length?"es":""," encontrada",1!==ae.length?"s":"",")"]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 lg:space-y-3 mb-2 lg:mb-4",children:[jsxRuntimeExports.jsx("div",{className:"lg:hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex overflow-x-auto scrollbar-hide space-x-2 pb-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>I("pending"),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 "+("pending"===D?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Pendentes"}),jsxRuntimeExports.jsx(PaidAccountsButton,{onClick:Z,notificationCount:M,className:"flex-shrink-0 px-4 py-2 text-sm rounded-full "+("paid"===D?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200")}),jsxRuntimeExports.jsx("button",{onClick:()=>I("near-due"),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 "+("near-due"===D?"bg-orange-100 text-orange-700 border border-orange-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Perto de Vencer"}),jsxRuntimeExports.jsx("button",{onClick:()=>I("high-expenses"),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 "+("high-expenses"===D?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Maiores Despesas"}),jsxRuntimeExports.jsx("button",{onClick:()=>I("high-revenues"),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 "+("high-revenues"===D?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Maiores Receitas"}),jsxRuntimeExports.jsx("button",{onClick:()=>I("all"),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 "+("all"===D?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Todas"})]})}),jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>I("pending"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 "+("pending"===D?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Pendentes"}),jsxRuntimeExports.jsx(PaidAccountsButton,{onClick:Z,notificationCount:M,className:"px-3 py-1.5 text-xs "+("paid"===D?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200")}),jsxRuntimeExports.jsx("button",{onClick:()=>I("near-due"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 "+("near-due"===D?"bg-orange-100 text-orange-700 border border-orange-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Perto de Vencer"}),jsxRuntimeExports.jsx("button",{onClick:()=>I("high-expenses"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 "+("high-expenses"===D?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Maiores Despesas"}),jsxRuntimeExports.jsx("button",{onClick:()=>I("high-revenues"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 "+("high-revenues"===D?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Maiores Receitas"}),jsxRuntimeExports.jsx("button",{onClick:()=>I("all"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 "+("all"===D?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Todas"}),jsxRuntimeExports.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[jsxRuntimeExports.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"Configuraes",className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Filtros"})]})]})]})]}),H&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600",children:"Carregando transaes..."})]}),E&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600",children:"Criando transao..."})]}),q&&jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-red-600",children:jsxRuntimeExports.jsxs("p",{children:["Erro ao carregar transaes: ",q]})}),!H&&!q&&0===ae.length&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-gray-500",children:[jsxRuntimeExports.jsx("p",{children:"near-due"===D?"Nenhuma transao encontrada nos prximos 7 dias":"high-expenses"===D?"Nenhuma despesa encontrada":"high-revenues"===D?"Nenhuma receita encontrada":"pending"===D?"Nenhuma transao pendente encontrada":"Nenhuma transao encontrada"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-2",children:"near-due"===D?"No h despesas vencendo nos prximos 7 dias":"high-expenses"===D?"No h despesas para mostrar":"high-revenues"===D?"No h receitas para mostrar":"pending"===D?"Todas as transaes foram completamente pagas":'Clique em "Nova Transao" para adicionar uma'})]}),!H&&!q&&ae.length>0&&jsxRuntimeExports.jsx("div",{className:"lg:hidden space-y-3",children:le.map(e=>{const t=K(e.category);return e.isGrouped?jsxRuntimeExports.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl",style:{backgroundColor:`${t.color}20`},children:jsxRuntimeExports.jsx("span",{className:"text-lg",children:t.icon})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900 truncate",children:t.name}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm font-semibold "+("receita"===e.type?"text-green-600":"text-red-600"),children:["receita"===e.type?"+":"-","R$ ",Math.max(0,e.totalAmount-e.installmentAmount*e.paidInstallments).toFixed(2)]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["Total: R$ ",e.totalAmount.toFixed(2)]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:e.description||""})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"}),jsxRuntimeExports.jsx("button",{onClick:()=>X(e),className:"inline-flex px-3 py-1 text-xs font-medium rounded-full transition-colors "+(e.paidInstallments===e.totalInstallments?"bg-green-500 text-white":e.paidInstallments>0?"bg-yellow-500 text-white":"bg-red-500 text-white"),children:e.paidInstallments===e.totalInstallments?"Pago":e.paidInstallments>0?"Parcial":"Pendente"})]})}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[e.paidInstallments,"/",e.totalInstallments," parcelas"]}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:["R$ ",e.installmentAmount.toFixed(2)]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(e.paidInstallments===e.totalInstallments?"bg-green-500":e.paidInstallments>0?"bg-yellow-500":"bg-red-500"),style:{width:e.paidInstallments/e.totalInstallments*100+"%"}})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[new Date(e.firstDate).toLocaleDateString("pt-BR")," - ",new Date(e.lastDate).toLocaleDateString("pt-BR")]}),jsxRuntimeExports.jsx("button",{onClick:()=>Q(e),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id):jsxRuntimeExports.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl",style:{backgroundColor:`${t.color}20`},children:jsxRuntimeExports.jsx("span",{className:"text-lg",children:t.icon})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900 truncate",children:t.name}),jsxRuntimeExports.jsxs("div",{className:"text-sm font-semibold "+("receita"===e.type?"text-green-600":"text-red-600"),children:["receita"===e.type?"+":"-","R$ ",e.amount.toFixed(2)]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:e.description||""})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"}),jsxRuntimeExports.jsx("button",{onClick:()=>X(e),className:"inline-flex px-3 py-1 text-xs font-medium rounded-full transition-colors "+(e.isPaid?"bg-green-500 text-white":"bg-red-500 text-white"),children:e.isPaid?"Pago":"Pendente"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:e.date.toLocaleDateString("pt-BR")}),jsxRuntimeExports.jsx("button",{onClick:()=>Q(e),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id)})}),!H&&!q&&ae.length>0&&jsxRuntimeExports.jsx("div",{className:"hidden lg:block transactions-container overflow-x-hidden",children:jsxRuntimeExports.jsx("div",{className:"lg:px-2 lg:px-0",children:jsxRuntimeExports.jsxs("table",{className:"w-full transactions-table",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b border-gray-200",children:[jsxRuntimeExports.jsx("th",{className:"text-left py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm hidden lg:table-cell",children:"Data"}),jsxRuntimeExports.jsx("th",{className:"text-left py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm hidden lg:table-cell",children:"Descrio"}),jsxRuntimeExports.jsx("th",{className:"text-left py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm",children:"Categoria"}),jsxRuntimeExports.jsx("th",{className:"text-left py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm hidden lg:table-cell",children:"Tipo"}),jsxRuntimeExports.jsx("th",{className:"text-center py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm hidden lg:table-cell",children:"Parcelado"}),jsxRuntimeExports.jsx("th",{className:"text-center py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"text-right py-3 lg:py-3 px-1 lg:px-4 font-medium text-gray-700 text-[10px] lg:text-sm",children:"Valor"})]})}),jsxRuntimeExports.jsx("tbody",{children:le.map(e=>{const t=K(e.category);return e.isGrouped?jsxRuntimeExports.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-[10px] lg:text-sm text-gray-600 hidden lg:table-cell",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{children:e.firstDate.toLocaleDateString("pt-BR")}),e.firstDate.getTime()!==e.lastDate.getTime()&&jsxRuntimeExports.jsxs("span",{className:"text-[8px] lg:text-xs text-gray-400",children:["at ",e.lastDate.toLocaleDateString("pt-BR")]})]})}),jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-[10px] lg:text-sm text-gray-900 font-medium hidden lg:table-cell",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jsxRuntimeExports.jsx("span",{className:"truncate max-w-[80px] lg:max-w-none",children:e.description})})}),jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 lg:space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"flex h-5 w-5 lg:h-8 lg:w-8 items-center justify-center rounded-xl",style:{backgroundColor:`${t.color}20`},children:jsxRuntimeExports.jsx("span",{className:"text-[10px] lg:text-sm",children:t.icon})}),jsxRuntimeExports.jsx("span",{className:"text-[10px] lg:text-sm font-bold truncate max-w-[60px] lg:max-w-none "+("receita"===e.type?"text-green-600":"text-red-600"),children:t.name})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center ml-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>Q(e),className:"p-0.5 lg:p-1.5 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir transao",children:jsxRuntimeExports.jsx("svg",{className:"w-3 h-3 lg:w-3.5 lg:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})}),jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 hidden lg:table-cell",children:jsxRuntimeExports.jsx("span",{className:"inline-flex px-1 lg:px-2 py-0.5 lg:py-1 text-[8px] lg:text-xs font-medium rounded-full "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"})}),jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-center hidden lg:table-cell",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-0 lg:space-y-0 lg:space-x-2",children:[jsxRuntimeExports.jsxs("span",{className:"inline-flex px-1 lg:px-2 py-0.5 lg:py-1 text-[8px] lg:text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:[e.installments,"x"]}),jsxRuntimeExports.jsxs("span",{className:"text-[8px] lg:text-xs text-gray-600 font-medium",children:["R$ ",e.installmentAmount.toFixed(2)]})]})}),jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-center",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-0 lg:space-y-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>X(e),className:"inline-flex px-1 lg:px-2 py-0.5 lg:py-1 text-[8px] lg:text-xs font-medium rounded-full transition-colors "+(e.paidInstallments===e.totalInstallments?"bg-green-500 text-white hover:bg-green-600 intense-pulse-green ring-2 ring-green-300":e.paidInstallments>0?"bg-yellow-500 text-white hover:bg-yellow-600 intense-pulse-yellow ring-2 ring-yellow-300":"bg-red-500 text-white hover:bg-red-600 intense-pulse ring-2 ring-red-300"),children:e.paidInstallments===e.totalInstallments?"Pago":e.paidInstallments>0?"Parcial":"Pendente"}),jsxRuntimeExports.jsxs("div",{className:"text-[8px] lg:text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("span",{className:"lg:hidden",children:[e.paidInstallments,"/",e.totalInstallments," - R$ ",e.installmentAmount.toFixed(2)]}),jsxRuntimeExports.jsxs("span",{className:"hidden lg:inline",children:[e.paidInstallments,"/",e.totalInstallments]})]})]})}),jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-right text-[9px] lg:text-sm font-semibold "+("receita"===e.type?"text-green-600":"text-red-600"),children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("span",{children:["receita"===e.type?"+":"-","R$ ",e.totalAmount.toFixed(2)]}),jsxRuntimeExports.jsxs("span",{className:"text-[8px] lg:text-xs text-gray-500 hidden lg:inline",children:["Restante: R$ ",Math.max(0,e.totalAmount-e.installmentAmount*e.paidInstallments).toFixed(2)]})]})})]},e.id):jsxRuntimeExports.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-[10px] lg:text-sm text-gray-600 hidden lg:table-cell",children:e.date.toLocaleDateString("pt-BR")}),jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-[10px] lg:text-sm text-gray-900 font-medium hidden lg:table-cell",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jsxRuntimeExports.jsx("span",{className:"truncate max-w-[80px] lg:max-w-none",children:e.description})})}),jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 lg:space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"flex h-5 w-5 lg:h-8 lg:w-8 items-center justify-center rounded-xl",style:{backgroundColor:`${t.color}20`},children:jsxRuntimeExports.jsx("span",{className:"text-[10px] lg:text-sm",children:t.icon})}),jsxRuntimeExports.jsx("span",{className:"text-[10px] lg:text-sm font-bold truncate max-w-[60px] lg:max-w-none "+("receita"===e.type?"text-green-600":"text-red-600"),children:t.name})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center ml-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>Q(e),className:"p-0.5 lg:p-1.5 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir transao",children:jsxRuntimeExports.jsx("svg",{className:"w-3 h-3 lg:w-3.5 lg:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})}),jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 hidden lg:table-cell",children:jsxRuntimeExports.jsx("span",{className:"inline-flex px-1 lg:px-2 py-0.5 lg:py-1 text-[8px] lg:text-xs font-medium rounded-full "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"})}),jsxRuntimeExports.jsx("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-center",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center space-y-0 lg:space-y-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>X(e),className:"inline-flex px-1 lg:px-3 py-0.5 lg:py-1 text-[8px] lg:text-xs font-medium rounded-full transition-colors "+(e.isPaid?"bg-green-500 text-white hover:bg-green-600 intense-pulse-green ring-2 ring-green-300":"bg-red-500 text-white hover:bg-red-600 intense-pulse ring-2 ring-red-300"),children:e.isPaid?"Pago":"Pendente"})})}),jsxRuntimeExports.jsxs("td",{className:"py-3 lg:py-4 px-1 lg:px-4 text-right text-[9px] lg:text-sm font-semibold "+("receita"===e.type?"text-green-600":"text-red-600"),children:["receita"===e.type?"+":"-","R$ ",e.amount.toFixed(2)]})]},e.id)})})]})})}),!H&&!q&&ae.length>b&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mt-4 lg:mt-6 pt-3 lg:pt-4 border-t border-gray-200 space-y-3 sm:space-y-0",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs lg:text-sm text-gray-600 text-center sm:text-left",children:["Mostrando ",ne+1,"-",Math.min(oe,ae.length)," de ",ae.length," transaes"]}),ae.length>=10&&jsxRuntimeExports.jsx("div",{className:"lg:hidden flex justify-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>v(y+1),disabled:y>=ie,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white text-sm font-medium rounded-lg transition-colors",children:"Ver mais"})}),jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{y>1&&v(y-1)},disabled:1===y,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-1",children:(()=>{const e=Math.max(1,y-Math.floor(2.5)),t=Math.min(ie,e+5-1),s=[];e>1&&(s.push(jsxRuntimeExports.jsx("button",{onClick:()=>ce(1),className:"w-8 h-8 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:bg-gray-100",children:"1"},1)),e>2&&s.push(jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"..."},"ellipsis1")));for(let r=e;r<=t;r++)s.push(jsxRuntimeExports.jsx("button",{onClick:()=>ce(r),className:"w-8 h-8 rounded-lg text-sm font-medium transition-colors "+(r===y?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:r},r));return t<ie&&(t<ie-1&&s.push(jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"..."},"ellipsis2")),s.push(jsxRuntimeExports.jsx("button",{onClick:()=>ce(ie),className:"w-8 h-8 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:bg-gray-100",children:ie},ie))),s})()}),jsxRuntimeExports.jsx("button",{onClick:()=>{y<ie&&v(y+1)},disabled:y===ie,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),jsxRuntimeExports.jsxs("button",{onClick:he,className:"lg:hidden fixed bottom-28 right-6 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white w-16 h-16 rounded-full shadow-xl flex items-center justify-center transition-all duration-300 hover:scale-110 active:scale-95 z-50 group",style:{boxShadow:"0 8px 25px rgba(59, 130, 246, 0.4), 0 4px 12px rgba(0, 0, 0, 0.15)"},children:[jsxRuntimeExports.jsx("svg",{className:"w-7 h-7 transition-transform duration-300 group-hover:rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),jsxRuntimeExports.jsxs("div",{className:"absolute right-20 top-1/2 transform -translate-y-1/2 bg-gray-900 text-white text-xs px-3 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap pointer-events-none",children:["Nova Transao",jsxRuntimeExports.jsx("div",{className:"absolute left-full top-1/2 transform -translate-y-1/2 border-4 border-transparent border-l-gray-900"})]})]}),jsxRuntimeExports.jsx(NewTransactionModal,{isOpen:e,onClose:()=>{t(!1),j(!1)},userId:V?.uid||"test-user-123",onTransactionCreating:e=>j(e)}),s&&n&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-4 lg:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:n.isPaid?jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-yellow-600 text-lg",children:""})}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-green-600 text-lg",children:""})})}),jsxRuntimeExports.jsx("div",{className:"ml-3",children:jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900",children:n.isPaid?"receita"===n.type?"Desmarcar Recebimento":"Desmarcar Pagamento":"receita"===n.type?"Confirmar Recebimento":"Confirmar Pagamento"})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[jsxRuntimeExports.jsx("strong",{children:"Transao:"})," ",n.description]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[jsxRuntimeExports.jsx("strong",{children:"Valor:"})," R$ ",n.amount?.toFixed(2)||n.totalAmount?.toFixed(2)]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[jsxRuntimeExports.jsx("strong",{children:"Data:"})," ",n.date?.toLocaleDateString("pt-BR")||n.firstDate?.toLocaleDateString("pt-BR")]}),n.isGrouped&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-800 font-medium mb-1",children:" Transao Parcelada"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-blue-600",children:["Parcelas: ",n.paidInstallments,"/",n.totalInstallments," pagas"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-blue-600",children:["Valor por parcela: R$ ",n.installmentAmount?.toFixed(2)]}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-blue-800",children:"Escolha quais faturas processar:"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const e=$.filter(e=>e.installmentGroupId===n.installmentGroupId).map(e=>e.id);c(t=>e)},className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Selecionar Todas"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{c(e=>[])},className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Limpar Seleo"})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:$.filter(e=>e.installmentGroupId===n.installmentGroupId).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()).map(e=>jsxRuntimeExports.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",value:e.id,checked:l.includes(e.id),onChange:t=>{c(s=>t.target.checked?[...s,e.id]:s.filter(t=>t!==e.id))},className:"text-blue-600 focus:ring-blue-500"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs "+(e.isPaid?"text-gray-500":"text-blue-700"),children:[e.description," - ",e.date.toLocaleDateString("pt-BR")]}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs px-2 py-1 rounded-full "+(e.isPaid?"bg-green-500 text-white intense-pulse-green ring-2 ring-green-300":"bg-red-500 text-white intense-pulse ring-2 ring-red-300"),children:e.isPaid?"Paga":"Pendente"})]})]},e.id))}),l.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:[l.length," fatura(s) selecionada(s) -",(()=>{const e=$.filter(e=>e.installmentGroupId===n.installmentGroupId&&l.includes(e.id)),t=e.filter(e=>!e.isPaid).length,s=e.filter(e=>e.isPaid).length;let r=[];return t>0&&r.push("receita"===n.type?`${t} pode(m) ser recebida(s)`:`${t} pode(m) ser paga(s)`),s>0&&r.push("receita"===n.type?`${s} pode(m) ser desmarcada(s) como no recebida(s)`:`${s} pode(m) ser desmarcada(s) como no paga(s)`),` ${r.join(", ")}`})()]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"flex space-x-3",children:(()=>{const e=n.isGrouped?$.filter(e=>e.installmentGroupId===n.installmentGroupId&&l.includes(e.id)):[n],t=e.some(e=>!e.isPaid),s=e.some(e=>e.isPaid);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:ee,disabled:n.isGrouped&&l.length>0&&!t,className:"flex-1 px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors "+(n.isPaid?"bg-yellow-600 hover:bg-yellow-700":n.isGrouped&&l.length>0&&!t?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:n.isPaid?"receita"===n.type?"Marcar como No Recebido":"Marcar como No Pago":n.isGrouped?l.length>0?"receita"===n.type?`Receber ${e.filter(e=>!e.isPaid).length} Parcela(s)`:`Pagar ${e.filter(e=>!e.isPaid).length} Fatura(s)`:"receita"===n.type?"Receber Prxima Parcela":"Pagar Prxima Fatura":"receita"===n.type?"Confirmar Recebimento":"Confirmar Pagamento"}),n.isGrouped&&jsxRuntimeExports.jsx("button",{onClick:te,disabled:l.length>0&&!s,className:"flex-1 px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors "+(l.length>0&&!s?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"),children:l.length>0?"receita"===n.type?`Desmarcar ${e.filter(e=>e.isPaid).length} Parcela(s)`:`Desmarcar ${e.filter(e=>e.isPaid).length} Fatura(s)`:"receita"===n.type?"Parcela No Recebida":"Fatura No Paga"})]})})()}),jsxRuntimeExports.jsx("button",{onClick:()=>{r(!1),o(null)},className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancelar"})]})]})}),a&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 lg:p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Filtros"}),jsxRuntimeExports.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:jsxRuntimeExports.jsx("span",{className:"text-lg lg:text-xl",children:""})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 lg:p-6 space-y-3 lg:space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Perodo"}),jsxRuntimeExports.jsxs("select",{value:S,onChange:e=>N(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[jsxRuntimeExports.jsx("option",{value:"personalizado",children:"Personalizado"}),jsxRuntimeExports.jsx("option",{value:"este-mes",children:"Este ms"}),jsxRuntimeExports.jsx("option",{value:"mes-passado",children:"Ms passado"}),jsxRuntimeExports.jsx("option",{value:"ultimos-3-meses",children:"ltimos 3 meses"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"De"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{id:"start-date-input",type:"date",disabled:"personalizado"!==S,value:C,onChange:e=>_(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px] "+("personalizado"!==S?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"")}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{if("personalizado"===S){const e=document.getElementById("start-date-input");e?.showPicker()}},className:"absolute right-3 top-1/2 transform -translate-y-1/2 "+("personalizado"!==S?"text-gray-400 cursor-not-allowed":"text-gray-400 hover:text-gray-600 cursor-pointer"),disabled:"personalizado"!==S,children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"At"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{id:"end-date-input",type:"date",disabled:"personalizado"!==S,value:P,onChange:e=>T(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px] "+("personalizado"!==S?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"")}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{if("personalizado"===S){const e=document.getElementById("end-date-input");e?.showPicker()}},className:"absolute right-3 top-1/2 transform -translate-y-1/2 "+("personalizado"!==S?"text-gray-400 cursor-not-allowed":"text-gray-400 hover:text-gray-600 cursor-pointer"),disabled:"personalizado"!==S,children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipo"}),jsxRuntimeExports.jsxs("select",{value:A,onChange:e=>k(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[jsxRuntimeExports.jsx("option",{value:"todas",children:"Todas"}),jsxRuntimeExports.jsx("option",{value:"receitas",children:"Receitas"}),jsxRuntimeExports.jsx("option",{value:"despesas",children:"Despesas"}),jsxRuntimeExports.jsx("option",{value:"contas-parceladas",children:"Parceladas"}),jsxRuntimeExports.jsx("option",{value:"receitas-parceladas",children:"Rec. Parceladas"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 lg:p-6 border-t border-gray-200 space-y-2 sm:space-y-0 sm:space-x-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{N("personalizado"),_(""),T(""),k("todas"),m("all"),g(""),i(!1)},className:"flex items-center justify-center space-x-2 px-4 py-2 text-xs lg:text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors",children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Limpar filtros"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>i(!1),className:"flex items-center justify-center space-x-2 px-6 py-2 text-xs lg:text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-lg hover:bg-blue-700 hover:border-blue-700 transition-colors shadow-md",children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Aplicar"})]})]})]})})]})},sales=[{date:"2023-04-30",value:4},{date:"2023-05-01",value:6},{date:"2023-05-02",value:8},{date:"2023-05-03",value:7},{date:"2023-05-04",value:10},{date:"2023-05-05",value:12},{date:"2023-05-06",value:10.5},{date:"2023-05-07",value:6},{date:"2023-05-08",value:8},{date:"2023-05-09",value:7.5},{date:"2023-05-10",value:6},{date:"2023-05-11",value:8},{date:"2023-05-12",value:9},{date:"2023-05-13",value:10},{date:"2023-05-14",value:17},{date:"2023-05-15",value:14},{date:"2023-05-16",value:15},{date:"2023-05-17",value:20},{date:"2023-05-18",value:18},{date:"2023-05-19",value:16},{date:"2023-05-20",value:15},{date:"2023-05-21",value:16},{date:"2023-05-22",value:13},{date:"2023-05-23",value:11},{date:"2023-05-24",value:11},{date:"2023-05-25",value:13},{date:"2023-05-26",value:12},{date:"2023-05-27",value:9},{date:"2023-05-28",value:8},{date:"2023-05-29",value:10},{date:"2023-05-30",value:11},{date:"2023-05-31",value:8},{date:"2023-06-01",value:9},{date:"2023-06-02",value:10},{date:"2023-06-03",value:12},{date:"2023-06-04",value:13},{date:"2023-06-05",value:15},{date:"2023-06-06",value:13.5},{date:"2023-06-07",value:13},{date:"2023-06-08",value:13},{date:"2023-06-09",value:14},{date:"2023-06-10",value:13},{date:"2023-06-11",value:12.5}];function AreaChartSemiFilled(){const[e,t]=reactExports.useState(25e3),[s,r]=reactExports.useState(!1),[a,i]=reactExports.useState(""),[n,o]=reactExports.useState(1),[l,c]=reactExports.useState(1),{transactions:h,loading:p}=useTransactionsContext();console.log(" [Budgets] Componente renderizado com",h.length,"transaes");const d=reactExports.useMemo(()=>{if(console.log(" [Budgets] Iniciando processamento do GRFICO com",h.length,"transaes"),!h||0===h.length)return console.log(" [Budgets] Nenhuma transao encontrada"),[];const e=h;console.log(" [Budgets] Usando TODAS as transaes para GRFICO:",{total:e.length});const t=e.reduce((e,t)=>{if(!t||!t.date)return console.warn(" [Budgets] Transao sem data vlida no grfico:",t),e;const s=new Date(t.date),r=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;return e[r]||(e[r]={receitas:0,despesas:0}),"receita"===t.type?e[r].receitas+=t.amount:e[r].despesas+=t.amount,e},{});return Object.entries(t).map(([e,t])=>{const s={date:e,receitas:t.receitas,despesas:t.despesas,saldo:t.receitas-t.despesas};return console.log(" [AreaChartSemiFilled] Item processado:",{dateString:e,dateObject:new Date(e),localString:new Date(e).toLocaleDateString("pt-BR"),receitas:t.receitas,despesas:t.despesas}),s}).sort((e,t)=>e.date.localeCompare(t.date))},[h]),m=reactExports.useMemo(()=>{if(!h||0===h.length)return[];const e=h.filter(e=>!0!==e.isPaid).reduce((e,t)=>{if(!t||!t.date)return e;const s=new Date(t.date),r=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;return e[r]||(e[r]={receitas:0,despesas:0}),"receita"===t.type?e[r].receitas+=t.amount:e[r].despesas+=t.amount,e},{}),t=Object.entries(e).map(([e,t])=>({date:e,receitas:t.receitas,despesas:t.despesas,saldo:t.receitas-t.despesas})).sort((e,t)=>e.date.localeCompare(t.date));return console.log(" [Movimentao Diria] Resultado final aps filtragem:",t),console.log(" [Movimentao Diria] Valores calculados:",t.map(e=>({data:e.date,receitas:e.receitas,despesas:e.despesas,saldo:e.saldo}))),t.length>0&&console.log(" [DEBUG] Primeiro item da tabela:",{data:t[0].date,receitas:t[0].receitas,despesas:t[0].despesas,saldo:t[0].saldo,tipo:typeof t[0].saldo}),t},[h]),u=(new Date).getMonth(),x=(new Date).getFullYear(),f=reactExports.useMemo(()=>{const e=h.filter(e=>{if(!e||!e.date)return!1;const t=new Date(e.date);return t.getMonth()===u&&t.getFullYear()===x}),t=e.filter(e=>"receita"===e.type).reduce((e,t)=>e+t.amount,0),s=e.filter(e=>"despesa"===e.type).reduce((e,t)=>e+t.amount,0);return{receitas:t,despesas:s,saldo:t-s}},[h,u,x]),g=reactExports.useMemo(()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()-e.getDate()},[]),y=reactExports.useMemo(()=>{if(g<=0)return 0;const t=e-f.receitas;return t>0?Math.ceil(t/g):0},[e,f.receitas,g]),v=f.receitas,b=f.despesas,E=f.saldo,j=E>=0,R=Math.ceil(d.length/5),w=5*(n-1),S=w+5;d.slice(w,S);const N=e=>{o(e)},C=e=>{c(e)},_=()=>{r(!0),i(e.toString())},P=()=>{const e=parseFloat(a.replace(/[^\d,]/g,"").replace(",","."));!isNaN(e)&&e>0&&(t(e),r(!1),i(""))},T=()=>{r(!1),i("")};return p?jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Carregando dados do dashboard..."})]})})}):h&&0!==h.length?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"lg:hidden space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"overflow-x-auto scrollbar-hide mobile-carousel mobile-carousel-container",children:jsxRuntimeExports.jsx("div",{className:"flex space-x-3 pb-2",style:{width:"max-content"},children:jsxRuntimeExports.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"280px"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-blue-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4 flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Meta Mensal"}),!s&&jsxRuntimeExports.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"Editar"})]}),s?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"R$"}),jsxRuntimeExports.jsx("input",{type:"text",value:a,onChange:e=>i(e.target.value),className:"text-lg font-semibold text-gray-900 border border-gray-300 rounded px-2 py-1 w-24",placeholder:"25000",autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:P,className:"bg-blue-600 text-white text-xs px-3 py-1 rounded hover:bg-blue-700",children:"Salvar"}),jsxRuntimeExports.jsx("button",{onClick:T,className:"bg-gray-300 text-gray-700 text-xs px-3 py-1 rounded hover:bg-gray-400",children:"Cancelar"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["R$ ",v.toLocaleString("pt-BR")," / R$ ",e.toLocaleString("pt-BR")]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full "+(v/e*100<33?"bg-yellow-500":v/e*100<66?"bg-blue-600":"bg-green-500"),style:{width:`${Math.min(v/e*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(v/e*100),"% concludo"]})]})]})]})})})}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto scrollbar-hide mobile-carousel mobile-carousel-container",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-3 pb-2",style:{width:"max-content"},children:[jsxRuntimeExports.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"180px"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-orange-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Dias Restantes"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[g," dias"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"at o fim do ms"})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"180px"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-green-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Mdia Diria"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["R$ ",y.toLocaleString("pt-BR")]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"necessria para meta"})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"180px"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-purple-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tendncia"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-green-600",children:" Crescendo"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"+15% vs ms anterior"})]})]})})]})})]}),jsxRuntimeExports.jsxs("div",{className:"hidden lg:grid grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-blue-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4 flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Meta Mensal"}),!s&&jsxRuntimeExports.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"Editar"})]}),s?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"R$"}),jsxRuntimeExports.jsx("input",{type:"text",value:a,onChange:e=>i(e.target.value),className:"text-lg font-semibold text-gray-900 border border-gray-300 rounded px-2 py-1 w-24",placeholder:"25000",autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:P,className:"bg-blue-600 text-white text-xs px-3 py-1 rounded hover:bg-blue-700",children:"Salvar"}),jsxRuntimeExports.jsx("button",{onClick:T,className:"bg-gray-300 text-gray-700 text-xs px-3 py-1 rounded hover:bg-gray-400",children:"Cancelar"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["R$ ",v.toLocaleString("pt-BR")," / R$ ",e.toLocaleString("pt-BR")]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full "+(v/e*100<33?"bg-yellow-500":v/e*100<66?"bg-blue-600":"bg-green-500"),style:{width:`${Math.min(v/e*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(v/e*100),"% concludo"]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-orange-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Dias Restantes"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[g," dias"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"at o fim do ms"})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-green-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Mdia Diria"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["R$ ",y.toLocaleString("pt-BR")]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"necessria para meta"})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-purple-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tendncia"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-green-600",children:" Crescendo"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"+15% vs ms anterior"})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl border-0 lg:border border-gray-200 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"px-2 lg:px-6 py-3 lg:py-4 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Movimentao Diria"}),jsxRuntimeExports.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:"ltimos 7 dias de movimentao"})]}),jsxRuntimeExports.jsxs("div",{className:"lg:hidden",children:[(()=>{const e=4*(l-1),t=e+4;return m.slice(e,t).map((e,t)=>{const[s,r,a]=e.date.split("-").map(Number),i=new Date(s,r-1,a);return jsxRuntimeExports.jsxs("div",{className:"p-2 lg:p-3 border-t-2 border-b border-gray-200 last:border-b-0 "+(e.saldo>=0?"border-t-green-400":"border-t-red-400"),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-gray-900",children:i.toLocaleDateString("pt-BR")}),jsxRuntimeExports.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.saldo>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.saldo>=0?"Positivo":"Negativo"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Receitas"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-green-600",children:["R$ ",e.receitas.toLocaleString("pt-BR")]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Despesas"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-red-600",children:["R$ ",e.despesas.toLocaleString("pt-BR")]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Saldo"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-semibold "+(e.saldo>=0?"text-green-600":"text-red-600"),children:["R$ ",e.saldo.toLocaleString("pt-BR")]})]})]})]},t)})})(),m.length>4&&(()=>{const e=Math.ceil(m.length/4),t=4*(l-1),s=Math.min(t+4,m.length);return jsxRuntimeExports.jsx("div",{className:"px-2 py-3 border-t border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["Mostrando ",t+1," a ",s," de ",m.length," transaes"]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-1",children:[jsxRuntimeExports.jsx("button",{className:"px-2 py-1 text-xs rounded-md bg-gray-100 text-gray-400 cursor-not-allowed",disabled:1===l,onClick:()=>C(l-1),children:"Anterior"}),Array.from({length:e},(e,t)=>t+1).map(e=>jsxRuntimeExports.jsx("button",{className:"px-2 py-1 text-xs rounded-md "+(l===e?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),onClick:()=>C(e),children:e},e)),jsxRuntimeExports.jsx("button",{className:"px-2 py-1 text-xs rounded-md bg-white text-gray-700 hover:bg-gray-50 border border-gray-300",disabled:l===e,onClick:()=>C(l+1),children:"Prximo"})]})]})})})()]}),jsxRuntimeExports.jsx("div",{className:"hidden lg:block overflow-x-hidden",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-3 lg:px-6 py-2 lg:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),jsxRuntimeExports.jsx("th",{className:"px-3 lg:px-6 py-2 lg:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receitas"}),jsxRuntimeExports.jsx("th",{className:"px-3 lg:px-6 py-2 lg:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Despesas"}),jsxRuntimeExports.jsx("th",{className:"px-3 lg:px-6 py-2 lg:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo"}),jsxRuntimeExports.jsx("th",{className:"px-3 lg:px-6 py-2 lg:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map((e,t)=>{const[s,r,a]=e.date.split("-").map(Number),i=new Date(s,r-1,a);return console.log(" [Tabela] Data corrigida:",{original:e.date,localDate:i,localString:i.toLocaleDateString("pt-BR")}),jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-3 lg:px-6 py-3 lg:py-4 text-sm text-gray-900",children:i.toLocaleDateString("pt-BR")}),jsxRuntimeExports.jsxs("td",{className:"px-3 lg:px-6 py-3 lg:py-4 text-sm text-green-600 font-medium",children:["R$ ",e.receitas.toLocaleString("pt-BR")]}),jsxRuntimeExports.jsxs("td",{className:"px-3 lg:px-6 py-3 lg:py-4 text-sm text-red-600 font-medium",children:["R$ ",e.despesas.toLocaleString("pt-BR")]}),jsxRuntimeExports.jsxs("td",{className:"px-3 lg:px-6 py-3 lg:py-4 text-sm font-medium "+(e.saldo>=0?"text-green-600":"text-red-600"),children:["R$ ",e.saldo.toLocaleString("pt-BR")]}),jsxRuntimeExports.jsx("td",{className:"px-3 lg:px-6 py-3 lg:py-4",children:jsxRuntimeExports.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.saldo>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.saldo>=0?"Positivo":"Negativo"})})]},t)})})]})}),d.length>4&&jsxRuntimeExports.jsx("div",{className:"hidden lg:block px-2 lg:px-6 py-3 lg:py-4 border-t border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 lg:gap-0",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs lg:text-sm text-gray-500",children:["Mostrando ",w+1," a ",Math.min(S,d.length)," de ",d.length," transaes"]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-1 lg:space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>N(n-1),disabled:1===n,className:"px-2 lg:px-3 py-1 text-xs lg:text-sm rounded-md "+(1===n?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:"Anterior"}),Array.from({length:R},(e,t)=>t+1).map(e=>jsxRuntimeExports.jsx("button",{onClick:()=>N(e),className:"px-2 lg:px-3 py-1 text-xs lg:text-sm rounded-md "+(n===e?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:e},e)),jsxRuntimeExports.jsx("button",{onClick:()=>N(n+1),disabled:n===R,className:"px-2 lg:px-3 py-1 text-xs lg:text-sm rounded-md "+(n===R?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:"Prximo"})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 lg:p-6 rounded-xl border-0 lg:border border-gray-200",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progresso do Ms"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Receitas"}),jsxRuntimeExports.jsxs("span",{children:[Math.round(v/e*100),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:jsxRuntimeExports.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${Math.min(v/e*100,100)}%`}})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Despesas"}),jsxRuntimeExports.jsxs("span",{children:[Math.round(b/e*100),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:jsxRuntimeExports.jsx("div",{className:"bg-red-500 h-3 rounded-full",style:{width:`${Math.min(b/e*100,100)}%`}})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Saldo"}),jsxRuntimeExports.jsxs("span",{children:[j?"+":"",Math.round(E/e*100),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:jsxRuntimeExports.jsx("div",{className:"h-3 rounded-full "+(j?"bg-blue-500":"bg-red-500"),style:{width:`${Math.min(100*Math.abs(E/e),100)}%`}})})]})]})]})]}):jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma transao encontrada"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 mb-4",children:"Adicione algumas transaes para ver seu dashboard personalizado"}),jsxRuntimeExports.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Adicionar Transao"})]})})})}function BarChartThinBreakdown({data:e}){const t=e.reduce((e,t)=>e+t.value,0),s=t+.3*(e.length-1);let r=0;return 0===e.length?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-16 text-gray-500",children:jsxRuntimeExports.jsx("p",{children:"Nenhuma receita encontrada"})}):jsxRuntimeExports.jsx("div",{className:"relative h-[var(--height)] mt-4 mb-8",style:{"--marginTop":"0px","--marginRight":"0px","--marginBottom":"0px","--marginLeft":"0px","--height":"12px"},children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 \n          h-[calc(100%-var(--marginTop)-var(--marginBottom))]\n          w-[calc(100%-var(--marginLeft)-var(--marginRight))]\n          translate-x-[var(--marginLeft)]\n          translate-y-[var(--marginTop)]\n          overflow-visible\n        ",children:e.map((e,a)=>{const i=e.value/s*100,n=r,o=e.value/t*100;return r+=i+.3,jsxRuntimeExports.jsxs("div",{className:"relative group",style:{width:`${i}%`,height:"12px",left:`${n}%`,position:"absolute"},children:[jsxRuntimeExports.jsx("div",{className:"transition-all duration-200 group-hover:opacity-80 group-hover:scale-105 cursor-pointer",style:{width:"100%",height:"100%",borderRadius:"4px",backgroundColor:e.color}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:e.key}),jsxRuntimeExports.jsxs("div",{children:["R$ ",e.value.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),jsxRuntimeExports.jsxs("div",{className:"text-gray-300",children:[o.toFixed(1),"% do total"]}),jsxRuntimeExports.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400 text-center",style:{left:`${n+i/2}%`,top:"30px"},children:e.key})]},a)})})})}sales.map(e=>({...e,date:new Date(e.date)}));const Budgets=()=>{try{const[e,t]=reactExports.useState("cashflow"),[s,r]=reactExports.useState("table"),[a,i]=reactExports.useState(!1),[n,o]=reactExports.useState("este-mes"),[l,c]=reactExports.useState(""),[h,p]=reactExports.useState(""),[d,m]=reactExports.useState("todas"),[u,x]=reactExports.useState(25e3),[f,g]=reactExports.useState(!1),[y,v]=reactExports.useState(""),{transactions:b,loading:E,error:j}=useTransactionsContext(),{user:R}=useAuth(),{categories:w}=useCategories(R?.uid||"test-user-123"),S=(new Date).getMonth(),N=(new Date).getFullYear(),C=reactExports.useMemo(()=>b.filter(e=>{if(!e||!e.date)return!1;const t=new Date(e.date);return t.getMonth()===S&&t.getFullYear()===N}).reduce((e,t)=>("receita"===t.type?e.receitas+=t.amount:"despesa"===t.type&&(e.despesas+=t.amount),e),{receitas:0,despesas:0,saldo:0}),[b,S,N]),_=C.receitas,P=(C.despesas,()=>{g(!0),v(u.toString())}),T=()=>{const e=parseFloat(y.replace(/[^\d,]/g,"").replace(",","."));!isNaN(e)&&e>0&&(x(e),g(!1),v(""))},A=()=>{g(!1),v("")},k=e=>{const t=new Date,s=t.getFullYear(),r=t.getMonth();switch(e){case"este-mes":const e=new Date(s,r,1),t=new Date(s,r+1,0);return{start:e.toISOString().split("T")[0],end:t.toISOString().split("T")[0]};case"mes-passado":const a=new Date(s,r-1,1),i=new Date(s,r,0);return{start:a.toISOString().split("T")[0],end:i.toISOString().split("T")[0]};case"ultimos-3-meses":const n=new Date(s,r-2,1),o=new Date(s,r+1,0);return{start:n.toISOString().split("T")[0],end:o.toISOString().split("T")[0]};default:return{start:"",end:""}}};reactExports.useEffect(()=>{const{start:e,end:t}=k(n);c(e),p(t)},[n]);const D=()=>{if(!b||0===b.length)return 0;const e=new Date,t=e.getMonth(),s=e.getFullYear(),r=0===t?11:t-1,a=0===t?s-1:s,i=b.filter(e=>{if(!e||!e.date)return!1;const r=new Date(e.date);return r.getMonth()===t&&r.getFullYear()===s&&"receita"===e.type}),n=b.filter(e=>{if(!e||!e.date)return!1;const t=new Date(e.date);return t.getMonth()===r&&t.getFullYear()===a&&"receita"===e.type}),o=i.reduce((e,t)=>e+t.amount,0),l=n.reduce((e,t)=>e+t.amount,0);return 0===l?o>0?100:0:(o-l)/l*100},I=()=>{if(!b||0===b.length)return 0;const e=new Date,t=e.getMonth(),s=e.getFullYear();let r=0,a=0;for(let i=0;i<3;i++){const e=t-i<0?t-i+12:t-i,n=t-i<0?s-1:s,o=b.filter(t=>{if(!t||!t.date)return!1;const s=new Date(t.date);return s.getMonth()===e&&s.getFullYear()===n&&"receita"===t.type}).reduce((e,t)=>e+t.amount,0);o>0&&(r+=o,a++)}if(0===a)return 0;return 6*(r/a)};reactExports.useEffect(()=>{const e=e=>{e.target.classList.contains("modal-backdrop")&&i(!1)};return a&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a]);const M=reactExports.useMemo(()=>{if(!b||0===b.length)return[];let e=[...b];const{start:t,end:s}=k(n),r=new Date(t),a=new Date(s),i=new Date(a);switch(i.setDate(i.getDate()+1),e=e.filter(e=>{const t=new Date(e.date);return t>=r&&t<i}),d){case"receitas":e=e.filter(e=>"receita"===e.type);break;case"despesas":e=e.filter(e=>"despesa"===e.type);break;case"contas-parceladas":e=e.filter(e=>e.installments&&e.installments>1);break;case"receitas-parceladas":e=e.filter(e=>"receita"===e.type&&e.installments&&e.installments>1)}return e},[b,n,l,h,d]),F=reactExports.useMemo(()=>{if(!M||0===M.length)return[];const e=M.filter(e=>"receita"===e.type).reduce((e,t)=>{const s=t.category;return e[s]||(e[s]=0),e[s]+=t.amount,e},{}),t=(e,t)=>{const s=w.find(t=>t.name===e);if(s&&s.color)return s.color;const r=["#8b5cf6","#3b82f6","#10b981","#f59e0b","#ef4444","#06b6d4","#84cc16","#f97316"];return r[t%r.length]};return Object.entries(e).map(([e,s],r)=>({key:e,value:s,color:t(e,r)})).sort((e,t)=>t.value-e.value)},[b,w]),{cashFlowData:L,chartData:B}=reactExports.useMemo(()=>{if(!b||0===b.length)return{cashFlowData:[],chartData:[]};if(1===b.length){const e=b[0];if(!e||!e.date)return{cashFlowData:[],chartData:[]};const t={date:e.date,name:e.date.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),receitas:"receita"===e.type?e.amount:0,despesas:"despesa"===e.type?e.amount:0,saldo:"receita"===e.type?e.amount:-e.amount};return{cashFlowData:[{date:e.date.toLocaleDateString("pt-BR"),description:e.description,category:e.category,account:"nica",income:t.receitas,expense:t.despesas,balance:t.saldo}],chartData:[t]}}const e=b.reduce((e,t)=>{if(!t||!t.date)return console.warn(" [Budgets] Transao sem data vlida no fluxo de caixa:",t),e;if(t.installmentNumber&&!0===t.isPaid)return e;const s=new Date(t.date),r=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;return e[r]||(e[r]={receitas:0,despesas:0,transactions:[]}),"receita"===t.type?e[r].receitas+=t.amount:e[r].despesas+=t.amount,e[r].transactions.push(t),e},{}),t=Object.keys(e).sort();let s=0;const r=t.map(t=>{const r=e[t];return s+=r.receitas-r.despesas,{date:new Date(t).toLocaleDateString("pt-BR"),description:`${r.transactions.length} transao(es)`,category:"Mltiplas",account:"Mltiplas",income:r.receitas,expense:r.despesas,balance:s}}),a=t.map(t=>{const r=e[t];return{date:new Date(t),name:new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),receitas:r.receitas,despesas:r.despesas,saldo:s}});let i=a;if(a.length<3){const e=new Date(a[0].date),t=new Date(a[a.length-1].date),s=[];if(1===a.length){const t=new Date(e);t.setDate(t.getDate()-1),s.push({date:t,name:t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),receitas:0,despesas:0,saldo:0})}if(s.push(...a),1===a.length){const e=new Date(t);e.setDate(e.getDate()+1),s.push({date:e,name:e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),receitas:0,despesas:0,saldo:a[0].saldo})}i=s}return{cashFlowData:r,chartData:i}},[b]),O=[{id:"cashflow",name:"Fluxo de Caixa",icon:"",active:!0},{id:"equity",name:"Evoluo Patrimonial",icon:"",active:!1},{id:"expenses",name:"Anlise de Gastos",icon:"",active:!1}],V=()=>{switch(e){case"cashflow":default:return z();case"equity":return $();case"expenses":return H()}},z=()=>jsxRuntimeExports.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 lg:mb-4 gap-3 lg:gap-0",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg lg:text-xl font-bold text-gray-900",children:["Fluxo de Caixa - ",G()]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-1 lg:space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>r("chart"),className:"px-2 lg:px-4 py-1.5 lg:py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors "+("chart"===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Grfico"}),jsxRuntimeExports.jsx("button",{onClick:()=>r("table"),className:"px-2 lg:px-4 py-1.5 lg:py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors "+("table"===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Tabela"})]})]}),"chart"===s?jsxRuntimeExports.jsx("div",{className:"h-96",children:B.length>0?jsxRuntimeExports.jsx(AreaChartSemiFilled,{}):b.length>0?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-500",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:""}),jsxRuntimeExports.jsx("p",{children:"Dados insuficientes para o grfico"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1",children:"Tente ajustar os filtros ou adicionar mais transaes"})]})}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-500",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:""}),jsxRuntimeExports.jsx("p",{children:"Nenhuma transao encontrada"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1",children:"Adicione transaes para ver o fluxo de caixa"})]})})}):q()]}),G=()=>{if("personalizado"===n){if(l&&h){const e=new Date(l),t=new Date(h),s=e.toLocaleDateString("pt-BR",{month:"long"}),r=e.getFullYear(),a=t.toLocaleDateString("pt-BR",{month:"long"}),i=t.getFullYear();return s===a&&r===i?`${s} de ${r}`:`${s} de ${r} a ${a} de ${i}`}return"Perodo Personalizado"}const{start:e,end:t}=k(n),s=new Date(e+"T00:00:00"),r=new Date(t+"T23:59:59");switch(n){case"este-mes":return r.toLocaleDateString("pt-BR",{month:"long",year:"numeric"});case"mes-passado":return s.toLocaleDateString("pt-BR",{month:"long",year:"numeric"});case"ultimos-3-meses":return`${s.toLocaleDateString("pt-BR",{month:"long"})} de ${s.getFullYear()} a ${r.toLocaleDateString("pt-BR",{month:"long"})} de ${r.getFullYear()}`;default:return"Perodo Selecionado"}},$=()=>jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Evoluo Patrimonial - ",G()]})}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Receitas por Categoria"}),jsxRuntimeExports.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:jsxRuntimeExports.jsx(BarChartThinBreakdown,{data:F})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 5 Maiores Receitas"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:M.filter(e=>"receita"===e.type).sort((e,t)=>t.amount-e.amount).slice(0,5).map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900",children:e.description}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:e.category})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("div",{className:"font-bold text-green-600",children:["R$ ",e.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:e.date.toLocaleDateString("pt-BR")})]})]},e.id))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 lg:gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm lg:text-lg font-semibold text-gray-900 mb-2 lg:mb-4",children:"Patrimnio Atual"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:"Saldo Total"}),jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["R$ ",F.reduce((e,t)=>e+t.value,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Baseado nas receitas do perodo"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm lg:text-lg font-semibold text-gray-900 mb-2 lg:mb-4",children:"Crescimento"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:"Variao Mensal"}),jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold "+(D()>=0?"text-green-600":"text-red-600"),children:[D()>=0?"+":"",D().toFixed(1),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Comparado ao ms anterior"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm lg:text-lg font-semibold text-gray-900 mb-2 lg:mb-4",children:"Projeo"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:"Prximos 6 meses"}),jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold text-purple-600",children:["R$ ",I().toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Baseado na tendncia atual"})]})]})]})]}),H=()=>{const e=M.filter(e=>"despesa"===e.type),t=e.reduce((e,t)=>{const s=t.category;return e[s]||(e[s]=0),e[s]+=t.amount,e},{}),s=Object.entries(t).map(([e,t])=>({key:e,value:t,color:w.find(t=>t.name===e)?.color||"#ef4444"})).sort((e,t)=>t.value-e.value);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Anlise de Gastos - ",(new Date).toLocaleDateString("pt-BR",{month:"long",year:"numeric"})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-4 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Total Gasto"}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["R$ ",e.reduce((e,t)=>e+t.amount,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-4 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Categorias"}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Object.keys(t).length})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-4 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Transaes"}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.length})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-4 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Mdia por Transao"}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["R$ ",e.length>0?(e.reduce((e,t)=>e+t.amount,0)/e.length).toLocaleString("pt-BR",{minimumFractionDigits:2}):"0,00"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm lg:text-lg font-semibold text-gray-900 mb-2 lg:mb-4",children:"Gastos por Categoria"}),jsxRuntimeExports.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:jsxRuntimeExports.jsx(BarChartThinBreakdown,{data:s})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm lg:text-lg font-semibold text-gray-900 mb-2 lg:mb-4",children:"Top 5 Maiores Gastos"}),jsxRuntimeExports.jsx("div",{className:"space-y-2 lg:space-y-3",children:e.sort((e,t)=>t.amount-e.amount).slice(0,5).map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900",children:e.description}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:e.category})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("div",{className:"font-bold text-red-600",children:["R$ ",e.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:e.date.toLocaleDateString("pt-BR")})]})]},e.id))})]})]})},q=()=>jsxRuntimeExports.jsx("div",{className:"overflow-x-hidden",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b border-gray-200",children:[jsxRuntimeExports.jsx("th",{className:"text-left py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm",children:"Data"}),jsxRuntimeExports.jsx("th",{className:"text-left py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm hidden sm:table-cell",children:"Descrio"}),jsxRuntimeExports.jsx("th",{className:"text-left py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm",children:"Categoria"}),jsxRuntimeExports.jsx("th",{className:"text-left py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm hidden md:table-cell",children:"Parcelas"}),jsxRuntimeExports.jsx("th",{className:"text-right py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm",children:"Valor"}),jsxRuntimeExports.jsx("th",{className:"text-right py-2 lg:py-3 px-2 lg:px-4 font-medium text-gray-700 text-xs lg:text-sm hidden lg:table-cell",children:"Tipo"})]})}),jsxRuntimeExports.jsx("tbody",{children:0===M.length?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:6,className:"py-8 px-4 text-center text-gray-500",children:"Nenhuma transao encontrada"})}):M.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).map(e=>jsxRuntimeExports.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-xs lg:text-sm text-gray-600",children:e.date?e.date.toLocaleDateString("pt-BR"):"Data invlida"}),jsxRuntimeExports.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-xs lg:text-sm text-gray-900 font-medium hidden sm:table-cell",children:e.description}),jsxRuntimeExports.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-xs lg:text-sm text-gray-700",children:e.category}),jsxRuntimeExports.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-xs lg:text-sm text-gray-700 hidden md:table-cell",children:e.installments&&e.installments>1?jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[e.installmentNumber||1,"/",e.installments]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:e.isPaid?"Pago":"Pendente"})]}):jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:" vista"})})}),jsxRuntimeExports.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-right text-xs lg:text-sm font-semibold",children:jsxRuntimeExports.jsxs("span",{className:"receita"===e.type?"text-green-600":"text-red-600",children:["receita"===e.type?"+":"-","R$ ",e.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),jsxRuntimeExports.jsx("td",{className:"py-2 lg:py-4 px-2 lg:px-4 text-right hidden lg:table-cell",children:jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-1.5 lg:px-2 py-0.5 lg:py-1 rounded-full text-xs font-medium "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"})})]},e.id))})]})});return jsxRuntimeExports.jsxs("div",{className:"space-y-3 lg:space-y-6 px-2 lg:px-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 lg:gap-0",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:"Relatrios"}),jsxRuntimeExports.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors",children:"Salvar Relatrio Personalizado"})]}),jsxRuntimeExports.jsxs("div",{className:"lg:hidden space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 mobile-carousel-item",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-blue-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4 flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Meta Mensal"}),!f&&jsxRuntimeExports.jsx("button",{onClick:P,className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"Editar"})]}),f?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"R$"}),jsxRuntimeExports.jsx("input",{type:"text",value:y,onChange:e=>v(e.target.value),className:"text-lg font-semibold text-gray-900 border border-gray-300 rounded px-2 py-1 w-24",placeholder:"25000",autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:T,className:"bg-blue-600 text-white text-xs px-3 py-1 rounded hover:bg-blue-700",children:"Salvar"}),jsxRuntimeExports.jsx("button",{onClick:A,className:"bg-gray-300 text-gray-700 text-xs px-3 py-1 rounded hover:bg-gray-400",children:"Cancelar"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["R$ ",_.toLocaleString("pt-BR")," / R$ ",u.toLocaleString("pt-BR")]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:jsxRuntimeExports.jsx("div",{className:"h-2 rounded-full "+(_/u*100<33?"bg-yellow-500":_/u*100<66?"bg-blue-600":"bg-green-500"),style:{width:`${Math.min(_/u*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(_/u*100),"% concludo"]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto scrollbar-hide mobile-carousel mobile-carousel-container",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-3 pb-2",style:{width:"max-content"},children:[jsxRuntimeExports.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"180px"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-orange-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Dias Restantes"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"13 dias"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"at o fim do ms"})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"180px"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-green-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Mdia Diria"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"R$ 1.842"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"necessria para meta"})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white p-4 rounded-xl border-0 border-gray-200 flex-shrink-0 mobile-carousel-item",style:{minWidth:"180px"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-purple-600 text-lg",children:""})})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tendncia"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-green-600",children:" Crescendo"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"+15% vs ms anterior"})]})]})})]})})]}),jsxRuntimeExports.jsx("div",{className:"hidden lg:grid grid-cols-3 gap-6",children:(()=>{const e=b.filter(e=>"receita"===e.type),t=b.filter(e=>"despesa"===e.type),s=e.reduce((e,t)=>e+t.amount,0),r=t.reduce((e,t)=>e+t.amount,0),a=e.length>0?e.reduce((e,t)=>t.amount>e.amount?t:e):null,i=a&&s>0?(a.amount/s*100).toFixed(0):0,n=t.length>0?t.reduce((e,t)=>t.amount>e.amount?t:e):null,o=n&&r>0?(n.amount/r*100).toFixed(0):0,l=t.reduce((e,t)=>(e[t.category]=(e[t.category]||0)+t.amount,e),{}),c=Object.entries(l).length>0?Object.entries(l).reduce((e,[t,s])=>s>e.amount?{category:t,amount:s}:e,{category:"",amount:0}):{category:"alimentao",amount:0},h=.15*c.amount,p=12*h;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-xs lg:text-lg font-medium text-gray-600 mb-1 lg:mb-4",children:"Maior Receita"}),jsxRuntimeExports.jsx("div",{className:"space-y-1 lg:space-y-3",children:a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-xs lg:text-sm text-gray-600 truncate",children:a.description}),jsxRuntimeExports.jsxs("span",{className:"text-sm lg:text-lg font-bold text-green-600",children:["R$ ",a.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs lg:text-sm text-gray-500 hidden lg:block",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium text-gray-900",children:[i,"%"]})," das receitas"]}),jsxRuntimeExports.jsx("div",{className:"text-xs lg:text-sm text-green-600 hidden lg:block",children:a.category})]}):jsxRuntimeExports.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:"Nenhuma receita encontrada"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-xs lg:text-lg font-medium text-gray-600 mb-1 lg:mb-4",children:"Maior Despesa"}),jsxRuntimeExports.jsx("div",{className:"space-y-1 lg:space-y-3",children:n?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-xs lg:text-sm text-gray-600 truncate",children:n.description}),jsxRuntimeExports.jsxs("span",{className:"text-sm lg:text-lg font-bold text-red-600",children:["R$ ",n.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs lg:text-sm text-gray-500 hidden lg:block",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium text-gray-900",children:[o,"%"]})," das despesas"]}),jsxRuntimeExports.jsx("div",{className:"text-xs lg:text-sm text-gray-500 hidden lg:block",children:n.category})]}):jsxRuntimeExports.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:"Nenhuma despesa encontrada"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-3 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-xs lg:text-lg font-medium text-gray-600 mb-1 lg:mb-4",children:"Economia Potencial"}),jsxRuntimeExports.jsx("div",{className:"space-y-1 lg:space-y-3",children:c.amount>0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"text-xs lg:text-sm text-gray-500 hidden lg:block",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900",children:c.category})," -15%"]}),jsxRuntimeExports.jsxs("div",{className:"text-sm lg:text-lg font-bold text-green-600",children:["R$ ",h.toLocaleString("pt-BR",{minimumFractionDigits:2}),"/ms"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs lg:text-sm text-gray-500 hidden lg:block",children:["R$ ",p.toLocaleString("pt-BR",{minimumFractionDigits:2}),"/ano"]})]}):jsxRuntimeExports.jsx("div",{className:"text-xs lg:text-sm text-gray-500",children:"Nenhuma despesa para anlise"})})]})]})})()}),jsxRuntimeExports.jsx("div",{className:"space-y-3 lg:space-y-4",children:jsxRuntimeExports.jsx("div",{className:"bg-white p-2 lg:p-4 rounded-lg shadow border-0 lg:border",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-start",children:[jsxRuntimeExports.jsx("div",{className:"lg:hidden w-full",children:jsxRuntimeExports.jsx("div",{className:"flex overflow-x-auto scrollbar-hide space-x-2 pb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[O.map(s=>jsxRuntimeExports.jsxs("button",{onClick:()=>t(s.id),className:"flex items-center space-x-1 px-3 py-2 rounded-full text-xs font-medium transition-all duration-200 whitespace-nowrap "+(e===s.id?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:s.icon}),jsxRuntimeExports.jsx("span",{children:s.name})]},s.id)),jsxRuntimeExports.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-1 px-3 py-2 rounded-full text-xs font-medium transition-all duration-200 bg-gray-100 text-gray-600 hover:bg-gray-200 whitespace-nowrap",children:[jsxRuntimeExports.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"Filtros",className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:"Filtros"})]})]})})}),jsxRuntimeExports.jsx("div",{className:"hidden lg:block",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1 bg-gray-50 p-1 rounded-lg border",children:[O.map(s=>jsxRuntimeExports.jsxs("button",{onClick:()=>t(s.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 "+(e===s.id?"bg-blue-600 text-white shadow-md transform scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[jsxRuntimeExports.jsx("span",{className:"text-base",children:s.icon}),jsxRuntimeExports.jsx("span",{children:s.name})]},s.id)),jsxRuntimeExports.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[jsxRuntimeExports.jsx("img",{src:"/configuration-settings-gear-options-preferences-setting-tools-svgrepo-com.svg",alt:"Filtros",className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Filtros"})]})]})})]})})}),jsxRuntimeExports.jsx("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:E?jsxRuntimeExports.jsx("div",{className:"h-64 lg:h-96 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-5 w-5 lg:h-6 lg:w-6 border-b-2 border-blue-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm lg:text-base text-gray-600",children:"Carregando dados..."})]})}):j?jsxRuntimeExports.jsx("div",{className:"h-64 lg:h-96 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-red-600",children:[jsxRuntimeExports.jsx("p",{className:"text-sm lg:text-base",children:"Erro ao carregar dados"}),jsxRuntimeExports.jsx("p",{className:"text-xs lg:text-sm mt-1",children:j})]})}):0===b.length?jsxRuntimeExports.jsx("div",{className:"h-64 lg:h-96 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-500",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl lg:text-6xl mb-3 lg:mb-4",children:""}),jsxRuntimeExports.jsx("p",{className:"text-base lg:text-lg",children:"Nenhuma transao encontrada"}),jsxRuntimeExports.jsx("p",{className:"text-xs lg:text-sm mt-2",children:"Adicione transaes para ver os relatrios"})]})}):V()}),a&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-backdrop",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-3 lg:mx-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 lg:p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Filtros"}),jsxRuntimeExports.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:jsxRuntimeExports.jsx("span",{className:"text-lg lg:text-xl",children:""})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 lg:p-6 space-y-3 lg:space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 lg:gap-0",children:[jsxRuntimeExports.jsx("label",{className:"text-xs lg:text-sm font-medium text-gray-700",children:"Perodo"}),jsxRuntimeExports.jsxs("select",{value:n,onChange:e=>o(e.target.value),className:"border border-gray-300 rounded-lg px-2 lg:px-3 py-1.5 lg:py-2 text-xs lg:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[jsxRuntimeExports.jsx("option",{value:"personalizado",children:"Personalizado"}),jsxRuntimeExports.jsx("option",{value:"este-mes",children:"Este ms"}),jsxRuntimeExports.jsx("option",{value:"mes-passado",children:"Ms passado"}),jsxRuntimeExports.jsx("option",{value:"ultimos-3-meses",children:"ltimos 3 meses"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 lg:gap-0",children:[jsxRuntimeExports.jsx("label",{className:"text-xs lg:text-sm font-medium text-gray-700",children:"De"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"date",value:l,onChange:e=>c(e.target.value),disabled:"personalizado"!==n,className:"border border-gray-300 rounded-lg px-2 lg:px-3 py-1.5 lg:py-2 text-xs lg:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px] "+("personalizado"!==n?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"")}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{if("personalizado"===n){const e=document.querySelector('input[type="date"][value="'+l+'"]');e?.showPicker()}},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 "+("personalizado"===n?"cursor-pointer hover:text-gray-600":"cursor-not-allowed"),disabled:"personalizado"!==n,children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 lg:gap-0",children:[jsxRuntimeExports.jsx("label",{className:"text-xs lg:text-sm font-medium text-gray-700",children:"At"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"date",value:h,onChange:e=>p(e.target.value),disabled:"personalizado"!==n,className:"border border-gray-300 rounded-lg px-2 lg:px-3 py-1.5 lg:py-2 text-xs lg:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px] "+("personalizado"!==n?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"")}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{if("personalizado"===n){const e=document.querySelector('input[type="date"][value="'+h+'"]');e?.showPicker()}},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 "+("personalizado"===n?"cursor-pointer hover:text-gray-600":"cursor-not-allowed"),disabled:"personalizado"!==n,children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 lg:gap-0",children:[jsxRuntimeExports.jsx("label",{className:"text-xs lg:text-sm font-medium text-gray-700",children:"Tipo"}),jsxRuntimeExports.jsxs("select",{value:d,onChange:e=>m(e.target.value),className:"border border-gray-300 rounded-lg px-2 lg:px-3 py-1.5 lg:py-2 text-xs lg:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",children:[jsxRuntimeExports.jsx("option",{value:"todas",children:"Todas"}),jsxRuntimeExports.jsx("option",{value:"receitas",children:"Receitas"}),jsxRuntimeExports.jsx("option",{value:"despesas",children:"Despesas"}),jsxRuntimeExports.jsx("option",{value:"contas-parceladas",children:"Parceladas"}),jsxRuntimeExports.jsx("option",{value:"receitas-parceladas",children:"Rec. Parceladas"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 lg:gap-0 p-4 lg:p-6 border-t border-gray-200",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{o("este-mes"),m("todas");const{start:e,end:t}=k("este-mes");c(e),p(t)},className:"flex items-center space-x-1 lg:space-x-2 px-3 lg:px-4 py-1.5 lg:py-2 text-xs lg:text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors",children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Limpar filtros"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>i(!1),className:"flex items-center space-x-1 lg:space-x-2 px-4 lg:px-6 py-1.5 lg:py-2 text-xs lg:text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-lg hover:bg-blue-700 hover:border-blue-700 transition-colors shadow-md",children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Aplicar"})]})]})]})})]})}catch(e){return console.error(" [Budgets] Erro no componente:",e),jsxRuntimeExports.jsxs("div",{className:"bg-white p-2 lg:p-6 rounded-lg shadow border-0 lg:border",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Relatrios"}),jsxRuntimeExports.jsx("div",{className:"text-red-600",children:jsxRuntimeExports.jsxs("p",{children:["Erro ao carregar relatrios: ",String(e)]})})]})}},useBudget=(e,t,s)=>{const{transactions:r,loading:a,error:i}=useTransactionsContext(),{categories:n}=useCategories(t);return{budgetData:reactExports.useMemo(()=>{if(!r||!n)return[];const t=new Date,a=r.filter(s=>{const r=new Date(s.date);switch(e){case"current-month":return r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear();case"last-month":const e=0===t.getMonth()?11:t.getMonth()-1,s=0===t.getMonth()?t.getFullYear()-1:t.getFullYear();return r.getMonth()===e&&r.getFullYear()===s;case"current-year":return r.getFullYear()===t.getFullYear();default:return!0}}),i=("all"===s?a:a.filter(e=>e.type===s)).reduce((e,t)=>{const s=t.category;return e[s]||(e[s]=0),e[s]+=t.amount,e},{});return n.filter(e=>e.type===("all"===s?"despesa":s)).map(e=>({name:e.name,actual:i[e.id]||0,budget:1e3,color:e.color||"#3B82F6"})).sort((e,t)=>t.actual-e.actual)},[r,n,e,s]),categories:n||[],loading:a,error:i}},Budget=({selectedPeriod:e="current-month",userId:t,transactionTypeFilter:s="all"})=>{const{user:r}=useAuth(),a=t||r?.uid||"test-user-123",{loading:i,error:n}=useBudget(e,a,s),{transactions:o}=useTransactionsContext(),{categories:l}=useCategories(a),[c,h]=reactExports.useState("todas"),[p,d]=reactExports.useState(!1),[m,u]=reactExports.useState("personalizado"),[x,f]=reactExports.useState(""),[g,y]=reactExports.useState(""),[v,b]=reactExports.useState("todas");reactExports.useEffect(()=>{},[x,g]);if(i)return jsxRuntimeExports.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:jsxRuntimeExports.jsxs("div",{className:"animate-pulse",children:[jsxRuntimeExports.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 rounded"},e))})]})});if(n)return jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Oramento"}),jsxRuntimeExports.jsx("div",{className:"text-red-600",children:jsxRuntimeExports.jsxs("p",{children:["Erro ao carregar dados do oramento: ",n]})})]});const E=(new Date).getMonth(),j=(new Date).getFullYear(),R=React.useMemo(()=>{let e=o;if("personalizado"===m&&x&&g){const t=new Date(x),s=new Date(g);t.setHours(0,0,0,0),s.setHours(23,59,59,999),e=o.filter(e=>{const r=new Date(e.date);return r>=t&&r<=s})}else e=o.filter(e=>{const t=new Date(e.date);return t.getMonth()===E&&t.getFullYear()===j});return e},[o,m,x,g,E,j]),w=React.useMemo(()=>{const e={},t={};o.forEach(e=>{if(e.installments&&e.installments>1){const s=e.installmentGroupId||`${e.description.replace(/\s*\(\d+\/\d+\)$/,"")}_${e.totalInstallmentAmount||e.amount}`;t[s]||(t[s]=[]),t[s].push(e)}}),Object.entries(t).forEach(([t,s])=>{const{start:r,end:a}=(e=>{const t=new Date,s=t.getFullYear(),r=t.getMonth();switch(e){case"este-mes":const e=new Date(s,r,1),t=new Date(s,r+1,0);return{start:e.toISOString().split("T")[0],end:t.toISOString().split("T")[0]};case"mes-passado":const a=new Date(s,r-1,1),i=new Date(s,r,0);return{start:a.toISOString().split("T")[0],end:i.toISOString().split("T")[0]};case"ultimos-3-meses":const n=new Date(s,r-2,1),o=new Date(s,r+1,0);return{start:n.toISOString().split("T")[0],end:o.toISOString().split("T")[0]};default:return{start:"",end:""}}})(m),i="personalizado"===m?x:r,n="personalizado"===m?g:a,o=s.filter(e=>{if(i&&n){const t=e.date.toISOString().split("T")[0];return t>=i&&t<=n}return!0});let l=o;if(0===o.length){const e=s.some(e=>e.date.toISOString().split("T")[0]>n),t=s.some(e=>e.date.toISOString().split("T")[0]<i);if(t&&e)l=s;else if(t&&!e){s.some(e=>!e.isPaid)&&(l=s)}}if(0===l.length)return;0!==l.filter(e=>!1===e.isPaid).length&&(e[t]=l)}),R.forEach(t=>{(!t.installments||t.installments<=1)&&(e[t.id]=[t])});return Object.values(e)},[R,E,j]).map(e=>{const t=e[0],s=(r=t.category||"Outros",l.find(e=>e.name===r)||{name:r,color:"#9CA3AF",icon:"",type:"despesa"});var r;const a=t.installments&&t.installments>1,i=t.amount,n=a?t.totalInstallmentAmount||t.amount*(t.installments||1):t.amount;let o=0,c=1;a?(c=t.installments||1,o=e.filter(e=>!0===e.isPaid).length):o=t.isPaid?1:0;const h=a?o/c*100:t.isPaid?100:0;let p="bg-gray-400";return h>0&&h<=33?p="bg-red-500":h>33&&h<=66?p="bg-yellow-500":h>66&&(p="bg-green-500"),{id:t.id,name:t.description.replace(/\s*\(\d+\/\d+\)$/,""),categoryName:s.name,actual:i,totalAmount:n,type:t.type,color:s.color,emoji:s.icon,isInstallment:a,paidInstallments:o,totalInstallments:c,paymentPercentage:h,barColor:p,isPaid:t.isPaid,installmentNumber:t.installmentNumber,installments:t.installments,date:t.date}}).sort((e,t)=>t.actual-e.actual),S=R.filter(e=>"receita"===e.type).reduce((e,t)=>e+t.amount,0),N=R.filter(e=>"despesa"===e.type).reduce((e,t)=>e+t.amount,0),C=S-N,_=S>0?N/S*100:0,P=w.filter(e=>{if("receitas"===c&&"receita"!==e.type)return!1;if("despesas"===c&&"despesa"!==e.type)return!1;if("todas"!==v){if("receitas"===v&&"receita"!==e.type)return!1;if("despesas"===v&&"despesa"!==e.type)return!1;if("contas-parceladas"===v&&!e.isInstallment)return!1;if("receitas-parceladas"===v&&(!e.isInstallment||"receita"!==e.type))return!1}if("personalizado"!==m||x&&g){const t=new Date(e.date),s=new Date(x),r=new Date(g);if(s.setHours(0,0,0,0),r.setHours(23,59,59,999),e.isInstallment&&e.installments){return t>=s&&t<=r}return t>=s&&t<=r}return!0});return jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Oramento"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{role:"tablist","aria-orientation":"horizontal",className:"inline-flex h-8 sm:h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",children:[jsxRuntimeExports.jsx("button",{type:"button",role:"tab","aria-selected":"todas"===c,onClick:()=>h("todas"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 "+("todas"===c?"bg-background text-foreground shadow-sm":"hover:bg-muted/50"),children:"Todas"}),jsxRuntimeExports.jsx("button",{type:"button",role:"tab","aria-selected":"receitas"===c,onClick:()=>h("receitas"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 "+("receitas"===c?"bg-background text-foreground shadow-sm":"hover:bg-muted/50"),children:"Receitas"}),jsxRuntimeExports.jsx("button",{type:"button",role:"tab","aria-selected":"despesas"===c,onClick:()=>h("despesas"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 "+("despesas"===c?"bg-background text-foreground shadow-sm":"hover:bg-muted/50"),children:"Despesas"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{console.log(" Abrindo modal de filtros"),d(!0)},className:"flex items-center space-x-1 sm:space-x-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium whitespace-nowrap transition-all duration-200 "+("personalizado"!==m||x||g||"todas"!==v?"text-blue-600 bg-blue-50 hover:bg-blue-100 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[jsxRuntimeExports.jsx("span",{className:"text-sm sm:text-base",children:""}),jsxRuntimeExports.jsx("span",{children:"Filtros"}),("personalizado"!==m||x||g||"todas"!==v)&&jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Receita Total"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",S.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Gasto Total"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",N.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Disponvel"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",C.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Progresso"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[_.toFixed(1),"%"]})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===P.length?jsxRuntimeExports.jsx("div",{className:"col-span-full text-center py-8",children:jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Nenhuma transao encontrada para o ms atual."})}):P.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-[52px] w-[52px] items-center justify-center rounded-xl",style:{backgroundColor:`${e.color}20`,color:e.color},children:jsxRuntimeExports.jsx("span",{className:"text-2xl",children:e.emoji})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:e.categoryName}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"}),e.isInstallment&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Parcelado"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[jsxRuntimeExports.jsxs("span",{children:["R$ ",e.actual.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.isInstallment&&jsxRuntimeExports.jsxs("span",{children:["/ R$ ",e.totalAmount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:jsxRuntimeExports.jsx("div",{className:`h-2 rounded-full ${e.barColor}`,style:{width:`${Math.min(e.paymentPercentage,100)}%`}})}),jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.isInstallment?`${e.paidInstallments}/${e.totalInstallments} parcelas (${e.paymentPercentage.toFixed(1)}%)`:`${e.paymentPercentage.toFixed(1)}%`})}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 bg-gray-50 rounded-lg p-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:e.name&&jsxRuntimeExports.jsx("span",{className:"font-medium",children:e.name})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium",children:["R$ ",e.actual.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(e.isPaid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isPaid?"Pago":"Pendente"})]})]})})]},e.id))}),p&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros"}),jsxRuntimeExports.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:jsxRuntimeExports.jsx("span",{className:"text-xl",children:""})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Perodo"}),jsxRuntimeExports.jsxs("select",{value:m,onChange:e=>{console.log(" Perodo selecionado:",e.target.value),u(e.target.value),(e=>{const t=new Date,s=t.getMonth(),r=t.getFullYear();switch(e){case"este-mes":const e=new Date(r,s,1),t=new Date(r,s+1,0);f(e.toISOString().split("T")[0]),y(t.toISOString().split("T")[0]);break;case"mes-passado":const a=new Date(r,s-1,1),i=new Date(r,s,0);f(a.toISOString().split("T")[0]),y(i.toISOString().split("T")[0]);break;case"ultimos-3-meses":const n=new Date(r,s-3,1),o=new Date(r,s+1,0);f(n.toISOString().split("T")[0]),y(o.toISOString().split("T")[0])}})(e.target.value)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px] appearance-none bg-white cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px"},children:[jsxRuntimeExports.jsx("option",{value:"personalizado",children:"Personalizado"}),jsxRuntimeExports.jsx("option",{value:"este-mes",children:"Este ms"}),jsxRuntimeExports.jsx("option",{value:"mes-passado",children:"Ms passado"}),jsxRuntimeExports.jsx("option",{value:"ultimos-3-meses",children:"ltimos 3 meses"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"De"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{id:"start-date-input",type:"date",value:x,onChange:e=>f(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px]"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const e=document.getElementById("start-date-input");e?.showPicker()},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 cursor-pointer",children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"At"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{id:"end-date-input",type:"date",value:g,onChange:e=>y(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full lg:min-w-[140px]"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const e=document.getElementById("end-date-input");e?.showPicker()},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 cursor-pointer",children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipo"}),jsxRuntimeExports.jsxs("select",{value:v,onChange:e=>b(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[140px]",children:[jsxRuntimeExports.jsx("option",{value:"todas",children:"Todas"}),jsxRuntimeExports.jsx("option",{value:"receitas",children:"Receitas"}),jsxRuntimeExports.jsx("option",{value:"despesas",children:"Despesas"}),jsxRuntimeExports.jsx("option",{value:"contas-parceladas",children:"Parceladas"}),jsxRuntimeExports.jsx("option",{value:"receitas-parceladas",children:"Rec. Parceladas"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{u("personalizado"),f(""),y(""),b("todas"),h("todas"),console.log(" Filtros limpos")},className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-colors",children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Limpar filtros"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{console.log(" Filtros aplicados:",{periodFilter:m,startDate:x,endDate:g,typeFilter:v}),d(!1)},className:"flex items-center space-x-2 px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-lg hover:bg-blue-700 hover:border-blue-700 transition-colors shadow-md",children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Aplicar"})]})]})]})})]})},InstallmentAccounts=()=>{const{transactions:e,loading:t,error:s,updateTransaction:r}=useTransactionsContext(),{user:a}=useAuth(),{categories:i}=useCategories(a?.uid||"test-user-123"),n=React.useMemo(()=>{const t=e.filter(e=>e.installments&&e.installments>1),s={};return t.forEach(e=>{const t=e.installmentGroupId||`${e.description}_${e.totalInstallmentAmount||e.amount}`;s[t]||(s[t]=[]),s[t].push(e)}),Object.values(s).map(e=>{const t=e.sort((e,t)=>e.installmentNumber-t.installmentNumber),s=t[0],r=t[t.length-1];return{id:s.installmentGroupId||`${s.description}_${s.totalInstallmentAmount}`,description:s.description.replace(/\s*\(\d+\/\d+\)$/,""),totalInstallments:s.installments,paidInstallments:t.filter(e=>!0===e.isPaid).length,totalAmount:s.totalInstallmentAmount||s.amount,installmentAmount:s.amount,firstDate:s.date,lastDate:r.date,type:s.type,category:s.category,transactions:t}}).sort((e,t)=>new Date(e.firstDate).getTime()-new Date(t.firstDate).getTime())},[e]);if(t)return jsxRuntimeExports.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:jsxRuntimeExports.jsxs("div",{className:"animate-pulse",children:[jsxRuntimeExports.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 rounded"},e))})]})});if(s)return jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contas Parceladas"}),jsxRuntimeExports.jsx("div",{className:"text-red-600",children:jsxRuntimeExports.jsxs("p",{children:["Erro ao carregar dados: ",s]})})]});return jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 lg:p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 mb-3 lg:mb-4",children:"Contas Parceladas"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:0===n.length?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhuma transao parcelada encontrada."}):n.map(e=>{const t=(s=e.category,i.find(e=>e.name===s)||{name:s,color:"#9CA3AF",icon:"",type:"despesa"});var s;const a=e.paidInstallments/e.totalInstallments*100,n=e.totalAmount-e.paidInstallments*e.installmentAmount,o=e.paidInstallments===e.totalInstallments;return jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 lg:p-4 hover:bg-gray-50 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3 mb-1 lg:mb-2",children:[jsxRuntimeExports.jsx("div",{className:"flex h-6 w-6 lg:h-8 lg:w-8 items-center justify-center rounded-xl",style:{backgroundColor:`${t.color}20`},children:jsxRuntimeExports.jsx("span",{className:"text-xs lg:text-sm",children:t.icon})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-xs lg:text-sm font-medium text-gray-900",children:e.category}),jsxRuntimeExports.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:e.description}),"description"in t&&t.description&&jsxRuntimeExports.jsx("p",{className:"text-[8px] lg:text-[10px] text-gray-400 mt-1 leading-tight",children:t.description})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-4 text-[10px] lg:text-xs text-gray-600 space-y-1 lg:space-y-0",children:[jsxRuntimeExports.jsxs("span",{children:[e.firstDate.toLocaleDateString("pt-BR")," - ",e.lastDate.toLocaleDateString("pt-BR")]}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full text-[10px] lg:text-xs font-medium "+("receita"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"receita"===e.type?"Receita":"Despesa"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("p",{className:"text-xs lg:text-sm font-semibold "+("receita"===e.type?"text-green-600":"text-red-600"),children:["receita"===e.type?"+":"-","R$ ",e.installmentAmount.toLocaleString("pt-BR")]}),jsxRuntimeExports.jsxs("p",{className:"text-[10px] lg:text-xs text-gray-500",children:["R$ ",e.installmentAmount.toLocaleString("pt-BR"),"/parcela"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 lg:mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-[10px] lg:text-xs text-gray-600 mb-1",children:[jsxRuntimeExports.jsx("span",{children:"Progresso do pagamento"}),jsxRuntimeExports.jsxs("span",{children:[e.paidInstallments,"/",e.totalInstallments," parcelas"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 lg:h-2",children:jsxRuntimeExports.jsx("div",{className:"h-1.5 lg:h-2 rounded-full transition-all duration-300 "+(o?"bg-green-500":"bg-blue-500"),style:{width:`${a}%`}})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-[10px] lg:text-xs text-gray-500 mt-1",children:[jsxRuntimeExports.jsx("span",{children:o?" Completamente pago":""}),jsxRuntimeExports.jsxs("span",{className:"font-bold "+("receita"===e.type?"text-green-600":"text-red-600"),children:["Restante: R$ ",n.toLocaleString("pt-BR")]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 lg:mt-3 pt-2 lg:pt-3 border-t border-gray-100",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1 lg:gap-2",children:e.transactions.map((e,t)=>jsxRuntimeExports.jsxs("button",{onClick:()=>(async(e,t)=>{try{console.log(" [InstallmentAccounts] Iniciando atualizao da parcela:",{transactionId:e,isPaid:t,timestamp:(new Date).toISOString()}),await r(e,{isPaid:t}),console.log(` [InstallmentAccounts] Parcela ${t?"marcada como paga":"desmarcada"}:`,{transactionId:e,isPaid:t,timestamp:(new Date).toISOString()}),setTimeout(()=>{console.log(" [InstallmentAccounts] Forando re-render aps 1 segundo...")},1e3)}catch(s){console.error(" [InstallmentAccounts] Erro ao atualizar status da parcela:",s),alert("Erro ao atualizar status da parcela. Tente novamente.")}})(e.id,!e.isPaid),className:"px-2 lg:px-3 py-1 text-[10px] lg:text-xs rounded-full transition-colors "+(e.isPaid?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[e.isPaid?"":""," Parcela ",e.installmentNumber]},e.id))})})]})]},e.id)})})]})},Settings=()=>{const{user:e}=useAuth(),{transactions:t,deleteTransaction:s}=useTransactionsContext(),{categories:r,deleteCategory:a}=useCategories(e?.uid||"test-user-123"),[i,n]=reactExports.useState(null),[o,l]=reactExports.useState(!1),[c,h]=reactExports.useState(""),p=e=>{l(!0),n(e),h("")};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuraes"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Gerencie suas categorias e transaes"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transaes"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:t.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Total de transaes"})]}),jsxRuntimeExports.jsx("div",{className:"text-4xl",children:""})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Categorias"}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:r.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Total de categorias"})]}),jsxRuntimeExports.jsx("div",{className:"text-4xl",children:""})]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aes de Limpeza"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 mb-6",children:["Use estas opes para limpar todos os dados. ",jsxRuntimeExports.jsx("strong",{children:"Ateno:"})," Estas aes no podem ser desfeitas!"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Excluir Todas as Transaes"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Remove todas as transaes do sistema (",t.length," transaes)"]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>p("transactions"),disabled:0===t.length,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Excluir Transaes"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border border-orange-200 rounded-lg bg-orange-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Excluir Todas as Categorias"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Remove todas as categorias do sistema (",r.length," categorias)"]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>p("categories"),disabled:0===r.length,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Excluir Categorias"})]})]})]}),o&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-4",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mr-3",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirmar Excluso"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"transactions"===i?`Voc est prestes a excluir TODAS as ${t.length} transaes.`:`Voc est prestes a excluir TODAS as ${r.length} categorias.`})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:'Digite "EXCLUIR" para confirmar:'}),jsxRuntimeExports.jsx("input",{type:"text",value:c,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"EXCLUIR"})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{l(!1),n(null),h("")},className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"}),jsxRuntimeExports.jsx("button",{onClick:"transactions"===i?async()=>{if("EXCLUIR"===c){n("transactions");try{for(const e of t)await s(e.id);alert(" Todas as transaes foram excludas com sucesso!")}catch(e){console.error("Erro ao excluir transaes:",e),alert(" Erro ao excluir transaes. Tente novamente.")}finally{n(null),l(!1),h("")}}else alert('Por favor, digite "EXCLUIR" para confirmar a excluso de todas as transaes.')}:async()=>{if("EXCLUIR"===c){n("categories");try{for(const e of r)await a(e.id);alert(" Todas as categorias foram excludas com sucesso!")}catch(e){console.error("Erro ao excluir categorias:",e),alert(" Erro ao excluir categorias. Tente novamente.")}finally{n(null),l(!1),h("")}}else alert('Por favor, digite "EXCLUIR" para confirmar a excluso de todas as categorias.')},disabled:"EXCLUIR"!==c||("transactions"===i?0===t.length:0===r.length),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"transactions"===i?"Excluir Transaes":"Excluir Categorias"})]})]})})]})},Login=()=>{const[e,t]=reactExports.useState(""),[s,r]=reactExports.useState(""),[a,i]=reactExports.useState(!1),[n,o]=reactExports.useState(""),[l,c]=reactExports.useState(!1),{login:h,register:p,loginWithGoogle:d}=useAuth();return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full space-y-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:a?"Criar Conta":"Entrar na sua conta"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:a?"Crie uma conta para acessar o sistema":"Acesse suas configuraes e dados"})]}),jsxRuntimeExports.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async t=>{t.preventDefault(),o(""),c(!0);try{a?await p(e,s):await h(e,s)}catch(r){o(r.message||"Erro na autenticao")}finally{c(!1)}},children:[jsxRuntimeExports.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),jsxRuntimeExports.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Endereo de email",value:e,onChange:e=>t(e.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"sr-only",children:"Senha"}),jsxRuntimeExports.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Senha",value:s,onChange:e=>r(e.target.value)})]})]}),n&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded",children:n}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Carregando...":a?"Criar Conta":"Entrar"})}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-gray-300"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center text-sm",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Ou continue com"})})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("button",{type:"button",onClick:async()=>{o(""),c(!0);try{await d()}catch(e){o(e.message||"Erro no login com Google")}finally{c(!1)}},disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[jsxRuntimeExports.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),jsxRuntimeExports.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),jsxRuntimeExports.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),jsxRuntimeExports.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),l?"Carregando...":"Continuar com Google"]})}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{i(!a),o("")},className:"text-indigo-600 hover:text-indigo-500 text-sm",children:a?"J tem uma conta? Faa login":"No tem uma conta? Registre-se"})})]})]})})},AdminSettings=()=>{const{user:e,logout:t}=useAuth(),[s,r]=reactExports.useState({apiKey:"AIzaSyAKOQ_7Q6pR6UvinMwtzrNdLgpBxZ-QTxk",authDomain:"apprafael-c7411.firebaseapp.com",projectId:"apprafael-c7411",storageBucket:"apprafael-c7411.firebasestorage.app",messagingSenderId:"389810659865",appId:"1:389810659865:web:3392a3c2fe3aef4710c088",measurementId:"G-0P0HZ6ST2P"}),[a,i]=reactExports.useState("development"),[n,o]=reactExports.useState(""),l=(e,t)=>{r(s=>({...s,[e]:t}))};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto",children:jsxRuntimeExports.jsx("div",{className:"bg-white shadow rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuraes do Sistema"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:["Logado como: ",e?.email]}),jsxRuntimeExports.jsx("button",{onClick:t,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",children:"Sair"})]})]}),n&&jsxRuntimeExports.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded",children:n}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ambiente"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-4",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",value:"development",checked:"development"===a,onChange:e=>i(e.target.value),className:"mr-2"}),"Desenvolvimento"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",value:"production",checked:"production"===a,onChange:e=>i(e.target.value),className:"mr-2"}),"Produo"]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuraes do Firebase"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.apiKey,onChange:e=>l("apiKey",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Auth Domain"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.authDomain,onChange:e=>l("authDomain",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project ID"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.projectId,onChange:e=>l("projectId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Bucket"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.storageBucket,onChange:e=>l("storageBucket",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Messaging Sender ID"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.messagingSenderId,onChange:e=>l("messagingSenderId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"App ID"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.appId,onChange:e=>l("appId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Measurement ID"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.measurementId,onChange:e=>l("measurementId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{r({apiKey:"AIzaSyAKOQ_7Q6pR6UvinMwtzrNdLgpBxZ-QTxk",authDomain:"apprafael-c7411.firebaseapp.com",projectId:"apprafael-c7411",storageBucket:"apprafael-c7411.firebasestorage.app",messagingSenderId:"389810659865",appId:"1:389810659865:web:3392a3c2fe3aef4710c088",measurementId:"G-0P0HZ6ST2P"}),i("development")},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Restaurar Padro"}),jsxRuntimeExports.jsx("button",{onClick:()=>{localStorage.setItem("firebaseConfig",JSON.stringify(s)),localStorage.setItem("environment",a),o("Configuraes salvas com sucesso!"),setTimeout(()=>o(""),3e3)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Salvar Configuraes"})]})]})]})})})})},ErrorBoundary=({children:e})=>{const[t,s]=reactExports.useState(!1),[r,a]=reactExports.useState(null);return reactExports.useEffect(()=>{const e=e=>{s(!0),a(new Error(e.message)),console.error(" ErrorBoundary capturou um erro:",e.error)},t=e=>{s(!0),a(new Error(e.reason)),console.error(" ErrorBoundary capturou um erro de promise:",e.reason)};return window.addEventListener("error",e),window.addEventListener("unhandledrejection",t),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",t)}},[]),t?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center p-8 bg-white rounded-lg shadow-lg max-w-md",children:[jsxRuntimeExports.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Algo deu errado!"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Ocorreu um erro inesperado. Recarregue a pgina para tentar novamente."}),jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-4 mb-6",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-800 font-mono",children:r?.message||"Erro desconhecido"})}),jsxRuntimeExports.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Recarregar Pgina"})]})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e})};function AppContent(){const{user:e,loading:t}=useAuth(),[s,r]=reactExports.useState("dashboard");if(t)return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})});if(!e)return jsxRuntimeExports.jsx(Login,{});return jsxRuntimeExports.jsx(TransactionsProvider,{userId:e.uid,children:jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 overflow-x-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex max-w-full",children:[jsxRuntimeExports.jsx(Sidebar,{activeTab:s,onTabChange:r}),jsxRuntimeExports.jsx("div",{className:"flex-1 lg:ml-0 ml-0 min-w-0 overflow-x-hidden",children:jsxRuntimeExports.jsx("main",{className:"px-0 lg:px-6 py-4 lg:py-6 space-y-4 lg:space-y-6 pb-20 lg:pb-6 max-w-full overflow-x-hidden",children:(()=>{switch(s){case"transactions":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Transactions,{}),jsxRuntimeExports.jsx("div",{className:"hidden lg:block",children:jsxRuntimeExports.jsx(Budget,{})})]});case"budgets":return jsxRuntimeExports.jsx(Budgets,{});case"settings":return jsxRuntimeExports.jsx(Settings,{});case"admin":return jsxRuntimeExports.jsx(AdminSettings,{});default:return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SummaryCards,{}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6",children:[jsxRuntimeExports.jsx(ExpenseChart,{}),jsxRuntimeExports.jsx(FinancialEvolution,{selectedMonth:(new Date).getMonth(),selectedYear:(new Date).getFullYear()})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 lg:p-6 rounded-lg shadow border",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 space-y-2 sm:space-y-0",children:[jsxRuntimeExports.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Atividades Recentes"}),jsxRuntimeExports.jsx(PaidAccountsButton,{onClick:()=>{}})]}),jsxRuntimeExports.jsx("p",{className:"text-sm lg:text-base text-gray-600",children:"Lista de atividades recentes ser exibida aqui."})]}),jsxRuntimeExports.jsx(InstallmentAccounts,{})]})]})}})()})})]})})})}function App(){return jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(AppContent,{})})})}const rootElement=document.getElementById("root");if(!rootElement)throw new Error("Elemento root no encontrado");ReactDOM.createRoot(rootElement).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
